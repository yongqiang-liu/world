var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};if(void 0===global)var global=window;if(void 0===__global)var __global=global;var __define=this&&this.__define||function(t,e,i,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:n})};!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}return Object.defineProperty(e.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),e}();t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={})),function(t){var e=[],i=function(i){function n(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$EventDispatcher={0:t||e,1:{},2:{},3:0},e}return __extends(n,i),n.prototype.$getEventMap=function(t){var e=this.$EventDispatcher;return t?e[2]:e[1]},n.prototype.addEventListener=function(t,e,i,n,r){this.$addListener(t,e,i,n,r)},n.prototype.once=function(t,e,i,n,r){this.$addListener(t,e,i,n,r,!0)},n.prototype.$addListener=function(t,e,i,n,r,o){var a=this.$EventDispatcher,s=n?a[2]:a[1],l=s[t];l?0!==a[3]&&(s[t]=l=l.concat()):l=s[t]=[],this.$insertEventBin(l,t,e,i,n,r,o)},n.prototype.$insertEventBin=function(t,e,i,n,r,o,a){o=0|+o;for(var s=-1,l=t.length,u=0;l>u;u++){var h=t[u];if(h.listener==i&&h.thisObject==n&&h.target==this)return!1;-1==s&&h.priority<o&&(s=u)}var c={type:e,listener:i,thisObject:n,priority:o,target:this,useCapture:r,dispatchOnce:!!a};return-1!==s?t.splice(s,0,c):t.push(c),!0},n.prototype.removeEventListener=function(t,e,i,n){var r=this.$EventDispatcher,o=n?r[2]:r[1],a=o[t];a&&(0!==r[3]&&(o[t]=a=a.concat()),this.$removeEventBin(a,e,i),0==a.length&&(o[t]=null))},n.prototype.$removeEventBin=function(t,e,i){for(var n=t.length,r=0;n>r;r++){var o=t[r];if(o.listener==e&&o.thisObject==i&&o.target==this)return t.splice(r,1),!0}return!1},n.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},n.prototype.willTrigger=function(t){return this.hasEventListener(t)},n.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},n.prototype.$notifyListener=function(t,i){var n=this.$EventDispatcher,r=(i?n[2]:n[1])[t.$type];if(!r)return!0;var o=r.length;if(0==o)return!0;var a=e;n[3]++;for(var s=0;o>s;s++){if((l=r[s]).listener.call(l.thisObject,t),l.dispatchOnce&&a.push(l),t.$isPropagationImmediateStopped)break}for(n[3]--;a.length;){var l;(l=a.pop()).target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture)}return!t.$isDefaultPrevented},n.prototype.dispatchEventWith=function(e,i,n,r){if(i||this.hasEventListener(e)){var o=t.Event.create(t.Event,e,i,r);o.data=n;var a=this.dispatchEvent(o);return t.Event.release(o),a}return!0},n}(t.HashObject);t.EventDispatcher=i,__reflect(i.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.type=null,i.$id=null,i.paddingTop=0,i.paddingBottom=0,i.paddingLeft=0,i.paddingRight=0,i.$uniforms={},t.nativeRender&&egret_native.NativeDisplayObject.createFilter(i),i}return __extends(i,e),i.prototype.$toJson=function(){return""},i.prototype.updatePadding=function(){},i.prototype.onPropertyChange=function(){var e=this;e.updatePadding(),t.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(e.$id,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight),egret_native.NativeDisplayObject.setDataToFilter(e))},i}(t.HashObject);t.Filter=e,__reflect(e.prototype,"egret.Filter")}(egret||(egret={})),function(t){function e(t){return(t%=360)>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function n(){var e=i.call(this)||this;return e.$children=null,e.$name="",e.$parent=null,e.$stage=null,e.$nestLevel=0,e.$useTranslate=!1,e.$matrix=new t.Matrix,e.$matrixDirty=!1,e.$x=0,e.$y=0,e.$scaleX=1,e.$scaleY=1,e.$rotation=0,e.$skewX=0,e.$skewXdeg=0,e.$skewY=0,e.$skewYdeg=0,e.$explicitWidth=NaN,e.$explicitHeight=NaN,e.$anchorOffsetX=0,e.$anchorOffsetY=0,e.$visible=!0,e.$displayList=null,e.$cacheAsBitmap=!1,e.$cacheDirty=!1,e.$alpha=1,e.$touchEnabled=n.defaultTouchEnabled,e.$scrollRect=null,e.$blendMode=0,e.$maskedObject=null,e.$mask=null,e.$maskRect=null,e.$parentDisplayList=null,e.$renderNode=null,e.$renderDirty=!1,e.$renderMode=null,t.nativeRender&&e.createNativeDisplayObject(),e}return __extends(n,i),n.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(0)},Object.defineProperty(n.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),n.prototype.$setParent=function(t){this.$parent=t},n.prototype.$onAddToStage=function(e,i){var n=this;n.$stage=e,n.$nestLevel=i,n.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(n)},n.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},n.prototype.$updateUseTransform=function(){var t=this;1==t.$scaleX&&1==t.$scaleY&&0==t.$skewX&&0==t.$skewY?t.$useTranslate=!1:t.$useTranslate=!0},Object.defineProperty(n.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),n.prototype.$getMatrix=function(){var t=this;return t.$matrixDirty&&(t.$matrixDirty=!1,t.$matrix.$updateScaleAndRotation(t.$scaleX,t.$scaleY,t.$skewX,t.$skewY)),t.$matrix.tx=t.$x,t.$matrix.ty=t.$y,t.$matrix},n.prototype.$setMatrix=function(i,n){void 0===n&&(n=!0);var r=this,o=r.$matrix;o.a=i.a,o.b=i.b,o.c=i.c,o.d=i.d,r.$x=i.tx,r.$y=i.ty,r.$matrixDirty=!1,1==o.a&&0==o.b&&0==o.c&&1==o.d?r.$useTranslate=!1:r.$useTranslate=!0,n&&(r.$scaleX=o.$getScaleX(),r.$scaleY=o.$getScaleY(),r.$skewX=i.$getSkewX(),r.$skewY=i.$getSkewY(),r.$skewXdeg=e(180*r.$skewX/Math.PI),r.$skewYdeg=e(180*r.$skewY/Math.PI),r.$rotation=e(180*r.$skewY/Math.PI)),t.nativeRender&&r.$nativeDisplayObject.setMatrix(i.a,i.b,i.c,i.d,i.tx,i.ty)},n.prototype.$getConcatenatedMatrix=function(){var e=this,i=e.$concatenatedMatrix;i||(i=e.$concatenatedMatrix=new t.Matrix),e.$parent?e.$parent.$getConcatenatedMatrix().$preMultiplyInto(e.$getMatrix(),i):i.copyFrom(e.$getMatrix());var n=e.$anchorOffsetX,r=e.$anchorOffsetY,o=e.$scrollRect;return o?i.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-o.x-n,-o.y-r),i):(0!=n||0!=r)&&i.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-n,-r),i),e.$concatenatedMatrix},n.prototype.$getInvertedConcatenatedMatrix=function(){var e=this;return e.$invertedConcatenatedMatrix||(e.$invertedConcatenatedMatrix=new t.Matrix),e.$getConcatenatedMatrix().$invertInto(e.$invertedConcatenatedMatrix),e.$invertedConcatenatedMatrix},Object.defineProperty(n.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),n.prototype.$getX=function(){return this.$x},n.prototype.$setX=function(e){var i=this;if(i.$x==e)return!1;if(i.$x=e,t.nativeRender)i.$nativeDisplayObject.setX(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(n.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),n.prototype.$getY=function(){return this.$y},n.prototype.$setY=function(e){var i=this;if(i.$y==e)return!1;if(i.$y=e,t.nativeRender)i.$nativeDisplayObject.setY(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(n.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),n.prototype.$getScaleX=function(){return this.$scaleX},n.prototype.$setScaleX=function(e){var i=this;if(i.$scaleX!=e)if(i.$scaleX=e,i.$matrixDirty=!0,i.$updateUseTransform(),t.nativeRender)i.$nativeDisplayObject.setScaleX(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),n.prototype.$getScaleY=function(){return this.$scaleY},n.prototype.$setScaleY=function(e){var i=this;if(i.$scaleY!=e)if(i.$scaleY=e,i.$matrixDirty=!0,i.$updateUseTransform(),t.nativeRender)i.$nativeDisplayObject.setScaleY(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),n.prototype.$getRotation=function(){return this.$rotation},n.prototype.$setRotation=function(i){var n=this;if((i=e(i))!=n.$rotation){var r=(i-n.$rotation)/180*Math.PI;if(n.$skewX+=r,n.$skewY+=r,n.$rotation=i,n.$matrixDirty=!0,n.$updateUseTransform(),t.nativeRender)n.$nativeDisplayObject.setRotation(i);else{var o=n.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=n.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}}},Object.defineProperty(n.prototype,"skewX",{get:function(){return this.$skewXdeg},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),n.prototype.$setSkewX=function(i){var n=this;if(i!=n.$skewXdeg)if(n.$skewXdeg=i,i=(i=e(i))/180*Math.PI,n.$skewX=i,n.$matrixDirty=!0,n.$updateUseTransform(),t.nativeRender)n.$nativeDisplayObject.setSkewX(n.$skewXdeg);else{var r=n.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var o=n.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"skewY",{get:function(){return this.$skewYdeg},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),n.prototype.$setSkewY=function(i){var n=this;if(i!=n.$skewYdeg)if(n.$skewYdeg=i,i=(i=e(i))/180*Math.PI,n.$skewY=i,n.$matrixDirty=!0,n.$updateUseTransform(),t.nativeRender)n.$nativeDisplayObject.setSkewY(n.$skewYdeg);else{var r=n.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var o=n.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),n.prototype.$getWidth=function(){var t=this;return isNaN(t.$explicitWidth)?t.$getOriginalBounds().width:t.$explicitWidth},n.prototype.$setWidth=function(t){t=isNaN(t)?NaN:t,this.$explicitWidth!=t&&(this.$explicitWidth=t)},Object.defineProperty(n.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),n.prototype.$getHeight=function(){var t=this;return isNaN(t.$explicitHeight)?t.$getOriginalBounds().height:t.$explicitHeight},n.prototype.$setHeight=function(t){t=isNaN(t)?NaN:t,this.$explicitHeight!=t&&(this.$explicitHeight=t)},Object.defineProperty(n.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorOffsetX",{get:function(){return this.$anchorOffsetX},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),n.prototype.$setAnchorOffsetX=function(e){var i=this;if(i.$anchorOffsetX!=e)if(i.$anchorOffsetX=e,t.nativeRender)i.$nativeDisplayObject.setAnchorOffsetX(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"anchorOffsetY",{get:function(){return this.$anchorOffsetY},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),n.prototype.$setAnchorOffsetY=function(e){var i=this;if(i.$anchorOffsetY!=e)if(i.$anchorOffsetY=e,t.nativeRender)i.$nativeDisplayObject.setAnchorOffsetY(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),n.prototype.$setVisible=function(e){var i=this;if(i.$visible!=e)if(i.$visible=e,t.nativeRender)i.$nativeDisplayObject.setVisible(e);else{i.$updateRenderMode();var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"cacheAsBitmap",{get:function(){return this.$cacheAsBitmap},set:function(e){var i=this;i.$cacheAsBitmap=e,t.nativeRender?i.$nativeDisplayObject.setCacheAsBitmap(e):i.$setHasDisplayList(e)},enumerable:!0,configurable:!0}),n.prototype.$setHasDisplayList=function(e){var i=this;if(!!i.$displayList!=e)if(e){var n=t.sys.DisplayList.create(i);n&&(i.$displayList=n,i.$cacheDirty=!0)}else i.$displayList=null},n.prototype.$cacheDirtyUp=function(){var t=this.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},Object.defineProperty(n.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),n.prototype.$setAlpha=function(e){var i=this;if(i.$alpha!=e)if(i.$alpha=e,t.nativeRender)i.$nativeDisplayObject.setAlpha(e);else{i.$updateRenderMode();var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(n.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),n.prototype.$getTouchEnabled=function(){return this.$touchEnabled},n.prototype.$setTouchEnabled=function(t){this.$touchEnabled=!!t},Object.defineProperty(n.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),n.prototype.$setScrollRect=function(e){var i=this;if(e||i.$scrollRect){if(e?(i.$scrollRect||(i.$scrollRect=new t.Rectangle),i.$scrollRect.copyFrom(e),t.nativeRender&&i.$nativeDisplayObject.setScrollRect(e.x,e.y,e.width,e.height)):(i.$scrollRect=null,t.nativeRender&&i.$nativeDisplayObject.setScrollRect(0,0,0,0)),!t.nativeRender){i.$updateRenderMode();var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}}else i.$updateRenderMode()},Object.defineProperty(n.prototype,"blendMode",{get:function(){return t.sys.numberToBlendMode(this.$blendMode)},set:function(e){var i=this,n=t.sys.blendModeToNumber(e);if(i.$blendMode!=n)if(i.$blendMode=n,t.nativeRender)i.$nativeDisplayObject.setBlendMode(n);else{i.$updateRenderMode();var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var o=i.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){var t=this;return t.$mask?t.$mask:t.$maskRect},set:function(e){var i=this;if(e!==i){if(e)if(e instanceof n){if(e==i.$mask)return;e.$maskedObject&&(e.$maskedObject.mask=null),e.$maskedObject=i,i.$mask=e,t.nativeRender||e.$updateRenderMode(),i.$maskRect&&(t.nativeRender&&i.$nativeDisplayObject.setMaskRect(0,0,0,0),i.$maskRect=null),t.nativeRender&&i.$nativeDisplayObject.setMask(e.$nativeDisplayObject.id)}else i.$maskRect||(i.$maskRect=new t.Rectangle),i.$maskRect.copyFrom(e),t.nativeRender&&i.$nativeDisplayObject.setMaskRect(e.x,e.y,e.width,e.height),i.$mask&&(i.$mask.$maskedObject=null,t.nativeRender||i.$mask.$updateRenderMode()),i.mask&&(t.nativeRender&&i.$nativeDisplayObject.setMask(-1),i.$mask=null);else i.$mask&&(i.$mask.$maskedObject=null,t.nativeRender||i.$mask.$updateRenderMode()),i.mask&&(t.nativeRender&&i.$nativeDisplayObject.setMask(-1),i.$mask=null),i.$maskRect&&(t.nativeRender&&i.$nativeDisplayObject.setMaskRect(0,0,0,0),i.$maskRect=null);t.nativeRender||i.$updateRenderMode()}},enumerable:!0,configurable:!0}),n.prototype.$setMaskRect=function(e){var i=this;(e||i.$maskRect)&&(e?(i.$maskRect||(i.$maskRect=new t.Rectangle),i.$maskRect.copyFrom(e)):i.$maskRect=null)},Object.defineProperty(n.prototype,"filters",{get:function(){return this.$filters},set:function(e){var i=this;if(i.$filters||e)e&&e.length?(e=e.concat(),i.$filters=e,t.nativeRender&&i.$nativeDisplayObject.setFilters(e)):(i.$filters=e,t.nativeRender&&i.$nativeDisplayObject.setFilters(null)),t.nativeRender||(i.$updateRenderMode(),(n=i.$parent)&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()));else if(i.$filters=e,t.nativeRender)i.$nativeDisplayObject.setFilters(null);else{var n,r;i.$updateRenderMode(),(n=i.$parent)&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),n.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},n.prototype.getBounds=function(t,e){void 0===e&&(e=!0);var i=this;return t=i.$getTransformedBounds(i,t),e&&(0!=i.$anchorOffsetX&&(t.x-=i.$anchorOffsetX),0!=i.$anchorOffsetY&&(t.y-=i.$anchorOffsetY)),t},n.prototype.$getTransformedBounds=function(e,i){var n,r=this,o=r.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(o),e==r)return i;e?(n=t.$TempMatrix,e.$getInvertedConcatenatedMatrix().$preMultiplyInto(r.$getConcatenatedMatrix(),n)):n=r.$getConcatenatedMatrix();return n.$transformBounds(i),i},n.prototype.globalToLocal=function(e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=0),t.nativeRender){egret_native.updateNativeRender();var r=egret_native.nrGlobalToLocal(this.$nativeDisplayObject.id,e,i).split(","),o=parseFloat(r[0]),a=parseFloat(r[1]);return n?n.setTo(o,a):n=new t.Point(o,a),n}return this.$getInvertedConcatenatedMatrix().transformPoint(e,i,n)},n.prototype.localToGlobal=function(e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=0),t.nativeRender){egret_native.updateNativeRender();var r=egret_native.nrLocalToGlobal(this.$nativeDisplayObject.id,e,i).split(","),o=parseFloat(r[0]),a=parseFloat(r[1]);return n?n.setTo(o,a):n=new t.Point(o,a),n}return this.$getConcatenatedMatrix().transformPoint(e,i,n)},n.prototype.$getOriginalBounds=function(){var t=this,e=t.$getContentBounds();t.$measureChildBounds(e);var i=t.$measureFiltersOffset(!1);return i&&(e.x+=i.minX,e.y+=i.minY,e.width+=-i.minX+i.maxX,e.height+=-i.minY+i.maxY),e},n.prototype.$measureChildBounds=function(t){},n.prototype.$getContentBounds=function(){var e=t.$TempRectangle;return e.setEmpty(),this.$measureContentBounds(e),e},n.prototype.$measureContentBounds=function(t){},n.prototype.$getRenderNode=function(){var t=this,e=t.$renderNode;return e?(t.$renderDirty&&(e.cleanBeforeRender(),t.$updateRenderNode(),t.$renderDirty=!1,e=t.$renderNode),e):null},n.prototype.$updateRenderMode=function(){var t=this;!t.$visible||t.$alpha<=0||t.$maskedObject?t.$renderMode=1:t.filters&&t.filters.length>0?t.$renderMode=2:0!==t.$blendMode||t.$mask&&t.$mask.$stage?t.$renderMode=3:t.$scrollRect||t.$maskRect?t.$renderMode=4:t.$renderMode=null},n.prototype.$measureFiltersOffset=function(e){for(var i=this,n=0,r=0,o=0,a=0;i;){var s=i.$filters;if(s&&s.length)for(var l=s.length,u=0;l>u;u++){var h=s[u];if("blur"==h.type)n-=c=h.blurX,r-=p=h.blurY,o+=c,a+=p;else if("glow"==h.type){var c,p;n-=c=h.blurX,r-=p=h.blurY,o+=c,a+=p;var d=h.distance||0,f=h.angle||0,g=0,y=0;0!=d&&(n+=g=(g=d*t.NumberUtils.cos(f))>0?Math.ceil(g):Math.floor(g),o+=g,r+=y=(y=d*t.NumberUtils.sin(f))>0?Math.ceil(y):Math.floor(y),a+=y)}else if("custom"==h.type){var v=h.padding;n-=v,r-=v,o+=v,a+=v}}i=e?i.$parent:null}return{minX:n=Math.min(n,0),minY:r=Math.min(r,0),maxX:o=Math.max(o,0),maxY:a=Math.max(a,0)}},n.prototype.$getConcatenatedMatrixAt=function(e,i){var n=e.$getInvertedConcatenatedMatrix();if(0===n.a||0===n.d){var r=this,o=e.$nestLevel;for(i.identity();r.$nestLevel>o;){var a=r.$scrollRect;a&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),i.concat(r.$getMatrix()),r=r.$parent}}else n.$preMultiplyInto(i,i)},n.prototype.$updateRenderNode=function(){},n.prototype.$hitTest=function(e,i){var n=this;if(!t.nativeRender&&!n.$renderNode||!n.$visible||0==n.$scaleX||0==n.$scaleY)return null;var r=n.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var o=n.$getContentBounds(),a=r.a*e+r.c*i+r.tx,s=r.b*e+r.d*i+r.ty;if(o.contains(a,s)){if(!n.$children){var l=n.$scrollRect?n.$scrollRect:n.$maskRect;if(l&&!l.contains(a,s))return null;if(n.$mask&&!n.$mask.$hitTest(e,i))return null}return n}return null},n.prototype.hitTestPoint=function(e,i,n){var r=this;if(n){var o=(c=r.$getInvertedConcatenatedMatrix()).a*e+c.c*i+c.tx,a=c.b*e+c.d*i+c.ty,s=void 0;if(t.nativeRender){(u=t.sys.customHitTestBuffer).resize(3,3),egret_native.forHitTest=!0,egret_native.activateBuffer(u),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject2(r.$nativeDisplayObject.id,1-o,1-a,!0);try{s=new Uint8Array(4),egret_native.nrGetPixels(1,1,1,1,s)}catch(e){throw new Error(t.sys.tr(1039))}return egret_native.activateBuffer(null),egret_native.forHitTest=!1,0!==s[3]}var l=r.$displayList;if(l){var u=l.renderBuffer;try{s=u.getPixels(o-l.offsetX,a-l.offsetY)}catch(e){throw new Error(t.sys.tr(1039))}}else{(u=t.sys.customHitTestBuffer).resize(3,3);var h=t.Matrix.create();h.identity(),h.translate(1-o,1-a),t.sys.systemRenderer.render(this,u,h,!0),t.Matrix.release(h);try{s=u.getPixels(1,1)}catch(e){throw new Error(t.sys.tr(1039))}}return 0!==s[3]}if(0==r.$scaleX||0==r.$scaleY)return!1;var c=r.$getInvertedConcatenatedMatrix(),p=r.getBounds(null,!1);o=c.a*e+c.c*i+c.tx,a=c.b*e+c.d*i+c.ty;if(p.contains(o,a)){var d=r.$scrollRect?r.$scrollRect:r.$maskRect;return!(d&&!d.contains(o,a))}return!1},n.prototype.$addListener=function(e,r,o,a,s,l){i.prototype.$addListener.call(this,e,r,o,a,s,l);var u=e==t.Event.ENTER_FRAME;if(u||e==t.Event.RENDER){var h=u?n.$enterFrameCallBackList:n.$renderCallBackList;-1==h.indexOf(this)&&h.push(this)}},n.prototype.removeEventListener=function(e,r,o,a){i.prototype.removeEventListener.call(this,e,r,o,a);var s=e==t.Event.ENTER_FRAME;if((s||e==t.Event.RENDER)&&!this.hasEventListener(e)){var l=s?n.$enterFrameCallBackList:n.$renderCallBackList,u=l.indexOf(this);-1!==u&&l.splice(u,1)}},n.prototype.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),n=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,n),!t.$isDefaultPrevented},n.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),i.concat(e)},n.prototype.$dispatchPropagationEvent=function(t,e,i){for(var n=e.length,r=i-1,o=0;n>o;o++){var a=e[o];if(t.$currentTarget=a,t.$eventPhase=r>o?1:o==i||o==r?2:3,a.$notifyListener(t,i>o),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},n.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},n.defaultTouchEnabled=!1,n.$enterFrameCallBackList=[],n.$renderCallBackList=[],n}(t.EventDispatcher);t.DisplayObject=i,__reflect(i.prototype,"egret.DisplayObject")}(egret||(egret={})),function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){var t=e.call(this)||this;return t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$rotated=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),i.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),i.prototype.$getTextureHeight=function(){return this.$textureHeight},i.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*t.$TextureScaleFactor},i.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*t.$TextureScaleFactor},Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this._setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){this.$bitmapData=e;var i=t.$TextureScaleFactor,n=e.width*i,r=e.height*i;this.$initData(0,0,n,r,0,0,n,r,e.width,e.height)},i.prototype.$initData=function(e,i,n,r,o,a,s,l,u,h,c){void 0===c&&(c=!1);var p=t.$TextureScaleFactor;this.$bitmapX=e/p,this.$bitmapY=i/p,this.$bitmapWidth=n/p,this.$bitmapHeight=r/p,this.$offsetX=o,this.$offsetY=a,this.$textureWidth=s,this.$textureHeight=l,this.$sourceWidth=u,this.$sourceHeight=h,this.$rotated=c,t.BitmapData.$invalidate(this.$bitmapData)},i.prototype.getPixel32=function(t,e){throw new Error},i.prototype.getPixels=function(t,e,i,n){throw void 0===i&&(i=1),void 0===n&&(n=1),new Error},i.prototype.toDataURL=function(t,e,i){throw new Error},i.prototype.saveToFile=function(t,e,i){throw new Error},i.prototype.dispose=function(){this.$bitmapData&&(this.disposeBitmapData&&this.$bitmapData.$dispose(),this.$bitmapData=null),t.nativeRender&&egret_native.NativeDisplayObject.disposeTexture(this)},i}(t.HashObject);t.Texture=e,__reflect(e.prototype,"egret.Texture")}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.$eventPhase=2,o.$currentTarget=null,o.$target=null,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$type=e,o.$bubbles=!!i,o.$cancelable=!!n,o.data=r,o}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),e.prototype.$setTarget=function(t){return this.$target=t,!0},e.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},e.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},e.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},e.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},e.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,n,r){void 0===n&&(n=!1);var o=e.create(e,i,n),a=e._getPropertyData(e);null!=r&&(a.data=r);var s=t.dispatchEvent(o);return e.release(o),s},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,n){var r;if(t.hasOwnProperty("eventPool")&&(r=t.eventPool),r||(r=t.eventPool=[]),r.length){var o=r.pop();return o.$type=e,o.$bubbles=!!i,o.$cancelable=!!n,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$eventPhase=2,o}return new t(e,i,n)},e.release=function(t){t.clean(),Object.getPrototypeOf(t).constructor.eventPool.push(t)},e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",e}(t.HashObject);t.Event=e,__reflect(e.prototype,"egret.Event")}(egret||(egret={})),function(t){t.getString=function(){return""},t.$error=function(t){throw new Error("#"+t)},t.$warn=function(){},t.$markCannotUse=function(){}}(egret||(egret={})),function(t){var e=[],i=Math.PI/180,n=function(n){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=n.call(this)||this;return i.x=t,i.y=e,i}return __extends(r,n),r.release=function(t){t&&e.push(t)},r.create=function(t,i){var n=e.pop();return n||(n=new r),n.setTo(t,i)},Object.defineProperty(r.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),r.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},r.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},r.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},r.prototype.add=function(t){return new r(this.x+t.x,this.y+t.y)},r.interpolate=function(t,e,i){var n=1-i;return new r(t.x*i+e.x*n,t.y*i+e.y*n)},r.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},r.prototype.offset=function(t,e){this.x+=t,this.y+=e},r.polar=function(e,n){return new r(e*t.NumberUtils.cos(n/i),e*t.NumberUtils.sin(n/i))},r.prototype.subtract=function(t){return new r(this.x-t.x,this.y-t.y)},r.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},r}(t.HashObject);t.Point=n,__reflect(n.prototype,"egret.Point"),t.$TempPoint=new n}(egret||(egret={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return(0>(e=0|+e)||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,n,r){void 0===r&&(r=!0);var o=this,a=e.$parent;if(a==o)return o.doSetChildIndex(e,n),e;a&&a.removeChild(e),o.$children.splice(n,0,e),e.$setParent(o),t.nativeRender&&o.$nativeDisplayObject.addChildAt(e.$nativeDisplayObject.id,n);var s=o.$stage;if(s&&e.$onAddToStage(s,o.$nestLevel+1),r&&e.dispatchEventWith(t.Event.ADDED,!0),s)for(var l=i.$EVENT_ADD_TO_STAGE_LIST;l.length;){var u=l.shift();u.$stage&&r&&u.dispatchEventWith(t.Event.ADDED_TO_STAGE)}if(!t.nativeRender&&(e.$maskedObject&&e.$maskedObject.$updateRenderMode(),!o.$cacheDirty)){o.$cacheDirty=!0;var h=o.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=o.$maskedObject;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp())}return this.$childAdded(e,n),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(t){return(t=0|+t)>=0&&t<this.$children.length?this.$children[t]:null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,n=i.length,r=0;n>r;r++)if((e=i[r]).name==t)return e;return null},i.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},i.prototype.removeChildAt=function(t){return(t=0|+t)>=0&&t<this.$children.length?this.$doRemoveChild(t):null},i.prototype.$doRemoveChild=function(e,n){void 0===n&&(n=!0),e=0|+e;var r=this,o=this.$children,a=o[e];if(this.$childRemoved(a,e),n&&a.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){a.$onRemoveFromStage();for(var s=i.$EVENT_REMOVE_FROM_STAGE_LIST;s.length>0;){var l=s.shift();n&&l.$hasAddToStage&&(l.$hasAddToStage=!1,l.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),l.$hasAddToStage=!1,l.$stage=null}}this.$displayList||this.$parentDisplayList,a.$setParent(null);var u=o.indexOf(a);if(-1!=u&&o.splice(u,1),t.nativeRender)r.$nativeDisplayObject.removeChild(a.$nativeDisplayObject.id);else if(a.$maskedObject&&a.$maskedObject.$updateRenderMode(),!r.$cacheDirty){r.$cacheDirty=!0;var h=r.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=r.$maskedObject;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp())}return a},i.prototype.setChildIndex=function(t,e){(0>(e=0|+e)||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(e,i){var n=this,r=this.$children.indexOf(e);if(r!=i)if(this.$childRemoved(e,r),this.$children.splice(r,1),this.$children.splice(i,0,e),this.$childAdded(e,i),t.nativeRender)this.$nativeDisplayObject.removeChild(e.$nativeDisplayObject.id),this.$nativeDisplayObject.addChildAt(e.$nativeDisplayObject.id,i);else if(!n.$cacheDirty){n.$cacheDirty=!0;var o=n.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=n.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}},i.prototype.swapChildrenAt=function(t,e){e=0|+e,(t=0|+t)>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),n=this.$children.indexOf(e);-1==i||-1==n||this.doSwapChildrenAt(i,n)},i.prototype.doSwapChildrenAt=function(e,i){var n=this;if(e>i){var r=i;i=e,e=r}else if(e==i)return;var o=this.$children,a=o[e],s=o[i];if(this.$childRemoved(a,e),this.$childRemoved(s,i),o[e]=s,o[i]=a,this.$childAdded(s,e),this.$childAdded(a,i),t.nativeRender)this.$nativeDisplayObject.swapChild(e,i);else if(!n.$cacheDirty){n.$cacheDirty=!0;var l=n.$parent;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp());var u=n.$maskedObject;u&&!u.$cacheDirty&&(u.$cacheDirty=!0,u.$cacheDirtyUp())}},i.prototype.removeChildren=function(){for(var t=this.$children.length-1;t>=0;t--)this.$doRemoveChild(t)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var n=this.$children.length;i++;for(var r=0;n>r;r++){var o=this.$children[r];o.$onAddToStage(t,i),o.$maskedObject&&o.$maskedObject.$updateRenderMode()}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,n=0;i>n;n++){t[n].$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,n=i.length;if(0!=n){for(var r=0,o=0,a=0,s=0,l=!1,u=-1;n>u;u++){var h=void 0;-1==u?h=e:(i[u].getBounds(t.$TempRectangle),i[u].$getMatrix().$transformBounds(t.$TempRectangle),h=t.$TempRectangle),h.isEmpty()||(l?(r=Math.min(r,h.x),o=Math.max(o,h.x+h.width),a=Math.min(a,h.y),s=Math.max(s,h.y+h.height)):(l=!0,o=(r=h.x)+h.width,s=(a=h.y)+h.height))}e.setTo(r,a,o-r,s-a)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),r=n.a*t+n.c*i+n.tx,o=n.b*t+n.d*i+n.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,o))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var s=this.$children,l=!1,u=null,h=s.length-1;h>=0;h--){var c=s[h];if(!c.$maskedObject&&(u=c.$hitTest(t,i))){if(l=!0,u.$touchEnabled)break;u=null}}return u?this.$touchChildren?u:this:l?this:e.prototype.$hitTest.call(this,t,i)},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,__reflect(e.prototype,"egret.DisplayObjectContainer")}(egret||(egret={})),function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n._bitmapX=0,n._bitmapY=0,n._textureMap=t.createMap(),n.$texture=i,n._bitmapX=i.$bitmapX-i.$offsetX,n._bitmapY=i.$bitmapY-i.$offsetY,n}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,n,r,o,a,s,l,u){void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=a+r),void 0===u&&(u=s+o);var h=new t.Texture;return h.disposeBitmapData=!1,h.$bitmapData=this.$texture.$bitmapData,h.$initData(this._bitmapX+i,this._bitmapY+n,r,o,a,s,l,u,this.$texture.$sourceWidth,this.$texture.$sourceHeight),this._textureMap[e]=h,h},i.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,__reflect(e.prototype,"egret.SpriteSheet")}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(t){!function(e){e.tr=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=t.$locale_strings[t.$language][e];if(!r)return"{"+e+"}";for(var o=i.length,a=0;o>a;a++)r=r.replace("{"+a+"}",i[a]);return r}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(e){function i(n){var r=e.call(this)||this;return r.$texture=null,r.$bitmapData=null,r.$bitmapX=0,r.$bitmapY=0,r.$bitmapWidth=0,r.$bitmapHeight=0,r.$offsetX=0,r.$offsetY=0,r.$textureWidth=0,r.$textureHeight=0,r.$sourceWidth=0,r.$sourceHeight=0,r.$smoothing=i.defaultSmoothing,r.$explicitBitmapWidth=NaN,r.$explicitBitmapHeight=NaN,r.$scale9Grid=null,r.$fillMode="scale",r._pixelHitTest=!1,r.$renderNode=new t.sys.NormalBitmapNode,r.$setTexture(n),n&&(r.$renderNode.rotated=n.$rotated),r}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n);var r=this.$texture;r&&r.$bitmapData&&t.BitmapData.$addDisplayObject(this,r.$bitmapData)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=this.$texture;i&&t.BitmapData.$removeDisplayObject(this,i.$bitmapData)},Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){var e=this;e.$setTexture(t),t&&e.$renderNode&&(e.$renderNode.rotated=t.$rotated)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(e){var i=this,n=i.$texture;if(e==n)return!1;if(i.$texture=e,!e){n&&t.BitmapData.$removeDisplayObject(i,n.$bitmapData),i.setImageData(null,0,0,0,0,0,0,0,0,0,0),i.$renderDirty=!0;var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var o=i.$maskedObject;return o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp()),t.nativeRender&&this.setBitmapDataToWasm(null),!0}if(i.$refreshImageData(),i.$stage){if(n&&n.$bitmapData){if(n.$bitmapData.hashCode==(e.$bitmapData?e.$bitmapData.hashCode:-1)){i.$renderDirty=!0;var a=i.$parent;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp());var s=i.$maskedObject;return s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp()),!0}t.BitmapData.$removeDisplayObject(i,n.$bitmapData)}t.BitmapData.$addDisplayObject(i,e.$bitmapData)}i.$renderDirty=!0;var l=i.$parent;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp());var u=i.$maskedObject;return u&&!u.$cacheDirty&&(u.$cacheDirty=!0,u.$cacheDirtyUp()),!0},i.prototype.$setBitmapData=function(t){this.$setTexture(t)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapData(t)},i.prototype.$refreshImageData=function(){var e=this.$texture;e?(t.nativeRender&&this.setBitmapDataToWasm(e),this.setImageData(e.$bitmapData,e.$bitmapX,e.$bitmapY,e.$bitmapWidth,e.$bitmapHeight,e.$offsetX,e.$offsetY,e.$getTextureWidth(),e.$getTextureHeight(),e.$sourceWidth,e.$sourceHeight)):t.nativeRender&&this.setBitmapDataToWasm(null)},i.prototype.setImageData=function(t,e,i,n,r,o,a,s,l,u,h){this.$bitmapData=t,this.$bitmapX=e,this.$bitmapY=i,this.$bitmapWidth=n,this.$bitmapHeight=r,this.$offsetX=o,this.$offsetY=a,this.$textureWidth=s,this.$textureHeight=l,this.$sourceWidth=u,this.$sourceHeight=h},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),i.prototype.$setScale9Grid=function(e){var i=this;if(i.$scale9Grid=e,i.$renderDirty=!0,t.nativeRender)e?i.$nativeDisplayObject.setScale9Grid(e.x,e.y,e.width,e.height):i.$nativeDisplayObject.setScale9Grid(0,0,-1,-1);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(e){var i=this;if(e==i.$fillMode)return!1;if(i.$fillMode=e,t.nativeRender)i.$nativeDisplayObject.setBitmapFillMode(i.$fillMode);else{i.$renderDirty=!0;var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){if(e!=this.$smoothing&&(this.$smoothing=e,this.$renderNode.smoothing=e,!t.nativeRender)){var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var n=this.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(e){var i=this;if(0>e||e==i.$explicitBitmapWidth)return!1;if(i.$explicitBitmapWidth=e,i.$renderDirty=!0,t.nativeRender)i.$nativeDisplayObject.setWidth(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},i.prototype.$setHeight=function(e){var i=this;if(0>e||e==i.$explicitBitmapHeight)return!1;if(i.$explicitBitmapHeight=e,i.$renderDirty=!0,t.nativeRender)i.$nativeDisplayObject.setHeight(e);else{var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},i.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},i.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},i.prototype.$measureContentBounds=function(t){if(this.$bitmapData){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},i.prototype.$updateRenderNode=function(){if(this.$texture){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,n=this.scale9Grid||this.$texture.scale9Grid;n?(this.$renderNode instanceof t.sys.NormalBitmapNode&&(this.$renderNode=new t.sys.BitmapNode),t.sys.BitmapNode.$updateTextureDataWithScale9Grid(this.$renderNode,this.$bitmapData,n,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,e,i,this.$sourceWidth,this.$sourceHeight,this.$smoothing)):(this.fillMode==t.BitmapFillMode.REPEAT&&this.$renderNode instanceof t.sys.NormalBitmapNode&&(this.$renderNode=new t.sys.BitmapNode),t.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,e,i,this.$sourceWidth,this.$sourceHeight,this.$fillMode,this.$smoothing))}},Object.defineProperty(i.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);n&&this._pixelHitTest&&(this.hitTestPoint(t,i,!0)||(n=null));return n},i.defaultSmoothing=!0,i}(t.DisplayObject);t.Bitmap=e,__reflect(e.prototype,"egret.Bitmap")}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){this.type=0,this.drawData=[],this.renderCount=0}return t.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},t.prototype.$getRenderCount=function(){return this.renderCount},t}();t.RenderNode=e,__reflect(e.prototype,"egret.sys.RenderNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}return t.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.curveTo=function(t,e,i,n){this.$commands[this.commandPosition++]=3;var r=this.dataPosition;this.$data[r++]=t,this.$data[r++]=e,this.$data[r++]=i,this.$data[r++]=n,this.dataPosition=r},t.prototype.cubicCurveTo=function(t,e,i,n,r,o){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=i,this.$data[a++]=n,this.$data[a++]=r,this.$data[a++]=o,this.dataPosition=a},t.prototype.drawRect=function(t,e,i,n){var r=t+i,o=e+n;this.moveTo(t,e),this.lineTo(r,e),this.lineTo(r,o),this.lineTo(t,o),this.lineTo(t,e)},t.prototype.drawRoundRect=function(t,e,i,n,r,o){var a=.5*r|0,s=o?.5*o|0:a;if(a&&s){var l=.5*i,u=.5*n;if(a>l&&(a=l),s>u&&(s=u),l!==a||u!==s){var h=t+i,c=e+n,p=t+a,d=h-a,f=e+s,g=c-s;this.moveTo(h,g),this.curveTo(h,c,d,c),this.lineTo(p,c),this.curveTo(t,c,t,g),this.lineTo(t,f),this.curveTo(t,e,p,e),this.lineTo(d,e),this.curveTo(h,e,h,f),this.lineTo(h,g)}else a===s?this.drawCircle(t+a,e+s,a):this.drawEllipse(t,e,2*a,2*s)}else this.drawRect(t,e,i,n)},t.prototype.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},t.prototype.drawEllipse=function(t,e,i,n){var r=.5*i,o=.5*n;t+=r,e+=o,this.arcToBezier(t,e,r,o,0,2*Math.PI)},t.prototype.drawArc=function(t,e,i,n,r,o){o?r>=n&&(r-=2*Math.PI):n>=r&&(r+=2*Math.PI),this.arcToBezier(t,e,i,i,n,r,o)},t.prototype.arcToBezier=function(t,e,i,n,r,o,a){var s=.5*Math.PI,l=r,u=l;a?o>(u+=-s-l%s)&&(u=o):(u+=s-l%s)>o&&(u=o);var h=t+Math.cos(l)*i,c=e+Math.sin(l)*n;(this.$lastX!=h||this.$lastY!=c)&&this.moveTo(h,c);for(var p=Math.cos(l),d=Math.sin(l),f=0;4>f;f++){var g=u-l,y=4*Math.tan(g/4)/3,v=h-d*y*i,m=c+p*y*n,$=(h=t+(p=Math.cos(u))*i)+(d=Math.sin(u))*y*i,b=(c=e+d*n)-p*y*n;if(this.cubicCurveTo(v,m,$,b,h,c),u===o)break;l=u,a?o>(u=l-s)&&(u=o):(u=l+s)>o&&(u=o)}},t}();t.Path2D=e,__reflect(e.prototype,"egret.sys.Path2D")}(t.sys||(t.sys={}))}(egret||(egret={})),(egret||(egret={})).fontMapping={},(egret||(egret={})).createMap=function(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t},function(t){var e=function(t){function e(e,i,n,r,o,a,s,l){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===n&&(n=6),void 0===r&&(r=6),void 0===o&&(o=2),void 0===a&&(a=1),void 0===s&&(s=!1),void 0===l&&(l=!1);var u=t.call(this)||this,h=u;return h.type="glow",h.$color=e,h.$blue=255&e,h.$green=(65280&e)>>8,h.$red=e>>16,h.$alpha=i,h.$blurX=n,h.$blurY=r,h.$strength=o,h.$quality=a,h.$inner=s,h.$knockout=l,h.$uniforms.color={x:u.$red/255,y:u.$green/255,z:u.$blue/255,w:1},h.$uniforms.alpha=i,h.$uniforms.blurX=n,h.$uniforms.blurY=r,h.$uniforms.strength=o,h.$uniforms.inner=s?1:0,h.$uniforms.knockout=l?0:1,h.$uniforms.dist=0,h.$uniforms.angle=0,h.$uniforms.hideObject=0,h.onPropertyChange(),u}return __extends(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.$uniforms.color.x=this.$red/255,this.$uniforms.color.y=this.$green/255,this.$uniforms.color.z=this.$blue/255)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.$uniforms.alpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){var e=this;e.$blurX!=t&&(e.$blurX=t,e.$uniforms.blurX=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){var e=this;e.$blurY!=t&&(e.$blurY=t,e.$uniforms.blurY=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.$uniforms.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.$uniforms.inner=t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.$uniforms.knockout=t?0:1)},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},e.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},e}(t.Filter);t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret||(egret={})),function(t){!function(t){for(var e=["normal","add","erase"],i={},n=e.length,r=0;n>r;r++){var o=e[r];i[o]=r}t.blendModeToNumber=function(t){var e=i[t];return void 0===e?0:e},t.numberToBlendMode=function(t){var i=e[t];return void 0===i?"normal":i}}(t.sys||(t.sys={}))}(egret||(egret={})),(egret||(egret={})).CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"},function(t){var e=function(){function e(){}return e.compileProgram=function(i,n,r){var o=e.compileFragmentShader(i,r),a=e.compileVertexShader(i,n),s=i.createProgram();return i.attachShader(s,a),i.attachShader(s,o),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||t.$warn(1020),s},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:null},e.checkCanUseWebGL=function(){if(null==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(t){if(t){var e=t.glContext;e&&e.deleteTexture(t)}},e}();t.WebGLUtils=e,__reflect(e.prototype,"egret.WebGLUtils")}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,__reflect(e.prototype,"egret.GeolocationEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=e.call(this,t,i,n)||this;return r._status=0,r}return __extends(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),i.dispatchHTTPStatusEvent=function(e,n){var r=t.Event.create(i,i.HTTP_STATUS);r._status=n;var o=e.dispatchEvent(r);return t.Event.release(r),o},i.HTTP_STATUS="httpStatus",i}(t.Event);t.HTTPStatusEvent=e,__reflect(e.prototype,"egret.HTTPStatusEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)||this}return __extends(i,e),i.dispatchIOErrorEvent=function(e){var n=t.Event.create(i,i.IO_ERROR),r=e.dispatchEvent(n);return t.Event.release(n),r},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,__reflect(e.prototype,"egret.IOErrorEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.MotionEvent=e,__reflect(e.prototype,"egret.MotionEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.OrientationEvent=e,__reflect(e.prototype,"egret.OrientationEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0);var a=e.call(this,t,i,n)||this;return a.bytesLoaded=0,a.bytesTotal=0,a.bytesLoaded=r,a.bytesTotal=o,a}return __extends(i,e),i.dispatchProgressEvent=function(e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a=t.Event.create(i,n);a.bytesLoaded=r,a.bytesTotal=o;var s=e.dispatchEvent(a);return t.Event.release(a),s},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,__reflect(e.prototype,"egret.ProgressEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)||this}return __extends(i,e),i.dispatchStageOrientationEvent=function(e,n){var r=t.Event.create(i,n),o=e.dispatchEvent(r);return t.Event.release(r),o},i.ORIENTATION_CHANGE="orientationChange",i}(t.Event);t.StageOrientationEvent=e,__reflect(e.prototype,"egret.StageOrientationEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r="");var o=e.call(this,t,i,n)||this;return o.text=r,o}return __extends(i,e),i.dispatchTextEvent=function(e,n,r){var o=t.Event.create(i,n);o.text=r;var a=e.dispatchEvent(o);return t.Event.release(o),a},i.LINK="link",i}(t.Event);t.TextEvent=e,__reflect(e.prototype,"egret.TextEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){return e.call(this,t,i,n)||this}return __extends(i,e),i.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,n,r,o){var a=t.Event.create(i,n,r,o),s=e.dispatchEvent(a);return t.Event.release(a),s},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,__reflect(e.prototype,"egret.TimerEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.format="image",i.$deleteSource=!0,i.source=t,i.width=t.width,i.height=t.height,i}return __extends(i,e),i.create=function(e,n,r){var o="",a="image/png";"/"===(o="arraybuffer"===e?t.Base64Util.encode(n):n).charAt(0)?a="image/jpeg":"R"===o.charAt(0)?a="image/gif":"i"===o.charAt(0)&&(a="image/png");var s=new Image;s.src="data:"+a+";base64,"+o,s.crossOrigin="*";var l=new i(s);return s.onload=function(){s.onload=void 0,l.source=s,l.height=s.height,l.width=s.width,r&&r(l)},l},i.prototype.$dispose=function(){"webgl"==t.Capabilities.renderMode&&this.webGLTexture&&(t.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source=null,i.$dispose(this)},i.$addDisplayObject=function(t,e){if(e){var n=e.hashCode;if(n){if(!i._displayList[n])return void(i._displayList[n]=[t]);var r=i._displayList[n];r.indexOf(t)<0&&r.push(t)}}},i.$removeDisplayObject=function(t,e){if(e){var n=e.hashCode;if(n&&i._displayList[n]){var r=i._displayList[n],o=r.indexOf(t);o>=0&&r.splice(o,1)}}},i.$invalidate=function(e){if(e){var n=e.hashCode;if(n&&i._displayList[n])for(var r=i._displayList[n],o=0;o<r.length;o++){r[o]instanceof t.Bitmap&&r[o].$refreshImageData();var a=r[o];a.$renderDirty=!0;var s=a.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var l=a.$maskedObject;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp())}}},i.$dispose=function(e){if(e){var n=e.hashCode;if(n&&i._displayList[n]){for(var r=0,o=i._displayList[n];r<o.length;r++){var a=o[r];a instanceof t.Bitmap&&(a.$bitmapData=null),a.$renderDirty=!0;var s=a.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var l=a.$maskedObject;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp())}t.nativeRender&&egret_native.NativeDisplayObject.disposeBitmapData(e),delete i._displayList[n]}}},i._displayList=t.createMap(),i}(t.HashObject);t.BitmapData=e,__reflect(e.prototype,"egret.BitmapData")}(egret||(egret={})),function(t){var e=new t.Point,i=function(i){function n(t,e,n,r,o,a){var s=i.call(this,t,e,n)||this;return s.targetChanged=!0,s.touchDown=!1,s.$initTo(r,o,a),s}return __extends(n,i),n.prototype.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(n.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),n.prototype.getLocalXY=function(){this.targetChanged=!1,this.$target.$getInvertedConcatenatedMatrix().transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},n.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},n.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},n.dispatchTouchEvent=function(e,i,r,o,a,s,l,u){if(void 0===u&&(u=!1),!r&&!e.hasEventListener(i))return!0;var h=t.Event.create(n,i,r,o);h.$initTo(a,s,l),h.touchDown=u;var c=e.dispatchEvent(h);return t.Event.release(h),c},n.TOUCH_MOVE="touchMove",n.TOUCH_BEGIN="touchBegin",n.TOUCH_END="touchEnd",n.TOUCH_CANCEL="touchCancel",n.TOUCH_TAP="touchTap",n.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",n}(t.Event);t.TouchEvent=i,__reflect(i.prototype,"egret.TouchEvent")}(egret||(egret={})),egret||(egret={}),function(t){var e=function(e){function r(t,r,o){void 0===t&&(t=4),void 0===r&&(r=4),void 0===o&&(o=1);var a=e.call(this)||this,s=a;return s.type="blur",s.$blurX=t,s.$blurY=r,s.$quality=o,s.blurXFilter=new i(t),s.blurYFilter=new n(r),s.onPropertyChange(),a}return __extends(r,e),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){var e=this;e.$blurX!=t&&(e.$blurX=t,e.blurXFilter.blurX=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){var e=this;e.$blurY!=t&&(e.$blurY=t,e.blurYFilter.blurY=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),r.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},r.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},r.prototype.onPropertyChange=function(){var e=this;e.updatePadding(),t.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(e.blurXFilter.$id,0,0,e.paddingLeft,e.paddingRight),egret_native.NativeDisplayObject.setFilterPadding(e.blurYFilter.$id,e.paddingTop,e.paddingBottom,0,0),egret_native.NativeDisplayObject.setDataToFilter(e))},r}(t.Filter);t.BlurFilter=e,__reflect(e.prototype,"egret.BlurFilter");var i=function(e){function i(i){void 0===i&&(i=4);var n=e.call(this)||this;return t.nativeRender?n.type="blur":n.type="blurX",n.$uniforms.blur={x:i,y:0},n.onPropertyChange(),n}return __extends(i,e),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.$uniforms.blur.x},set:function(t){this.$uniforms.blur.x=t},enumerable:!0,configurable:!0}),i}(t.Filter);__reflect(i.prototype,"BlurXFilter",["egret.IBlurXFilter"]);var n=function(e){function i(i){void 0===i&&(i=4);var n=e.call(this)||this;return t.nativeRender?n.type="blur":n.type="blurY",n.$uniforms.blur={x:0,y:i},n.onPropertyChange(),n}return __extends(i,e),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.$uniforms.blur.y},set:function(t){this.$uniforms.blur.y=t},enumerable:!0,configurable:!0}),i}(t.Filter);__reflect(n.prototype,"BlurYFilter",["egret.IBlurYFilter"])}(egret||(egret={})),function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.$matrix=[],i.matrix2=[],i.type="colorTransform",i.$uniforms.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.$uniforms.colorAdd={x:0,y:0,z:0,w:0},i.setMatrix(e),i.onPropertyChange(),i}return __extends(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t)},enumerable:!0,configurable:!0}),e.prototype.setMatrix=function(t){if(t)for(var e=0;20>e;e++)this.$matrix[e]=t[e];else for(e=0;20>e;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0;for(var i=this.$matrix,n=this.$uniforms.matrix,r=this.$uniforms.colorAdd,o=(e=0,0);e<i.length;e++)4===e?r.x=i[e]/255:9===e?r.y=i[e]/255:14===e?r.z=i[e]/255:19===e?r.w=i[e]/255:(n[o]=i[e],o++);this.onPropertyChange()},e.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},e}(t.Filter);t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret||(egret={})),function(t){var e,i={},n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),o=0,a=function(){for(var t=0;36>t;t++)8===t||13===t||18===t||23===t?r[t]="-":14===t?r[t]="4":(2>=o&&(o=33554432+16777216*Math.random()|0),e=15&o,o>>=4,r[t]=n[19===t?3&e|8:e]);return r.join("")},s=function(e){function n(t,n,r){void 0===r&&(r={});var o=e.call(this)||this;o.$padding=0,o.$vertexSrc=t,o.$fragmentSrc=n;var s=t+n;return i[s]||(i[s]=a()),o.$shaderKey=i[s],o.$uniforms=r,o.type="custom",o}return __extends(n,e),Object.defineProperty(n.prototype,"padding",{get:function(){return this.$padding},set:function(t){var e=this;e.$padding!=t&&(e.$padding=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.$uniforms},enumerable:!0,configurable:!0}),n.prototype.onPropertyChange=function(){if(t.nativeRender){var e=this;egret_native.NativeDisplayObject.setFilterPadding(e.$id,e.$padding,e.$padding,e.$padding,e.$padding),egret_native.NativeDisplayObject.setDataToFilter(e)}},n}(t.Filter);t.CustomFilter=s,__reflect(s.prototype,"egret.CustomFilter")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r,o,a,s,l,u,h,c){void 0===t&&(t=4),void 0===i&&(i=45),void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o=4),void 0===a&&(a=4),void 0===s&&(s=1),void 0===l&&(l=1),void 0===u&&(u=!1),void 0===h&&(h=!1),void 0===c&&(c=!1);var p=e.call(this,n,r,o,a,s,l,u,h)||this,d=p;return d.$distance=t,d.$angle=i,d.$hideObject=c,d.$uniforms.dist=t,d.$uniforms.angle=i/180*Math.PI,d.$uniforms.hideObject=c?1:0,d.onPropertyChange(),p}return __extends(i,e),Object.defineProperty(i.prototype,"distance",{get:function(){return this.$distance},set:function(t){var e=this;e.$distance!=t&&(e.$distance=t,e.$uniforms.dist=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.$angle},set:function(t){var e=this;e.$angle!=t&&(e.$angle=t,e.$uniforms.angle=t/180*Math.PI,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.$uniforms.hideObject=t?1:0)},enumerable:!0,configurable:!0}),i.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},i.prototype.updatePadding=function(){var e=this;e.paddingLeft=e.blurX,e.paddingRight=e.blurX,e.paddingTop=e.blurY,e.paddingBottom=e.blurY;var i=e.distance||0,n=e.angle||0,r=0,o=0;0!=i&&(r=(r=i*t.NumberUtils.cos(n))>0?Math.ceil(r):Math.floor(r),o=(o=i*t.NumberUtils.sin(n))>0?Math.ceil(o):Math.floor(o),e.paddingLeft+=r,e.paddingRight+=r,e.paddingTop+=o,e.paddingBottom+=o)},i}(t.GlowFilter);t.DropShadowFilter=e,__reflect(e.prototype,"egret.DropShadowFilter")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret||(egret={})),function(t){function e(t){return 0>(t%=2*Math.PI)&&(t+=2*Math.PI),t}function i(t,e){for(var i=[],r=0;e>r;r++){var o=n(t,r/e);o&&i.push(o)}return i}function n(e,i){var n=0,a=0,s=0,l=e.length;if(l/2==3){var u=e[n++],h=e[n++],c=e[n++],p=e[n++],d=e[n++],f=e[n++];a=r(u,c,d,i),s=r(h,p,f,i)}else if(l/2==4){u=e[n++],h=e[n++],c=e[n++],p=e[n++],d=e[n++],f=e[n++];var g=e[n++],y=e[n++];a=o(u,c,d,g,i),s=o(h,p,f,y,i)}return t.Point.create(a,s)}function r(t,e,i,n){return Math.pow(1-n,2)*t+2*n*(1-n)*e+Math.pow(n,2)*i}function o(t,e,i,n,r){return Math.pow(1-r,3)*t+3*r*Math.pow(1-r,2)*e+3*(1-r)*Math.pow(r,2)*i+Math.pow(r,3)*n}var a=function(n){function r(){var e=n.call(this)||this;return e.lastX=0,e.lastY=0,e.fillPath=null,e.strokePath=null,e.topLeftStrokeWidth=0,e.bottomRightStrokeWidth=0,e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0,e.includeLastPosition=!0,e.$renderNode=new t.sys.GraphicsNode,e}return __extends(r,n),r.prototype.$setTarget=function(e){this.$targetDisplay&&(this.$targetDisplay.$renderNode=null),e.$renderNode=this.$renderNode,this.$targetDisplay=e,this.$targetIsSprite=e instanceof t.Sprite},r.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},r.prototype.beginFill=function(e,i){void 0===i&&(i=1),e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginFill(e,i),this.fillPath=this.$renderNode.beginFill(e,i,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.beginGradientFill=function(e,i,n,r,o){void 0===o&&(o=null),t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginGradientFill(e,i,n,r,o),this.fillPath=this.$renderNode.beginGradientFill(e,i,n,r,o,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.endFill=function(){t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setEndFill(),this.fillPath=null},r.prototype.lineStyle=function(e,i,n,r,o,a,s,l,u){void 0===e&&(e=NaN),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=!1),void 0===o&&(o="normal"),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=3),e=+e||0,i=+i||0,n=+n||0,l=+l||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineStyle(e,i,n,r,o,a,s,l),0>=e?(this.strokePath=null,this.setStrokeWidth(0)):(this.setStrokeWidth(e),this.strokePath=this.$renderNode.lineStyle(e,i,n,a,s,l,u),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},r.prototype.drawRect=function(e,i,n,r){e=+e||0,i=+i||0,n=+n||0,r=+r||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRect(e,i,n,r);var o=this.fillPath,a=this.strokePath;o&&o.drawRect(e,i,n,r),a&&a.drawRect(e,i,n,r),this.extendBoundsByPoint(e+n,i+r),this.updatePosition(e,i),this.dirty()},r.prototype.drawRoundRect=function(e,i,n,r,o,a){e=+e||0,i=+i||0,n=+n||0,r=+r||0,o=+o||0,a=+a||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRoundRect(e,i,n,r,o,a);var s=this.fillPath,l=this.strokePath;s&&s.drawRoundRect(e,i,n,r,o,a),l&&l.drawRoundRect(e,i,n,r,o,a);var u=e+n,h=i+r,c=h-(a?.5*a|0:.5*o|0);this.extendBoundsByPoint(e,i),this.extendBoundsByPoint(u,h),this.updatePosition(u,c),this.dirty()},r.prototype.drawCircle=function(e,i,n){e=+e||0,i=+i||0,n=+n||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawCircle(e,i,n);var r=this.fillPath,o=this.strokePath;r&&r.drawCircle(e,i,n),o&&o.drawCircle(e,i,n),this.extendBoundsByPoint(e-n-1,i-n-1),this.extendBoundsByPoint(e+n+2,i+n+2),this.updatePosition(e+n,i),this.dirty()},r.prototype.drawEllipse=function(e,i,n,r){e=+e||0,i=+i||0,n=+n||0,r=+r||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawEllipse(e,i,n,r);var o=this.fillPath,a=this.strokePath;o&&o.drawEllipse(e,i,n,r),a&&a.drawEllipse(e,i,n,r),this.extendBoundsByPoint(e-1,i-1),this.extendBoundsByPoint(e+n+2,i+r+2),this.updatePosition(e+n,i+.5*r),this.dirty()},r.prototype.moveTo=function(e,i){e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setMoveTo(e,i);var n=this.fillPath,r=this.strokePath;n&&n.moveTo(e,i),r&&r.moveTo(e,i),this.includeLastPosition=!1,this.lastX=e,this.lastY=i,this.dirty()},r.prototype.lineTo=function(e,i){e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineTo(e,i);var n=this.fillPath,r=this.strokePath;n&&n.lineTo(e,i),r&&r.lineTo(e,i),this.updatePosition(e,i),this.dirty()},r.prototype.curveTo=function(e,n,r,o){e=+e||0,n=+n||0,r=+r||0,o=+o||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCurveTo(e,n,r,o);var a=this.fillPath,s=this.strokePath;a&&a.curveTo(e,n,r,o),s&&s.curveTo(e,n,r,o);for(var l=i([this.lastX||0,this.lastY||0,e,n,r,o],50),u=0;u<l.length;u++){var h=l[u];this.extendBoundsByPoint(h.x,h.y),t.Point.release(h)}this.extendBoundsByPoint(r,o),this.updatePosition(r,o),this.dirty()},r.prototype.cubicCurveTo=function(e,n,r,o,a,s){e=+e||0,n=+n||0,r=+r||0,o=+o||0,a=+a||0,s=+s||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCubicCurveTo(e,n,r,o,a,s);var l=this.fillPath,u=this.strokePath;l&&l.cubicCurveTo(e,n,r,o,a,s),u&&u.cubicCurveTo(e,n,r,o,a,s);for(var h=i([this.lastX||0,this.lastY||0,e,n,r,o,a,s],50),c=0;c<h.length;c++){var p=h[c];this.extendBoundsByPoint(p.x,p.y),t.Point.release(p)}this.extendBoundsByPoint(a,s),this.updatePosition(a,s),this.dirty()},r.prototype.drawArc=function(i,n,r,o,a,s){if(!(0>r||o===a)){i=+i||0,n=+n||0,r=+r||0,a=+a||0,s=!!s,o=e(o=+o||0),a=e(a),t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawArc(i,n,r,o,a,s);var l=this.fillPath,u=this.strokePath;l&&(l.$lastX=this.lastX,l.$lastY=this.lastY,l.drawArc(i,n,r,o,a,s)),u&&(u.$lastX=this.lastX,u.$lastY=this.lastY,u.drawArc(i,n,r,o,a,s)),s?this.arcBounds(i,n,r,a,o):this.arcBounds(i,n,r,o,a);var h=i+Math.cos(a)*r,c=n+Math.sin(a)*r;this.updatePosition(h,c),this.dirty()}},r.prototype.dirty=function(){if(this.$renderNode.dirtyRender=!0,!t.nativeRender){var e=this.$targetDisplay;e.$cacheDirty=!0;var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},r.prototype.arcBounds=function(t,e,i,n,r){var o=Math.PI;if(Math.abs(n-r)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);n>r&&(r+=2*o);for(var a=Math.cos(n)*i,s=Math.cos(r)*i,l=Math.min(a,s),u=Math.max(a,s),h=Math.sin(n)*i,c=Math.sin(r)*i,p=Math.min(h,c),d=Math.max(h,c),f=n/(.5*o),g=r/(.5*o),y=Math.ceil(f);g>=y;y++)switch(y%4){case 0:u=i;break;case 1:d=i;break;case 2:l=-i;break;case 3:p=-i}l=Math.floor(l),p=Math.floor(p),u=Math.ceil(u),d=Math.ceil(d),this.extendBoundsByPoint(l+t,p+e),this.extendBoundsByPoint(u+t,d+e)},r.prototype.clear=function(){t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setGraphicsClear(),this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.dirty()},r.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},r.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},r.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},r.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},r.prototype.$hitTest=function(e,i){var n=this.$targetDisplay,r=n.$getInvertedConcatenatedMatrix(),o=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty,s=t.sys.canvasHitTestBuffer;s.resize(3,3);var l=this.$renderNode,u=t.Matrix.create();u.identity(),u.translate(1-o,1-a),t.sys.canvasRenderer.drawNodeToBuffer(l,s,u,!0),t.Matrix.release(u);try{if(0===s.getPixels(1,1)[3])return null}catch(e){throw new Error(t.sys.tr(1039))}return n},r.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean(),t.nativeRender&&egret_native.NativeDisplayObject.disposeGraphicData(this)},r}(t.HashObject);t.Graphics=a,__reflect(a.prototype,"egret.Graphics")}(egret||(egret={})),function(t){var e=Math.PI,i=2*e,n=e/180,r=[],o=function(o){function a(t,e,i,n,r,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=0);var s=o.call(this)||this;return s.a=t,s.b=e,s.c=i,s.d=n,s.tx=r,s.ty=a,s}return __extends(a,o),a.release=function(t){t&&r.push(t)},a.create=function(){var t=r.pop();return t||(t=new a),t},a.prototype.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},a.prototype.concat=function(t){var e=this.a*t.a,i=0,n=0,r=this.d*t.d,o=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,r+=this.c*t.b,i+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,o+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=r,this.tx=o,this.ty=a},a.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},a.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},a.prototype.invert=function(){this.$invertInto(this)},a.prototype.$invertInto=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=this.tx,a=this.ty;if(0==i&&0==n)return t.b=t.c=0,void(0==e||0==r?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,r=t.d=1/r,t.tx=-e*o,t.ty=-r*a));var s=e*r-i*n;if(0!=s){s=1/s;var l=t.a=r*s;i=t.b=-i*s,n=t.c=-n*s,r=t.d=e*s,t.tx=-(l*o+n*a),t.ty=-(i*o+r*a)}else t.identity()},a.prototype.rotate=function(e){if(0!==(e=+e)){e/=n;var i=t.NumberUtils.cos(e),r=t.NumberUtils.sin(e),o=this.a,a=this.b,s=this.c,l=this.d,u=this.tx,h=this.ty;this.a=o*i-a*r,this.b=o*r+a*i,this.c=s*i-l*r,this.d=s*r+l*i,this.tx=u*i-h*r,this.ty=u*r+h*i}},a.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},a.prototype.setTo=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},a.prototype.transformPoint=function(e,i,n){var r=this.a*e+this.c*i+this.tx,o=this.b*e+this.d*i+this.ty;return n?(n.setTo(r,o),n):new t.Point(r,o)},a.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},a.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},a.prototype.prepend=function(t,e,i,n,r,o){var a=this.tx;if(1!=t||0!=e||0!=i||1!=n){var s=this.a,l=this.c;this.a=s*t+this.b*i,this.b=s*e+this.b*n,this.c=l*t+this.d*i,this.d=l*e+this.d*n}return this.tx=a*t+this.ty*i+r,this.ty=a*e+this.ty*n+o,this},a.prototype.append=function(t,e,i,n,r,o){var a=this.a,s=this.b,l=this.c,u=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=t*a+e*l,this.b=t*s+e*u,this.c=i*a+n*l,this.d=i*s+n*u),this.tx=r*a+o*l+this.tx,this.ty=r*s+o*u+this.ty,this},a.prototype.deltaTransformPoint=function(e){var i=this,n=i.a*e.x+i.c*e.y,r=i.b*e.x+i.d*e.y;return new t.Point(n,r)},a.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},a.prototype.createBox=function(e,i,r,o,a){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0);var s=this;if(0!==r){r/=n;var l=t.NumberUtils.cos(r),u=t.NumberUtils.sin(r);s.a=l*e,s.b=u*i,s.c=-u*e,s.d=l*i}else s.a=e,s.b=0,s.c=0,s.d=i;s.tx=o,s.ty=a},a.prototype.createGradientBox=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.createBox(t/1638.4,e/1638.4,i,n+t/2,r+e/2)},a.prototype.$transformBounds=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=this.tx,a=this.ty,s=t.x,l=t.y,u=s+t.width,h=l+t.height,c=e*s+n*l+o,p=i*s+r*l+a,d=e*u+n*l+o,f=i*u+r*l+a,g=e*u+n*h+o,y=i*u+r*h+a,v=e*s+n*h+o,m=i*s+r*h+a,$=0;c>d&&($=c,c=d,d=$),g>v&&($=g,g=v,v=$),t.x=Math.floor(g>c?c:g),t.width=Math.ceil((d>v?d:v)-t.x),p>f&&($=p,p=f,f=$),y>m&&($=y,y=m,m=$),t.y=Math.floor(y>p?p:y),t.height=Math.ceil((f>m?f:m)-t.y)},a.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},a.prototype.$getScaleX=function(){var t=this;if(0==t.b)return t.a;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},a.prototype.$getScaleY=function(){var t=this;if(0==t.c)return t.d;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},a.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+e/2:Math.atan2(this.d,this.c)-e/2},a.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-e:Math.atan2(this.b,this.a)},a.prototype.$updateScaleAndRotation=function(e,r,o,a){if(!(0!=o&&o!=i||0!=a&&a!=i))return this.a=e,this.b=this.c=0,void(this.d=r);o/=n,a/=n;var s=t.NumberUtils.cos(o),l=t.NumberUtils.sin(o);o==a?(this.a=s*e,this.b=l*e):(this.a=t.NumberUtils.cos(a)*e,this.b=t.NumberUtils.sin(a)*e),this.c=-l*r,this.d=s*r},a.prototype.$preMultiplyInto=function(t,e){var i=t.a*this.a,n=0,r=0,o=t.d*this.d,a=t.tx*this.a+this.tx,s=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,o+=t.c*this.b,n+=t.a*this.b+t.b*this.d,r+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,s+=t.tx*this.b),e.a=i,e.b=n,e.c=r,e.d=o,e.tx=a,e.ty=s},a}(t.HashObject);t.Matrix=o,__reflect(o.prototype,"egret.Matrix"),t.$TempMatrix=new o}(egret||(egret={})),function(t){var e=[],i=function(i){function n(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=i.call(this)||this;return o.x=t,o.y=e,o.width=n,o.height=r,o}return __extends(n,i),n.release=function(t){t&&e.push(t)},n.create=function(){var t=e.pop();return t||(t=new n),t},Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),n.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},n.prototype.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},n.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},n.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},n.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},n.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,n=t.x,r=t.y,o=Math.max(e,n),a=Math.min(e+this.width,n+t.width);if(a>=o){var s=Math.max(i,r),l=Math.min(i+this.height,r+t.height);if(l>=s)return this.setTo(o,s,a-o,l-s),this}return this.setEmpty(),this},n.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},n.prototype.isEmpty=function(){return this.width<=0||this.height<=0},n.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y},n.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,r=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<r&&e>this.x&&n>=e&&i>this.y&&r>=i},n.prototype.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},n.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},n.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e},n.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},n.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height},n}(t.HashObject);t.Rectangle=i,__reflect(i.prototype,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[1051]="runtime only support webgl render mode",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={})),(egret||(egret={})).JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"},function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]="!",e[1040]="hitTestPoint ! ",e[1041]="{0} , {1} ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[1050]="ExternalInterfacejs: {0}",e[1051]="runtime  webgl ",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={})),function(t){t.localStorage||(t.localStorage={})}(egret||(egret={})),function(t){!function(t){var e=[];t.$pushSoundChannel=function(t){e.indexOf(t)<0&&e.push(t)},t.$popSoundChannel=function(t){var i=e.indexOf(t);return i>=0&&(e.splice(i,1),!0)}}(t.sys||(t.sys={}))}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(t){!function(t){t.GET="GET",t.POST="POST"}(t.HttpMethod||(t.HttpMethod={}))}(egret||(egret={})),egret||(egret={}),function(t){var e=function(){function t(){}return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret||(egret={})),egret||(egret={}),function(t){!function(e){var i=function(i){function n(n){var r=i.call(this)||this;return r.isStage=!1,r.$renderNode=new e.BitmapNode,r.renderBuffer=null,r.offsetX=0,r.offsetY=0,r.offsetMatrix=new t.Matrix,r.$canvasScaleX=1,r.$canvasScaleY=1,r.root=n,r.isStage=n instanceof t.Stage,r}return __extends(n,i),n.create=function(i){var n=new t.sys.DisplayList(i);try{var r=new e.RenderBuffer;n.renderBuffer=r}catch(t){return null}return n.root=i,n},n.prototype.$getRenderNode=function(){return this.$renderNode},n.prototype.setClipRect=function(t,e){t*=n.$canvasScaleX,e*=n.$canvasScaleY,this.renderBuffer.resize(t,e)},n.prototype.drawToSurface=function(){var i;this.$canvasScaleX=this.offsetMatrix.a=n.$canvasScaleX,this.$canvasScaleY=this.offsetMatrix.d=n.$canvasScaleY,this.isStage||this.changeSurfaceSize();var r=this.renderBuffer;if(r.clear(),i=e.systemRenderer.render(this.root,r,this.offsetMatrix),!this.isStage){var o=r.surface,a=this.$renderNode;a.drawData.length=0;var s=o.width,l=o.height;this.bitmapData?(this.bitmapData.source=o,this.bitmapData.width=s,this.bitmapData.height=l):this.bitmapData=new t.BitmapData(o),a.image=this.bitmapData,a.imageWidth=s,a.imageHeight=l,a.drawImage(0,0,s,l,-this.offsetX,-this.offsetY,s/this.$canvasScaleX,l/this.$canvasScaleY)}return i},n.prototype.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,i=this.root.$getOriginalBounds(),n=this.$canvasScaleX,r=this.$canvasScaleY;this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(this.offsetMatrix.a,0,0,this.offsetMatrix.d,this.offsetX,this.offsetY);var o=this.renderBuffer,a=Math.max(257,i.width*n),s=Math.max(257,i.height*r);(this.offsetX!=t||this.offsetY!=e||o.surface.width!=a||o.surface.height!=s)&&o.resize(a,s)},n.$setCanvasScale=function(e,i){n.$canvasScaleX=e,n.$canvasScaleY=i,t.nativeRender&&egret_native.nrSetCanvasScaleFactor(n.$canvasScaleFactor,e,i)},n.$canvasScaleFactor=1,n.$canvasScaleX=1,n.$canvasScaleY=1,n}(t.HashObject);e.DisplayList=i,__reflect(i.prototype,"egret.sys.DisplayList")}(t.sys||(t.sys={}))}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(t){!function(e){function i(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var n=function(n){function l(e,i,r){var o=n.call(this)||this;return o.isPlaying=!1,o.entryClassName=r,o.stage=i,o.screenDisplayList=o.createDisplayList(i,e),o.showFPS=!1,o.showLog=!1,o.stageDisplayList=null,t.nativeRender&&(egret_native.rootWebGLBuffer=e),o}return __extends(l,n),l.prototype.createDisplayList=function(t,i){var n=new e.DisplayList(t);return n.renderBuffer=i,t.$displayList=n,n},l.prototype.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),t.ticker.$addPlayer(this))},l.prototype.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject&&this.stage.addChild(i)}},l.prototype.stop=function(){this.pause(),this.stage=null},l.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,t.ticker.$removePlayer(this))},l.prototype.$render=function(e,i){if(t.nativeRender)return egret_native.updateNativeRender(),void egret_native.nrRender();var n=this.stage,o=t.getTimer(),a=n.$displayList.drawToSurface(),s=t.getTimer();e&&this.showFPS&&r.update(a,s-o,i)},l.prototype.updateStageSize=function(e,i){var n=this.stage;n.$stageWidth=e,n.$stageHeight=i,t.nativeRender?egret_native.nrResize(e,i):(this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i)),n.dispatchEventWith(t.Event.RESIZE)},l.prototype.displayFPS=function(n,l,u,h){if((l=!!l)&&(t.log=function(){for(var t=arguments.length,n="",r=0;t>r;r++)n+=arguments[r]+" ";e.$logToFPS(n),console.log.apply(console,i(arguments))},t.warn=function(){for(var t=arguments.length,n="",r=0;t>r;r++)n+=arguments[r]+" ";e.$warnToFPS(n),console.warn.apply(console,i(arguments))},t.error=function(){for(var t=arguments.length,n="",r=0;t>r;r++)n+=arguments[r]+" ";e.$errorToFPS(n),console.error.apply(console,i(arguments))}),this.showFPS=!!n,this.showLog=l,!r){r=new FPS(this.stage,n,l,u,h);for(var c=o.length,p=0;c>p;p++)r.updateInfo(o[p]);o=null;var d=a.length;for(p=0;d>p;p++)r.updateWarn(a[p]);a=null;var f=s.length;for(p=0;f>p;p++)r.updateError(s[p]);s=null}},l}(t.HashObject);e.Player=n,__reflect(n.prototype,"egret.sys.Player");var r,o=[],a=[],s=[];e.$logToFPS=function(t){return r?void r.updateInfo(t):void o.push(t)},e.$warnToFPS=function(t){return r?void r.updateWarn(t):void a.push(t)},e.$errorToFPS=function(t){return r?void r.updateError(t):void s.push(t)};var l=function(){function e(e,i,n,r,o){var a;this.showFPS=i,this.showLog=n,this.logFilter=r,this.styles=o,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=i,this.showLog=n,this.logFilter=r,this.styles=o,this.fpsDisplay=new t.FPSDisplay(e,i,n,r,o);try{a=r?new RegExp(r):null}catch(e){t.log(e)}this.filter=function(t){return a?a.test(t):!r||0==t.indexOf(r)}}return e.prototype.update=function(e,i,n){var r=t.getTimer();if(this.totalTime+=r-this.lastTime,this.lastTime=r,this.totalTick++,this.drawCalls+=e,this.costRender+=i,this.costTicker+=n,this.totalTime>=1e3){var o=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),t.ticker.$frameRate),a=Math.round(this.drawCalls/this.totalTick),s=Math.round(this.costRender/this.totalTick),l=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:o,draw:a,costTicker:l,costRender:s}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.costRender=0,this.costTicker=0}},e.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},e.prototype.updateWarn=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateWarn?this.fpsDisplay.updateWarn(t):this.fpsDisplay.updateInfo("[Warning]"+t))},e.prototype.updateError=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateError?this.fpsDisplay.updateError(t):this.fpsDisplay.updateInfo("[Error]"+t))},e}();__reflect(l.prototype,"FPSImpl"),__global.FPS=l,t.warn=function(){console.warn.apply(console,i(arguments))},t.error=function(){console.error.apply(console,i(arguments))},t.assert=function(){console.assert.apply(console,i(arguments))},t.log=function(){console.log.apply(console,i(arguments))}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){if(t.nativeRender=__global.nativeRender,t.nativeRender){var e=egret_native.nrABIVersion,i=egret_native.nrMinEgretVersion;if(4>e){t.nativeRender=!1;var n=" 0.1.8 ";t.sys.$warnToFPS(n),t.warn(n)}else if(e>4){t.nativeRender=!1;n=" "+i+" ";t.sys.$warnToFPS(n),t.warn(n)}}}(egret||(egret={})),function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n._verticesDirty=!0,n._bounds=new t.Rectangle,n.$renderNode=new t.sys.MeshNode,n}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(12)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapDataToMesh(t)},i.prototype.$updateRenderNode=function(){var e=this.$bitmapData;if(e){var i=(t.$TextureScaleFactor,this.$renderNode);i.smoothing=this.$smoothing,i.image=e,i.imageWidth=this.$sourceWidth,i.imageHeight=this.$sourceHeight;var n=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,r=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,o=n/this.$textureWidth,a=r/this.$textureHeight,s=this.$bitmapWidth,l=this.$bitmapHeight;i.drawMesh(this.$bitmapX,this.$bitmapY,s,l,this.$offsetX*o,this.$offsetY*a,o*s,a*l)}},i.prototype.$updateVertices=function(){var e=this;if(e._verticesDirty=!0,e.$renderDirty=!0,t.nativeRender){var i=this.$renderNode;this.$nativeDisplayObject.setDataToMesh(i.vertices,i.indices,i.uvs)}else{var n=e.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},i.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var n=0,r=i.length;r>n;n+=2){var o=i[n],a=i[n+1];this._bounds.x>o&&(this._bounds.x=o),this._bounds.width<o&&(this._bounds.width=o),this._bounds.y>a&&(this._bounds.y=a),this._bounds.height<a&&(this._bounds.height=a)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,__reflect(e.prototype,"egret.Mesh")}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.calculateStageSize=function(e,i,n,r,o){var a=i,s=n,l=r,u=o,h=i/l||0,c=n/u||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:l=Math.round(i/c);break;case t.StageScaleMode.FIXED_WIDTH:u=Math.round(n/h);break;case t.StageScaleMode.NO_BORDER:h>c?s=Math.round(u*h):a=Math.round(l*c);break;case t.StageScaleMode.SHOW_ALL:h>c?a=Math.round(l*c):s=Math.round(u*h);break;case t.StageScaleMode.FIXED_NARROW:h>c?l=Math.round(i/c):u=Math.round(n/h);break;case t.StageScaleMode.FIXED_WIDE:h>c?u=Math.round(n/h):l=Math.round(i/c);break;default:l=i,u=n}return t.Capabilities.runtimeType!=t.RuntimeType.WXGAME&&(l%2!=0&&(l+=1),u%2!=0&&(u+=1),a%2!=0&&(a+=1),s%2!=0&&(s+=1)),{stageWidth:l,stageHeight:u,displayWidth:a,displayHeight:s}},i}(t.HashObject);e.DefaultScreenAdapter=i,__reflect(i.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(t){!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,this.isPaused=!1,e.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}return i.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},i.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);-1!==e&&(this.playerList=this.playerList.concat(),this.playerList.splice(e,1))},i.prototype.$startTick=function(t,e){-1==this.getTickIndex(t,e)&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},i.prototype.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},i.prototype.getTickIndex=function(t,e){for(var i=this.callBackList,n=this.thisObjectList,r=i.length-1;r>=0;r--)if(i[r]==t&&n[r]==e)return r;return-1},i.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},i.prototype.$setFrameRate=function(t){return!(0>=t)&&(this.$frameRate!=t&&(this.$frameRate=t,t>60&&(t=60),this.frameDeltaTime=1e3/t,this.lastCount=this.frameInterval=Math.round(6e4/t),!0))},i.prototype.pause=function(){this.isPaused=!0},i.prototype.resume=function(){this.isPaused=!1},i.prototype.update=function(){for(var i=t.getTimer(),n=this.callBackList,r=this.thisObjectList,o=n.length,a=e.$requestRenderingFlag,s=t.getTimer(),l=0,u=t.lifecycle.contexts;l<u.length;l++){var h=u[l];h.onUpdate&&h.onUpdate()}if(this.isPaused)this.lastTimeStamp=s;else{this.callLaterAsyncs();for(var c=0;o>c;c++)n[c].call(r[c],s)&&(a=!0);var p=t.getTimer(),d=s-this.lastTimeStamp;if(this.lastTimeStamp=s,d>=this.frameDeltaTime)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return void(a&&this.render(!1,this.costEnterFrame+p-i));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+p-i);var f=t.getTimer();this.broadcastEnterFrame();var g=t.getTimer();this.costEnterFrame=g-f}},i.prototype.render=function(t,i){var n=this.playerList,r=n.length;if(0!=r){this.callLaters(),e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var o=0;r>o;o++)n[o].$render(t,i);e.$requestRenderingFlag=!1}},i.prototype.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var n=0;i>n;n++)e[n].dispatchEventWith(t.Event.ENTER_FRAME)}},i.prototype.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var n=0;i>n;n++)e[n].dispatchEventWith(t.Event.RENDER)}},i.prototype.callLaters=function(){var e,i,n;if(t.$callLaterFunctionList.length>0&&(e=t.$callLaterFunctionList,t.$callLaterFunctionList=[],i=t.$callLaterThisList,t.$callLaterThisList=[],n=t.$callLaterArgsList,t.$callLaterArgsList=[]),e)for(var r=e.length,o=0;r>o;o++){var a=e[o];null!=a&&a.apply(i[o],n[o])}},i.prototype.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,n=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var r=0;r<e.length;r++){var o=e[r];null!=o&&o.apply(i[r],n[r])}}},i}();e.SystemTicker=i,__reflect(i.prototype,"egret.sys.SystemTicker")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){e.contexts=[];var i=!0,n=function(){function n(){}return n.prototype.pause=function(){i&&(i=!1,e.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)),e.onPause&&e.onPause())},n.prototype.resume=function(){i||(i=!0,e.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)),e.onResume&&e.onResume())},n}();e.LifecycleContext=n,__reflect(n.prototype,"egret.lifecycle.LifecycleContext"),e.addLifecycleListener=function(t){var i=new n;e.contexts.push(i),t(i)}}(t.lifecycle||(t.lifecycle={})),t.ticker=new t.sys.SystemTicker}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(t){var i=e.call(this)||this;return i.maxTouches=0,i.useTouchesCount=0,i.touchDownTarget={},i.lastTouchX=-1,i.lastTouchY=-1,i.stage=t,i}return __extends(i,e),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(e,i,n){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var r=this.findTarget(e,i);null==this.touchDownTarget[n]&&(this.touchDownTarget[n]=r,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,n,!0)}},i.prototype.onTouchMove=function(e,i,n){if(null!=this.touchDownTarget[n]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var r=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,n,!0)}},i.prototype.onTouchEnd=function(e,i,n){if(null!=this.touchDownTarget[n]){var r=this.findTarget(e,i),o=this.touchDownTarget[n];delete this.touchDownTarget[n],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_END,!0,!0,e,i,n,!1),o==r?t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,n,!1):t.TouchEvent.dispatchTouchEvent(o,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,n,!1)}},i.prototype.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,__reflect(i.prototype,"egret.sys.TouchHandler")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=1,t}return __extends(i,e),i.prototype.drawImage=function(t,e,i,n,r,o,a,s){this.drawData.push(t,e,i,n,r,o,a,s),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=NaN,this.filter=null},i.$updateTextureData=function(e,n,r,o,a,s,l,u,h,c,p,d,f,g,y,v){if(n){var m=t.$TextureScaleFactor;if(e.smoothing=v,e.image=n,e.imageWidth=f,e.imageHeight=g,y==t.BitmapFillMode.SCALE){var $=p/h*m,b=d/c*m;e.drawImage(r,o,a,s,$*l,b*u,$*a,b*s)}else if(y==t.BitmapFillMode.CLIP){var _=Math.min(h,p),x=Math.min(c,d),T=a*m,E=s*m;i.drawClipImage(e,m,r,o,T,E,l,u,_,x)}else{T=a*m,E=s*m;for(var S=0;p>S;S+=h)for(var C=0;d>C;C+=c){_=Math.min(p-S,h),x=Math.min(d-C,c);i.drawClipImage(e,m,r,o,T,E,l,u,_,x,S,C)}}}},i.$updateTextureDataWithScale9Grid=function(e,i,n,r,o,a,s,l,u,h,c,p,d,f,g,y){e.smoothing=y,e.image=i,e.imageWidth=f,e.imageHeight=g;var v=a,m=s;p-=h-a*t.$TextureScaleFactor,d-=c-s*t.$TextureScaleFactor;var $=n.x-l,b=n.y-u,_=$/t.$TextureScaleFactor,x=b/t.$TextureScaleFactor,T=n.width/t.$TextureScaleFactor,E=n.height/t.$TextureScaleFactor;0==E&&(E=1,x>=m&&x--),0==T&&(T=1,_>=v&&_--);var S=r,C=S+_,w=C+T,P=v-_-T,D=o,L=D+x,I=L+E,O=m-x-E,R=P*t.$TextureScaleFactor,N=O*t.$TextureScaleFactor;if((_+P)*t.$TextureScaleFactor>p||(x+O)*t.$TextureScaleFactor>d)e.drawImage(r,o,a,s,l,u,p,d);else{var A=l,M=A+$,B=A+(p-R),k=p-$-R,F=u,j=F+b,H=F+d-N,U=d-b-N;x>0&&(_>0&&e.drawImage(S,D,_,x,A,F,$,b),T>0&&e.drawImage(C,D,T,x,M,F,k,b),P>0&&e.drawImage(w,D,P,x,B,F,R,b)),E>0&&(_>0&&e.drawImage(S,L,_,E,A,j,$,U),T>0&&e.drawImage(C,L,T,E,M,j,k,U),P>0&&e.drawImage(w,L,P,E,B,j,R,U)),O>0&&(_>0&&e.drawImage(S,I,_,O,A,H,$,N),T>0&&e.drawImage(C,I,T,O,M,H,k,N),P>0&&e.drawImage(w,I,P,O,B,H,R,N))}},i.drawClipImage=function(t,e,i,n,r,o,a,s,l,u,h,c){void 0===h&&(h=0),void 0===c&&(c=0);var p=a+r-l;p>0&&(r-=p),(p=s+o-u)>0&&(o-=p),t.drawImage(i,n,r/e,o/e,h+a,c+s,r,o)},i}(e.RenderNode);e.BitmapNode=i,__reflect(i.prototype,"egret.sys.BitmapNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){var i=["none","round","square"],n=["bevel","miter","round"],r=function(r){function o(){var t=r.call(this)||this;return t.dirtyRender=!0,t.type=3,t}return __extends(o,r),o.prototype.beginFill=function(t,i,n){void 0===i&&(i=1);var r=new e.FillPath;if(r.fillColor=t,r.fillAlpha=i,n){var o=this.drawData.lastIndexOf(n);this.drawData.splice(o,0,r)}else this.drawData.push(r);return this.renderCount++,r},o.prototype.beginGradientFill=function(i,n,r,o,a,s){var l=new t.Matrix;a?(l.a=819.2*a.a,l.b=819.2*a.b,l.c=819.2*a.c,l.d=819.2*a.d,l.tx=a.tx,l.ty=a.ty):(l.a=100,l.d=100);var u=new e.GradientFillPath;if(u.gradientType=i,u.colors=n,u.alphas=r,u.ratios=o,u.matrix=l,s){var h=this.drawData.lastIndexOf(s);this.drawData.splice(h,0,u)}else this.drawData.push(u);return this.renderCount++,u},o.prototype.lineStyle=function(r,o,a,s,l,u,h){void 0===a&&(a=1),void 0===u&&(u=3),void 0===h&&(h=[]),-1==i.indexOf(s)&&(s="round"),-1==n.indexOf(l)&&(l="round");var c=new e.StrokePath;return c.lineWidth=r,c.lineColor=o,c.lineAlpha=a,c.caps=s||t.CapsStyle.ROUND,c.joints=l,c.miterLimit=u,c.lineDash=h,this.drawData.push(c),this.renderCount++,c},o.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0,this.renderCount=0},o.prototype.cleanBeforeRender=function(){},o.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},o}(e.RenderNode);e.GraphicsNode=r,__reflect(r.prototype,"egret.sys.GraphicsNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=4,e}return __extends(e,t),e.prototype.addNode=function(t){this.drawData.push(t)},e.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},e.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(t.RenderNode);t.GroupNode=e,__reflect(e.prototype,"egret.sys.GroupNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.image=null,i.smoothing=!0,i.bounds=new t.Rectangle,i.blendMode=null,i.alpha=NaN,i.filter=null,i.rotated=!1,i.type=5,i.vertices=[],i.uvs=[],i.indices=[],i}return __extends(i,e),i.prototype.drawMesh=function(t,e,i,n,r,o,a,s){this.drawData.push(t,e,i,n,r,o,a,s),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.image=null,e.smoothing=!0,e.rotated=!1,e.type=6,e}return __extends(e,t),e.prototype.drawImage=function(t,e,i,n,r,o,a,s){var l=this;l.sourceX=t,l.sourceY=e,l.sourceW=i,l.sourceH=n,l.drawX=r,l.drawY=o,l.drawW=a,l.drawH=s,l.renderCount=1},e.prototype.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this),this.image=null},e}(t.RenderNode);t.NormalBitmapNode=e,__reflect(e.prototype,"egret.sys.NormalBitmapNode")}(t.sys||(t.sys={}))}(egret||(egret={})),(egret||(egret={})).OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"},function(t){!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}return __extends(i,e),i.prototype.drawText=function(t,e,i,n){this.drawData.push(t,e,i,n),this.renderCount++,this.dirtyRender=!0},i.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.dirtyRender=!0},i}(e.RenderNode);e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=1,e}return __extends(e,t),e}(t.Path2D);t.FillPath=e,__reflect(e.prototype,"egret.sys.FillPath")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=2,e}return __extends(e,t),e}(t.Path2D);t.GradientFillPath=e,__reflect(e.prototype,"egret.sys.GradientFillPath")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;i.$renderBuffer=new t.sys.RenderBuffer;var n=new t.BitmapData(i.$renderBuffer.surface);return n.$deleteSource=!1,i._setBitmapData(n),i}return __extends(i,e),i.prototype.drawToTexture=function(e,i,n){if(void 0===n&&(n=1),i&&(0==i.width||0==i.height))return!1;var r=i||e.$getOriginalBounds();if(0==r.width||0==r.height)return!1;n/=t.$TextureScaleFactor;var o=(r.x+r.width)*n,a=(r.y+r.height)*n;i&&(o=r.width*n,a=r.height*n);var s=this.$renderBuffer;if(!s)return!1;if(s.resize(o,a),this.$bitmapData.width=o,this.$bitmapData.height=a,t.nativeRender){egret_native.activateBuffer(this.$renderBuffer);var l=!1,u=0,h=0,c=0,p=0;i&&(l=!0,u=i.x,h=i.y,c=i.width,p=i.height),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject(e.$nativeDisplayObject.id,n,l,u,h,c,p),egret_native.activateBuffer(null)}else{var d=t.Matrix.create();d.identity(),d.scale(n,n),i&&d.translate(-i.x,-i.y),t.sys.systemRenderer.render(e,s,d,!0),t.Matrix.release(d)}return this.$initData(0,0,o,a,0,0,o,a,o,a),!0},i.prototype.getPixel32=function(e,i){var n;if(this.$renderBuffer){var r=t.$TextureScaleFactor;e=Math.round(e/r),i=Math.round(i/r),n=this.$renderBuffer.getPixels(e,i,1,1)}return n},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.$renderBuffer=null},i}(t.Texture);t.RenderTexture=e,__reflect(e.prototype,"egret.RenderTexture")}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=3,e}return __extends(e,t),e}(t.Path2D);t.StrokePath=e,__reflect(e.prototype,"egret.sys.StrokePath")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){function e(t,e){var i=(null==e.italic?t.italic:e.italic)?"italic ":"normal ";return(i+=(null==e.bold?t.bold:e.bold)?"bold ":"normal ")+((null==e.size?t.size:e.size)+"px ")+(e.fontFamily||t.fontFamily)}function i(t,e){return"rgba("+(t>>16)+","+(t>>8&255)+","+(255&t)+","+e+")"}function n(e,n,r,o,a,s){var l;l=n==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var u=r.length,h=0;u>h;h++)l.addColorStop(a[h]/255,i(r[h],o[h]));return l}function r(t,e,i){void 0===i&&(i=0);for(var n=0,r=e.length;r>n;n++)t[n+i]=e[n]}function o(t,e,i,n){for(var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],h=n[6],c=n[7],p=n[8],d=n[9],f=n[10],g=n[11],y=n[12],v=n[13],m=n[14],$=n[15],b=n[16],_=n[17],x=n[18],T=n[19],E=0,S=e*i*4;S>E;E+=4){var C=t[E+0],w=t[E+1],P=t[E+2],D=t[E+3];t[E+0]=r*C+o*w+a*P+s*D+l,t[E+1]=u*C+h*w+c*P+p*D+d,t[E+2]=f*C+g*w+y*P+v*D+m,t[E+3]=$*C+b*w+_*P+x*D+T}}function a(t,e,i,n,r){s(t,e,i,n),function(t,e,i,n){var r;r=m?new Uint8ClampedArray(4*i):new Array(4*i);for(var o=4*e,a=2*n+1,s=0;e>s;s++){for(var l=4*s,u=0,h=0,c=0,p=0,d=0,f=0,g=-n*o,y=n*o+o;y>g;g+=o){var v=l+g;l>v||v>=l+i*o||(d=t[v+3],u+=t[v+0]*d,h+=t[v+1]*d,c+=t[v+2]*d,p+=d)}g=l,y=l+i*o;for(var $=0,b=l-n*o,_=l+(n+1)*o;y>g;g+=o,$+=4,_+=o,b+=o)0===p?(r[$+0]=0,r[$+1]=0,r[$+2]=0,r[$+3]=0):(r[$+0]=u/p,r[$+1]=h/p,r[$+2]=c/p,r[$+3]=p/a),d=t[_+3],f=t[b+3],d||0==d?f||0==f?(u+=t[_+0]*d-t[b+0]*f,h+=t[_+1]*d-t[b+1]*f,c+=t[_+2]*d-t[b+2]*f,p+=d-f):(u+=t[_+0]*d,h+=t[_+1]*d,c+=t[_+2]*d,p+=d):(f||0==f)&&(u+=-t[b+0]*f,h+=-t[b+1]*f,c+=-t[b+2]*f,p+=-f);for(var x=4*s,T=(y=x+i*o,0);y>x;x+=o,T+=4)t[x+0]=r[T+0],t[x+1]=r[T+1],t[x+2]=r[T+2],t[x+3]=r[T+3]}}(t,e,i,r)}function s(t,e,i,n){var o;o=m?new Uint8ClampedArray(4*e):new Array(4*e);for(var a=4*e,s=2*n+1,l=0;i>l;l++){for(var u=l*a,h=0,c=0,p=0,d=0,f=0,g=0,y=4*-n,v=4*n+4;v>y;y+=4){var $=u+y;u>$||$>=u+a||(f=t[$+3],h+=t[$+0]*f,c+=t[$+1]*f,p+=t[$+2]*f,d+=f)}v=u+a;for(var b=0,_=(y=u)-4*n,x=y+4*(n+1);v>y;y+=4,b+=4,x+=4,_+=4)0===d?(o[b+0]=0,o[b+1]=0,o[b+2]=0,o[b+3]=0):(o[b+0]=h/d,o[b+1]=c/d,o[b+2]=p/d,o[b+3]=d/s),f=t[x+3],g=t[_+3],f||0==f?g||0==g?(h+=t[x+0]*f-t[_+0]*g,c+=t[x+1]*f-t[_+1]*g,p+=t[x+2]*f-t[_+2]*g,d+=f-g):(h+=t[x+0]*f,c+=t[x+1]*f,p+=t[x+2]*f,d+=f):(g||0==g)&&(h+=-t[_+0]*g,c+=-t[_+1]*g,p+=-t[_+2]*g,d+=-g);m?t.set(o,u):r(t,o,u)}}function l(t,e,i,n,o,s,l,u,h){var c=function(t,e){var i;e||(e=[0,0,0,0]),m?i=new Uint8ClampedArray(t):r(i=new Array(t.length),t);for(var n=e[0],o=e[1],a=e[2],s=e[3],l=0,u=i.length;u>l;l+=4){var h=i[l+3];i[l+0]=n*h,i[l+1]=o*h,i[l+2]=a*h,i[l+3]=s*h}return i}(t,n);(function(t,e,i,n,o){var a,s,l=Math.sin(n)*o|0,u=Math.cos(n)*o|0;if(m){a=new Int32Array(t.buffer),s=new Int32Array(a.length);for(var h=0;i>h;h++){if(!(0>(p=h+l)||p>i))for(var c=0;e>c;c++){0>(d=c+u)||d>e||(s[p*e+d]=a[h*e+c])}}a.set(s)}else{a=t,s=new Array(a.length);for(h=0;i>h;h++){var p;if(!(0>(p=h+l)||p>i))for(c=0;e>c;c++){var d;0>(d=c+u)||d>e||(s[4*(p*e+d)+0]=a[4*(h*e+c)+0],s[4*(p*e+d)+1]=a[4*(h*e+c)+1],s[4*(p*e+d)+2]=a[4*(h*e+c)+2],s[4*(p*e+d)+3]=a[4*(h*e+c)+3])}}r(a,s)}})(c,e,i,l,u),a(c,e,i,o,s),function(t,e){for(var i=0,n=t.length;n>i;i+=4)t[i+3]*=e}(c,h),function(t,e){for(var i=0,n=t.length;n>i;i+=4){var r=t[i+0],o=t[i+1],a=t[i+2],s=t[i+3]/255,l=e[i+0],u=e[i+1],h=e[i+2],c=e[i+3]/255;t[i+0]=l+r*(1-c),t[i+1]=u+o*(1-c),t[i+2]=h+a*(1-c),t[i+3]=255*(c+s*(1-c))}}(c,t),t.set(c),m?t.set(c):r(t,c)}function u(t,e,i){return t*(1-i)+e*i}function h(t,e,i,n,o,a,s,l,h,c,p,d){var f;f=m?new Uint8ClampedArray(t.length):new Array(t.length);for(var g,y,v=n[3],$=0,b=0,_=l*Math.cos(s),x=l*Math.sin(s),T=3.141592653589793,E=o/7,S=a/7,C=0;e>C;C++)for(var w=0;i>w;w++){for(var P=w*e*4+4*C,D=0,L=0,I=t[P+0]/255,O=t[P+1]/255,R=t[P+2]/255,N=t[P+3]/255,A=0;2*T>=A;A+=2*T/12){g=Math.cos(A+0),y=Math.sin(A+0);for(var M=0;7>M;M++){$=M*E*g,b=M*S*y;var B=Math.round(C+$-_),k=Math.round(w+b-x),F=0;if(B>=e||0>B||0>k||k>=i)F=0;else F=t[k*e*4+4*B+3]/255;D+=(7-M)*F,L+=7-M}}N=Math.max(N,1e-4);var j=D/L*h*v*(1-c)*Math.max(Math.min(d,p),1-N),H=(L-D)/L*h*v*c*N,U=H/(H+(N=Math.max(N*p*(1-d),1e-4))),G=u(I,n[0],U),V=u(O,n[1],U),W=u(R,n[2],U),z=j/(H+N+j),X=u(G,n[0],z),Y=u(V,n[1],z),q=u(W,n[2],z),J=Math.min(N+j+H,1);f[P+0]=255*X,f[P+1]=255*Y,f[P+2]=255*q,f[P+3]=255*J}m?t.set(f):r(t,f)}var c=["source-over","lighter","destination-out"],p="source-over",d="#000000",f={none:"butt",square:"square",round:"round"},g=[],y=[],v=function(){function r(){this.nestLevel=0,this.renderingMask=!1}return r.prototype.render=function(e,i,n,r){this.nestLevel++;var o=i.context;o.transform(n.a,n.b,n.c,n.d,0,0);var a=this.drawDisplayObject(e,o,n.tx,n.ty,!0),s=t.Matrix.create();if(n.$invertInto(s),o.transform(s.a,s.b,s.c,s.d,0,0),t.Matrix.release(s),this.nestLevel--,0===this.nestLevel){g.length>6&&(g.length=6);for(var l=g.length,u=0;l>u;u++)g[u].resize(0,0)}return a},r.prototype.drawDisplayObject=function(e,i,n,r,o){var a,s=0,l=e.$displayList;if(l&&!o?((e.$cacheDirty||e.$renderDirty||l.$canvasScaleX!=t.sys.DisplayList.$canvasScaleX||l.$canvasScaleY!=t.sys.DisplayList.$canvasScaleY)&&(s+=l.drawToSurface()),a=l.$renderNode):a=e.$renderDirty?e.$getRenderNode():e.$renderNode,e.$cacheDirty=!1,a){switch(s++,i.$offsetX=n,i.$offsetY=r,a.type){case 1:this.renderBitmap(a,i);break;case 2:this.renderText(a,i);break;case 3:this.renderGraphics(a,i);break;case 4:this.renderGroup(a,i);break;case 5:this.renderMesh(a,i);break;case 6:this.renderNormalBitmap(a,i)}i.$offsetX=0,i.$offsetY=0}if(l&&!o)return s;var u=e.$children;if(u)for(var h=u.length,c=0;h>c;c++){var p=u[c],d=void 0,f=void 0;if(p.$useTranslate){var g=p.$getMatrix();d=n+p.$x,f=r+p.$y,i.save(),i.transform(g.a,g.b,g.c,g.d,d,f),d=-p.$anchorOffsetX,f=-p.$anchorOffsetY}else d=n+p.$x-p.$anchorOffsetX,f=r+p.$y-p.$anchorOffsetY;var y=void 0;switch(1!=p.$alpha&&(y=i.globalAlpha,i.globalAlpha*=p.$alpha),p.$renderMode){case 1:break;case 2:s+=this.drawWithFilter(p,i,d,f);break;case 3:s+=this.drawWithClip(p,i,d,f);break;case 4:s+=this.drawWithScrollRect(p,i,d,f);break;default:s+=this.drawDisplayObject(p,i,d,f)}p.$useTranslate?i.restore():y&&(i.globalAlpha=y)}return s},r.prototype.drawWithFilter=function(t,e,i,n){if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return 0;var r,s=0,u=t.$filters,d=u.length,f=0!==t.$blendMode;f&&((r=c[t.$blendMode])||(r=p));var g=t.$getOriginalBounds(),v=g.x,m=g.y,$=g.width,b=g.height;if(0>=$||0>=b)return s;var _=this.createRenderBuffer($-v,b-m,!0),x=_.context;if((s+=t.$mask?this.drawWithClip(t,x,-v,-m):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,x,-v,-m):this.drawDisplayObject(t,x,-v,-m))>0){f&&(e.globalCompositeOperation=r),s++;for(var T=x.getImageData(0,0,_.surface.width,_.surface.height),E=0;d>E;E++){var S=u[E];if("colorTransform"==S.type)o(T.data,_.surface.width,_.surface.height,S.$matrix);else if("blur"==S.type)a(T.data,_.surface.width,_.surface.height,S.$blurX,S.$blurY);else if("glow"==S.type){var C=S.$red,w=S.$green,P=S.$blue,D=S.$alpha;S.$inner||S.$knockout||S.$hideObject?h(T.data,_.surface.width,_.surface.height,[C/255,w/255,P/255,D],S.$blurX,S.$blurY,S.$angle?S.$angle/180*Math.PI:0,S.$distance||0,S.$strength,S.$inner?1:0,S.$knockout?0:1,S.$hideObject?1:0):l(T.data,_.surface.width,_.surface.height,[C/255,w/255,P/255,D],S.$blurX,S.$blurY,S.$angle?S.$angle/180*Math.PI:0,S.$distance||0,S.$strength)}else S.type}x.putImageData(T,0,0),e.drawImage(_.surface,i+v,n+m),f&&(e.globalCompositeOperation=p)}return y.push(_),s},r.prototype.drawWithClip=function(e,i,n,r){var o,a=0,s=0!==e.$blendMode;s&&((o=c[e.$blendMode])||(o=p));var l=e.$scrollRect?e.$scrollRect:e.$maskRect,u=e.$mask;if(u){var h=u.$getMatrix();if(0==h.a&&0==h.b||0==h.c&&0==h.d)return a}if(!(u||e.$children&&0!=e.$children.length))return l&&(i.save(),i.beginPath(),i.rect(l.x+n,l.y+r,l.width,l.height),i.clip()),s&&(i.globalCompositeOperation=o),a+=this.drawDisplayObject(e,i,n,r),s&&(i.globalCompositeOperation=p),l&&i.restore(),a;if(u){var d=u.$getRenderNode();if((!u.$children||0==u.$children.length)&&d&&3==d.type&&1==d.drawData.length&&1==d.drawData[0].type&&1==d.drawData[0].fillAlpha){this.renderingMask=!0,i.save(),(T=t.Matrix.create()).copyFrom(u.$getConcatenatedMatrix()),u.$getConcatenatedMatrixAt(e,T),T.prepend(1,0,0,1,n,r),i.transform(T.a,T.b,T.c,T.d,T.tx,T.ty);var f=this.drawDisplayObject(u,i,0,0);return this.renderingMask=!1,T.$invertInto(T),i.transform(T.a,T.b,T.c,T.d,T.tx,T.ty),t.Matrix.release(T),l&&(i.beginPath(),i.rect(l.x+n,l.y+r,l.width,l.height),i.clip()),f+=this.drawDisplayObject(e,i,n,r),i.restore(),f}}var y=e.$getOriginalBounds(),v=y.x,m=y.y,$=y.width,b=y.height;if(0>=$||0>=b)return a;var _=this.createRenderBuffer($,b),x=_.context;if(!x)return a+this.drawDisplayObject(e,i,n,r);if(a+=this.drawDisplayObject(e,x,-v,-m),u){var T;d=u.$getRenderNode();if((T=t.Matrix.create()).copyFrom(u.$getConcatenatedMatrix()),u.$getConcatenatedMatrixAt(e,T),T.translate(-v,-m),d&&1==d.$getRenderCount()||u.$displayList)x.globalCompositeOperation="destination-in",x.save(),x.setTransform(T.a,T.b,T.c,T.d,T.tx,T.ty),a+=this.drawDisplayObject(u,x,0,0),x.restore();else{var E=this.createRenderBuffer($,b),S=E.context;S.setTransform(T.a,T.b,T.c,T.d,T.tx,T.ty),a+=this.drawDisplayObject(u,S,0,0),x.globalCompositeOperation="destination-in",x.drawImage(E.surface,0,0),g.push(E)}t.Matrix.release(T)}return a>0&&(a++,s&&(i.globalCompositeOperation=o),l&&(i.save(),i.beginPath(),i.rect(l.x+n,l.y+r,l.width,l.height),i.clip()),i.drawImage(_.surface,n+v,r+m),l&&i.restore(),s&&(i.globalCompositeOperation=p)),g.push(_),a},r.prototype.drawWithScrollRect=function(t,e,i,n){var r=0,o=t.$scrollRect?t.$scrollRect:t.$maskRect;return o.isEmpty()||(t.$scrollRect&&(i-=o.x,n-=o.y),e.save(),e.beginPath(),e.rect(o.x+i,o.y+n,o.width,o.height),e.clip(),r+=this.drawDisplayObject(t,e,i,n),e.restore()),r},r.prototype.drawNodeToBuffer=function(t,e,i,n){var r=e.context;r.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,r,n)},r.prototype.drawDisplayToBuffer=function(t,e,i){var n,r=e.context;i&&r.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var o=0;if(n=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(o++,n.type){case 1:this.renderBitmap(n,r);break;case 2:this.renderText(n,r);break;case 3:this.renderGraphics(n,r);break;case 4:this.renderGroup(n,r);break;case 5:this.renderMesh(n,r);break;case 6:this.renderNormalBitmap(n,r)}var a=t.$children;if(a)for(var s=a.length,l=0;s>l;l++){var u=a[l];switch(u.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(u,r,0,0);break;case 3:o+=this.drawWithClip(u,r,0,0);break;case 4:o+=this.drawWithScrollRect(u,r,0,0);break;default:o+=this.drawDisplayObject(u,r,0,0)}}return o},r.prototype.renderNode=function(t,e,i){var n=0;switch(t.type){case 1:n=this.renderBitmap(t,e);break;case 2:n=1,this.renderText(t,e);break;case 3:n=this.renderGraphics(t,e,i);break;case 4:n=this.renderGroup(t,e);break;case 5:n=this.renderMesh(t,e);break;case 6:n+=this.renderNormalBitmap(t,e)}return n},r.prototype.renderNormalBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;if(e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing),t.rotated){var n=t.sourceX,r=t.sourceY,o=t.sourceW,a=t.sourceH,s=t.drawX,l=t.drawY,u=t.drawW,h=t.drawH;e.save(),e.transform(0,-1,1,0,0,h),e.drawImage(i.source,n,r,a,o,s+e.$offsetX,l+e.$offsetY,h,u),e.restore()}else e.drawImage(i.source,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX+e.$offsetX,t.drawY+e.$offsetY,t.drawW,t.drawH);return 1},r.prototype.renderBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var n,r,a,s=t.drawData,l=s.length,u=0,h=t.matrix,d=t.blendMode,f=t.alpha,y=!1;h&&(e.save(),y=!0,(0!=e.$offsetX||0!=e.$offsetY)&&(e.translate(e.$offsetX,e.$offsetY),n=e.$offsetX,r=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),d&&(e.globalCompositeOperation=c[d]),f==f&&(a=e.globalAlpha,e.globalAlpha*=f);var v=0,m=t.filter;if(m&&8==l){var $=s[0],b=s[1],_=s[2],x=s[3],T=s[4],E=s[5],S=s[6],C=s[7];t.rotated&&(_=s[3],x=s[2],S=s[7],C=s[6]);var w=this.createRenderBuffer(S,C),P=w.context;v++,t.rotated&&e.transform(0,-1,1,0,0,S),P.drawImage(i.source,$,b,_,x,0,0,S,C),v++;var D=P.getImageData(0,0,S,C);o(D.data,S,C,m.$matrix),P.putImageData(D,0,0),e.drawImage(w.surface,0,0,S,C,T+e.$offsetX,E+e.$offsetY,S,C),g.push(w)}else for(;l>u;)if(v++,t.rotated){$=s[u++],b=s[u++],x=s[u++],_=s[u++];var L=s[u++],I=s[u++];C=s[u++],S=s[u++];e.save(),e.transform(0,-1,1,0,0,S),e.drawImage(i.source,$,b,_,x,L+e.$offsetX,I+e.$offsetY,S,C),e.restore()}else e.drawImage(i.source,s[u++],s[u++],s[u++],s[u++],s[u++]+e.$offsetX,s[u++]+e.$offsetY,s[u++],s[u++]);return y?e.restore():(d&&(e.globalCompositeOperation=p),f==f&&(e.globalAlpha=a)),n&&(e.$offsetX=n),r&&(e.$offsetY=r),v},r.prototype.renderMesh=function(t,e){return 0},r.prototype.renderText=function(i,n){n.textAlign="left",n.textBaseline="middle",n.lineJoin="round";for(var r=i.drawData,o=r.length,a=0;o>a;){var s=r[a++],l=r[a++],u=r[a++],h=r[a++];n.font=e(i,h);var c=null==h.textColor?i.textColor:h.textColor,p=null==h.strokeColor?i.strokeColor:h.strokeColor,d=null==h.stroke?i.stroke:h.stroke;n.fillStyle=t.toColorString(c),n.strokeStyle=t.toColorString(p),d&&(n.lineWidth=2*d,n.strokeText(u,s+n.$offsetX,l+n.$offsetY)),n.fillText(u,s+n.$offsetX,l+n.$offsetY)}},r.prototype.renderGraphics=function(t,e,r){var o=t.drawData,a=o.length;r=!!r;for(var s=0;a>s;s++){var l=o[s];switch(l.type){case 1:var u=l;e.fillStyle=r?d:i(u.fillColor,u.fillAlpha),this.renderPath(l,e),this.renderingMask?e.clip():e.fill();break;case 2:var h=l;e.fillStyle=r?d:n(e,h.gradientType,h.colors,h.alphas,h.ratios,h.matrix),e.save();var c=h.matrix;this.renderPath(l,e),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),e.fill(),e.restore();break;case 3:var p=l,g=p.lineWidth;e.lineWidth=g,e.strokeStyle=r?d:i(p.lineColor,p.lineAlpha),e.lineCap=f[p.caps],e.lineJoin=p.joints,e.miterLimit=p.miterLimit,e.setLineDash&&e.setLineDash(p.lineDash);var y=1===g||3===g;y&&e.translate(.5,.5),this.renderPath(l,e),e.stroke(),y&&e.translate(-.5,-.5)}}return 0==a?0:1},r.prototype.renderPath=function(t,e){e.beginPath();for(var i=t.$data,n=t.$commands,r=n.length,o=0,a=0;r>a;a++){switch(n[a]){case 4:e.bezierCurveTo(i[o++]+e.$offsetX,i[o++]+e.$offsetY,i[o++]+e.$offsetX,i[o++]+e.$offsetY,i[o++]+e.$offsetX,i[o++]+e.$offsetY);break;case 3:e.quadraticCurveTo(i[o++]+e.$offsetX,i[o++]+e.$offsetY,i[o++]+e.$offsetX,i[o++]+e.$offsetY);break;case 2:e.lineTo(i[o++]+e.$offsetX,i[o++]+e.$offsetY);break;case 1:e.moveTo(i[o++]+e.$offsetX,i[o++]+e.$offsetY)}}},r.prototype.renderGroup=function(t,e){var i,n,r=t.matrix,o=!1;r&&(e.save(),o=!0,(0!=e.$offsetX||0!=e.$offsetY)&&(e.translate(e.$offsetX,e.$offsetY),i=e.$offsetX,n=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty));for(var a=0,s=t.drawData,l=s.length,u=0;l>u;u++){var h=s[u];a+=this.renderNode(h,e)}return o&&e.restore(),i&&(e.$offsetX=i),n&&(e.$offsetY=n),a},r.prototype.createRenderBuffer=function(e,i,n){var r=n?y.pop():g.pop();return r?r.resize(e,i,!0):r=new t.sys.CanvasRenderBuffer(e,i),r},r}();t.CanvasRenderer=v,__reflect(v.prototype,"egret.CanvasRenderer"),t.getFontString=e,t.getRGBAString=i;var m=!1;try{m=void 0!==typeof Uint8ClampedArray}catch(t){}}(egret||(egret={})),(egret||(egret={})).DeviceOrientation=null,egret||(egret={}),egret||(egret={}),function(t){!function(t){t.WEB="web",t.NATIVE="native",t.RUNTIME2="runtime2",t.WXGAME="wxgame"}(t.RuntimeType||(t.RuntimeType={}));var e=function(){function e(){}return e.language="zh-CN",e.os="Unknown",e.runtimeType=t.RuntimeType.WEB,e.engineVersion="5.2.13",e.renderMode="Unknown",e.boundingClientWidth=0,e.boundingClientHeight=0,e}();t.Capabilities=e,__reflect(e.prototype,"egret.Capabilities")}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);return n==this&&(n=this.$graphics.$hitTest(t,i)),n},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObject);t.Shape=e,__reflect(e.prototype,"egret.Shape")}(egret||(egret={})),function(t){var e={};t.registerImplementation=function(t,i){e[t]=i},t.getImplementation=function(t){return e[t]}}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(9)},Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),r=n.a*e+n.c*i+n.tx,o=n.b*e+n.d*i+n.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,o))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var s=this.$children,l=!1,u=null,h=s.length-1;h>=0;h--){var c=s[h];if(!c.$maskedObject&&(u=c.$hitTest(e,i))){if(l=!0,u.$touchEnabled)break;u=null}}return u?this.$touchChildren?u:this:l?this:((u=t.DisplayObject.prototype.$hitTest.call(this,e,i))&&(u=this.$graphics.$hitTest(e,i)),u)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObjectContainer);t.Sprite=e,__reflect(e.prototype,"egret.Sprite")}(egret||(egret={})),function(t){var e=function(t){function e(e,i){var n=t.call(this,e)||this;return n.firstCharHeight=0,"string"==typeof i?n.charList=n.parseConfig(i):i&&i.hasOwnProperty("frames")?n.charList=i.frames:n.charList={},n}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},e.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},e.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var n=e.h;void 0===n&&(n=0);var r=e.offY;void 0===r&&(r=0),i=n+r}if(0>=i)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},e.prototype.parseConfig=function(t){for(var e=(t=t.split("\r\n").join("\n")).split("\n"),i=this.getConfigByKey(e[3],"count"),n={},r=4;4+i>r;r++){var o=e[r],a={};n[String.fromCharCode(this.getConfigByKey(o,"id"))]=a,a.x=this.getConfigByKey(o,"x"),a.y=this.getConfigByKey(o,"y"),a.w=this.getConfigByKey(o,"width"),a.h=this.getConfigByKey(o,"height"),a.offX=this.getConfigByKey(o,"xoffset"),a.offY=this.getConfigByKey(o,"yoffset"),a.xadvance=this.getConfigByKey(o,"xadvance")}return n},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,r=i.length;r>n;n++){var o=i[n];if(e==o.substring(0,e.length)){var a=o.substring(e.length+1);return parseInt(a)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$smoothing=t.Bitmap.defaultSmoothing,i.$text="",i.$textFieldWidth=NaN,i.$textLinesChanged=!1,i.$textFieldHeight=NaN,i.$font=null,i.$fontStringChanged=!1,i.$lineSpacing=0,i.$letterSpacing=0,i.$textAlign=t.HorizontalAlign.LEFT,i.$verticalAlign=t.VerticalAlign.TOP,i.$textWidth=NaN,i.$textHeight=NaN,i.$textOffsetX=0,i.$textOffsetY=0,i.$textStartX=0,i.$textStartY=0,i.textLines=[],i.$lineHeights=[],t.nativeRender||(i.$renderNode=new t.sys.BitmapNode),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){var i=this;if(e!=i.$smoothing&&(i.$smoothing=e,!t.nativeRender)){var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var r=i.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.$text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),i.prototype.$setText=function(t){var e=this;return(t=null==t?"":String(t))!=e.$text&&(e.$text=t,e.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this.$textFieldWidth;return isNaN(t)?this.$getContentBounds().width:t},i.prototype.$setWidth=function(t){var e=this;return!(0>t||t==e.$textFieldWidth)&&(e.$textFieldWidth=t,e.$invalidateContentBounds(),!0)},i.prototype.$invalidateContentBounds=function(){this.$renderDirty=!0,this.$textLinesChanged=!0,this.$updateRenderNode()},i.prototype.$getHeight=function(){var t=this.$textFieldHeight;return isNaN(t)?this.$getContentBounds().height:t},i.prototype.$setHeight=function(t){var e=this;return!(0>t||t==e.$textFieldHeight)&&(e.$textFieldHeight=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"font",{get:function(){return this.$font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),i.prototype.$setFont=function(t){var e=this;return e.$font!=t&&(e.$font=t,e.$fontStringChanged=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.$lineSpacing},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLineSpacing=function(t){var e=this;return e.$lineSpacing!=t&&(e.$lineSpacing=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this.$letterSpacing},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLetterSpacing=function(t){var e=this;return e.$letterSpacing!=t&&(e.$letterSpacing=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextAlign=function(t){var e=this;return e.$textAlign!=t&&(e.$textAlign=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setVerticalAlign=function(t){var e=this;return e.$verticalAlign!=t&&(e.$verticalAlign=t,e.$invalidateContentBounds(),!0)},i.prototype.$updateRenderNode=function(){var e=this,n=this.$getTextLines(),r=n.length;if(0!=r){var o,a=[],s=this.$textLinesWidth,l=e.$font;t.nativeRender||(o=this.$renderNode,l.$texture&&(o.image=l.$texture.$bitmapData),o.smoothing=e.$smoothing);for(var u=l._getFirstCharHeight(),h=Math.ceil(u*i.EMPTY_FACTOR),c=!isNaN(e.$textFieldHeight),p=e.$textWidth,d=e.$textFieldWidth,f=e.$textFieldHeight,g=e.$textAlign,y=this.$textOffsetY+this.$textStartY,v=this.$lineHeights,m=0;r>m;m++){var $=v[m];if(c&&m>0&&y+$>f)break;var b=n[m],_=b.length,x=this.$textOffsetX;if(g!=t.HorizontalAlign.LEFT){var T=d>p?d:p;g==t.HorizontalAlign.RIGHT?x+=T-s[m]:g==t.HorizontalAlign.CENTER&&(x+=Math.floor((T-s[m])/2))}for(var E=0;_>E;E++){var S=b.charAt(E),C=l.getTexture(S);if(C){var w=C.$bitmapWidth,P=C.$bitmapHeight;t.nativeRender?a.push(C.$bitmapX,C.$bitmapY,w,P,x+C.$offsetX,y+C.$offsetY,C.$getScaleBitmapWidth(),C.$getScaleBitmapHeight(),C.$sourceWidth,C.$sourceHeight):(o.imageWidth=C.$sourceWidth,o.imageHeight=C.$sourceHeight,o.drawImage(C.$bitmapX,C.$bitmapY,w,P,x+C.$offsetX,y+C.$offsetY,C.$getScaleBitmapWidth(),C.$getScaleBitmapHeight())),x+=(l.getConfig(S,"xadvance")||C.$getTextureWidth())+e.$letterSpacing}else" "==S?x+=h:t.$warn(1046,S)}y+=$+e.$lineSpacing}if(t.nativeRender){e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,l.$texture,a);var D=e.$getContentBounds();e.$nativeDisplayObject.setWidth(D.width),e.$nativeDisplayObject.setHeight(D.height)}}else t.nativeRender&&e.$font&&(e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,e.$font.$texture,[]),e.$nativeDisplayObject.setWidth(0),e.$nativeDisplayObject.setHeight(0))},i.prototype.$measureContentBounds=function(t){0==this.$getTextLines().length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$textWidth-this.$textOffsetX,this.$textHeight-this.$textOffsetY)},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$textHeight},enumerable:!0,configurable:!0}),i.prototype.$getTextLines=function(){function e(t){return!(b&&r.length>0&&g>b)&&(g+=h+p,l||u||(c-=d),r.push(t),s.push(h),o.push(c),f=Math.max(c,f),!0)}var n=this;if(!n.$textLinesChanged)return n.textLines;var r=[];n.textLines=r;var o=[];n.$textLinesWidth=o,n.$textLinesChanged=!1;var a,s=[];if(n.$lineHeights=s,!n.$text||!n.$font)return n.$textWidth=0,n.$textHeight=0,r;for(var l,u,h,c,p=n.$lineSpacing,d=n.$letterSpacing,f=0,g=0,y=0,v=0,m=!isNaN(n.$textFieldWidth),$=n.$textFieldWidth,b=n.$textFieldHeight,_=n.$font,x=_._getFirstCharHeight(),T=Math.ceil(x*i.EMPTY_FACTOR),E=n.$text.split(/(?:\r\n|\r|\n)/),S=E.length,C=!0,w=0;S>w;w++){var P=E[w],D=P.length;h=0,c=0,l=!0,u=!1;for(var L=0;D>L;L++){l||(c+=d);var I=P.charAt(L),O=void 0,R=void 0,N=0,A=0,M=_.getTexture(I);if(M)O=M.$getTextureWidth(),R=M.$getTextureHeight(),N=M.$offsetX,A=M.$offsetY;else{if(" "!=I){t.$warn(1046,I),l&&(l=!1);continue}O=T,R=x}if(l&&(l=!1,y=Math.min(N,y)),C&&(C=!1,v=Math.min(A,v)),m&&L>0&&c+O>$){if(!e(P.substring(0,L)))break;D=(P=P.substring(L)).length,c=(L=0)==D-1?O:_.getConfig(I,"xadvance")||O,h=R}else c+=L==D-1?O:_.getConfig(I,"xadvance")||O,h=Math.max(R,h)}if(b&&w>0&&g>b)break;if(u=!0,!e(P))break}return g-=p,n.$textWidth=f,n.$textHeight=g,this.$textOffsetX=y,this.$textOffsetY=v,this.$textStartX=0,this.$textStartY=0,$>f&&((a=n.$textAlign)==t.HorizontalAlign.RIGHT?this.$textStartX=$-f:a==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor(($-f)/2))),b>g&&((a=n.$verticalAlign)==t.VerticalAlign.BOTTOM?this.$textStartY=b-g:a==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((b-g)/2))),r},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,__reflect(e.prototype,"egret.BitmapText")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret||(egret={})),function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}return e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],n=this.replaceArr[e][1];t=t.replace(i,n)}return t},e.prototype.parse=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,n=e.length;n>i;){var r=e.indexOf("<",i);if(0>r)this.addToResultArr(e.substring(i)),i=n;else{this.addToResultArr(e.substring(i,r));var o=e.indexOf(">",r);-1==o?(t.$error(1038),o=r):"/"==e.charAt(r+1)?this.stackArray.pop():this.addToArray(e.substring(r+1,o)),i=o+1}}return this.resutlArr},e.prototype.parser=function(t){return this.parse(t)},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){var e={},i=[];if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var n=0,r=void 0;r=t.match(this.getHeadReg());){var o=r[0],a="";'"'==(t=t.substring(o.length).trim()).charAt(0)?(n=t.indexOf('"',1),a=t.substring(1,n),n+=1):"'"==t.charAt(0)?(n=t.indexOf("'",1),a=t.substring(1,n),n+=1):n=(a=t.match(/(\S)+/)[0]).length,this.addProperty(e,o.substring(0,o.length-1).trim(),a.trim()),t=t.substring(n).trim()}}return e},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var n in i)null==e[n]&&(e[n]=i[n]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,__reflect(e.prototype,"egret.HtmlTextParser")}(egret||(egret={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}return __extends(i,e),i.prototype.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},i.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},i.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},i.prototype._getText=function(){return this.stageText.$getText()},i.prototype._setText=function(t){this.stageText.$setText(t)},i.prototype._setColor=function(t){this.stageText.$setColor(t)},i.prototype.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},i.prototype.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},i.prototype.onMouseDownHandler=function(t){this.$onFocus()},i.prototype.$onFocus=function(){var e=this;this._text.visible&&(this._isFocus||(this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),t.callLater((function(){e.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,e.onStageDownHandler,e)}),this),t.nativeRender&&this.stageText.$setText(this._text.$TextField[13]),this.stageText.$show()))},i.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},i.prototype.updateTextHandler=function(e){var i,n,r=this._text.$TextField,o=this.stageText.$getText(),a=!1;null!=r[35]&&(i=new RegExp("["+r[35]+"]","g"),n=o.match(i),o=n?n.join(""):"",a=!0),null!=r[36]&&(i=new RegExp("[^"+r[36]+"]","g"),n=o.match(i),o=n?n.join(""):"",a=!0),a&&this.stageText.$getText()!=o&&this.stageText.$setText(o),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},i.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},i.prototype._hideInput=function(){this.stageText.$removeFromStage()},i.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},i.prototype._updateProperties=function(){return this._isFocus?(this.stageText.$resetStageText(),void this.updateInput()):(this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),void this.updateInput())},i}(t.HashObject);t.InputController=e,__reflect(e.prototype,"egret.InputController")}(egret||(egret={})),egret||(egret={}),function(t){function e(e,i,r){var o=null==(r=r||{}).italic?i[16]:r.italic,a=null==r.bold?i[15]:r.bold,s=null==r.size?i[0]:r.size,l=r.fontFamily||i[8]||n.default_fontFamily;return t.sys.measureText(e,l,s,a,o)}var i=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])"),n=function(n){function r(){var e=n.call(this)||this;e.$inputEnabled=!1,e.inputUtils=null,e.$graphicsNode=null,e.isFlow=!1,e.textArr=[],e.linesArr=[],e.$isTyping=!1;var i=new t.sys.TextNode;return i.fontFamily=r.default_fontFamily,e.textNode=i,e.$renderNode=i,e.$TextField={0:r.default_size,1:0,2:r.default_textColor,3:NaN,4:NaN,5:0,6:0,7:0,8:r.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT,38:!1},e}return __extends(r,n),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(7)},r.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},r.prototype.$setTouchEnabled=function(t){n.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),r.prototype.$setFontFamily=function(e){var i=this.$TextField;return i[8]!=e&&(i[8]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setFontFamily(e),!0)},Object.defineProperty(r.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),r.prototype.$setSize=function(e){var i=this.$TextField;return i[0]!=e&&(i[0]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setFontSize(e),!0)},Object.defineProperty(r.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),r.prototype.$setBold=function(e){var i=this.$TextField;return e!=i[15]&&(i[15]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setBold(e),!0)},Object.defineProperty(r.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),r.prototype.$setItalic=function(e){var i=this.$TextField;return e!=i[16]&&(i[16]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setItalic(e),!0)},r.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(r.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),r.prototype.$setTextAlign=function(e){var i=this.$TextField;return i[9]!=e&&(i[9]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setTextAlign(e),!0)},Object.defineProperty(r.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),r.prototype.$setVerticalAlign=function(e){var i=this.$TextField;return i[10]!=e&&(i[10]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setVerticalAlign(e),!0)},Object.defineProperty(r.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),r.prototype.$setLineSpacing=function(e){var i=this.$TextField;return i[1]!=e&&(i[1]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setLineSpacing(e),!0)},Object.defineProperty(r.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),r.prototype.$setTextColor=function(e){var i=this.$TextField;return i[2]!=e&&(i[2]=e,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setTextColor(e),!0)},Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),r.prototype.$setWordWrap=function(e){var i=this.$TextField;e!=i[19]&&(i[20]||(i[19]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setWordWrap(e)))},Object.defineProperty(r.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),r.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e&&(i[24]=e,t.nativeRender&&this.$nativeDisplayObject.setType(e),e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},Object.defineProperty(r.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(e){this.$TextField[37]!=e&&(this.$TextField[37]=e,t.nativeRender&&this.$nativeDisplayObject.setInputType(e))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),r.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},r.prototype.$setBaseText=function(e){e=null==e?"":e.toString(),this.isFlow=!1;var i=this.$TextField;if(i[13]!=e){this.$invalidateTextField(),i[13]=e;var n;return n=i[20]?this.changeToPassText(e):e,t.nativeRender&&this.$nativeDisplayObject.setText(n),this.setMiddleStyle([{text:n}]),!0}return!1},r.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(r.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),r.prototype.$setDisplayAsPassword=function(e){var i=this.$TextField;if(i[20]!=e){i[20]=e,this.$invalidateTextField();var n;return n=e?this.changeToPassText(i[13]):i[13],t.nativeRender&&this.$nativeDisplayObject.setText(n),this.setMiddleStyle([{text:n}]),!0}return!1},Object.defineProperty(r.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),r.prototype.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e&&(this.$invalidateTextField(),i[25]=e,t.nativeRender&&this.$nativeDisplayObject.setStrokeColor(e),i[26]=t.toColorString(e),!0)},Object.defineProperty(r.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),r.prototype.$setStroke=function(e){return this.$TextField[27]!=e&&(this.$invalidateTextField(),this.$TextField[27]=e,t.nativeRender&&this.$nativeDisplayObject.setStroke(e),!0)},Object.defineProperty(r.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),r.prototype.$setMaxChars=function(e){return this.$TextField[21]!=e&&(this.$TextField[21]=e,t.nativeRender&&this.$nativeDisplayObject.setMaxChars(e),!0)},Object.defineProperty(r.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(e){(e=Math.max(e,1))!=this.$TextField[28]&&(this.$TextField[28]=e,t.nativeRender&&this.$nativeDisplayObject.setScrollV(e),this.$invalidateTextField())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),r.prototype.$setSelection=function(t,e){return!1},r.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(r.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),r.prototype.$setMultiline=function(e){return this.$TextField[30]!=e&&(this.$TextField[30]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setMultiline(e),!0)},Object.defineProperty(r.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&0!=(i=t.indexOf("^",i))&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),r.prototype.$setWidth=function(e){t.nativeRender&&this.$nativeDisplayObject.setTextFieldWidth(e);var i=this.$TextField;if(isNaN(e)){if(isNaN(i[3]))return!1;i[3]=NaN}else{if(i[3]==e)return!1;i[3]=e}return!(0>(e=+e))&&(this.$invalidateTextField(),!0)},r.prototype.$setHeight=function(e){t.nativeRender&&this.$nativeDisplayObject.setTextFieldHeight(e);var i=this.$TextField;if(isNaN(e)){if(isNaN(i[4]))return!1;i[4]=NaN}else{if(i[4]==e)return!1;i[4]=e}return!(0>(e=+e))&&(this.$invalidateTextField(),!0)},r.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},r.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(r.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),r.prototype.$setBorder=function(e){e=!!e,this.$TextField[31]!=e&&(this.$TextField[31]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBorder(e))},Object.defineProperty(r.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),r.prototype.$setBorderColor=function(e){e=+e||0,this.$TextField[32]!=e&&(this.$TextField[32]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBorderColor(e))},Object.defineProperty(r.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),r.prototype.$setBackground=function(e){this.$TextField[33]!=e&&(this.$TextField[33]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBackground(e))},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),r.prototype.$setBackgroundColor=function(e){this.$TextField[34]!=e&&(this.$TextField[34]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBackgroundColor(e))},r.prototype.fillBackground=function(e){var i=this.$graphicsNode;i&&i.clear();var n=this.$TextField;if(n[33]||n[31]||e&&e.length>0){if(!i)if(i=this.$graphicsNode=new t.sys.GraphicsNode,t.nativeRender)this.$renderNode=this.textNode;else{var r=new t.sys.GroupNode;r.addNode(i),r.addNode(this.textNode),this.$renderNode=r}var o=void 0;if(n[33]&&i.beginFill(n[34]).drawRect(0,0,this.$getWidth(),this.$getHeight()),n[31]&&(o=i.lineStyle(1,n[32])).drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1),e&&e.length>0)for(var a=n[2],s=-1,l=e.length,u=0;l>u;u+=4){var h=e[u],c=e[u+1],p=e[u+2],d=e[u+3]||a;(0>s||s!=d)&&(s=d,o=i.lineStyle(2,d,1,t.CapsStyle.NONE)),o.moveTo(h,c),o.lineTo(h+p,c)}}if(i){var f=this.$getRenderBounds();i.x=f.x,i.y=f.y,i.width=f.width,i.height=f.height,t.Rectangle.release(f)}},r.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},r.prototype.$onRemoveFromStage=function(){n.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&(this.textNode.clean(),t.nativeRender&&egret_native.NativeDisplayObject.disposeTextData(this))},r.prototype.$onAddToStage=function(e,i){n.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},r.prototype.$invalidateTextField=function(){var e=this;if(e.$renderDirty=!0,e.$TextField[18]=!0,e.$TextField[38]=!0,t.nativeRender);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},r.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var n=2*this.$TextField[27];return n>0&&(i.width+=2*n,i.height+=2*n),i.x-=n+2,i.y-=n+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},r.prototype.$measureContentBounds=function(e){this.$getLinesArr();var i=0,n=0;t.nativeRender?(i=egret_native.nrGetTextFieldWidth(this.$nativeDisplayObject.id),n=egret_native.nrGetTextFieldHeight(this.$nativeDisplayObject.id)):(i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],n=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4]),e.setTo(0,0,i,n)},r.prototype.$updateRenderNode=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var e=this.$graphicsNode;return void(e&&e.clear())}var i=this.drawText();this.fillBackground(i);var n=this.$getRenderBounds(),r=this.textNode;r.x=n.x,r.y=n.y,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),t.Rectangle.release(n)},Object.defineProperty(r.prototype,"textFlow",{get:function(){return this.textArr},set:function(e){this.isFlow=!0;var i="";null==e&&(e=[]);for(var n=0;n<e.length;n++){i+=e[n].text}this.$TextField[20]?this.$setBaseText(i):(this.$TextField[13]=i,this.setMiddleStyle(e),t.nativeRender&&this.$nativeDisplayObject.setTextFlow(e))},enumerable:!0,configurable:!0}),r.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,n=t.length;n>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},r.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.$TextField[38]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.$getLinesArr(),t.nativeRender?egret_native.nrGetTextWidth(this.$nativeDisplayObject.id):this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.$getLinesArr(),t.nativeRender?egret_native.nrGetTextHeight(this.$nativeDisplayObject.id):t.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),r.prototype.appendText=function(t){this.appendElement({text:t})},r.prototype.appendElement=function(e){var i=this.$TextField[13]+e.text;return t.nativeRender?(this.textArr.push(e),this.$TextField[13]=i,this.$TextField[18]=!0,this.$TextField[38]=!0,void this.$nativeDisplayObject.setTextFlow(this.textArr)):void(this.$TextField[20]?this.$setBaseText(i):(this.$TextField[13]=i,this.textArr.push(e),this.setMiddleStyle(this.textArr)))},r.prototype.$getLinesArr=function(){var e=this.$TextField;return t.nativeRender&&e[38]?(egret_native.updateNativeRender(),void(e[38]=!1)):this.$getLinesArr2()},r.prototype.$getLinesArr2=function(){var n=this.$TextField;if(!n[18])return this.linesArr;n[18]=!1;var r=this.textArr;this.linesArr.length=0,n[6]=0,n[5]=0;var o=n[3];if(!isNaN(o)&&0==o)return n[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var a,s=this.linesArr,l=0,u=0,h=0,c=0,p=0,d=r.length;d>p;p++){var f=r[p];if(f.text){f.style=f.style||{};for(var g=f.text.toString().split(/(?:\r\n|\r|\n)/),y=0,v=g.length;v>y;y++){null==s[c]&&(a={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},s[c]=a,l=0,h=0,u=0),h=n[24]==t.TextFieldType.INPUT?n[0]:Math.max(h,f.style.size||n[0]);var m=!0;if(""==g[y])y==v-1&&(m=!1);else{var $=e(g[y],n,f.style);if(isNaN(o))l+=$,u+=g[y].length,a.elements.push({width:$,text:g[y],style:f.style}),y==v-1&&(m=!1);else if(o>=l+$)a.elements.push({width:$,text:g[y],style:f.style}),l+=$,u+=g[y].length,y==v-1&&(m=!1);else{for(var b=0,_=0,x=g[y],T=void 0,E=(T=n[19]?x.split(i):x.match(/./g)).length,S=0;E>b;b++){var C=!1;if(1==(O=T[b].length)&&E-1>b){var w=T[b].charCodeAt(0),P=T[b+1].charCodeAt(0);if(w>=55296&&56319>=w&&56320==(64512&P))O=2,C=!0,$=e(T[b]+T[b+1],n,f.style);else $=e(T[b],n,f.style)}else $=e(T[b],n,f.style);if(0!=l&&l+$>o&&l+b!=0)break;if(_+$>o)for(var D=T[b].match(/./g),L=0,I=D.length;I>L;L++){var O,R=!1;if(1==(O=D[L].length)&&I-1>L){w=D[L].charCodeAt(0),P=D[L+1].charCodeAt(0);if(w>=55296&&56319>=w&&56320==(64512&P))O=2,R=!0,$=e(D[L]+D[L+1],n,f.style);else $=e(D[L],n,f.style)}else $=e(D[L],n,f.style);if(L>0&&l+$>o)break;_+=$,l+=$,u+=S+=O,R&&L++}else _+=$,l+=$,u+=S+=O;C&&b++}if(b>0){a.elements.push({width:_,text:x.substring(0,S),style:f.style});var N=x.substring(S),A=void 0,M=N.length;for(A=0;M>A&&" "==N.charAt(A);A++);g[y]=N.substring(A)}""!=g[y]&&(y--,m=!1)}}m&&(u++,a.hasNextLine=!0),y<g.length-1&&(a.width=l,a.height=h,a.charNum=u,n[5]=Math.max(n[5],l),n[6]+=h,c++)}p==r.length-1&&a&&(a.width=l,a.height=h,a.charNum=u,n[5]=Math.max(n[5],l),n[6]+=h)}else a&&(a.width=l,a.height=h,a.charNum=u,n[5]=Math.max(n[5],l),n[6]+=h)}return n[29]=s.length,s},r.prototype.$setIsTyping=function(e){this.$isTyping=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setIsTyping(e)},r.prototype.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||r.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var n=this.$getLinesArr();if(0==i[5])return[];var o=isNaN(i[3])?i[5]:i[3],a=t.TextFieldUtils.$getTextHeight(this),s=0,l=t.TextFieldUtils.$getStartLine(this),u=i[4];!isNaN(u)&&u>a&&(s+=t.TextFieldUtils.$getValign(this)*(u-a));s=Math.round(s);for(var h=t.TextFieldUtils.$getHalign(this),c=0,p=[],d=l,f=i[29];f>d;d++){var g=n[d],y=g.height;if(s+=y/2,d!=l){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(u)&&s>u)break}c=Math.round((o-g.width)*h);for(var v=0,m=g.elements.length;m>v;v++){var $=g.elements[v],b=$.style.size||i[0];e.drawText(c,s+(y-b)/2,$.text,$.style),$.style.underline&&p.push(c,s+y/2,$.width,$.style.textColor),c+=$.width}s+=y/2+i[1]}return p},r.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},r.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},r.prototype.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var n=i.style;if(n&&n.href)if(n.href.match(/^event:/)){var r=n.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,n.href.substring(r.length))}else open(n.href,n.target||"_blank")}}},r.default_fontFamily="Arial",r.default_size=30,r.default_textColor=16777215,r}(t.DisplayObject);t.TextField=n,__reflect(n.prototype,"egret.TextField")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TEXT="text",t.TEL="tel",t.PASSWORD="password",t}();t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret||(egret={})),function(t){var e=function(){function e(){}return e.$getStartLine=function(t){var i=t.$TextField,n=e.$getTextHeight(t),r=0,o=i[4];return isNaN(o)||(o>n||n>o&&(r=Math.max(i[28]-1,0),r=Math.min(i[29]-1,r)),i[30]||(r=Math.max(i[28]-1,0),i[29]>0&&(r=Math.min(i[29]-1,r)))),r},e.$getHalign=function(e){var i=e.$getLinesArr2(),n=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?n=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(n=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(n=0),n},e.$getTextHeight=function(e){return t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0]},e.$getValign=function(i){var n=e.$getTextHeight(i),r=i.$TextField[4];if(!isNaN(r)&&r>n){var o=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?o=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(o=1),o}return 0},e.$getTextElement=function(t,i,n){var r=e.$getHit(t,i,n),o=t.$getLinesArr2();return r&&o[r.lineIndex]&&o[r.lineIndex].elements[r.textElementIndex]?o[r.lineIndex].elements[r.textElementIndex]:null},e.$getHit=function(t,i,n){var r=t.$getLinesArr2();if(0==t.$TextField[3])return null;var o=0,a=e.$getTextHeight(t),s=0,l=t.$TextField[4];!isNaN(l)&&l>a&&(0!=(s=e.$getValign(t)*(l-a))&&(n-=s));for(var u=0,h=e.$getStartLine(t);h<r.length;h++){var c=r[h];if(u+c.height>=n){n>u&&(o=h+1);break}if((u+=c.height)+t.$TextField[1]>n)return null;u+=t.$TextField[1]}if(0==o)return null;var p=r[o-1],d=t.$TextField[3];isNaN(d)&&(d=t.textWidth),i-=e.$getHalign(t)*(d-p.width);var f=0;for(h=0;h<p.elements.length;h++){var g=p.elements[h];if(f+g.width<=i)f+=g.width;else if(i>f)return{lineIndex:o-1,textElementIndex:h}}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,n=t.size,r=t.lineSpacing;i-(n+r)*(e=Math.floor(i/(n+r)))>n/2&&e++}return e},e}();t.TextFieldUtils=e,__reflect(e.prototype,"egret.TextFieldUtils")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.encode=function(t){for(var e=new Uint8Array(t),i=e.length,n="",r=0;i>r;r+=3)n+=chars[e[r]>>2],n+=chars[(3&e[r])<<4|e[r+1]>>4],n+=chars[(15&e[r+1])<<2|e[r+2]>>6],n+=chars[63&e[r+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n},t.decode=function(t){var e=.75*t.length,i=t.length,n=0,r=0,o=0,a=0,s=0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);for(var l=new ArrayBuffer(e),u=new Uint8Array(l),h=0;i>h;h+=4)r=lookup[t.charCodeAt(h)],o=lookup[t.charCodeAt(h+1)],a=lookup[t.charCodeAt(h+2)],s=lookup[t.charCodeAt(h+3)],u[n++]=r<<2|o>>4,u[n++]=(15&o)<<4|a>>2,u[n++]=(3&a)<<6|63&s;return l},t}();t.Base64Util=e,__reflect(e.prototype,"egret.Base64Util")}(egret||(egret={}));for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;!function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,__reflect(e.prototype,"egret.Endian");var i=function(){function i(t,i){void 0===i&&(i=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,0>i&&(i=0),this.bufferExtSize=i;var n,r=0;if(t){var o=void 0;if(t instanceof Uint8Array?(o=t,r=t.length):(r=t.byteLength,o=new Uint8Array(t)),0==i)n=new Uint8Array(r);else n=new Uint8Array((1+(r/i|0))*i);n.set(o)}else n=new Uint8Array(i);this.write_position=r,this._position=0,this._bytes=n,this.data=new DataView(n.buffer),this.endian=e.BIG_ENDIAN}return Object.defineProperty(i.prototype,"endian",{get:function(){return 0==this.$endian?e.LITTLE_ENDIAN:e.BIG_ENDIAN},set:function(t){this.$endian=t==e.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),i.prototype.setArrayBuffer=function(t){},Object.defineProperty(i.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,i=t.byteLength,n=new Uint8Array(t),r=this.bufferExtSize;0==r?e=new Uint8Array(i):e=new Uint8Array((1+(i/r|0))*r);e.set(n),this.write_position=i,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,t>this.write_position&&(this.write_position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!0,configurable:!0}),i.prototype._validateBuffer=function(t){if(this.data.byteLength<t){var e=this.bufferExtSize,i=void 0;if(0==e)i=new Uint8Array(t);else i=new Uint8Array((1+(t/e>>0))*e);i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}},Object.defineProperty(i.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),i.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},i.prototype.readBoolean=function(){return this.validate(1)?!!this._bytes[this.position++]:void 0},i.prototype.readByte=function(){return this.validate(1)?this.data.getInt8(this.position++):void 0},i.prototype.readBytes=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),e){var r=this._position,o=this.write_position-r;if(0>o)return void t.$error(1025);if(0==n)n=o;else if(n>o)return void t.$error(1025);var a=e._position;e._position=0,e.validateBuffer(i+n),e._position=a,e._bytes.set(this._bytes.subarray(r,r+n),i),this.position+=n}},i.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},i.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},i.prototype.readUnsignedByte=function(){return this.validate(1)?this._bytes[this.position++]:void 0},i.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},i.prototype.readUTF=function(){var t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""},i.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,i=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(i)}},i.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},i.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},i.prototype.writeBytes=function(t,e,i){var n;void 0===e&&(e=0),void 0===i&&(i=0),0>e||0>i||(n=0==i?t.length-e:Math.min(t.length-e,i))>0&&(this.validateBuffer(n),this._bytes.set(t._bytes.subarray(e,e+n),this._position),this.position=this._position+n)},i.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},i.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},i.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},i.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),i=e.length;this.validateBuffer(2+i),this.data.setUint16(this._position,i,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},i.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},i.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},i.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var i=this._position,n=i+t.length;e&&this.validateBuffer(n),this.bytes.set(t,i),this.position=n},i.prototype.validate=function(e){var i=this._bytes.length;return i>0&&this._position+e<=i||void t.$error(1025)},i.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},i.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),n=[];i.length>e;){var r=i[e++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))n.push(r);else{var o=void 0,a=void 0;for(this.inRange(r,128,2047)?(o=1,a=192):this.inRange(r,2048,65535)?(o=2,a=224):this.inRange(r,65536,1114111)&&(o=3,a=240),n.push(this.div(r,Math.pow(64,o))+a);o>0;){var s=this.div(r,Math.pow(64,o-1));n.push(128+s%64),o-=1}}}return new Uint8Array(n)},i.prototype.decodeUTF8=function(t){for(var e,i=!1,n=0,r="",o=0,a=0,s=0,l=0;t.length>n;){var u=t[n++];if(u==this.EOF_byte)e=0!=a?this.decoderError(i):this.EOF_code_point;else if(0==a)this.inRange(u,0,127)?e=u:(this.inRange(u,194,223)?(a=1,l=128,o=u-192):this.inRange(u,224,239)?(a=2,l=2048,o=u-224):this.inRange(u,240,244)?(a=3,l=65536,o=u-240):this.decoderError(i),o*=Math.pow(64,a),e=null);else if(this.inRange(u,128,191))if(s+=1,o+=(u-128)*Math.pow(64,a-s),s!==a)e=null;else{var h=o,c=l;o=0,a=0,s=0,l=0,e=this.inRange(h,c,1114111)&&!this.inRange(h,55296,57343)?h:this.decoderError(i,u)}else o=0,a=0,s=0,l=0,n--,e=this.decoderError(i,u);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},i.prototype.encoderError=function(e){t.$error(1026,e)},i.prototype.decoderError=function(e,i){return e&&t.$error(1027),i||65533},i.prototype.inRange=function(t,e,i){return t>=e&&i>=t},i.prototype.div=function(t,e){return Math.floor(t/e)},i.prototype.stringToCodePoints=function(t){for(var e=[],i=0,n=t.length;i<t.length;){var r=t.charCodeAt(i);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(i==n-1)e.push(65533);else{var o=t.charCodeAt(i+1);if(this.inRange(o,56320,57343)){var a=1023&r,s=1023&o;i+=1,e.push(65536+(a<<10)+s)}else e.push(65533)}else e.push(r);i+=1}return e},i}();t.ByteArray=i,__reflect(i.prototype,"egret.ByteArray")}(egret||(egret={})),(egret||(egret={})).BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"},(egret||(egret={})).registerClass=function(t,e,i){var n=t.prototype;n.__class__=e;var r=[e];i&&(r=r.concat(i));var o=n.__types__;if(n.__types__)for(var a=o.length,s=0;a>s;s++){var l=o[s];-1==r.indexOf(l)&&r.push(l)}n.__types__=r},function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(13)},Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.ticker.$frameRate},set:function(e){t.ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,__reflect(e.prototype,"egret.Stage")}(egret||(egret={})),function(t){var e=function(){function t(){}return Object.defineProperty(t,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),n=i+1,r=t.sinInt(i);return i==e?r:(e-i)*t.sinInt(n)+(n-e)*r},t.sinInt=function(t){return 0>(t%=360)&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),n=i+1,r=t.cosInt(i);return i==e?r:(e-i)*t.cosInt(n)+(n-e)*r},t.cosInt=function(t){return 0>(t%=360)&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;360>NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),function(t){var e=function(e){function i(t,i){void 0===i&&(i=0);var n=e.call(this)||this;return n._delay=0,n._currentCount=0,n._running=!1,n.updateInterval=1e3,n.lastCount=1e3,n.lastTimeStamp=0,n.delay=t,n.repeatCount=0|+i,n}return __extends(i,e),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=t.getTimer(),t.ticker.$startTick(this.$update,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},i.prototype.$update=function(e){if(e-this.lastTimeStamp>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=e,this._currentCount++;var i=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),i&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,__reflect(e.prototype,"egret.Timer")}(egret||(egret={})),egret||(egret={}),function(t){t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(n)},t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(n)}}(egret||(egret={})),function(t){t.superSetter=function(t,e,i){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];var o,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}});var s=(o=t.__sets__)[i];if(s)return s.apply(e,n);var l=Object.getPrototypeOf(a);if(null!=l){for(;!l.hasOwnProperty(i);)if(null==(l=Object.getPrototypeOf(l)))return;s=Object.getOwnPropertyDescriptor(l,i).set,o[i]=s,s.apply(e,n)}},t.superGetter=function(t,e,i){var n,r=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}});var o=(n=t.__gets__)[i];if(o)return o.call(e);var a=Object.getPrototypeOf(r);if(null!=a){for(;!a.hasOwnProperty(i);)if(null==(a=Object.getPrototypeOf(a)))return;return o=Object.getOwnPropertyDescriptor(a,i).get,n[i]=o,o.call(e)}}}(egret||(egret={})),function(t){var e={};t.getDefinitionByName=function(t){if(!t)return null;var i=e[t];if(i)return i;var n=t.split("."),r=n.length;i=global;for(var o=0;r>o;o++){if(!(i=i[n[o]]))return null}return e[t]=i,i}}(egret||(egret={})),egret||(egret={}),(egret||(egret={})).getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),r=n.indexOf("("),o=n.substring(9,r);return Object.defineProperty(i,"__class__",{value:o,enumerable:!1,writable:!0}),o},function(t){t.getQualifiedSuperclassName=function(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),n=Object.getPrototypeOf(i);if(!n)return null;var r=t.getQualifiedClassName(n.constructor);return r||null}}(egret||(egret={})),function(t){t.getTimer=function(){return Date.now()-t.sys.$START_TIME}}(egret||(egret={})),function(t){t.hasDefinition=function(e){return!!t.getDefinitionByName(e)}}(egret||(egret={})),(egret||(egret={})).is=function(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),n=i?i.__types__:null;return!!n&&-1!==n.indexOf(e)},function(t){t.startTick=function(e,i){t.ticker.$startTick(e,i)}}(egret||(egret={})),function(t){t.stopTick=function(e,i){t.ticker.$stopTick(e,i)}}(egret||(egret={})),(egret||(egret={})).toColorString=function(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e},function(t){t.sys||(t.sys={})}(egret||(egret={}));var language;__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){!function(e){function i(t){if(window.location){var e=location.search;if(""==e)return"";for(var i=(e=e.slice(1)).split("&"),n=i.length,r=0;n>r;r++){var o=i[r].split("=");if(o[0]==t)return o[1]}}return""}e.getOption=i,t.getOption=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function t(){}return t.call=function(t,e){},t.addCallback=function(t,e){},t}();e.WebExternalInterface=i,__reflect(i.prototype,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),navigator.userAgent.toLowerCase().indexOf("egretnative")<0&&(t.ExternalInterface=i)}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i={},n=function(){function t(){}return t.call=function(t,e){var i={};i.functionName=t,i.value=e,egret_native.sendInfoToPlugin(JSON.stringify(i))},t.addCallback=function(t,e){i[t]=e},t}();e.NativeExternalInterface=n,__reflect(n.prototype,"egret.web.NativeExternalInterface",["egret.ExternalInterface"]),navigator.userAgent.toLowerCase().indexOf("egretnative")>=0&&(t.ExternalInterface=n,egret_native.receivedPluginInfo=function(e){var n=JSON.parse(e),r=n.functionName,o=i[r];if(o){var a=n.value;o.call(null,a)}else t.$warn(1050,r)})}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i={},n=function(){function e(){}return e.call=function(t,e){__global.ExternalInterface.call(t,e)},e.addCallback=function(t,e){i[t]=e},e.invokeCallback=function(e,n){var r=i[e];r?r.call(null,n):t.$warn(1050,e)},e}();e.WebViewExternalInterface=n,__reflect(n.prototype,"egret.web.WebViewExternalInterface",["egret.ExternalInterface"]),navigator.userAgent.toLowerCase().indexOf("egretwebview")>=0&&(t.ExternalInterface=n)}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(i){function n(){var t=i.call(this)||this;return t.loaded=!1,t}return __extends(n,i),Object.defineProperty(n.prototype,"length",{get:function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),n.prototype.load=function(e){function i(){n.$recycle(this.url,s),o(),l.indexOf("firefox")>=0&&(s.pause(),s.muted=!1),a.loaded=!0,a.dispatchEventWith(t.Event.COMPLETE)}function r(){o(),a.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}function o(){s.removeEventListener("canplaythrough",i),s.removeEventListener("error",r),l.indexOf("edge")>=0&&document.body.removeChild(s)}var a=this;this.url=e;var s=new Audio(e);s.addEventListener("canplaythrough",i),s.addEventListener("error",r);var l=navigator.userAgent.toLowerCase();l.indexOf("firefox")>=0&&(s.autoplay=!0,s.muted=!0),l.indexOf("edge")>=0&&document.body.appendChild(s),s.load(),this.originAudio=s,n.clearAudios[this.url]&&delete n.clearAudios[this.url]},n.prototype.play=function(i,r){i=+i||0,r=+r||0;var o=n.$pop(this.url);null==o&&(o=this.originAudio.cloneNode()),o.autoplay=!0;var a=new e.HtmlSoundChannel(o);return a.$url=this.url,a.$loops=r,a.$startTime=i,a.$play(),t.sys.$pushSoundChannel(a),a},n.prototype.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),n.$clear(this.url)},n.$clear=function(t){n.clearAudios[t]=!0;var e=n.audios[t];e&&(e.length=0)},n.$pop=function(t){var e=n.audios[t];return e&&e.length>0?e.pop():null},n.$recycle=function(t,e){if(!n.clearAudios[t]){var i=n.audios[t];null==n.audios[t]&&(i=n.audios[t]=[]),i.push(e)}},n.MUSIC="music",n.EFFECT="effect",n.audios={},n.clearAudios={},n}(t.EventDispatcher);e.HtmlSound=i,__reflect(i.prototype,"egret.web.HtmlSound",["egret.Sound"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(i){function n(e){var n=i.call(this)||this;return n.$startTime=0,n.audio=null,n.isStopped=!1,n.canPlay=function(){n.audio.removeEventListener("canplay",n.canPlay);try{n.audio.currentTime=n.$startTime}catch(t){}finally{n.audio.play()}},n.onPlayEnd=function(){return 1==n.$loops?(n.stop(),void n.dispatchEventWith(t.Event.SOUND_COMPLETE)):(n.$loops>0&&n.$loops--,void n.$play())},n._volume=1,e.addEventListener("ended",n.onPlayEnd),n.audio=e,n}return __extends(n,i),n.prototype.$play=function(){if(this.isStopped)t.$error(1036);else{try{this.audio.volume=this._volume,this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()}},n.prototype.stop=function(){if(this.audio){this.isStopped||t.sys.$popSoundChannel(this),this.isStopped=!0;var i=this.audio;i.removeEventListener("ended",this.onPlayEnd),i.removeEventListener("canplay",this.canPlay),i.volume=0,this._volume=0,this.audio=null;var n=this.$url;window.setTimeout((function(){i.pause(),e.HtmlSound.$recycle(n,i)}),200)}},Object.defineProperty(n.prototype,"volume",{get:function(){return this._volume},set:function(e){return this.isStopped?void t.$error(1036):(this._volume=e,void(this.audio&&(this.audio.volume=e)))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.audio?this.audio.currentTime:0},enumerable:!0,configurable:!0}),n}(t.EventDispatcher);e.HtmlSoundChannel=i,__reflect(i.prototype,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function t(){}return t.decodeAudios=function(){if(!(t.decodeArr.length<=0||t.isDecoding)){t.isDecoding=!0;var e=t.decodeArr.shift();t.ctx.decodeAudioData(e.buffer,(function(i){e.self.audioBuffer=i,e.success&&e.success(),t.isDecoding=!1,t.decodeAudios()}),(function(){alert("sound decode error: "+e.url+"\nsee http://edn.egret.com/cn/docs/page/156"),e.fail&&e.fail(),t.isDecoding=!1,t.decodeAudios()}))}},t.decodeArr=[],t.isDecoding=!1,t}();e.WebAudioDecode=i,__reflect(i.prototype,"egret.web.WebAudioDecode");var n=function(n){function r(){var t=n.call(this)||this;return t.loaded=!1,t}return __extends(r,n),Object.defineProperty(r.prototype,"length",{get:function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),r.prototype.load=function(e){function n(){o.loaded=!0,o.dispatchEventWith(t.Event.COMPLETE)}function r(){o.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}var o=this;this.url=e;var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onreadystatechange=function(){4==a.readyState&&(a.status>=400||0==a.status?o.dispatchEventWith(t.IOErrorEvent.IO_ERROR):(i.decodeArr.push({buffer:a.response,success:n,fail:r,self:o,url:o.url}),i.decodeAudios()))},a.send()},r.prototype.play=function(i,n){i=+i||0,n=+n||0;var r=new e.WebAudioSoundChannel;return r.$url=this.url,r.$loops=n,r.$audioBuffer=this.audioBuffer,r.$startTime=i,r.$play(),t.sys.$pushSoundChannel(r),r},r.prototype.close=function(){},r.MUSIC="music",r.EFFECT="effect",r}(t.EventDispatcher);e.WebAudioSound=n,__reflect(n.prototype,"egret.web.WebAudioSound",["egret.Sound"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(i){function n(){var n=i.call(this)||this;return n.$startTime=0,n.bufferSource=null,n.context=e.WebAudioDecode.ctx,n.isStopped=!1,n._currentTime=0,n._volume=1,n.onPlayEnd=function(){return 1==n.$loops?(n.stop(),void n.dispatchEventWith(t.Event.SOUND_COMPLETE)):(n.$loops>0&&n.$loops--,void n.$play())},n._startTime=0,n.context.createGain?n.gain=n.context.createGain():n.gain=n.context.createGainNode(),n}return __extends(n,i),n.prototype.$play=function(){if(this.isStopped)t.$error(1036);else{this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var e=this.context,i=this.gain,n=e.createBufferSource();this.bufferSource=n,n.buffer=this.$audioBuffer,n.connect(i),i.connect(e.destination),n.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,n.start(0,this.$startTime),this._currentTime=0}},n.prototype.stop=function(){if(this.bufferSource){var e=this.bufferSource;e.stop?e.stop(0):e.noteOff(0),e.onended=null,e.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||t.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(n.prototype,"volume",{get:function(){return this._volume},set:function(e){return this.isStopped?void t.$error(1036):(this._volume=e,void(this.gain.gain.value=e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0},enumerable:!0,configurable:!0}),n}(t.EventDispatcher);e.WebAudioSoundChannel=i,__reflect(i.prototype,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(i,n){void 0===n&&(n=!0);var r=e.call(this)||this;return r.loaded=!1,r.closed=!1,r.heightSet=NaN,r.widthSet=NaN,r.waiting=!1,r.userPause=!1,r.userPlay=!1,r.isPlayed=!1,r.screenChanged=function(e){var i=document.fullscreenEnabled||document.webkitIsFullScreen;i||(r.checkFullScreen(!1),t.Capabilities.isMobile||(r._fullscreen=i))},r._fullscreen=!0,r.onVideoLoaded=function(){r.video.removeEventListener("canplay",r.onVideoLoaded);var e=r.video;r.loaded=!0,r.posterData&&(r.posterData.width=r.getPlayWidth(),r.posterData.height=r.getPlayHeight()),e.width=e.videoWidth,e.height=e.videoHeight,window.setTimeout((function(){r.dispatchEventWith(t.Event.COMPLETE)}),200)},r.$renderNode=new t.sys.BitmapNode,r.src=i,r.once(t.Event.ADDED_TO_STAGE,r.loadPoster,r),i&&r.load(),r}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},i.prototype.load=function(e,i){var n=this;if(void 0===i&&(i=!0),e=e||this.src,this.src=e,!this.video||this.video.src!=e){var r;!this.video||t.Capabilities.isMobile?(r=document.createElement("video"),this.video=r,r.controls=null):r=this.video,r.src=e,r.setAttribute("autoplay","autoplay"),r.setAttribute("webkit-playsinline","true"),r.addEventListener("canplay",this.onVideoLoaded),r.addEventListener("error",(function(){return n.onVideoError()})),r.addEventListener("ended",(function(){return n.onVideoEnded()}));var o=!1;r.addEventListener("canplay",(function(){n.waiting=!1,o?n.userPause?n.pause():n.userPlay&&n.play():(o=!0,r.pause())})),r.addEventListener("waiting",(function(){n.waiting=!0})),r.load(),this.videoPlay(),r.style.position="absolute",r.style.top="0px",r.style.zIndex="-88888",r.style.left="0px",r.height=1,r.width=1}},i.prototype.play=function(e,i){var n=this;if(void 0===i&&(i=!1),0==this.loaded)return this.load(this.src),void this.once(t.Event.COMPLETE,(function(t){return n.play(e,i)}),this);this.isPlayed=!0;var r=this.video;null!=e&&(r.currentTime=+e||0),r.loop=!!i,t.Capabilities.isMobile?r.style.zIndex="-88888":r.style.zIndex="9999",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.height=r.videoHeight,r.width=r.videoWidth,"Windows PC"!=t.Capabilities.os&&"Mac OS"!=t.Capabilities.os&&window.setTimeout((function(){r.width=0}),1e3),this.checkFullScreen(this._fullscreen)},i.prototype.videoPlay=function(){return this.userPause=!1,this.waiting?void(this.userPlay=!0):(this.userPlay=!1,void this.video.play())},i.prototype.checkFullScreen=function(e){var i=this.video;if(e)null==i.parentElement&&(i.removeAttribute("webkit-playsinline"),document.body.appendChild(i)),t.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=i.parentElement&&i.parentElement.removeChild(i),i.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),t.startTick(this.markDirty,this),t.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();this.videoPlay()},i.prototype.goFullscreen=function(){var e,i=this.video;return!i[e=t.web.getPrefixStyleName("requestFullscreen",i)]&&!i[e=t.web.getPrefixStyleName("requestFullScreen",i)]||(i.removeAttribute("webkit-playsinline"),i[e](),this.setFullScreenMonitor(!0),!0)},i.prototype.setFullScreenMonitor=function(t){var e=this.video;t?(e.addEventListener("mozfullscreenchange",this.screenChanged),e.addEventListener("webkitfullscreenchange",this.screenChanged),e.addEventListener("mozfullscreenerror",this.screenError),e.addEventListener("webkitfullscreenerror",this.screenError)):(e.removeEventListener("mozfullscreenchange",this.screenChanged),e.removeEventListener("webkitfullscreenchange",this.screenChanged),e.removeEventListener("mozfullscreenerror",this.screenError),e.removeEventListener("webkitfullscreenerror",this.screenError))},i.prototype.screenError=function(){t.$error(3014)},i.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},i.prototype.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.dispatchEventWith(t.Event.ENDED)},i.prototype.onVideoError=function(){this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},i.prototype.close=function(){var t=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",(function(){return t.onVideoError()})),this.video.removeEventListener("ended",(function(){return t.onVideoEnded()})),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},i.prototype.pause=function(){return this.userPlay=!1,this.waiting?void(this.userPause=!0):(this.userPause=!1,this.video.pause(),void t.stopTick(this.markDirty,this))},Object.defineProperty(i.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(t){this.video&&(this.video.volume=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.video?this.video.currentTime:0},set:function(t){this.video&&(this.video.currentTime=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(e){t.Capabilities.isMobile||(this._fullscreen=!!e,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=new t.BitmapData(this.video),this._bitmapData.$deleteSource=!1),this._bitmapData):null},enumerable:!0,configurable:!0}),i.prototype.loadPoster=function(){var e=this,i=this.poster;if(i){var n=new t.ImageLoader;n.once(t.Event.COMPLETE,(function(i){if(n.data,e.posterData=n.data,e.$renderDirty=!0,e.posterData.width=e.getPlayWidth(),e.posterData.height=e.getPlayHeight(),t.nativeRender){var r=new t.Texture;r._setBitmapData(e.posterData),e.$nativeDisplayObject.setBitmapData(r)}}),this),n.load(i)}},i.prototype.$measureContentBounds=function(t){var e=this.bitmapData,i=this.posterData;e||i?t.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):t.setEmpty()},i.prototype.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:NaN:this.widthSet},i.prototype.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:NaN:this.heightSet},i.prototype.$updateRenderNode=function(){var e=this.$renderNode,i=this.bitmapData,n=this.posterData,r=this.getPlayWidth(),o=this.getPlayHeight();this.isPlayed&&!t.Capabilities.isMobile||!n?this.isPlayed&&i&&(e.image=i,e.imageWidth=i.width,e.imageHeight=i.height,t.WebGLUtils.deleteWebGLTexture(i.webGLTexture),i.webGLTexture=null,e.drawImage(0,0,i.width,i.height,0,0,r,o)):(e.image=n,e.imageWidth=r,e.imageHeight=o,e.drawImage(0,0,n.width,n.height,0,0,r,o))},i.prototype.markDirty=function(){return this.$renderDirty=!0,!0},i.prototype.$setHeight=function(t){if(this.heightSet=t,this.paused){var i=this;this.$renderDirty=!0,window.setTimeout((function(){i.$renderDirty=!1}),200)}e.prototype.$setHeight.call(this,t)},i.prototype.$setWidth=function(t){if(this.widthSet=t,this.paused){var i=this;this.$renderDirty=!0,window.setTimeout((function(){i.$renderDirty=!1}),200)}e.prototype.$setWidth.call(this,t)},Object.defineProperty(i.prototype,"paused",{get:function(){return!this.video||this.video.paused},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")},enumerable:!0,configurable:!0}),i}(t.DisplayObject);e.WebVideo=i,__reflect(i.prototype,"egret.web.WebVideo",["egret.Video","egret.DisplayObject"]),t.Video=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t._url="",t._method="",t}return __extends(i,e),Object.defineProperty(i.prototype,"response",{get:function(){return this._xhr?null!=this._xhr.response?this._xhr.response:"text"==this._responseType?this._xhr.responseText:"arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)?window.convertResponseBodyToText(this._xhr.responseBody):"document"==this._responseType?this._xhr.responseXML:null:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!0,configurable:!0}),i.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},i.prototype.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},i.prototype.send=function(t){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var e in this.headerObj)this._xhr.setRequestHeader(e,this.headerObj[e]);this._xhr.send(t)},i.prototype.abort=function(){this._xhr&&this._xhr.abort()},i.prototype.getAllResponseHeaders=function(){if(!this._xhr)return null;var t=this._xhr.getAllResponseHeaders();return t||""},i.prototype.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},i.prototype.getResponseHeader=function(t){if(!this._xhr)return null;var e=this._xhr.getResponseHeader(t);return e||""},i.prototype.onReadyStateChange=function(){var e=this._xhr;if(4==e.readyState){var i=e.status>=400||0==e.status,n=(this._url,this);window.setTimeout((function(){i?n.dispatchEventWith(t.IOErrorEvent.IO_ERROR):n.dispatchEventWith(t.Event.COMPLETE)}),0)}},i.prototype.updateProgress=function(e){e.lengthComputable&&t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.PROGRESS,e.loaded,e.total)},i}(t.EventDispatcher);e.WebHttpRequest=i,__reflect(i.prototype,"egret.web.WebHttpRequest",["egret.HttpRequest"]),t.HttpRequest=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=window.URL||window.webkitURL,n=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=null,t._crossOrigin=null,t._hasCrossOriginSet=!1,t.currentImage=null,t.request=null,t}return __extends(r,n),Object.defineProperty(r.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(t){this._hasCrossOriginSet=!0,this._crossOrigin=t},enumerable:!0,configurable:!0}),r.prototype.load=function(i){if(e.Html5Capatibility._canUseBlob&&0!=i.indexOf("wxLocalResource:")&&0!=i.indexOf("data:")&&0!=i.indexOf("http:")&&0!=i.indexOf("https:")){var n=this.request;n||((n=this.request=new t.web.WebHttpRequest).addEventListener(t.Event.COMPLETE,this.onBlobLoaded,this),n.addEventListener(t.IOErrorEvent.IO_ERROR,this.onBlobError,this),n.responseType="blob"),n.open(i),n.send()}else this.loadImage(i)},r.prototype.onBlobLoaded=function(t){var e=this.request.response;this.request=void 0,this.loadImage(i.createObjectURL(e))},r.prototype.onBlobError=function(t){this.dispatchIOError(this.currentURL),this.request=void 0},r.prototype.loadImage=function(t){var e=new Image;this.data=null,this.currentImage=e,this._hasCrossOriginSet?this._crossOrigin&&(e.crossOrigin=this._crossOrigin):r.crossOrigin&&(e.crossOrigin=r.crossOrigin),e.onload=this.onImageComplete.bind(this),e.onerror=this.onLoadError.bind(this),e.src=t},r.prototype.onImageComplete=function(e){var i=this.getImage(e);if(i){this.data=new t.BitmapData(i);var n=this;window.setTimeout((function(){n.dispatchEventWith(t.Event.COMPLETE)}),0)}},r.prototype.onLoadError=function(t){var e=this.getImage(t);e&&this.dispatchIOError(e.src)},r.prototype.dispatchIOError=function(e){var i=this;window.setTimeout((function(){i.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}),0)},r.prototype.getImage=function(e){var n=e.target;if(0==n.src.indexOf("blob:"))try{i.revokeObjectURL(n.src)}catch(e){t.$warn(1037)}return n.onerror=null,n.onload=null,this.currentImage!==n?null:(this.currentImage=null,n)},r.crossOrigin=null,r}(t.EventDispatcher);e.WebImageLoader=n,__reflect(n.prototype,"egret.web.WebImageLoader",["egret.ImageLoader"]),t.ImageLoader=n}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t._isNeedShow=!1,t.inputElement=null,t.inputDiv=null,t._gscaleX=0,t._gscaleY=0,t.textValue="",t.colorValue=16777215,t._styleInfoes={},t}return __extends(i,e),i.prototype.$setTextField=function(t){return this.$textfield=t,!0},i.prototype.$addToStage=function(){this.htmlInput=t.web.$getTextAdapter(this.$textfield)},i.prototype._initElement=function(){var e=this.$textfield.localToGlobal(0,0),i=e.x,n=e.y,r=this.htmlInput.$scaleX,o=this.htmlInput.$scaleY;this.inputDiv.style.left=i*r+"px",this.inputDiv.style.top=n*o+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=n*o+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*o+"px"):(this.inputDiv.style.top=n*o+"px",this.inputElement.style.top="0px");for(var a=this.$textfield,s=1,l=1,u=0;a.parent;)s*=a.scaleX,l*=a.scaleY,u+=a.rotation,a=a.parent;var h=t.web.getPrefixStyleName("transform");this.inputDiv.style[h]="rotate("+u+"deg)",this._gscaleX=r*s,this._gscaleY=o*l},i.prototype.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},i.prototype.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},i.prototype.$hide=function(){this.htmlInput&&this.htmlInput.disconnectStageText(this)},i.prototype.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.prototype.$setText=function(t){return this.textValue=t,this.resetText(),!0},i.prototype.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},i.prototype.$setColor=function(t){return this.colorValue=t,this.resetColor(),!0},i.prototype.resetColor=function(){this.inputElement&&this.setElementStyle("color",t.toColorString(this.colorValue))},i.prototype.$onBlur=function(){},i.prototype._onInput=function(){var e=this;window.setTimeout((function(){e.inputElement&&e.inputElement.selectionStart==e.inputElement.selectionEnd&&(e.textValue=e.inputElement.value,t.Event.dispatchEvent(e,"updateText",!1))}),0)},i.prototype.setAreaHeight=function(){var e=this.$textfield;if(e.multiline){var i=t.TextFieldUtils.$getTextHeight(e);if(e.height<=e.size)this.setElementStyle("height",e.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",e.size*this._gscaleY+"px");else if(e.height<i)this.setElementStyle("height",e.height*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",(e.size+e.lineSpacing)*this._gscaleY+"px");else{this.setElementStyle("height",(i+e.lineSpacing)*this._gscaleY+"px");var n=(e.height-i)*this._gscaleY,r=n*t.TextFieldUtils.$getValign(e),o=n-r;this.setElementStyle("padding",r+"px 0px "+o+"px 0px"),this.setElementStyle("lineHeight",(e.size+e.lineSpacing)*this._gscaleY+"px")}}},i.prototype._onClickHandler=function(e){this._isNeedShow&&(e.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new t.Event("focus")))},i.prototype._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new t.Event("blur"))},i.prototype.setElementStyle=function(t,e){this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e)},i.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},i.prototype.$resetStageText=function(){if(this.inputElement){var e=this.$textfield;this.setElementStyle("fontFamily",e.fontFamily),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.textAlign),this.setElementStyle("fontSize",e.size*this._gscaleY+"px"),this.setElementStyle("color",t.toColorString(e.textColor));var i=void 0;if(e.stage?(i=e.localToGlobal(0,0).x,i=Math.min(e.width,e.stage.stageWidth-i)):i=e.width,this.setElementStyle("width",i*this._gscaleX+"px"),this.setElementStyle("verticalAlign",e.verticalAlign),e.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.size*this._gscaleY+"px"),e.height<e.size){this.setElementStyle("height",e.size*this._gscaleY+"px");var n=e.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+n+"px 0px")}else{this.setElementStyle("height",e.size*this._gscaleY+"px");var r=(e.height-e.size)*this._gscaleY,o=r*t.TextFieldUtils.$getValign(e);(n=r-o)<e.size/2*this._gscaleY&&(n=e.size/2*this._gscaleY),this.setElementStyle("padding",o+"px 0px "+n+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this._gscaleX+"px "+e.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=e.height*this._gscaleY+"px",this.inputDiv.style.width=i*this._gscaleX+"px"}},i}(t.EventDispatcher);e.HTML5StageText=i,__reflect(i.prototype,"egret.web.HTML5StageText",["egret.StageText"]),t.StageText=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}return e.prototype.isInputOn=function(){return null!=this._stageText},e.prototype.isCurrentStageText=function(t){return this._stageText==t},e.prototype.initValue=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},e.prototype.$updateSize=function(){if(this.canvas){this.$scaleX=t.sys.DisplayList.$canvasScaleX,this.$scaleY=t.sys.DisplayList.$canvasScaleY,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var e=t.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[e]=this.canvas.style[e],this.StageDelegateDiv.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},e.prototype._initStageDelegateDiv=function(e,i){this.canvas=i;var n,r=this;n||(n=document.createElement("div"),this.StageDelegateDiv=n,n.id="StageDelegateDiv",e.appendChild(n),r.initValue(n),r._inputDIV=document.createElement("div"),r.initValue(r._inputDIV),r._inputDIV.style.width="0px",r._inputDIV.style.height="0px",r._inputDIV.style.left="0px",r._inputDIV.style.top="-100px",r._inputDIV.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",n.appendChild(r._inputDIV),this.canvas.addEventListener("click",(function(t){r._needShow?(r._needShow=!1,r._stageText._onClickHandler(t),r.show()):r._inputElement&&(r.clearInputElement(),r._inputElement.blur(),r._inputElement=null)})),r.initInputElement(!0),r.initInputElement(!1))},e.prototype.initInputElement=function(t){var e,i=this;t?((e=document.createElement("textarea")).style.resize="none",i._multiElement=e,e.id="egretTextarea"):(e=document.createElement("input"),i._simpleElement=e,e.id="egretInput"),e.type="text",i._inputDIV.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",i.initValue(e),e.style.outline="thin",e.style.background="none",e.style.overflow="hidden",e.style.wordBreak="break-all",e.style.opacity=0,e.oninput=function(){i._stageText&&i._stageText._onInput()}},e.prototype.show=function(){var e=this._inputElement;t.$callAsync((function(){e.style.opacity=1}),this)},e.prototype.disconnectStageText=function(t){(null==this._stageText||this._stageText==t)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur()),this._needShow=!1},e.prototype.clearInputElement=function(){var t=this;if(t._inputElement){t._inputElement.value="",t._inputElement.onblur=null,t._inputElement.style.width="1px",t._inputElement.style.height="12px",t._inputElement.style.left="0px",t._inputElement.style.top="0px",t._inputElement.style.opacity=0;(t._simpleElement==t._inputElement?t._multiElement:t._simpleElement).style.display="block",t._inputDIV.style.left="0px",t._inputDIV.style.top="-100px",t._inputDIV.style.height="0px",t._inputDIV.style.width="0px"}t._stageText&&(t._stageText._onDisconnect(),t._stageText=null,this.canvas.userTyping=!1)},e.prototype.getInputElement=function(t){var e=this;return e.clearInputElement(),e._stageText=t,this.canvas.userTyping=!0,e._stageText.$textfield.multiline?e._inputElement=e._multiElement:e._inputElement=e._simpleElement,(e._simpleElement==e._inputElement?e._multiElement:e._simpleElement).style.display="none",e._inputElement},e}();e.HTMLInput=i,__reflect(i.prototype,"egret.web.HTMLInput")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){var e={},i={},n={};t.$getTextAdapter=function(t){var r=t.stage?t.stage.$hashCode:0,o=e[r],a=i[r],s=n[r];return a&&s&&(delete i[r],delete n[r]),o},t.$cacheTextAdapter=function(t,r,o,a){t._initStageDelegateDiv(o,a),e[r.$hashCode]=t,i[r.$hashCode]=a,n[r.$hashCode]=o}}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){function i(){(n=t.sys.canvasHitTestBuffer.context).textAlign="left",n.textBaseline="middle"}var n=null;t.sys.measureText=function(t,e,r,o,a){n||i();var s="";return a&&(s+="italic "),o&&(s+="bold "),s+=(r||12)+"px ",s+=e||"Arial",n.font=s,n.measureText(t).width}}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(t,e,i){this.surface=function(t,e){var i=document.createElement("canvas");isNaN(t)||isNaN(e)||(i.width=t,i.height=e);var n=i.getContext("2d");if(void 0===n.imageSmoothingEnabled){for(var r,o=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=o.length-1;a>=0&&void 0===n[r=o[a]];a--);try{Object.defineProperty(n,"imageSmoothingEnabled",{get:function(){return this[r]},set:function(t){this[r]=t}})}catch(t){n.imageSmoothingEnabled=n[r]}}return i}(t,e),this.context=this.surface.getContext("2d"),this.context&&(this.context.$offsetX=0,this.context.$offsetY=0)}return Object.defineProperty(t.prototype,"width",{get:function(){return this.surface.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.surface.height},enumerable:!0,configurable:!0}),t.prototype.resize=function(t,e,i){var n=this.surface;if(i){var r=!1;n.width<t&&(n.width=t,r=!0),n.height<e&&(n.height=e,r=!0),r||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else n.width!=t&&(n.width=t),n.height!=e&&(n.height=e);this.clear()},t.prototype.getPixels=function(t,e,i,n){return void 0===i&&(i=1),void 0===n&&(n=1),this.context.getImageData(t,e,i,n).data},t.prototype.toDataURL=function(t,e){return this.surface.toDataURL(t,e)},t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},t.prototype.destroy=function(){this.surface.width=this.surface.height=0},t}();t.CanvasRenderBuffer=e,__reflect(e.prototype,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(i,n){var r=e.call(this)||this;return r.onTouchBegin=function(t){var e=r.getLocation(t);r.touch.onTouchBegin(e.x,e.y,t.identifier)},r.onMouseMove=function(t){0==t.buttons?r.onTouchEnd(t):r.onTouchMove(t)},r.onTouchMove=function(t){var e=r.getLocation(t);r.touch.onTouchMove(e.x,e.y,t.identifier)},r.onTouchEnd=function(t){var e=r.getLocation(t);r.touch.onTouchEnd(e.x,e.y,t.identifier)},r.scaleX=1,r.scaleY=1,r.rotation=0,r.canvas=n,r.touch=new t.sys.TouchHandler(i),r.addListeners(),r}return __extends(i,e),i.prototype.addListeners=function(){var e=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",(function(t){t.identifier=t.pointerId,e.onTouchBegin(t),e.prevent(t)}),!1),this.canvas.addEventListener("MSPointerMove",(function(t){t.identifier=t.pointerId,e.onTouchMove(t),e.prevent(t)}),!1),this.canvas.addEventListener("MSPointerUp",(function(t){t.identifier=t.pointerId,e.onTouchEnd(t),e.prevent(t)}),!1)):(t.Capabilities.isMobile||this.addMouseListener(),this.addTouchListener())},i.prototype.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},i.prototype.addTouchListener=function(){var t=this;this.canvas.addEventListener("touchstart",(function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchBegin(e.changedTouches[n]);t.prevent(e)}),!1),this.canvas.addEventListener("touchmove",(function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchMove(e.changedTouches[n]);t.prevent(e)}),!1),this.canvas.addEventListener("touchend",(function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchEnd(e.changedTouches[n]);t.prevent(e)}),!1),this.canvas.addEventListener("touchcancel",(function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchEnd(e.changedTouches[n]);t.prevent(e)}),!1)},i.prototype.prevent=function(t){t.stopPropagation(),1==t.isScroll||this.canvas.userTyping||t.preventDefault()},i.prototype.getLocation=function(e){e.identifier=+e.identifier||0;var i=document.documentElement,n=this.canvas.getBoundingClientRect(),r=n.left+window.pageXOffset-i.clientLeft,o=n.top+window.pageYOffset-i.clientTop,a=e.pageX-r,s=a,l=e.pageY-o,u=l;return 90==this.rotation?(s=l,u=n.width-a):-90==this.rotation&&(s=n.height-l,u=a),s/=this.scaleX,u/=this.scaleY,t.$TempPoint.setTo(Math.round(s),Math.round(u))},i.prototype.updateScaleMode=function(t,e,i){this.scaleX=t,this.scaleY=e,this.rotation=i},i.prototype.$updateMaxTouches=function(){this.touch.$initMaxTouches()},i}(t.HashObject);e.WebTouchHandler=i,__reflect(i.prototype,"egret.web.WebTouchHandler")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){t.WebLifeCycleHandler=function(t){}}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){function i(t,e){if(t in e)return"";t=t.charAt(0).toUpperCase()+t.substring(1,t.length);for(var i=["webkit","ms","Moz","O"],n=0;n<i.length;n++){if(i[n]+t in e)return i[n]}return""}var n=function(){function t(){}return t.WEB_AUDIO=2,t.HTML5_AUDIO=3,t}();e.AudioType=n,__reflect(n.prototype,"egret.web.AudioType");var r=function(i){function r(){return i.call(this)||this}return __extends(r,i),r.$init=function(){var i=navigator.userAgent.toLowerCase();r.ua=i,r._canUseBlob=!1;var o=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;if(o)try{e.WebAudioDecode.ctx=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)}catch(t){o=!1}var a,s=r._audioType;s==n.WEB_AUDIO&&o||s==n.HTML5_AUDIO?(a=!1,r.setAudioType(s)):(a=!0,r.setAudioType(n.HTML5_AUDIO)),i.indexOf("android")>=0?a&&o&&r.setAudioType(n.WEB_AUDIO):(i.indexOf("iphone")>=0||i.indexOf("ipad")>=0||i.indexOf("ipod")>=0)&&r.getIOSVersion()>=7&&(r._canUseBlob=!0,a&&o&&r.setAudioType(n.WEB_AUDIO)),window.URL||window.webkitURL||(r._canUseBlob=!1),i.indexOf("egretnative")>=0&&(r.setAudioType(n.HTML5_AUDIO),r._canUseBlob=!0),t.Sound=r._AudioClass},r.setAudioType=function(e){switch(r._audioType=e,e){case n.WEB_AUDIO:r._AudioClass=t.web.WebAudioSound;break;case n.HTML5_AUDIO:r._AudioClass=t.web.HtmlSound}},r.getIOSVersion=function(){var t=r.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/);if(!t||0==t.length)return 0;var e=t[0];return parseInt(e.match(/\d+(_\d)*/)[0])||0},r._canUseBlob=!1,r._audioType=0,r.ua="",r}(t.HashObject);e.Html5Capatibility=r,__reflect(r.prototype,"egret.web.Html5Capatibility");var o=null;e.getPrefixStyleName=function(t,e){var n="";if(null!=e)n=i(t,e);else{if(null==o){var r=document.createElement("div").style;o=i("transform",r)}n=o}return""==n?t:n+t.charAt(0).toUpperCase()+t.substring(1,t.length)},e.getPrefix=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){function i(i){"webgl"==i&&t.WebGLUtils.checkCanUseWebGL()?(t.sys.RenderBuffer=e.WebGLRenderBuffer,t.sys.systemRenderer=new e.WebGLRenderer,t.sys.canvasRenderer=new t.CanvasRenderer,t.sys.customHitTestBuffer=new e.WebGLRenderBuffer(3,3),t.sys.canvasHitTestBuffer=new e.CanvasRenderBuffer(3,3),t.Capabilities.renderMode="webgl"):(t.sys.RenderBuffer=e.CanvasRenderBuffer,t.sys.systemRenderer=new t.CanvasRenderer,t.sys.canvasRenderer=t.sys.systemRenderer,t.sys.customHitTestBuffer=new e.CanvasRenderBuffer(3,3),t.sys.canvasHitTestBuffer=t.sys.customHitTestBuffer,t.Capabilities.renderMode="canvas")}function n(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;e||(e=function(t){return window.setTimeout(t,1e3/60)}),e((function i(){t.update(),e(i)}))}function r(){a=NaN,t.updateAllScreens()}var o=!1;window.isNaN=function(t){return(t=+t)!=t},t.runEgret=function(s){if(!o){o=!0,s||(s={});var l=navigator.userAgent.toLowerCase();if(l.indexOf("egretnative")>=0&&-1==l.indexOf("egretwebview")&&(t.Capabilities.runtimeType=t.RuntimeType.RUNTIME2),l.indexOf("egretnative")>=0&&t.nativeRender)egret_native.addModuleCallback((function(){if(e.Html5Capatibility.$init(),"webgl"==s.renderMode){var o=s.antialias;e.WebGLRenderContext.antialias=!!o}var l;t.sys.CanvasRenderBuffer=e.CanvasRenderBuffer,i(s.renderMode),egret_native.nrSetRenderMode(2),l=s.canvasScaleFactor?s.canvasScaleFactor:s.calculateCanvasScaleFactor?s.calculateCanvasScaleFactor(t.sys.canvasHitTestBuffer.context):window.devicePixelRatio,t.sys.DisplayList.$canvasScaleFactor=l,n(t.ticker),s.screenAdapter?t.sys.screenAdapter=s.screenAdapter:t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.DefaultScreenAdapter);for(var u=document.querySelectorAll(".egret-player"),h=u.length,c=0;h>c;c++){var p=u[c],d=new e.WebPlayer(p,s);p["egret-player"]=d}window.addEventListener("resize",(function(){isNaN(a)&&(a=window.setTimeout(r,300))}))}),null),egret_native.initNativeRender();else{e.Html5Capatibility._audioType=s.audioType,e.Html5Capatibility.$init();var u=s.renderMode;if("webgl"==u){var h=s.antialias;e.WebGLRenderContext.antialias=!!h}t.sys.CanvasRenderBuffer=e.CanvasRenderBuffer,l.indexOf("egretnative")>=0&&"webgl"!=u&&(t.$warn(1051),u="webgl"),i(u);var c=void 0;if(s.canvasScaleFactor)c=s.canvasScaleFactor;else if(s.calculateCanvasScaleFactor)c=s.calculateCanvasScaleFactor(t.sys.canvasHitTestBuffer.context);else{var p=t.sys.canvasHitTestBuffer.context,d=p.backingStorePixelRatio||p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;c=(window.devicePixelRatio||1)/d}t.sys.DisplayList.$canvasScaleFactor=c,n(t.ticker),s.screenAdapter?t.sys.screenAdapter=s.screenAdapter:t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.DefaultScreenAdapter);for(var f=document.querySelectorAll(".egret-player"),g=f.length,y=0;g>y;y++){var v=f[y],m=new e.WebPlayer(v,s);v["egret-player"]=m}window.addEventListener("resize",(function(){isNaN(a)&&(a=window.setTimeout(r,300))}))}}},t.updateAllScreens=function(){if(o)for(var t=document.querySelectorAll(".egret-player"),e=t.length,i=0;e>i;i++){t[i]["egret-player"].updateScreenSize()}};var a=NaN}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(){}return e.detect=function(){var i=t.Capabilities,n=navigator.userAgent.toLowerCase();i.isMobile=-1!=n.indexOf("mobile")||-1!=n.indexOf("android"),i.isMobile?n.indexOf("windows")<0&&(-1!=n.indexOf("iphone")||-1!=n.indexOf("ipad")||-1!=n.indexOf("ipod"))?i.os="iOS":-1!=n.indexOf("android")&&-1!=n.indexOf("linux")?i.os="Android":-1!=n.indexOf("windows")&&(i.os="Windows Phone"):-1!=n.indexOf("windows nt")?i.os="Windows PC":-1!=n.indexOf("mac os")&&(i.os="Mac OS");var r=(navigator.language||navigator.browserLanguage).toLowerCase().split("-");r.length>1&&(r[1]=r[1].toUpperCase()),i.language=r.join("-"),e.injectUIntFixOnIE9()},e.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n<\/script>\r\n\x3c!-- convertResponseBodyToText --\x3e\r\n<script>\r\nlet convertResponseBodyToText = function (binary) {\r\n   let byteMapping = {};\r\n   for ( let i = 0; i < 256; i++ ) {\r\n       for ( let j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   let rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   let lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n<\/script>\r\n")}},e}();e.WebCapability=i,__reflect(i.prototype,"egret.web.WebCapability"),i.detect()}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(e,i,n,r,o){if(this.showPanle=!0,this.fpsHeight=0,this.WIDTH=101,this.HEIGHT=20,this.bgCanvasColor="#18304b",this.fpsFrontColor="#18fefe",this.WIDTH_COST=50,this.cost1Color="#18fefe",this.cost3Color="#ff0000",this.arrFps=[],this.arrCost=[],this.arrLog=[],i||n){"canvas"==t.Capabilities.renderMode?this.renderMode="Canvas":this.renderMode="WebGL",this.panelX=void 0===o.x?0:parseInt(o.x),this.panelY=void 0===o.y?0:parseInt(o.y),this.fontColor=void 0===o.textColor?"#ffffff":o.textColor.replace("0x","#"),this.fontSize=void 0===o.size?12:parseInt(o.size),t.Capabilities.isMobile&&(this.fontSize-=2);var a=document.createElement("div");a.style.position="absolute",a.style.background="rgba(0,0,0,"+o.bgAlpha+")",a.style.left=this.panelX+"px",a.style.top=this.panelY+"px",a.style.pointerEvents="none",document.body.appendChild(a);var s=document.createElement("div");s.style.color=this.fontColor,s.style.fontSize=this.fontSize+"px",s.style.lineHeight=this.fontSize+"px",s.style.margin="4px 4px 4px 4px",this.container=s,a.appendChild(s),i&&this.addFps(),n&&this.addLog()}}return e.prototype.addFps=function(){var t=document.createElement("div");t.style.display="inline-block",this.containerFps=t,this.container.appendChild(t);var e=document.createElement("div");e.style.paddingBottom="2px",this.fps=e,this.containerFps.appendChild(e),e.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var i=document.createElement("canvas");this.containerFps.appendChild(i),i.width=this.WIDTH,i.height=this.HEIGHT,this.canvasFps=i;var n=i.getContext("2d");this.contextFps=n,n.fillStyle=this.bgCanvasColor,n.fillRect(0,0,this.WIDTH,this.HEIGHT);var r=document.createElement("div");this.divDatas=r,this.containerFps.appendChild(r);var o=document.createElement("div");o.style.float="left",o.innerHTML="Draw<br/>Cost",r.appendChild(o);var a=document.createElement("div");a.style.paddingLeft=o.offsetWidth+20+"px",r.appendChild(a);var s=document.createElement("div");this.divDraw=s,s.innerHTML="0<br/>",a.appendChild(s);var l=document.createElement("div");this.divCost=l,l.innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',a.appendChild(l),i=document.createElement("canvas"),this.canvasCost=i,this.containerFps.appendChild(i),i.width=this.WIDTH,i.height=this.HEIGHT,n=i.getContext("2d"),this.contextCost=n,n.fillStyle=this.bgCanvasColor,n.fillRect(0,0,this.WIDTH,this.HEIGHT),n.fillStyle="#000000",n.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},e.prototype.addLog=function(){var t=document.createElement("div");t.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",t.style.wordWrap="break-word",this.log=t,this.container.appendChild(t)},e.prototype.update=function(t,e){var i,n,r;void 0===e&&(e=!1),e?(i=this.arrFps[this.arrFps.length-1],n=this.arrCost[this.arrCost.length-1][0],r=this.arrCost[this.arrCost.length-1][1]):(i=t.fps,n=t.costTicker,r=t.costRender,this.lastNumDraw=t.draw,this.arrFps.push(i),this.arrCost.push([n,r]));var o=0,a=this.arrFps.length;a>101&&(a=101,this.arrFps.shift(),this.arrCost.shift());for(var s=this.arrFps[0],l=this.arrFps[0],u=0;a>u;u++){var h=this.arrFps[u];o+=h,s>h?s=h:h>l&&(l=h)}var c=this.WIDTH,p=this.HEIGHT,d=this.contextFps;d.drawImage(this.canvasFps,1,0,c-1,p,0,0,c-1,p),d.fillStyle=this.bgCanvasColor,d.fillRect(c-1,0,1,p);var f=Math.floor(i/60*20);1>f&&(f=1),d.fillStyle=this.fpsFrontColor,d.fillRect(c-1,20-f,1,f);var g=this.WIDTH_COST;(d=this.contextCost).drawImage(this.canvasCost,1,0,g-1,p,0,0,g-1,p),d.drawImage(this.canvasCost,g+2,0,g-1,p,g+1,0,g-1,p);var y=Math.floor(n/2);1>y?y=1:y>20&&(y=20);var v=Math.floor(r/2);1>v?v=1:v>20&&(v=20),d.fillStyle=this.bgCanvasColor,d.fillRect(g-1,0,1,p),d.fillRect(2*g,0,1,p),d.fillRect(3*g+1,0,1,p),d.fillStyle=this.cost1Color,d.fillRect(g-1,20-y,1,y),d.fillStyle=this.cost3Color,d.fillRect(2*g,20-v,1,v);var m=Math.floor(o/a),$=i+" FPS "+this.renderMode;this.showPanle&&($+="<br/>min"+s+" max"+l+" avg"+m,this.divDraw.innerHTML=this.lastNumDraw+"<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+n+'<font/> <font  style="color:#ff0000">'+r+"<font/>"),this.fps.innerHTML=$},e.prototype.updateInfo=function(t){this.arrLog.push(t),this.updateLogLayout()},e.prototype.updateWarn=function(t){this.arrLog.push("[Warning]"+t),this.updateLogLayout()},e.prototype.updateError=function(t){this.arrLog.push("[Error]"+t),this.updateLogLayout()},e.prototype.updateLogLayout=function(){for(this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},e}();e.WebFps=i,__reflect(i.prototype,"egret.web.WebFps",["egret.FPSDisplay"]),t.FPSDisplay=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){e.web||(e.web={}),e.getItem=function(t){return window.localStorage.getItem(t)},e.setItem=function(e,i){try{return window.localStorage.setItem(e,i),!0}catch(n){return t.$warn(1047,e,i),!1}},e.removeItem=function(t){window.localStorage.removeItem(t)},e.clear=function(){window.localStorage.clear()}}(t.localStorage||(t.localStorage={}))}(egret||(egret={})),function(t){!function(e){var i=function(i){function n(t,e){var n=i.call(this)||this;return n.init(t,e),n.initOrientation(),n}return __extends(n,i),n.prototype.init=function(i,n){var r=this.readOption(i,n),o=new t.Stage;o.$screen=this,o.$scaleMode=r.scaleMode,o.$orientation=r.orientation,o.$maxTouches=r.maxTouches,o.frameRate=r.frameRate,o.textureScaleFactor=r.textureScaleFactor;var a=new t.sys.RenderBuffer(void 0,void 0,!0),s=a.surface;this.attachCanvas(i,s);var l=new e.WebTouchHandler(o,s),u=new t.sys.Player(a,o,r.entryClassName);t.lifecycle.stage=o,t.lifecycle.addLifecycleListener(e.WebLifeCycleHandler);var h=new e.HTMLInput;(r.showFPS||r.showLog)&&(t.nativeRender||u.displayFPS(r.showFPS,r.showLog,r.logFilter,r.fpsStyles)),this.playerOption=r,this.container=i,this.canvas=s,this.stage=o,this.player=u,this.webTouchHandler=l,this.webInput=h,t.web.$cacheTextAdapter(h,o,i,s),this.updateScreenSize(),this.updateMaxTouches(),u.start()},n.prototype.initOrientation=function(){var e=this;window.addEventListener("orientationchange",(function(){window.setTimeout((function(){t.StageOrientationEvent.dispatchStageOrientationEvent(e.stage,t.StageOrientationEvent.ORIENTATION_CHANGE)}),350)}))},n.prototype.readOption=function(e,i){var n={};n.entryClassName=e.getAttribute("data-entry-class"),n.scaleMode=e.getAttribute("data-scale-mode")||t.StageScaleMode.NO_SCALE,n.frameRate=+e.getAttribute("data-frame-rate")||30,n.contentWidth=+e.getAttribute("data-content-width")||480,n.contentHeight=+e.getAttribute("data-content-height")||800,n.orientation=e.getAttribute("data-orientation")||t.OrientationMode.AUTO,n.maxTouches=+e.getAttribute("data-multi-fingered")||2,n.textureScaleFactor=+e.getAttribute("texture-scale-factor")||1,n.showFPS="true"==e.getAttribute("data-show-fps");for(var r=(e.getAttribute("data-show-fps-style")||"").split(","),o={},a=0;a<r.length;a++){var s=r[a].split(":");o[s[0]]=s[1]}return n.fpsStyles=o,n.showLog="true"==e.getAttribute("data-show-log"),n.logFilter=e.getAttribute("data-log-filter"),n},n.prototype.attachCanvas=function(t,e){var i=e.style;i.cursor="inherit",i.position="absolute",i.top="0",i.bottom="0",i.left="0",i.right="0",t.appendChild(e),(i=t.style).overflow="hidden",i.position="absolute"},n.prototype.updateScreenSize=function(){var e=this.canvas;if(!e.userTyping){var i=this.playerOption,n=this.container.getBoundingClientRect(),r=0,o=n.width,a=n.height;if(0!=o&&0!=a){n.top<0&&(a+=n.top,r=-n.top);var s=!1,l=this.stage.$orientation;l!=t.OrientationMode.AUTO&&(s=l!=t.OrientationMode.PORTRAIT&&a>o||l==t.OrientationMode.PORTRAIT&&o>a);var u=s?a:o,h=s?o:a;t.Capabilities.boundingClientWidth=u,t.Capabilities.boundingClientHeight=h;var c=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,u,h,i.contentWidth,i.contentHeight),p=c.stageWidth,d=c.stageHeight,f=c.displayWidth,g=c.displayHeight;e.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",e.width!=p&&(e.width=p),e.height!=d&&(e.height=d);var y=0;s?l==t.OrientationMode.LANDSCAPE?(y=90,e.style.top=r+(a-f)/2+"px",e.style.left=(o+g)/2+"px"):(y=-90,e.style.top=r+(a+f)/2+"px",e.style.left=(o-g)/2+"px"):(e.style.top=r+(a-g)/2+"px",e.style.left=(o-f)/2+"px");var v=f/p,m=g/d,$=v*t.sys.DisplayList.$canvasScaleFactor,b=m*t.sys.DisplayList.$canvasScaleFactor;"canvas"==t.Capabilities.renderMode&&($=Math.ceil($),b=Math.ceil(b));var _=t.Matrix.create();_.identity(),_.scale(v/$,m/b),_.rotate(y*Math.PI/180);var x="matrix("+_.a+","+_.b+","+_.c+","+_.d+","+_.tx+","+_.ty+")";t.Matrix.release(_),e.style[t.web.getPrefixStyleName("transform")]=x,t.sys.DisplayList.$setCanvasScale($,b),this.webTouchHandler.updateScaleMode(v,m,y),this.webInput.$updateSize(),this.player.updateStageSize(p,d),t.nativeRender&&(e.width=p*$,e.height=d*b)}}},n.prototype.setContentSize=function(t,e){var i=this.playerOption;i.contentWidth=t,i.contentHeight=e,this.updateScreenSize()},n.prototype.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},n}(t.HashObject);e.WebPlayer=i,__reflect(i.prototype,"egret.web.WebPlayer",["egret.sys.Screen"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){function i(e,i){r||(r=document.createElement("canvas"),o=r.getContext("2d"));var n=e.$getTextureWidth(),a=e.$getTextureHeight();null==i&&((i=t.$TempRectangle).x=0,i.y=0,i.width=n,i.height=a),i.x=Math.min(i.x,n-1),i.y=Math.min(i.y,a-1),i.width=Math.min(i.width,n-i.x),i.height=Math.min(i.height,a-i.y);var s=i.width,l=i.height,u=r;if(u.style.width=s+"px",u.style.height=l+"px",r.width=s,r.height=l,"webgl"==t.Capabilities.renderMode){var h=void 0;e.$renderBuffer?h=e:(h=new t.RenderTexture).drawToTexture(new t.Bitmap(e));for(var c=h.$renderBuffer.getPixels(i.x,i.y,s,l),p=new ImageData(s,l),d=0;d<c.length;d++)p.data[d]=c[d];return o.putImageData(p,0,0),e.$renderBuffer||h.dispose(),u}var f=e,g=Math.round(f.$offsetX),y=Math.round(f.$offsetY),v=f.$bitmapWidth,m=f.$bitmapHeight;return o.drawImage(f.$bitmapData.source,f.$bitmapX+i.x/t.$TextureScaleFactor,f.$bitmapY+i.y/t.$TextureScaleFactor,v*i.width/n,m*i.height/a,g,y,i.width,i.height),u}function n(e,n,r){try{return i(this,n).toDataURL(e,r)}catch(e){t.$error(1033)}return null}var r,o;t.Texture.prototype.toDataURL=n,t.Texture.prototype.saveToFile=function(t,e,i,r){var o=n.call(this,t,i,r);if(null!=o){var a=o.replace(/^data:image[^;]*/,"data:image/octet-stream"),s=document.createElement("a");s.download=e,s.href=a;var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(l)}},t.Texture.prototype.getPixel32=function(e,i){return t.$warn(1041,"getPixel32","getPixels"),this.getPixels(e,i)},t.Texture.prototype.getPixels=function(e,n,r,a){if(void 0===r&&(r=1),void 0===a&&(a=1),"webgl"==t.Capabilities.renderMode){var s=void 0;return this.$renderBuffer?s=this:(s=new t.RenderTexture).drawToTexture(new t.Bitmap(this)),s.$renderBuffer.getPixels(e,n,r,a)}try{return i(this),o.getImageData(e,n,r,a).data}catch(e){t.$error(1039)}}}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){function i(t,e){if("parsererror"==t.localName)throw new Error(t.textContent);for(var n=new r(t.localName,e,t.prefix,t.namespaceURI,t.nodeName),a=t.attributes,s=n.attributes,l=a.length,u=0;l>u;u++){var h=a[u],c=h.name;0!=c.indexOf("xmlns:")&&(s[c]=h.value,n["$"+c]=h.value)}var p=t.childNodes;l=p.length;var d=n.children;for(u=0;l>u;u++){var f=p[u],g=f.nodeType,y=null;if(1==g)y=i(f,n);else if(3==g){var v=f.textContent.trim();v&&(y=new o(v,n))}y&&d.push(y)}return n}var n=function(t,e){this.nodeType=t,this.parent=e};e.XMLNode=n,__reflect(n.prototype,"egret.web.XMLNode");var r=function(t){function e(e,i,n,r,o){var a=t.call(this,1,i)||this;return a.attributes={},a.children=[],a.localName=e,a.prefix=n,a.namespace=r,a.name=o,a}return __extends(e,t),e}(n);e.XML=r,__reflect(r.prototype,"egret.web.XML");var o=function(t){function e(e,i){var n=t.call(this,3,i)||this;return n.text=e,n}return __extends(e,t),e}(n);e.XMLText=o,__reflect(o.prototype,"egret.web.XMLText");var a=new DOMParser;t.XML={parse:function(t){for(var e=a.parseFromString(t,"text/xml"),n=e.childNodes.length,r=0;n>r;r++){var o=e.childNodes[r];if(1==o.nodeType)return i(o,null)}return null}}}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.onChange=function(e){var n=new t.OrientationEvent(t.Event.CHANGE);n.beta=e.beta,n.gamma=e.gamma,n.alpha=e.alpha,i.dispatchEvent(n)},i}return __extends(i,e),i.prototype.start=function(){window.addEventListener("deviceorientation",this.onChange)},i.prototype.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},i}(t.EventDispatcher);e.WebDeviceOrientation=i,__reflect(i.prototype,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(t.web||(t.web={}))}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation,function(t){!function(e){var i=function(e){function i(i){var n=e.call(this)||this;return n.onUpdate=function(e){var i=new t.GeolocationEvent(t.Event.CHANGE),r=e.coords;i.altitude=r.altitude,i.heading=r.heading,i.accuracy=r.accuracy,i.latitude=r.latitude,i.longitude=r.longitude,i.speed=r.speed,i.altitudeAccuracy=r.altitudeAccuracy,n.dispatchEvent(i)},n.onError=function(e){var i=t.GeolocationEvent.UNAVAILABLE;e.code==e.PERMISSION_DENIED&&(i=t.GeolocationEvent.PERMISSION_DENIED);var r=new t.GeolocationEvent(t.IOErrorEvent.IO_ERROR);r.errorType=i,r.errorMessage=e.message,n.dispatchEvent(r)},n.geolocation=navigator.geolocation,n}return __extends(i,e),i.prototype.start=function(){var e=this.geolocation;e?this.watchId=e.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:t.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},i.prototype.stop=function(){this.geolocation.clearWatch(this.watchId)},i}(t.EventDispatcher);e.WebGeolocation=i,__reflect(i.prototype,"egret.web.WebGeolocation",["egret.Geolocation"]),t.Geolocation=t.web.WebGeolocation}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.onChange=function(e){var n=new t.MotionEvent(t.Event.CHANGE),r={x:e.acceleration.x,y:e.acceleration.y,z:e.acceleration.z},o={x:e.accelerationIncludingGravity.x,y:e.accelerationIncludingGravity.y,z:e.accelerationIncludingGravity.z},a={alpha:e.rotationRate.alpha,beta:e.rotationRate.beta,gamma:e.rotationRate.gamma};n.acceleration=r,n.accelerationIncludingGravity=o,n.rotationRate=a,i.dispatchEvent(n)},i}return __extends(i,e),i.prototype.start=function(){window.addEventListener("devicemotion",this.onChange)},i.prototype.stop=function(){window.removeEventListener("devicemotion",this.onChange)},i}(t.EventDispatcher);e.WebMotion=i,__reflect(i.prototype,"egret.web.WebMotion",["egret.Motion"]),t.Motion=t.web.WebMotion}(t.web||(t.web={}))}(egret||(egret={})),function(t){t.web||(t.web={})}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){this.drawData=[],this.drawDataLen=0}return t.prototype.pushDrawRect=function(){if(0==this.drawDataLen||1!=this.drawData[this.drawDataLen-1].type){var t=this.drawData[this.drawDataLen]||{};t.type=1,t.count=0,this.drawData[this.drawDataLen]=t,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=2},t.prototype.pushDrawTexture=function(t,e,i,n,r){if(void 0===e&&(e=2),i){(o=this.drawData[this.drawDataLen]||{}).type=0,o.texture=t,o.filter=i,o.count=e,o.textureWidth=n,o.textureHeight=r,this.drawData[this.drawDataLen]=o,this.drawDataLen++}else{var o;if(0==this.drawDataLen||0!=this.drawData[this.drawDataLen-1].type||t!=this.drawData[this.drawDataLen-1].texture||this.drawData[this.drawDataLen-1].filter)(o=this.drawData[this.drawDataLen]||{}).type=0,o.texture=t,o.count=0,this.drawData[this.drawDataLen]=o,this.drawDataLen++;this.drawData[this.drawDataLen-1].count+=e}},t.prototype.pushChangeSmoothing=function(t,e){t.smoothing=e;var i=this.drawData[this.drawDataLen]||{};i.type=10,i.texture=t,i.smoothing=e,this.drawData[this.drawDataLen]=i,this.drawDataLen++},t.prototype.pushPushMask=function(t){void 0===t&&(t=1);var e=this.drawData[this.drawDataLen]||{};e.type=2,e.count=2*t,this.drawData[this.drawDataLen]=e,this.drawDataLen++},t.prototype.pushPopMask=function(t){void 0===t&&(t=1);var e=this.drawData[this.drawDataLen]||{};e.type=3,e.count=2*t,this.drawData[this.drawDataLen]=e,this.drawDataLen++},t.prototype.pushSetBlend=function(t){for(var e=!1,i=this.drawDataLen-1;i>=0;i--){var n=this.drawData[i];if(n){if((0==n.type||1==n.type)&&(e=!0),!e&&4==n.type){this.drawData.splice(i,1),this.drawDataLen--;continue}if(4==n.type){if(n.value==t)return;break}}}var r=this.drawData[this.drawDataLen]||{};r.type=4,r.value=t,this.drawData[this.drawDataLen]=r,this.drawDataLen++},t.prototype.pushResize=function(t,e,i){var n=this.drawData[this.drawDataLen]||{};n.type=5,n.buffer=t,n.width=e,n.height=i,this.drawData[this.drawDataLen]=n,this.drawDataLen++},t.prototype.pushClearColor=function(){var t=this.drawData[this.drawDataLen]||{};t.type=6,this.drawData[this.drawDataLen]=t,this.drawDataLen++},t.prototype.pushActivateBuffer=function(t){for(var e=!1,i=this.drawDataLen-1;i>=0;i--){var n=this.drawData[i];!n||(4!=n.type&&7!=n.type&&(e=!0),e||7!=n.type)||(this.drawData.splice(i,1),this.drawDataLen--)}var r=this.drawData[this.drawDataLen]||{};r.type=7,r.buffer=t,r.width=t.rootRenderTarget.width,r.height=t.rootRenderTarget.height,this.drawData[this.drawDataLen]=r,this.drawDataLen++},t.prototype.pushEnableScissor=function(t,e,i,n){var r=this.drawData[this.drawDataLen]||{};r.type=8,r.x=t,r.y=e,r.width=i,r.height=n,this.drawData[this.drawDataLen]=r,this.drawDataLen++},t.prototype.pushDisableScissor=function(){var t=this.drawData[this.drawDataLen]||{};t.type=9,this.drawData[this.drawDataLen]=t,this.drawDataLen++},t.prototype.clear=function(){for(var t=0;t<this.drawDataLen;t++){var e=this.drawData[t];e.type=0,e.count=0,e.texture=null,e.filter=null,e.uv=null,e.value="",e.buffer=null,e.width=0,e.height=0}this.drawDataLen=0},t}();t.WebGLDrawCmdManager=e,__reflect(e.prototype,"egret.web.WebGLDrawCmdManager")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){this.size=2e3,this.vertexMaxSize=4*this.size,this.indicesMaxSize=6*this.size,this.vertSize=5,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1;var t=this.vertexMaxSize*this.vertSize,e=this.indicesMaxSize;this.vertices=new Float32Array(t),this.indices=new Uint16Array(e),this.indicesForMesh=new Uint16Array(e);for(var i=0,n=0;e>i;i+=6,n+=4)this.indices[i+0]=n+0,this.indices[i+1]=n+1,this.indices[i+2]=n+2,this.indices[i+3]=n+0,this.indices[i+4]=n+2,this.indices[i+5]=n+3}return t.prototype.reachMaxSize=function(t,e){return void 0===t&&(t=4),void 0===e&&(e=6),this.vertexIndex>this.vertexMaxSize-t||this.indexIndex>this.indicesMaxSize-e},t.prototype.getVertices=function(){return this.vertices.subarray(0,this.vertexIndex*this.vertSize)},t.prototype.getIndices=function(){return this.indices},t.prototype.getMeshIndices=function(){return this.indicesForMesh},t.prototype.changeToMeshIndices=function(){if(!this.hasMesh){for(var t=0,e=this.indexIndex;e>t;++t)this.indicesForMesh[t]=this.indices[t];this.hasMesh=!0}},t.prototype.isMesh=function(){return this.hasMesh},t.prototype.cacheArrays=function(t,e,i,n,r,o,a,s,l,u,h,c,p,d,f){var g=t.globalAlpha,y=t.globalMatrix,v=y.a,m=y.b,$=y.c,b=y.d,_=y.tx,x=y.ty,T=t.$offsetX,E=t.$offsetY;if((0!=T||0!=E)&&(_=T*v+E*$+_,x=T*m+E*b+x),!p){(0!=o||0!=a)&&(_=o*v+a*$+_,x=o*m+a*b+x);var S=s/n;1!=S&&(v*=S,m*=S);var C=l/r;1!=C&&($*=C,b*=C)}if(p){var w,P=this.vertices,D=this.vertexIndex*this.vertSize,L=0,I=0,O=0,R=0,N=0,A=0;for(L=0,w=c.length;w>L;L+=2)I=D+5*L/2,N=p[L],A=p[L+1],O=c[L],R=c[L+1],P[I+0]=v*N+$*A+_,P[I+1]=m*N+b*A+x,f?(P[I+2]=(e+(1-R)*r)/u,P[I+3]=(i+O*n)/h):(P[I+2]=(e+O*n)/u,P[I+3]=(i+R*r)/h),P[I+4]=g;if(this.hasMesh)for(var M=0,B=d.length;B>M;++M)this.indicesForMesh[this.indexIndex+M]=d[M]+this.vertexIndex;this.vertexIndex+=c.length/2,this.indexIndex+=d.length}else{var k=u,F=h,j=n,H=r;e/=k,i/=F;P=this.vertices,D=this.vertexIndex*this.vertSize;if(f){var U=n;n=r/k,r=U/F,P[D++]=_,P[D++]=x,P[D++]=n+e,P[D++]=i,P[D++]=g,P[D++]=v*j+_,P[D++]=m*j+x,P[D++]=n+e,P[D++]=r+i,P[D++]=g,P[D++]=v*j+$*H+_,P[D++]=b*H+m*j+x,P[D++]=e,P[D++]=r+i,P[D++]=g,P[D++]=$*H+_,P[D++]=b*H+x,P[D++]=e,P[D++]=i,P[D++]=g}else n/=k,r/=F,P[D++]=_,P[D++]=x,P[D++]=e,P[D++]=i,P[D++]=g,P[D++]=v*j+_,P[D++]=m*j+x,P[D++]=n+e,P[D++]=i,P[D++]=g,P[D++]=v*j+$*H+_,P[D++]=b*H+m*j+x,P[D++]=n+e,P[D++]=r+i,P[D++]=g,P[D++]=$*H+_,P[D++]=b*H+x,P[D++]=e,P[D++]=r+i,P[D++]=g;if(this.hasMesh){var G=this.indicesForMesh;G[this.indexIndex+0]=0+this.vertexIndex,G[this.indexIndex+1]=1+this.vertexIndex,G[this.indexIndex+2]=2+this.vertexIndex,G[this.indexIndex+3]=0+this.vertexIndex,G[this.indexIndex+4]=2+this.vertexIndex,G[this.indexIndex+5]=3+this.vertexIndex}this.vertexIndex+=4,this.indexIndex+=6}},t.prototype.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},t}();t.WebGLVertexArrayObject=e,__reflect(e.prototype,"egret.web.WebGLVertexArrayObject")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(t,i,n){var r=e.call(this)||this;return r.clearColor=[0,0,0,0],r.useFrameBuffer=!0,r.gl=t,r.width=i||1,r.height=n||1,r}return __extends(i,e),i.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.frameBuffer&&(i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null)),this.stencilBuffer&&(i.deleteRenderbuffer(this.stencilBuffer),this.stencilBuffer=null)},i.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer())},i.prototype.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},i.prototype.initFrameBuffer=function(){if(!this.frameBuffer){var t=this.gl;this.texture=this.createTexture(),this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}},i.prototype.createTexture=function(){var t=this.gl,e=t.createTexture();return e.glContext=t,t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e},i.prototype.clear=function(t){var e=this.gl;t&&this.activate(),e.colorMask(!0,!0,!0,!0),e.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),e.clear(e.COLOR_BUFFER_BIT)},i.prototype.enabledStencil=function(){if(this.frameBuffer&&!this.stencilBuffer){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer)}},i.prototype.dispose=function(){t.WebGLUtils.deleteWebGLTexture(this.texture)},i}(t.HashObject);e.WebGLRenderTarget=i,__reflect(i.prototype,"egret.web.WebGLRenderTarget")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function i(i,n){if(this.glID=null,this.projectionX=NaN,this.projectionY=NaN,this.contextLost=!1,this.$scissorState=!1,this.vertSize=5,this.surface=function(t,e){var i=document.createElement("canvas");return isNaN(t)||isNaN(e)||(i.width=t,i.height=e),i}(i,n),!t.nativeRender){this.initWebGL(),this.$bufferStack=[];var r=this.context;this.vertexBuffer=r.createBuffer(),this.indexBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new e.WebGLDrawCmdManager,this.vao=new e.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over")}}return i.getInstance=function(t,e){return this.instance||(this.instance=new i(t,e)),this.instance},i.prototype.pushBuffer=function(t){this.$bufferStack.push(t),t!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(t)),this.currentBuffer=t},i.prototype.popBuffer=function(){if(!(this.$bufferStack.length<=1)){var t=this.$bufferStack.pop(),e=this.$bufferStack[this.$bufferStack.length-1];t!=e&&this.drawCmdManager.pushActivateBuffer(e),this.currentBuffer=e}},i.prototype.activateBuffer=function(t,e,i){t.rootRenderTarget.activate(),this.bindIndices||this.uploadIndicesArray(this.vao.getIndices()),t.restoreStencil(),t.restoreScissor(),this.onResize(e,i)},i.prototype.uploadVerticesArray=function(t){var e=this.context;e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW)},i.prototype.uploadIndicesArray=function(t){var e=this.context;e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),this.bindIndices=!0},i.prototype.destroy=function(){this.surface.width=this.surface.height=0},i.prototype.onResize=function(t,e){t=t||this.surface.width,e=e||this.surface.height,this.projectionX=t/2,this.projectionY=-e/2,this.context&&this.context.viewport(0,0,t,e)},i.prototype.resize=function(t,e,i){var n=this.surface;i?(n.width<t&&(n.width=t),n.height<e&&(n.height=e)):(n.width!=t&&(n.width=t),n.height!=e&&(n.height=e)),this.onResize()},i.prototype.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext();var t=this.context;this.$maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)},i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},i.prototype.getWebGLContext=function(){for(var e,n={antialias:i.antialias,stencil:!0},r=["webgl","experimental-webgl"],o=0;o<r.length;o++){try{e=this.surface.getContext(r[o],n)}catch(t){}if(e)break}e||t.$error(1021),this.setContext(e)},i.prototype.setContext=function(t){this.context=t,t.id=i.glContextId++,this.glID=t.id,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,!0),t.activeTexture(t.TEXTURE0)},i.prototype.enableStencilTest=function(){var t=this.context;t.enable(t.STENCIL_TEST)},i.prototype.disableStencilTest=function(){var t=this.context;t.disable(t.STENCIL_TEST)},i.prototype.enableScissorTest=function(t){var e=this.context;e.enable(e.SCISSOR_TEST),e.scissor(t.x,t.y,t.width,t.height)},i.prototype.disableScissorTest=function(){var t=this.context;t.disable(t.SCISSOR_TEST)},i.prototype.getPixels=function(t,e,i,n,r){var o=this.context;o.readPixels(t,e,i,n,o.RGBA,o.UNSIGNED_BYTE,r)},i.prototype.createTexture=function(t){var e=this.context,i=e.createTexture();return i?(i.glContext=e,e.bindTexture(e.TEXTURE_2D,i),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i):void(this.contextLost=!0)},i.prototype.createTextureFromCompressedData=function(t,e,i,n,r){return null},i.prototype.updateTexture=function(t,e){var i=this.context;i.bindTexture(i.TEXTURE_2D,t),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)},i.prototype.getWebGLTexture=function(t){return t.webGLTexture||("image"==t.format?t.webGLTexture=this.createTexture(t.source):"pvr"==t.format&&(t.webGLTexture=this.createTextureFromCompressedData(t.source.pvrtcData,t.width,t.height,t.source.mipmapsCount,t.source.format)),t.$deleteSource&&t.webGLTexture&&(t.source=null),t.webGLTexture&&(t.webGLTexture.smoothing=!0)),t.webGLTexture},i.prototype.clearRect=function(t,e,i,n){if(0!=t||0!=e||i!=this.surface.width||n!=this.surface.height){var r=this.currentBuffer;if(r.$hasScissor)this.setGlobalCompositeOperation("destination-out"),this.drawRect(t,e,i,n),this.setGlobalCompositeOperation("source-over");else{var o=r.globalMatrix;0==o.b&&0==o.c?(t=t*o.a+o.tx,e=e*o.d+o.ty,i*=o.a,n*=o.d,this.enableScissor(t,-e-n+r.height,i,n),this.clear(),this.disableScissor()):(this.setGlobalCompositeOperation("destination-out"),this.drawRect(t,e,i,n),this.setGlobalCompositeOperation("source-over"))}}else this.clear()},i.prototype.setGlobalCompositeOperation=function(t){this.drawCmdManager.pushSetBlend(t)},i.prototype.drawImage=function(t,e,i,n,r,o,a,s,l,u,h,c,p){var d=this.currentBuffer;if(!this.contextLost&&t&&d){var f,g,y;if(t.texture||t.source&&t.source.texture)f=t.texture||t.source.texture,d.saveTransform(),g=d.$offsetX,y=d.$offsetY,d.useOffset(),d.transform(1,0,0,-1,0,l+2*a);else{if(!t.source&&!t.webGLTexture)return;f=this.getWebGLTexture(t)}f&&(this.drawTexture(f,e,i,n,r,o,a,s,l,u,h,void 0,void 0,void 0,void 0,c,p),t.source&&t.source.texture&&(d.$offsetX=g,d.$offsetY=y,d.restoreTransform()))}},i.prototype.drawMesh=function(t,e,i,n,r,o,a,s,l,u,h,c,p,d,f,g,y){var v=this.currentBuffer;if(!this.contextLost&&t&&v){var m,$,b;if(t.texture||t.source&&t.source.texture)m=t.texture||t.source.texture,v.saveTransform(),$=v.$offsetX,b=v.$offsetY,v.useOffset(),v.transform(1,0,0,-1,0,l+2*a);else{if(!t.source&&!t.webGLTexture)return;m=this.getWebGLTexture(t)}m&&(this.drawTexture(m,e,i,n,r,o,a,s,l,u,h,c,p,d,f,g,y),(t.texture||t.source&&t.source.texture)&&(v.$offsetX=$,v.$offsetY=b,v.restoreTransform()))}},i.prototype.drawTexture=function(t,e,i,n,r,o,a,s,l,u,h,c,p,d,f,g,y){var v=this.currentBuffer;if(!this.contextLost&&t&&v){p&&d?this.vao.reachMaxSize(p.length/2,d.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),null!=y&&t.smoothing!=y&&this.drawCmdManager.pushChangeSmoothing(t,y),c&&this.vao.changeToMeshIndices();var m=d?d.length/3:2;this.drawCmdManager.pushDrawTexture(t,m,this.$filter,u,h),this.vao.cacheArrays(v,e,i,n,r,o,a,s,l,u,h,c,p,d,g)}},i.prototype.drawRect=function(t,e,i,n){var r=this.currentBuffer;!this.contextLost&&r&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),this.vao.cacheArrays(r,0,0,i,n,t,e,i,n,i,n))},i.prototype.pushMask=function(t,e,i,n){var r=this.currentBuffer;!this.contextLost&&r&&(r.$stencilList.push({x:t,y:e,width:i,height:n}),this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushPushMask(),this.vao.cacheArrays(r,0,0,i,n,t,e,i,n,i,n))},i.prototype.popMask=function(){var t=this.currentBuffer;if(!this.contextLost&&t){var e=t.$stencilList.pop();this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushPopMask(),this.vao.cacheArrays(t,0,0,e.width,e.height,e.x,e.y,e.width,e.height,e.width,e.height)}},i.prototype.clear=function(){this.drawCmdManager.pushClearColor()},i.prototype.enableScissor=function(t,e,i,n){var r=this.currentBuffer;this.drawCmdManager.pushEnableScissor(t,e,i,n),r.$hasScissor=!0},i.prototype.disableScissor=function(){var t=this.currentBuffer;this.drawCmdManager.pushDisableScissor(),t.$hasScissor=!1},i.prototype.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var t=this.drawCmdManager.drawDataLen,e=0,i=0;t>i;i++){var n=this.drawCmdManager.drawData[i];e=this.drawData(n,e),7==n.type&&(this.activatedBuffer=n.buffer),(0==n.type||1==n.type||2==n.type||3==n.type)&&this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},i.prototype.drawData=function(t,i){if(t){var n,r=this.context,o=t.filter;switch(t.type){case 0:o?"custom"===o.type?n=e.EgretWebGLProgram.getProgram(r,o.$vertexSrc,o.$fragmentSrc,o.$shaderKey):"colorTransform"===o.type?n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.colorTransform_frag,"colorTransform"):"blurX"===o.type||"blurY"===o.type?n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.blur_frag,"blur"):"glow"===o.type&&(n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.glow_frag,"glow")):n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.texture_frag,"texture"),this.activeProgram(r,n),this.syncUniforms(n,o,t.textureWidth,t.textureHeight),i+=this.drawTextureElements(t,i);break;case 1:n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(r,n),this.syncUniforms(n,o,t.textureWidth,t.textureHeight),i+=this.drawRectElements(t,i);break;case 2:n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(r,n),this.syncUniforms(n,o,t.textureWidth,t.textureHeight),i+=this.drawPushMaskElements(t,i);break;case 3:n=e.EgretWebGLProgram.getProgram(r,e.EgretShaderLib.default_vert,e.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(r,n),this.syncUniforms(n,o,t.textureWidth,t.textureHeight),i+=this.drawPopMaskElements(t,i);break;case 4:this.setBlendMode(t.value);break;case 5:t.buffer.rootRenderTarget.resize(t.width,t.height),this.onResize(t.width,t.height);break;case 6:if(this.activatedBuffer){var a=this.activatedBuffer.rootRenderTarget;(0!=a.width||0!=a.height)&&a.clear(!0)}break;case 7:this.activateBuffer(t.buffer,t.width,t.height);break;case 8:var s=this.activatedBuffer;s&&(s.rootRenderTarget&&s.rootRenderTarget.enabledStencil(),s.enableScissor(t.x,t.y,t.width,t.height));break;case 9:(s=this.activatedBuffer)&&s.disableScissor();break;case 10:r.bindTexture(r.TEXTURE_2D,t.texture),t.smoothing?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST))}return i}},i.prototype.activeProgram=function(t,e){if(e!=this.currentProgram){t.useProgram(e.id);var i=e.attributes;for(var n in i)"aVertexPosition"===n?(t.vertexAttribPointer(i.aVertexPosition.location,2,t.FLOAT,!1,20,0),t.enableVertexAttribArray(i.aVertexPosition.location)):"aTextureCoord"===n?(t.vertexAttribPointer(i.aTextureCoord.location,2,t.FLOAT,!1,20,8),t.enableVertexAttribArray(i.aTextureCoord.location)):"aColor"===n&&(t.vertexAttribPointer(i.aColor.location,1,t.FLOAT,!1,20,16),t.enableVertexAttribArray(i.aColor.location));this.currentProgram=e}},i.prototype.syncUniforms=function(t,e,i,n){var r=t.uniforms;for(var o in e&&e.type,r)if("projectionVector"===o)r[o].setValue({x:this.projectionX,y:this.projectionY});else if("uTextureSize"===o)r[o].setValue({x:i,y:n});else if("uSampler"===o);else{var a=e.$uniforms[o];void 0!==a&&r[o].setValue(a)}},i.prototype.drawTextureElements=function(t,e){var i=this.context;i.bindTexture(i.TEXTURE_2D,t.texture);var n=3*t.count;return i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*e),n},i.prototype.drawRectElements=function(t,e){var i=this.context,n=3*t.count;return i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*e),n},i.prototype.drawPushMaskElements=function(t,e){var i=this.context,n=3*t.count,r=this.activatedBuffer;if(r){r.rootRenderTarget&&r.rootRenderTarget.enabledStencil(),0==r.stencilHandleCount&&(r.enableStencil(),i.clear(i.STENCIL_BUFFER_BIT));var o=r.stencilHandleCount;r.stencilHandleCount++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR),i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*e),i.stencilFunc(i.EQUAL,o+1,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}return n},i.prototype.drawPopMaskElements=function(t,e){var i=this.context,n=3*t.count,r=this.activatedBuffer;if(r)if(r.stencilHandleCount--,0==r.stencilHandleCount)r.disableStencil();else{var o=r.stencilHandleCount;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR),i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*e),i.stencilFunc(i.EQUAL,o,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}return n},i.prototype.setBlendMode=function(t){var e=this.context,n=i.blendModesForGL[t];n&&e.blendFunc(n[0],n[1])},i.prototype.drawTargetWidthFilters=function(t,i){var n,r=i,o=t.length;if(o>1)for(var a=0;o-1>a;a++){var s=t[a],l=i.rootRenderTarget.width,u=i.rootRenderTarget.height;(n=e.WebGLRenderBuffer.create(l,u)).setTransform(1,0,0,1,0,0),n.globalAlpha=1,this.drawToRenderTarget(s,i,n),i!=r&&e.WebGLRenderBuffer.release(i),i=n}var h=t[o-1];this.drawToRenderTarget(h,i,this.currentBuffer),i!=r&&e.WebGLRenderBuffer.release(i)},i.prototype.drawToRenderTarget=function(t,i,n){if(!this.contextLost){this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(n);var r,o=i,a=i.rootRenderTarget.width,s=i.rootRenderTarget.height;if("blur"==t.type){var l=t.blurXFilter,u=t.blurYFilter;0!=l.blurX&&0!=u.blurY?((r=e.WebGLRenderBuffer.create(a,s)).setTransform(1,0,0,1,0,0),r.globalAlpha=1,this.drawToRenderTarget(t.blurXFilter,i,r),i!=o&&e.WebGLRenderBuffer.release(i),i=r,t=u):t=0===l.blurX?u:l}n.saveTransform(),n.transform(1,0,0,-1,0,s),this.vao.cacheArrays(n,0,0,a,s,0,0,a,s,a,s),n.restoreTransform(),this.drawCmdManager.pushDrawTexture(i.rootRenderTarget.texture,2,t,a,s),i!=o&&e.WebGLRenderBuffer.release(i),this.popBuffer()}},i.initBlendMode=function(){i.blendModesForGL={},i.blendModesForGL["source-over"]=[1,771],i.blendModesForGL.lighter=[1,1],i.blendModesForGL["lighter-in"]=[770,771],i.blendModesForGL["destination-out"]=[0,771],i.blendModesForGL["destination-in"]=[0,770]},i.glContextId=0,i.blendModesForGL=null,i}();e.WebGLRenderContext=i,__reflect(i.prototype,"egret.web.WebGLRenderContext"),i.initBlendMode()}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=function(i){function r(n,r,o){var a=i.call(this)||this;if(a.globalAlpha=1,a.stencilState=!1,a.$stencilList=[],a.stencilHandleCount=0,a.$scissorState=!1,a.scissorRect=new t.Rectangle,a.$hasScissor=!1,a.$drawCalls=0,a.$computeDrawCall=!1,a.globalMatrix=new t.Matrix,a.savedGlobalMatrix=new t.Matrix,a.$offsetX=0,a.$offsetY=0,a.context=e.WebGLRenderContext.getInstance(n,r),t.nativeRender)return a.surface=o?a.context.surface:new egret_native.NativeRenderSurface(a,n,r,o),a.rootRenderTarget=null,a;if(a.rootRenderTarget=new e.WebGLRenderTarget(a.context.context,3,3),n&&r&&a.resize(n,r),a.root=o,a.root)a.context.pushBuffer(a),a.surface=a.context.surface,a.$computeDrawCall=!0;else{var s=a.context.activatedBuffer;s&&s.rootRenderTarget.activate(),a.rootRenderTarget.initFrameBuffer(),a.surface=a.rootRenderTarget}return a}return __extends(r,i),r.prototype.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},r.prototype.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},r.prototype.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},r.prototype.enableScissor=function(t,e,i,n){this.$scissorState||(this.$scissorState=!0,this.scissorRect.setTo(t,e,i,n),this.context.enableScissorTest(this.scissorRect))},r.prototype.disableScissor=function(){this.$scissorState&&(this.$scissorState=!1,this.scissorRect.setEmpty(),this.context.disableScissorTest())},r.prototype.restoreScissor=function(){this.$scissorState?this.context.enableScissorTest(this.scissorRect):this.context.disableScissorTest()},Object.defineProperty(r.prototype,"width",{get:function(){return t.nativeRender?this.surface.width:this.rootRenderTarget.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return t.nativeRender?this.surface.height:this.rootRenderTarget.height},enumerable:!0,configurable:!0}),r.prototype.resize=function(e,i,n){return e=e||1,i=i||1,t.nativeRender?void this.surface.resize(e,i):(this.context.pushBuffer(this),(e!=this.rootRenderTarget.width||i!=this.rootRenderTarget.height)&&(this.context.drawCmdManager.pushResize(this,e,i),this.rootRenderTarget.width=e,this.rootRenderTarget.height=i),this.root&&this.context.resize(e,i,n),this.context.clear(),void this.context.popBuffer())},r.prototype.getPixels=function(e,i,n,r){void 0===n&&(n=1),void 0===r&&(r=1);var o=new Uint8Array(4*n*r);if(t.nativeRender)egret_native.activateBuffer(this),egret_native.nrGetPixels(e,i,n,r,o),egret_native.activateBuffer(null);else{var a=this.rootRenderTarget.useFrameBuffer;this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(e,i,n,r,o),this.rootRenderTarget.useFrameBuffer=a,this.rootRenderTarget.activate()}for(var s=new Uint8Array(4*n*r),l=0;r>l;l++)for(var u=0;n>u;u++){var h=4*(n*(r-l-1)+u),c=4*(n*l+u),p=o[c+3];s[h]=Math.round(o[c]/p*255),s[h+1]=Math.round(o[c+1]/p*255),s[h+2]=Math.round(o[c+2]/p*255),s[h+3]=o[c+3]}return s},r.prototype.toDataURL=function(t,e){return this.context.surface.toDataURL(t,e)},r.prototype.destroy=function(){this.context.destroy()},r.prototype.onRenderFinish=function(){this.$drawCalls=0},r.prototype.drawFrameBufferToSurface=function(t,e,i,n,r,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,t,e,i,n,r,o,a,s,i,n,!1),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},r.prototype.drawSurfaceToFrameBuffer=function(t,e,i,n,r,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.context.surface,t,e,i,n,r,o,a,s,i,n,!1),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},r.prototype.clear=function(){this.context.pushBuffer(this),this.context.clear(),this.context.popBuffer()},r.prototype.setTransform=function(t,e,i,n,r,o){var a=this.globalMatrix;a.a=t,a.b=e,a.c=i,a.d=n,a.tx=r,a.ty=o},r.prototype.transform=function(t,e,i,n,r,o){var a=this.globalMatrix,s=a.a,l=a.b,u=a.c,h=a.d;(1!=t||0!=e||0!=i||1!=n)&&(a.a=t*s+e*u,a.b=t*l+e*h,a.c=i*s+n*u,a.d=i*l+n*h),a.tx=r*s+o*u+a.tx,a.ty=r*l+o*h+a.ty},r.prototype.useOffset=function(){var t=this;(0!=t.$offsetX||0!=t.$offsetY)&&(t.globalMatrix.append(1,0,0,1,t.$offsetX,t.$offsetY),t.$offsetX=t.$offsetY=0)},r.prototype.saveTransform=function(){var t=this.globalMatrix,e=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},r.prototype.restoreTransform=function(){var t=this.globalMatrix,e=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},r.create=function(t,e){var i=n.pop();if(i){i.resize(t,e);var o=i.globalMatrix;o.a=1,o.b=0,o.c=0,o.d=1,o.tx=0,o.ty=0,i.globalAlpha=1,i.$offsetX=0,i.$offsetY=0}else(i=new r(t,e)).$computeDrawCall=!1;return i},r.release=function(t){n.push(t)},r.autoClear=!0,r}(t.HashObject);e.WebGLRenderBuffer=i,__reflect(i.prototype,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var n=[]}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(e){var i=["source-over","lighter","destination-out"],n="source-over",r=[],o=function(){function o(){this.nestLevel=0}return o.prototype.render=function(e,i,n,o){this.nestLevel++;var a=i,s=a.context;s.pushBuffer(a),a.transform(n.a,n.b,n.c,n.d,0,0),this.drawDisplayObject(e,a,n.tx,n.ty,!0),s.$drawWebGL();var l=a.$drawCalls;a.onRenderFinish(),s.popBuffer();var u=t.Matrix.create();if(n.$invertInto(u),a.transform(u.a,u.b,u.c,u.d,0,0),t.Matrix.release(u),this.nestLevel--,0===this.nestLevel){r.length>6&&(r.length=6);for(var h=r.length,c=0;h>c;c++)r[c].resize(0,0)}return l},o.prototype.drawDisplayObject=function(e,i,n,r,o){var a,s=0,l=e.$displayList;if(l&&!o?((e.$cacheDirty||e.$renderDirty||l.$canvasScaleX!=t.sys.DisplayList.$canvasScaleX||l.$canvasScaleY!=t.sys.DisplayList.$canvasScaleY)&&(s+=l.drawToSurface()),a=l.$renderNode):a=e.$renderDirty?e.$getRenderNode():e.$renderNode,e.$cacheDirty=!1,a){switch(s++,i.$offsetX=n,i.$offsetY=r,a.type){case 1:this.renderBitmap(a,i);break;case 2:this.renderText(a,i);break;case 3:this.renderGraphics(a,i);break;case 4:this.renderGroup(a,i);break;case 5:this.renderMesh(a,i);break;case 6:this.renderNormalBitmap(a,i)}i.$offsetX=0,i.$offsetY=0}if(l&&!o)return s;var u=e.$children;if(u)for(var h=u.length,c=0;h>c;c++){var p=u[c],d=void 0,f=void 0,g=void 0;1!=p.$alpha&&(g=i.globalAlpha,i.globalAlpha*=p.$alpha);var y=void 0;if(p.$useTranslate){var v=p.$getMatrix();d=n+p.$x,f=r+p.$y;var m=i.globalMatrix;(y=t.Matrix.create()).a=m.a,y.b=m.b,y.c=m.c,y.d=m.d,y.tx=m.tx,y.ty=m.ty,i.transform(v.a,v.b,v.c,v.d,d,f),d=-p.$anchorOffsetX,f=-p.$anchorOffsetY}else d=n+p.$x-p.$anchorOffsetX,f=r+p.$y-p.$anchorOffsetY;switch(p.$renderMode){case 1:break;case 2:s+=this.drawWithFilter(p,i,d,f);break;case 3:s+=this.drawWithClip(p,i,d,f);break;case 4:s+=this.drawWithScrollRect(p,i,d,f);break;default:s+=this.drawDisplayObject(p,i,d,f)}if(g&&(i.globalAlpha=g),y)(v=i.globalMatrix).a=y.a,v.b=y.b,v.c=y.c,v.d=y.d,v.tx=y.tx,v.ty=y.ty,t.Matrix.release(y)}return s},o.prototype.drawWithFilter=function(e,o,a,s){var l=0;if(e.$children&&0==e.$children.length&&(!e.$renderNode||0==e.$renderNode.$getRenderCount()))return l;var u,h=e.$filters,c=0!==e.$blendMode;c&&((u=i[e.$blendMode])||(u=n));var p=e.$getOriginalBounds(),d=p.x,f=p.y,g=p.width,y=p.height;if(0>=g||0>=y)return l;if(!e.mask&&1==h.length&&("colorTransform"==h[0].type||"custom"===h[0].type&&0===h[0].padding)){var v=this.getRenderCount(e);if(!e.$children||1==v)return c&&o.context.setGlobalCompositeOperation(u),o.context.$filter=h[0],l+=e.$mask?this.drawWithClip(e,o,a,s):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,o,a,s):this.drawDisplayObject(e,o,a,s),o.context.$filter=null,c&&o.context.setGlobalCompositeOperation(n),l}var m=this.createRenderBuffer(g,y);if(m.context.pushBuffer(m),l+=e.$mask?this.drawWithClip(e,m,-d,-f):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,m,-d,-f):this.drawDisplayObject(e,m,-d,-f),m.context.popBuffer(),l>0){c&&o.context.setGlobalCompositeOperation(u),l++,o.$offsetX=a+d,o.$offsetY=s+f;var $=t.Matrix.create(),b=o.globalMatrix;$.a=b.a,$.b=b.b,$.c=b.c,$.d=b.d,$.tx=b.tx,$.ty=b.ty,o.useOffset(),o.context.drawTargetWidthFilters(h,m),b.a=$.a,b.b=$.b,b.c=$.c,b.d=$.d,b.tx=$.tx,b.ty=$.ty,t.Matrix.release($),c&&o.context.setGlobalCompositeOperation(n)}return r.push(m),l},o.prototype.getRenderCount=function(t){var e=0,i=t.$getRenderNode();if(i&&(e+=i.$getRenderCount()),t.$children)for(var n=0,r=t.$children;n<r.length;n++){var o=r[n],a=o.$filters;if(a&&a.length>0)return 2;if(o.$children)e+=this.getRenderCount(o);else{var s=o.$getRenderNode();s&&(e+=s.$getRenderCount())}}return e},o.prototype.drawWithClip=function(e,o,a,s){var l,u=0,h=0!==e.$blendMode;h&&((l=i[e.$blendMode])||(l=n));var c=e.$scrollRect?e.$scrollRect:e.$maskRect,p=e.$mask;if(p){var d=p.$getMatrix();if(0==d.a&&0==d.b||0==d.c&&0==d.d)return u}if(p||e.$children&&0!=e.$children.length){var f=e.$getOriginalBounds(),g=f.x,y=f.y,v=f.width,m=f.height;if(0>=v||0>=m)return u;var $=this.createRenderBuffer(v,m);if($.context.pushBuffer($),u+=this.drawDisplayObject(e,$,-g,-y),p){var b=this.createRenderBuffer(v,m);b.context.pushBuffer(b);var _=t.Matrix.create();_.copyFrom(p.$getConcatenatedMatrix()),p.$getConcatenatedMatrixAt(e,_),_.translate(-g,-y),b.setTransform(_.a,_.b,_.c,_.d,_.tx,_.ty),t.Matrix.release(_),u+=this.drawDisplayObject(p,b,0,0),b.context.popBuffer(),$.context.setGlobalCompositeOperation("destination-in"),$.setTransform(1,0,0,-1,0,b.height);var x=b.rootRenderTarget.width,T=b.rootRenderTarget.height;$.context.drawTexture(b.rootRenderTarget.texture,0,0,x,T,0,0,x,T,x,T),$.setTransform(1,0,0,1,0,0),$.context.setGlobalCompositeOperation("source-over"),b.setTransform(1,0,0,1,0,0),r.push(b)}if($.context.setGlobalCompositeOperation(n),$.context.popBuffer(),u>0){u++,h&&o.context.setGlobalCompositeOperation(l),c&&o.context.pushMask(c.x+a,c.y+s,c.width,c.height);var E=t.Matrix.create(),S=o.globalMatrix;E.a=S.a,E.b=S.b,E.c=S.c,E.d=S.d,E.tx=S.tx,E.ty=S.ty,S.append(1,0,0,-1,a+g,s+y+$.height);var C=$.rootRenderTarget.width,w=$.rootRenderTarget.height;o.context.drawTexture($.rootRenderTarget.texture,0,0,C,w,0,0,C,w,C,w),c&&$.context.popMask(),h&&o.context.setGlobalCompositeOperation(n);var P=o.globalMatrix;P.a=E.a,P.b=E.b,P.c=E.c,P.d=E.d,P.tx=E.tx,P.ty=E.ty,t.Matrix.release(E)}return r.push($),u}return c&&o.context.pushMask(c.x+a,c.y+s,c.width,c.height),h&&o.context.setGlobalCompositeOperation(l),u+=this.drawDisplayObject(e,o,a,s),h&&o.context.setGlobalCompositeOperation(n),c&&o.context.popMask(),u},o.prototype.drawWithScrollRect=function(t,e,i,n){var r=0,o=t.$scrollRect?t.$scrollRect:t.$maskRect;if(o.isEmpty())return r;t.$scrollRect&&(i-=o.x,n-=o.y);var a=e.globalMatrix,s=e.context,l=!1;if(e.$hasScissor||0!=a.b||0!=a.c)e.context.pushMask(o.x+i,o.y+n,o.width,o.height);else{var u=a.a,h=a.d,c=a.tx,p=a.ty,d=o.x+i,f=o.y+n,g=d+o.width,y=f+o.height,v=void 0,m=void 0,$=void 0,b=void 0;if(1==u&&1==h)v=d+c,m=f+p,$=g+c,b=y+p;else{var _=u*d+c,x=h*f+p,T=u*g+c,E=h*f+p,S=u*g+c,C=h*y+p,w=u*d+c,P=h*y+p,D=0;_>T&&(D=_,_=T,T=D),S>w&&(D=S,S=w,w=D),v=S>_?_:S,$=T>w?T:w,x>E&&(D=x,x=E,E=D),C>P&&(D=C,C=P,P=D),m=C>x?x:C,b=E>P?E:P}s.enableScissor(v,-b+e.height,$-v,b-m),l=!0}return r+=this.drawDisplayObject(t,e,i,n),l?s.disableScissor():s.popMask(),r},o.prototype.drawNodeToBuffer=function(t,e,i,n){var r=e;r.context.pushBuffer(r),r.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,e,0,0,n),r.context.$drawWebGL(),r.onRenderFinish(),r.context.popBuffer()},o.prototype.drawDisplayToBuffer=function(t,e,i){var n;e.context.pushBuffer(e),i&&e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var r=0;if(n=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(r++,n.type){case 1:this.renderBitmap(n,e);break;case 2:this.renderText(n,e);break;case 3:this.renderGraphics(n,e);break;case 4:this.renderGroup(n,e);break;case 5:this.renderMesh(n,e);break;case 6:this.renderNormalBitmap(n,e)}var o=t.$children;if(o)for(var a=o.length,s=0;a>s;s++){var l=o[s];switch(l.$renderMode){case 1:break;case 2:r+=this.drawWithFilter(l,e,0,0);break;case 3:r+=this.drawWithClip(l,e,0,0);break;case 4:r+=this.drawWithScrollRect(l,e,0,0);break;default:r+=this.drawDisplayObject(l,e,0,0)}}return e.context.$drawWebGL(),e.onRenderFinish(),e.context.popBuffer(),r},o.prototype.renderNode=function(t,e,i,n,r){switch(e.$offsetX=i,e.$offsetY=n,t.type){case 1:this.renderBitmap(t,e);break;case 2:this.renderText(t,e);break;case 3:this.renderGraphics(t,e,r);break;case 4:this.renderGroup(t,e);break;case 5:this.renderMesh(t,e);break;case 6:this.renderNormalBitmap(t,e)}},o.prototype.renderNormalBitmap=function(t,e){var i=t.image;i&&e.context.drawImage(i,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX,t.drawY,t.drawW,t.drawH,t.imageWidth,t.imageHeight,t.rotated,t.smoothing)},o.prototype.renderBitmap=function(e,r){var o=e.image;if(o){var a,s,l,u,h=e.drawData,c=h.length,p=0,d=e.matrix,f=e.blendMode,g=e.alpha;if(d){a=t.Matrix.create();var y=r.globalMatrix;a.a=y.a,a.b=y.b,a.c=y.c,a.d=y.d,a.tx=y.tx,a.ty=y.ty,s=r.$offsetX,l=r.$offsetY,r.useOffset(),r.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)}if(f&&r.context.setGlobalCompositeOperation(i[f]),g==g&&(u=r.globalAlpha,r.globalAlpha*=g),e.filter){for(r.context.$filter=e.filter;c>p;)r.context.drawImage(o,h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],e.imageWidth,e.imageHeight,e.rotated,e.smoothing);r.context.$filter=null}else for(;c>p;)r.context.drawImage(o,h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],e.imageWidth,e.imageHeight,e.rotated,e.smoothing);if(f&&r.context.setGlobalCompositeOperation(n),g==g&&(r.globalAlpha=u),d){var v=r.globalMatrix;v.a=a.a,v.b=a.b,v.c=a.c,v.d=a.d,v.tx=a.tx,v.ty=a.ty,r.$offsetX=s,r.$offsetY=l,t.Matrix.release(a)}}},o.prototype.renderMesh=function(e,r){var o,a,s,l,u=e.image,h=e.drawData,c=h.length,p=0,d=e.matrix,f=e.blendMode,g=e.alpha;if(d){o=t.Matrix.create();var y=r.globalMatrix;o.a=y.a,o.b=y.b,o.c=y.c,o.d=y.d,o.tx=y.tx,o.ty=y.ty,a=r.$offsetX,s=r.$offsetY,r.useOffset(),r.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)}if(f&&r.context.setGlobalCompositeOperation(i[f]),g==g&&(l=r.globalAlpha,r.globalAlpha*=g),e.filter){for(r.context.$filter=e.filter;c>p;)r.context.drawMesh(u,h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds,e.rotated,e.smoothing);r.context.$filter=null}else for(;c>p;)r.context.drawMesh(u,h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],h[p++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds,e.rotated,e.smoothing);if(f&&r.context.setGlobalCompositeOperation(n),g==g&&(r.globalAlpha=l),d){var v=r.globalMatrix;v.a=o.a,v.b=o.b,v.c=o.c,v.d=o.d,v.tx=o.tx,v.ty=o.ty,r.$offsetX=a,r.$offsetY=s,t.Matrix.release(o)}},o.prototype.renderText=function(i,n){var r=i.width-i.x,o=i.height-i.y;if(!(0>=r||0>=o)&&r&&o&&0!=i.drawData.length){var a=t.sys.DisplayList.$canvasScaleX,s=t.sys.DisplayList.$canvasScaleY,l=n.context.$maxTextureSize;r*a>l&&(a*=l/(r*a)),o*s>l&&(s*=l/(o*s)),r*=a,o*=s;var u=i.x*a,h=i.y*s;if((i.$canvasScaleX!=a||i.$canvasScaleY!=s)&&(i.$canvasScaleX=a,i.$canvasScaleY=s,i.dirtyRender=!0),this.canvasRenderBuffer&&this.canvasRenderBuffer.context?i.dirtyRender&&this.canvasRenderBuffer.resize(r,o):(this.canvasRenderer=new t.CanvasRenderer,this.canvasRenderBuffer=new e.CanvasRenderBuffer(r,o)),this.canvasRenderBuffer.context){if((1!=a||1!=s)&&this.canvasRenderBuffer.context.setTransform(a,0,0,s,0,0),u||h?(i.dirtyRender&&this.canvasRenderBuffer.context.setTransform(a,0,0,s,-u,-h),n.transform(1,0,0,1,u/a,h/s)):(1!=a||1!=s)&&this.canvasRenderBuffer.context.setTransform(a,0,0,s,0,0),i.dirtyRender){var c=this.canvasRenderBuffer.surface;this.canvasRenderer.renderText(i,this.canvasRenderBuffer.context);var p=i.$texture;p?n.context.updateTexture(p,c):(p=n.context.createTexture(c),i.$texture=p),i.$textureWidth=c.width,i.$textureHeight=c.height}var d=i.$textureWidth,f=i.$textureHeight;n.context.drawTexture(i.$texture,0,0,d,f,0,0,d/a,f/s,d,f),(u||h)&&(i.dirtyRender&&this.canvasRenderBuffer.context.setTransform(a,0,0,s,0,0),n.transform(1,0,0,1,-u/a,-h/s)),i.dirtyRender=!1}}},o.prototype.renderGraphics=function(i,n,r){var o=i.width,a=i.height;if(!(0>=o||0>=a)&&o&&a&&0!=i.drawData.length){var s=t.sys.DisplayList.$canvasScaleX,l=t.sys.DisplayList.$canvasScaleY;(1>o*s||1>a*l)&&(s=l=1),(i.$canvasScaleX!=s||i.$canvasScaleY!=l)&&(i.$canvasScaleX=s,i.$canvasScaleY=l,i.dirtyRender=!0),o*=s,a*=l;var u=Math.ceil(o),h=Math.ceil(a);if(s*=u/o,l*=h/a,o=u,a=h,this.canvasRenderBuffer&&this.canvasRenderBuffer.context?(i.dirtyRender||r)&&this.canvasRenderBuffer.resize(o,a):(this.canvasRenderer=new t.CanvasRenderer,this.canvasRenderBuffer=new e.CanvasRenderBuffer(o,a)),this.canvasRenderBuffer.context){(1!=s||1!=l)&&this.canvasRenderBuffer.context.setTransform(s,0,0,l,0,0),(i.x||i.y)&&((i.dirtyRender||r)&&this.canvasRenderBuffer.context.translate(-i.x,-i.y),n.transform(1,0,0,1,i.x,i.y));var c=this.canvasRenderBuffer.surface;if(r){this.canvasRenderer.renderGraphics(i,this.canvasRenderBuffer.context,!0),t.WebGLUtils.deleteWebGLTexture(c);var p=n.context.getWebGLTexture(c);n.context.drawTexture(p,0,0,o,a,0,0,o,a,c.width,c.height)}else{if(i.dirtyRender)this.canvasRenderer.renderGraphics(i,this.canvasRenderBuffer.context),(p=i.$texture)?n.context.updateTexture(p,c):(p=n.context.createTexture(c),i.$texture=p),i.$textureWidth=c.width,i.$textureHeight=c.height;var d=i.$textureWidth,f=i.$textureHeight;n.context.drawTexture(i.$texture,0,0,d,f,0,0,d/s,f/l,d,f)}(i.x||i.y)&&((i.dirtyRender||r)&&this.canvasRenderBuffer.context.translate(i.x,i.y),n.transform(1,0,0,1,-i.x,-i.y)),r||(i.dirtyRender=!1)}}},o.prototype.renderGroup=function(e,i){var n,r,o,a=e.matrix;if(a){n=t.Matrix.create();var s=i.globalMatrix;n.a=s.a,n.b=s.b,n.c=s.c,n.d=s.d,n.tx=s.tx,n.ty=s.ty,r=i.$offsetX,o=i.$offsetY,i.useOffset(),i.transform(a.a,a.b,a.c,a.d,a.tx,a.ty)}for(var l=e.drawData,u=l.length,h=0;u>h;h++){var c=l[h];this.renderNode(c,i,i.$offsetX,i.$offsetY)}if(a){var p=i.globalMatrix;p.a=n.a,p.b=n.b,p.c=n.c,p.d=n.d,p.tx=n.tx,p.ty=n.ty,i.$offsetX=r,i.$offsetY=o,t.Matrix.release(n)}},o.prototype.createRenderBuffer=function(t,i){var n=r.pop();return n?n.resize(t,i):(n=new e.WebGLRenderBuffer(t,i)).$computeDrawCall=!1,n},o}();e.WebGLRenderer=o,__reflect(o.prototype,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(t,e,i){this.gl=t,this.name=i.name,this.type=i.type,this.size=i.size,this.location=t.getAttribLocation(e,this.name),this.count=0,this.initCount(t),this.format=t.FLOAT,this.initFormat(t)}return t.prototype.initCount=function(t){switch(this.type){case 5126:case 5120:case 5121:case 5123:this.count=1;break;case 35664:this.count=2;break;case 35665:this.count=3;break;case 35666:this.count=4}},t.prototype.initFormat=function(t){switch(this.type){case 5126:case 35664:case 35665:case 35666:this.format=t.FLOAT;break;case 5121:this.format=t.UNSIGNED_BYTE;break;case 5123:this.format=t.UNSIGNED_SHORT;break;case 5120:this.format=t.BYTE}},t}();t.EgretWebGLAttribute=e,__reflect(e.prototype,"egret.web.EgretWebGLAttribute")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){function e(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||(console.log("shader not compiled!"),console.log(t.getShaderInfoLog(n))),n}function i(e,i){for(var n={},r=e.getProgramParameter(i,e.ACTIVE_ATTRIBUTES),o=0;r>o;o++){var a=e.getActiveAttrib(i,o),s=a.name,l=new t.EgretWebGLAttribute(e,i,a);n[s]=l}return n}function n(e,i){for(var n={},r=e.getProgramParameter(i,e.ACTIVE_UNIFORMS),o=0;r>o;o++){var a=e.getActiveUniform(i,o),s=a.name,l=new t.EgretWebGLUniform(e,i,a);n[s]=l}return n}var r=function(){function t(t,r,o){this.vshaderSource=r,this.fshaderSource=o,this.vertexShader=e(t,t.VERTEX_SHADER,this.vshaderSource),this.fragmentShader=e(t,t.FRAGMENT_SHADER,this.fshaderSource),this.id=function(t,e,i){var n=t.createProgram();return t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),n}(t,this.vertexShader,this.fragmentShader),this.uniforms=n(t,this.id),this.attributes=i(t,this.id)}return t.getProgram=function(e,i,n,r){return this.programCache[r]||(this.programCache[r]=new t(e,i,n)),this.programCache[r]},t.deleteProgram=function(t,e,i,n){},t.programCache={},t}();t.EgretWebGLProgram=r,__reflect(r.prototype,"egret.web.EgretWebGLProgram")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(t,e,i){this.gl=t,this.name=i.name,this.type=i.type,this.size=i.size,this.location=t.getUniformLocation(e,this.name),this.setDefaultValue(),this.generateSetValue(),this.generateUpload()}return t.prototype.setDefaultValue=function(){switch(this.type){case 5126:case 35678:case 35680:case 35670:case 5124:this.value=0;break;case 35664:case 35671:case 35667:this.value=[0,0];break;case 35665:case 35672:case 35668:this.value=[0,0,0];break;case 35666:case 35673:case 35669:this.value=[0,0,0,0];break;case 35674:this.value=new Float32Array([1,0,0,1]);break;case 35675:this.value=new Float32Array([1,0,0,0,1,0,0,0,1]);break;case 35676:this.value=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},t.prototype.generateSetValue=function(){switch(this.type){case 5126:case 35678:case 35680:case 35670:case 5124:this.setValue=function(t){var e=this.value!==t;this.value=t,e&&this.upload()};break;case 35664:case 35671:case 35667:this.setValue=function(t){var e=this.value[0]!==t.x||this.value[1]!==t.y;this.value[0]=t.x,this.value[1]=t.y,e&&this.upload()};break;case 35665:case 35672:case 35668:this.setValue=function(t){this.value[0]=t.x,this.value[1]=t.y,this.value[2]=t.z,this.upload()};break;case 35666:case 35673:case 35669:this.setValue=function(t){this.value[0]=t.x,this.value[1]=t.y,this.value[2]=t.z,this.value[3]=t.w,this.upload()};break;case 35674:case 35675:case 35676:this.setValue=function(t){this.value.set(t),this.upload()}}},t.prototype.generateUpload=function(){var t=this.gl,e=this.type,i=this.location;switch(e){case 5126:this.upload=function(){var e=this.value;t.uniform1f(i,e)};break;case 35664:this.upload=function(){var e=this.value;t.uniform2f(i,e[0],e[1])};break;case 35665:this.upload=function(){var e=this.value;t.uniform3f(i,e[0],e[1],e[2])};break;case 35666:this.upload=function(){var e=this.value;t.uniform4f(i,e[0],e[1],e[2],e[3])};break;case 35678:case 35680:case 35670:case 5124:this.upload=function(){var e=this.value;t.uniform1i(i,e)};break;case 35671:case 35667:this.upload=function(){var e=this.value;t.uniform2i(i,e[0],e[1])};break;case 35672:case 35668:this.upload=function(){var e=this.value;t.uniform3i(i,e[0],e[1],e[2])};break;case 35673:case 35669:this.upload=function(){var e=this.value;t.uniform4i(i,e[0],e[1],e[2],e[3])};break;case 35674:this.upload=function(){var e=this.value;t.uniformMatrix2fv(i,!1,e)};break;case 35675:this.upload=function(){var e=this.value;t.uniformMatrix3fv(i,!1,e)};break;case 35676:this.upload=function(){var e=this.value;t.uniformMatrix4fv(i,!1,e)}}},t}();t.EgretWebGLUniform=e,__reflect(e.prototype,"egret.web.EgretWebGLUniform")}(t.web||(t.web={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.blur_frag="precision mediump float;\r\nuniform vec2 blur;\r\nuniform sampler2D uSampler;\r\nvarying vec2 vTextureCoord;\r\nuniform vec2 uTextureSize;\r\nvoid main()\r\n{\r\n    const int sampleRadius = 5;\r\n    const int samples = sampleRadius * 2 + 1;\r\n    vec2 blurUv = blur / uTextureSize;\r\n    vec4 color = vec4(0, 0, 0, 0);\r\n    vec2 uv = vec2(0.0, 0.0);\r\n    blurUv /= float(sampleRadius);\r\n\r\n    for (int i = -sampleRadius; i <= sampleRadius; i++) {\r\n        uv.x = vTextureCoord.x + float(i) * blurUv.x;\r\n        uv.y = vTextureCoord.y + float(i) * blurUv.y;\r\n        color += texture2D(uSampler, uv);\r\n    }\r\n\r\n    color /= float(samples);\r\n    gl_FragColor = color;\r\n}",t.colorTransform_frag="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform mat4 matrix;\r\nuniform vec4 colorAdd;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void) {\r\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n    if(texColor.a > 0.) {\r\n        // alpha\r\n        texColor = vec4(texColor.rgb / texColor.a, texColor.a);\r\n    }\r\n    vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\r\n    gl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\r\n}",t.default_vert="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec2 aColor;\r\n\r\nuniform vec2 projectionVector;\r\n// uniform vec2 offsetVector;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nconst vec2 center = vec2(-1.0, 1.0);\r\n\r\nvoid main(void) {\r\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\r\n   vTextureCoord = aTextureCoord;\r\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\r\n}",t.glow_frag="precision highp float;\r\nvarying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nuniform float dist;\r\nuniform float angle;\r\nuniform vec4 color;\r\nuniform float alpha;\r\nuniform float blurX;\r\nuniform float blurY;\r\n// uniform vec4 quality;\r\nuniform float strength;\r\nuniform float inner;\r\nuniform float knockout;\r\nuniform float hideObject;\r\n\r\nuniform vec2 uTextureSize;\r\n\r\nfloat random(vec2 scale)\r\n{\r\n    return fract(sin(dot(gl_FragCoord.xy, scale)) * 43758.5453);\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);\r\n    // TODO \r\n    const float linearSamplingTimes = 7.0;\r\n    const float circleSamplingTimes = 12.0;\r\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\r\n    vec4 curColor;\r\n    float totalAlpha = 0.0;\r\n    float maxTotalAlpha = 0.0;\r\n    float curDistanceX = 0.0;\r\n    float curDistanceY = 0.0;\r\n    float offsetX = dist * cos(angle) * px.x;\r\n    float offsetY = dist * sin(angle) * px.y;\r\n\r\n    const float PI = 3.14159265358979323846264;\r\n    float cosAngle;\r\n    float sinAngle;\r\n    float offset = PI * 2.0 / circleSamplingTimes * random(vec2(12.9898, 78.233));\r\n    float stepX = blurX * px.x / linearSamplingTimes;\r\n    float stepY = blurY * px.y / linearSamplingTimes;\r\n    for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {\r\n        cosAngle = cos(a + offset);\r\n        sinAngle = sin(a + offset);\r\n        for (float i = 1.0; i <= linearSamplingTimes; i++) {\r\n            curDistanceX = i * stepX * cosAngle;\r\n            curDistanceY = i * stepY * sinAngle;\r\n            if (vTextureCoord.x + curDistanceX - offsetX >= 0.0 && vTextureCoord.y + curDistanceY + offsetY <= 1.0){\r\n                curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));\r\n                totalAlpha += (linearSamplingTimes - i) * curColor.a;\r\n            }\r\n            maxTotalAlpha += (linearSamplingTimes - i);\r\n        }\r\n    }\r\n\r\n    ownColor.a = max(ownColor.a, 0.0001);\r\n    ownColor.rgb = ownColor.rgb / ownColor.a;\r\n\r\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);\r\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;\r\n\r\n    ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);\r\n    vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));\r\n    vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));\r\n    float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);\r\n    gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);\r\n}",t.primitive_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = vColor;\r\n}",t.texture_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\r\n}",t}();t.EgretShaderLib=e,__reflect(e.prototype,"egret.web.EgretShaderLib")}(t.web||(t.web={}))}(egret||(egret={}));__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,__reflect(e.prototype,"egret.URLLoaderDataFormat")}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n){var r=t.call(this)||this;return r._name=e,r._frame=0|i,n&&(r._end=0|n),r}return __extends(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._name,this._frame,this._end)},e}(t.EventDispatcher);t.FrameLabel=e,__reflect(e.prototype,"egret.FrameLabel")}(egret||(egret={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$mcData=null,t.numFrames=1,t.frames=[],t.labels=null,t.events=[],t.frameRate=0,t.textureData=null,t.spriteSheet=null,t}return __extends(i,e),i.prototype.$init=function(t,e,i){this.textureData=e,this.spriteSheet=i,this.setMCData(t)},i.prototype.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},i.prototype.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);return e.res?this.getTextureByResName(e.res):null},i.prototype.$getOffsetByFrame=function(t,e){var i=this.getKeyFrameData(t);i.res&&e.setTo(0|i.x,0|i.y)},i.prototype.getTextureByResName=function(t){if(null==this.spriteSheet)return null;var e=this.spriteSheet.getTexture(t);if(!e){var i=this.textureData[t];e=this.spriteSheet.createTexture(t,i.x,i.y,i.w,i.h)}return e},i.prototype.$isDataValid=function(){return this.frames.length>0},i.prototype.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},i.prototype.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels),this.fillFrameEventsData(t.events)},i.prototype.fillFramesData=function(t){for(var e,i=this.frames,n=t?t.length:0,r=0;n>r;r++){var o=t[r];if(i.push(o),o.duration){var a=parseInt(o.duration);if(a>1){e=i.length;for(var s=1;a>s;s++)i.push({frame:e})}}}this.numFrames=i.length},i.prototype.fillFrameLabelsData=function(e){if(e){var i=e.length;if(i>0){this.labels=[];for(var n=0;i>n;n++){var r=e[n];this.labels.push(new t.FrameLabel(r.name,r.frame,r.end))}}}},i.prototype.fillFrameEventsData=function(t){if(t){var e=t.length;if(e>0){this.events=[];for(var i=0;e>i;i++){var n=t[i];this.events[n.frame]=n.name}}}},Object.defineProperty(i.prototype,"mcData",{get:function(){return this.$mcData},set:function(t){this.setMCData(t)},enumerable:!0,configurable:!0}),i.prototype.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},i}(t.HashObject);t.MovieClipData=e,__reflect(e.prototype,"egret.MovieClipData")}(egret||(egret={})),function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.enableCache=!0,n.$mcDataCache={},n.$mcDataSet=t,n.setTexture(i),n}return __extends(i,e),i.prototype.clearCache=function(){this.$mcDataCache={}},i.prototype.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var i=this.findFromCache(e,this.$mcDataCache);return i||(i=new t.MovieClipData,this.fillData(e,i,this.$mcDataCache)),i},i.prototype.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},i.prototype.fillData=function(t,e,i){if(this.$mcDataSet){var n=this.$mcDataSet.mc[t];n&&(e.$init(n,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(i[t]=e))}},Object.defineProperty(i.prototype,"mcDataSet",{get:function(){return this.$mcDataSet},set:function(t){this.$mcDataSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{set:function(t){this.setTexture(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spriteSheet",{get:function(){return this.$spriteSheet},enumerable:!0,configurable:!0}),i.prototype.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},i}(t.EventDispatcher);t.MovieClipDataFactory=e,__reflect(e.prototype,"egret.MovieClipDataFactory")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null);var o=e.call(this,t,i,n)||this;return o.frameLabel=null,o.frameLabel=r,o}return __extends(i,e),i.dispatchMovieClipEvent=function(e,n,r){void 0===r&&(r=null);var o=t.Event.create(i,n);o.frameLabel=r;var a=e.dispatchEvent(o);return t.Event.release(o),a},i.FRAME_LABEL="frame_label",i}(t.Event);t.MovieClipEvent=e,__reflect(e.prototype,"egret.MovieClipEvent")}(egret||(egret={})),function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.quintOut=e.getPowOut(5),e.quartOut=e.getPowOut(4),e}();t.ScrollEase=e,__reflect(e.prototype,"egret.ScrollEase");var i=function(e){function i(t,i,n){var r=e.call(this)||this;return r._target=null,r._useTicks=!1,r.ignoreGlobalPause=!1,r.loop=!1,r.pluginData=null,r._steps=null,r._actions=null,r.paused=!1,r.duration=0,r._prevPos=-1,r.position=null,r._prevPosition=0,r._stepPosition=0,r.passive=!1,r.initialize(t,i,n),r}return __extends(i,e),i.get=function(t,e,n,r){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(t),new i(t,e,n)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,n=e.length-1;n>=0;n--)e[n]._target==t&&(e[n].paused=!0,e.splice(n,1));t.tween_count=0}},i.tick=function(t,e){void 0===e&&(e=!1);var n=t-i._lastTime;i._lastTime=t;for(var r=i._tweens.concat(),o=r.length-1;o>=0;o--){var a=r[o];e&&!a.ignoreGlobalPause||a.paused||a.tick(a._useTicks?1:n)}return!1},i._register=function(e,n){var r=e._target,o=i._tweens;if(n)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),o.push(e),i._inited||(i._lastTime=t.getTimer(),t.ticker.$startTick(i.tick,null),i._inited=!0);else{r&&r.tween_count--;for(var a=o.length;a--;)if(o[a]==e)return void o.splice(a,1)}},i.prototype.initialize=function(t,e,n){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position)},i.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(this._steps.length>0){var o=void 0,a=this._steps.length;for(o=0;a>o&&!(this._steps[o].t>i);o++);var s=this._steps[o-1];this._updateTargetProps(s,(this._stepPosition=i-s.t)/s.d)}return n&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),this.dispatchEventWith("change"),n},i.prototype._runActions=function(t,e,i){void 0===i&&(i=!1);var n=t,r=e,o=-1,a=this._actions.length,s=1;for(t>e&&(n=e,r=t,o=a,a=s=-1);(o+=s)!=a;){var l=this._actions[o],u=l.t;(u==r||u>n&&r>u||i&&u==t)&&l.f.apply(l.o,l.p)}},i.prototype._updateTargetProps=function(t,e){var n,r,o,a,s,l;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),n=t.p0,r=t.p1}else this.passive=!1,n=r=this._curQueueProps;for(var u in this._initQueueProps){null==(a=n[u])&&(n[u]=a=this._initQueueProps[u]),null==(s=r[u])&&(r[u]=s=a),o=a==s||0==e||1==e||"number"!=typeof a?1==e?s:a:a+(s-a)*e;var h=!1;if(l=i._plugins[u])for(var c=0,p=l.length;p>c;c++){var d=l[c].tween(this,u,o,n,r,e,!!t&&n==r,!t);d==i.IGNORE?h=!0:o=d}h||(this._target[u]=o)}},i.prototype.setPaused=function(t){return this.paused=t,i._register(this,!t),this},i.prototype._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},i.prototype._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},i.prototype._appendQueueProps=function(t){var e,n,r,o,a;for(var s in t)if(void 0===this._initQueueProps[s]){if(n=this._target[s],e=i._plugins[s])for(r=0,o=e.length;o>r;r++)n=e[r].init(this,s,n);this._initQueueProps[s]=this._curQueueProps[s]=void 0===n?null:n}else n=this._curQueueProps[s];for(var s in t){if(n=this._curQueueProps[s],e=i._plugins[s])for(a=a||{},r=0,o=e.length;o>r;r++)e[r].step&&e[r].step(this,s,n,t[s],a);this._curQueueProps[s]=t[s]}return a&&this._appendQueueProps(a),this._curQueueProps},i.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},i.prototype.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},i.prototype.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i||[],o:e||this._target})},i.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(t.EventDispatcher);t.ScrollTween=i,__reflect(i.prototype,"egret.ScrollTween")}(egret||(egret={})),function(t){var e=function(e){function i(i){void 0===i&&(i=null);var n=e.call(this)||this;return n.scrollBeginThreshold=10,n.scrollSpeed=1,n._content=null,n.delayTouchBeginEvent=null,n.touchBeginTimer=null,n.touchEnabled=!0,n._ScrV_Props_=new t.ScrollViewProperties,i&&n.setContent(i),n}return __extends(i,e),Object.defineProperty(i.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(t){this._ScrV_Props_._bounces=!!t},enumerable:!0,configurable:!0}),i.prototype.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},i.prototype.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(i.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),i.prototype.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),(!i||0!=t||0!=e)&&(i||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var n=this._ScrV_Props_._scrollTop,r=this._ScrV_Props_._scrollLeft;if(i){var o=this.getMaxScrollLeft(),a=this.getMaxScrollTop();(0>=n||n>=a)&&(t/=2),(0>=r||r>=o)&&(e/=2);var s=n+t,l=r+e;this._ScrV_Props_._bounces||((0>=s||s>=a)&&(s=Math.max(0,Math.min(s,a))),(0>=l||l>=o)&&(l=Math.max(0,Math.min(l,o)))),this._ScrV_Props_._scrollTop=s,this._ScrV_Props_._scrollLeft=l}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},i.prototype._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,n=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,n>i?n-i/2:i/2)}if(e){var r=this.width,o=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-r)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,o>r?o-r/2:r/2)}},i.prototype.$setWidth=function(t){this.$explicitWidth!=t&&(e.prototype.$setWidth.call(this,t),this._updateContentPosition())},i.prototype.$setHeight=function(t){this.$explicitHeight!=t&&(e.prototype.$setHeight.call(this,t),this._updateContentPosition())},i.prototype._updateContentPosition=function(){var e=this.height,i=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},i.prototype._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var i=this._ScrV_Props_._verticalScrollPolicy,n=this.__checkScrollPolicy(i,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=n,e||n},i.prototype.__checkScrollPolicy=function(t,e,i){return"on"==t||"off"!=t&&e>i},i.prototype._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._onTouchBegin=function(e){e.$isDefaultPrevented||this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())},i.prototype._onTouchBeginCapture=function(e){var i=this._checkScrollPolicy();if(i){for(var n=e.target;n!=this;){if("_checkScrollPolicy"in n&&(i=n._checkScrollPolicy()))return;n=n.parent}e.stopPropagation();var r=this.cloneTouchEvent(e);this.delayTouchBeginEvent=r,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},i.prototype._onTouchEndCapture=function(e){var i=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var n=this.cloneTouchEvent(e);t.callLater((function(){i.stage&&i.dispatchPropagationEvent(n)}),this)}},i.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},i.prototype.dispatchPropagationEvent=function(e){for(var i=e.$target,n=this.$getPropagationList(i),r=n.length,o=.5*n.length,a=-1,s=0;r>s;s++)if(n[s]===this._content){a=s;break}n.splice(0,a+1),o-=a+1,this.$dispatchPropagationEvent(e,n,o),t.Event.release(e)},i.prototype._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,i=t.stageY-this._ScrV_Props_._touchStartPosition.y;if(Math.sqrt(e*e+i*i)<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var n=this._getPointChange(t);this.setScrollPosition(n.y,n.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},i.prototype._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},i.prototype._onEnterFrame=function(e){var i=t.getTimer();i-this._ScrV_Props_._lastTouchTime>100&&i-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},i.prototype._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},i.prototype._getPointChange=function(t){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:!1===this._ScrV_Props_._vCanScroll?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},i.prototype._calcVelocitys=function(e){var i=t.getTimer();if(0!=this._ScrV_Props_._lastTouchTime){var n=this._getPointChange(e),r=i-this._ScrV_Props_._lastTouchTime;n.x/=r,n.y/=r,this._ScrV_Props_._velocitys.push(n),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY}else this._ScrV_Props_._lastTouchTime=i},i.prototype._getContentWidth=function(){return this._content.$explicitWidth||this._content.width},i.prototype._getContentHeight=function(){return this._content.$explicitHeight||this._content.height},i.prototype.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},i.prototype.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},i.prototype._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,n=0;n<this._ScrV_Props_._velocitys.length;n++){var r=this._ScrV_Props_._velocitys[n],o=i.weight[n];t.x+=r.x*o,t.y+=r.y*o,e+=o}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var a=t.x/e*this.scrollSpeed,s=t.y/e*this.scrollSpeed,l=Math.abs(a),u=Math.abs(s),h=this.getMaxScrollLeft(),c=this.getMaxScrollTop(),p=l>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollLeft,h):{position:this._ScrV_Props_._scrollLeft,duration:1},d=u>.02?this.getAnimationDatas(s,this._ScrV_Props_._scrollTop,c):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(p.position,p.duration),this.setScrollTop(d.position,d.duration)}},i.prototype.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},i.prototype._onScrollStarted=function(){},i.prototype._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},i.prototype.setScrollTop=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0!=i){0==this._ScrV_Props_._bounces&&(e=n);var r=t.ScrollTween.get(this).to({scrollTop:e},i,t.ScrollEase.quartOut);n!=e&&r.to({scrollTop:n},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=r,r.call(this.onTweenFinished,this,[r]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()}else this.scrollTop=n},i.prototype.setScrollLeft=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0!=i){0==this._ScrV_Props_._bounces&&(e=n);var r=t.ScrollTween.get(this).to({scrollLeft:e},i,t.ScrollEase.quartOut);n!=e&&r.to({scrollLeft:n},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=r,r.call(this.onTweenFinished,this,[r]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()}else this.scrollLeft=n},i.prototype.getAnimationDatas=function(t,e,i){var n=Math.abs(t),r=0,o=e+500*t;if(0>o||o>i)for(o=e;Math.abs(t)!=1/0&&Math.abs(t)>.02;)t*=0>(o+=t)||o>i?.998*.95:.998,r++;else r=500*-Math.log(.02/n);return{position:Math.min(i+50,Math.max(o,-50)),duration:r}},i.prototype.cloneTouchEvent=function(e){var i=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i.$stageX=e.stageX,i.$stageY=e.stageY,i.touchDown=e.touchDown,i.$isDefaultPrevented=!1,i.$target=e.target,i},i.prototype.throwNotSupportedError=function(){t.$error(1023)},i.prototype.addChild=function(t){return this.throwNotSupportedError(),null},i.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},i.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},i.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},i.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},i.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},i.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},i.weight=[1,1.33,1.66,2,2.33],i}(t.DisplayObjectContainer);t.ScrollView=e,__reflect(e.prototype,"egret.ScrollView")}(egret||(egret={})),function(t){var e=function(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0};t.ScrollViewProperties=e,__reflect(e.prototype,"egret.ScrollViewProperties")}(egret||(egret={})),function(t){var e=function(e){function i(i){void 0===i&&(i=null);var n=e.call(this)||this;return n.dataFormat=t.URLLoaderDataFormat.TEXT,n.data=null,n._request=null,n._status=-1,i&&n.load(i),n}return __extends(i,e),i.prototype.load=function(e){this._request=e,this.data=null;var i=this;if(i.dataFormat!=t.URLLoaderDataFormat.TEXTURE)if(i.dataFormat!=t.URLLoaderDataFormat.SOUND){var n,r=function(e){var i=e.url;return-1==i.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(i=i+"?"+e.data.toString()),i}(e),o=new t.HttpRequest;if(o.open(r,e.method==t.URLRequestMethod.POST?t.HttpMethod.POST:t.HttpMethod.GET),e.method!=t.URLRequestMethod.GET&&e.data)if(e.data instanceof t.URLVariables){o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n=e.data.toString()}else o.setRequestHeader("Content-Type","multipart/form-data"),n=e.data;for(var a=e.requestHeaders.length,s=0;a>s;s++){var l=e.requestHeaders[s];o.setRequestHeader(l.name,l.value)}o.addEventListener(t.Event.COMPLETE,(function(){i.data=o.response,t.Event.dispatchEvent(i,t.Event.COMPLETE)}),this),o.addEventListener(t.IOErrorEvent.IO_ERROR,(function(){t.IOErrorEvent.dispatchIOErrorEvent(i)}),this),o.responseType=i.dataFormat==t.URLLoaderDataFormat.BINARY?t.HttpResponseType.ARRAY_BUFFER:t.HttpResponseType.TEXT,o.send(n)}else this.loadSound(i);else this.loadTexture(i)},i.prototype.getResponseType=function(e){switch(e){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:return t.URLLoaderDataFormat.TEXT;case t.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return e}},i.prototype.loadSound=function(e){function i(t){e.dispatchEvent(t)}function n(t){o(),e.dispatchEvent(t)}function r(i){o(),e.data=l,window.setTimeout((function(){e.dispatchEventWith(t.Event.COMPLETE)}),0)}function o(){l.removeEventListener(t.Event.COMPLETE,r,a),l.removeEventListener(t.IOErrorEvent.IO_ERROR,n,a),l.removeEventListener(t.ProgressEvent.PROGRESS,i,a)}var a=this,s=e._request.url,l=new t.Sound;l.addEventListener(t.Event.COMPLETE,r,a),l.addEventListener(t.IOErrorEvent.IO_ERROR,n,a),l.addEventListener(t.ProgressEvent.PROGRESS,i,a),l.load(s)},i.prototype.loadTexture=function(e){function i(t){e.dispatchEvent(t)}function n(t){o(),e.dispatchEvent(t)}function r(i){o();var n=l.data;n.source.setAttribute("bitmapSrc",s);var r=new t.Texture;r._setBitmapData(n),e.data=r,window.setTimeout((function(){e.dispatchEventWith(t.Event.COMPLETE)}),a)}function o(){l.removeEventListener(t.Event.COMPLETE,r,a),l.removeEventListener(t.IOErrorEvent.IO_ERROR,n,a),l.removeEventListener(t.ProgressEvent.PROGRESS,i,a)}var a=this,s=e._request.url,l=new t.ImageLoader;l.addEventListener(t.Event.COMPLETE,r,a),l.addEventListener(t.IOErrorEvent.IO_ERROR,n,a),l.addEventListener(t.ProgressEvent.PROGRESS,i,a),l.load(s)},i.prototype.__recycle=function(){this._request=null,this.data=null},i}(t.EventDispatcher);t.URLLoader=e,__reflect(e.prototype,"egret.URLLoader")}(egret||(egret={})),function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n.$texture=null,n.offsetPoint=t.Point.create(0,0),n.$movieClipData=null,n.frames=null,n.$totalFrames=0,n.frameLabels=null,n.$frameLabelStart=0,n.$frameLabelEnd=0,n.frameEvents=null,n.frameIntervalTime=0,n.$eventPool=null,n.$isPlaying=!1,n.isStopped=!0,n.playTimes=0,n.$currentFrameNum=0,n.$nextFrameNum=1,n.displayedKeyFrameNum=0,n.passedTime=0,n.$frameRate=NaN,n.lastTime=0,n.$smoothing=t.Bitmap.defaultSmoothing,n.setMovieClipData(i),t.nativeRender||(n.$renderNode=new t.sys.NormalBitmapNode),n}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){t!=this.$smoothing&&(this.$smoothing=t)},enumerable:!0,configurable:!0}),i.prototype.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameEvents=t.events,this.$frameRate=t.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this._initFrame())},i.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},i.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},i.prototype.$updateRenderNode=function(){var e=this.$texture;if(e){var i=Math.round(this.offsetPoint.x),n=Math.round(this.offsetPoint.y),r=e.$bitmapWidth,o=e.$bitmapHeight,a=e.$getTextureWidth(),s=e.$getTextureHeight(),l=Math.round(e.$getScaleBitmapWidth()),u=Math.round(e.$getScaleBitmapHeight()),h=e.$sourceWidth,c=e.$sourceHeight;t.sys.BitmapNode.$updateTextureData(this.$renderNode,e.$bitmapData,e.$bitmapX,e.$bitmapY,r,o,i,n,a,s,l,u,h,c,t.BitmapFillMode.SCALE,this.$smoothing)}},i.prototype.$measureContentBounds=function(t){var e=this.$texture;if(e){var i=this.offsetPoint.x,n=this.offsetPoint.y,r=e.$getTextureWidth(),o=e.$getTextureHeight();t.setTo(i,n,r,o)}else t.setEmpty()},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},i.prototype.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var i=this.frameLabels;if(i)for(var n=null,r=0;r<i.length;r++)if(n=i[r],e?n.name.toLowerCase()==t:n.name==t)return n;return null},i.prototype.getFrameStartEnd=function(t){var e=this.frameLabels;if(e)for(var i=null,n=0;n<e.length;n++)if(t==(i=e[n]).name){this.$frameLabelStart=i.frame,this.$frameLabelEnd=i.end;break}},i.prototype.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var i=null,n=0;n<e.length;n++)if((i=e[n]).frame==t)return i;return null},i.prototype.getFrameLabelForFrame=function(t){var e=null,i=null,n=this.frameLabels;if(n)for(var r=0;r<n.length;r++){if((i=n[r]).frame>t)return e;e=i}return e},i.prototype.play=function(e){void 0===e&&(e=0),this.lastTime=t.getTimer(),this.passedTime=0,this.$isPlaying=!0,this.setPlayTimes(e),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},i.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},i.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},i.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},i.prototype.gotoAndPlay=function(e,i){void 0===i&&(i=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(i),this.gotoFrame(e)},i.prototype.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},i.prototype.gotoFrame=function(e){var i;"string"==typeof e?i=this.getFrameLabelByName(e).frame:(i=parseInt(e+"",10))!=e&&t.$error(1022,"Frame Label Not Found"),1>i?i=1:i>this.$totalFrames&&(i=this.$totalFrames),i!=this.$nextFrameNum&&(this.$nextFrameNum=i,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},i.prototype.advanceTime=function(e){var i=this,n=e-i.lastTime;i.lastTime=e;var r=i.frameIntervalTime,o=i.passedTime+n;i.passedTime=o%r;var a=o/r;if(1>a)return!1;for(;a>=1;){if(a--,i.$nextFrameNum++,i.$nextFrameNum>i.$totalFrames||i.$frameLabelStart>0&&i.$nextFrameNum>i.$frameLabelEnd)if(-1==i.playTimes)i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1;else{if(i.playTimes--,!(i.playTimes>0)){i.$nextFrameNum=i.$totalFrames,i.$eventPool.push(t.Event.COMPLETE),i.stop();break}i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1}i.$currentFrameNum==i.$frameLabelEnd&&(i.$nextFrameNum=i.$frameLabelStart),i.advanceFrame()}return i.constructFrame(),i.handlePendingEvent(),!1},i.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;var e=this.frameEvents[this.$nextFrameNum];e&&""!=e&&t.MovieClipEvent.dispatchMovieClipEvent(this,t.MovieClipEvent.FRAME_LABEL,e)},i.prototype.constructFrame=function(){var e=this,i=e.$currentFrameNum;if(e.displayedKeyFrameNum!=i){var n=e.$movieClipData.getTextureByFrame(i);if(e.$texture=n,e.$movieClipData.$getOffsetByFrame(i,e.offsetPoint),e.displayedKeyFrameNum=i,e.$renderDirty=!0,t.nativeRender)e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,n,[n.$bitmapX,n.$bitmapY,n.$bitmapWidth,n.$bitmapHeight,e.offsetPoint.x,e.offsetPoint.y,n.$getScaleBitmapWidth(),n.$getScaleBitmapHeight(),n.$sourceWidth,n.$sourceHeight]),e.$nativeDisplayObject.setWidth(n.$getTextureWidth()+e.offsetPoint.x),e.$nativeDisplayObject.setHeight(n.$getTextureHeight()+e.offsetPoint.y);else{var r=e.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var o=e.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}}},i.prototype.$renderFrame=function(){var t=this;t.$texture=t.$movieClipData.getTextureByFrame(t.$currentFrameNum),t.$renderDirty=!0;var e=t.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=t.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())},i.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,i=e.length,n=!1,r=!1,o=0;i>o;o++){var a=e.pop();a==t.Event.LOOP_COMPLETE?r=!0:a==t.Event.COMPLETE?n=!0:this.dispatchEventWith(a)}r&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),n&&this.dispatchEventWith(t.Event.COMPLETE)}},Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrameLabel",{get:function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentLabel",{get:function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(t){t!=this.$frameRate&&(this.$frameRate=t,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(t){this.setMovieClipData(t)},enumerable:!0,configurable:!0}),i.prototype.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},i.prototype.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},i.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?t.ticker.$stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.ticker.$startTick(this.advanceTime,this)))},i}(t.DisplayObject);t.MovieClip=e,__reflect(e.prototype,"egret.MovieClip")}(egret||(egret={})),function(t){var e=function(e){function i(i){void 0===i&&(i=null);var n=e.call(this)||this;return n.data=null,n.method=t.URLRequestMethod.GET,n.url="",n.requestHeaders=[],n.url=i,n}return __extends(i,e),i}(t.HashObject);t.URLRequest=e,__reflect(e.prototype,"egret.URLRequest")}(egret||(egret={})),function(t){var e=function(t,e){this.name="",this.value="",this.name=t,this.value=e};(egret||(egret={})).URLRequestHeader=e,__reflect(e.prototype,"egret.URLRequestHeader")}(),function(t){var e=function(){function t(){}return t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,__reflect(e.prototype,"egret.URLRequestMethod")}(egret||(egret={})),function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.variables=null,null!==e&&i.decode(e),i}return __extends(e,t),e.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);){var n=decodeURIComponent(e[1]),r=decodeURIComponent(e[2]);if(n in this.variables!=0){var o=this.variables[n];o instanceof Array?o.push(r):this.variables[n]=[o,r]}else this.variables[n]=r}},e.prototype.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var i in t)e.push(this.encodeValue(i,t[i]));return e.join("&")},e.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},e.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map((function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)})).join("&"):""},e}(t.HashObject);t.URLVariables=e,__reflect(e.prototype,"egret.URLVariables")}(egret||(egret={})),function(t){var e=function(e){function i(){var n=e.call(this)||this;return n._timeScale=1,n._paused=!1,n._callIndex=-1,n._lastTime=0,n.callBackList=[],i.instance,t.ticker.$startTick(n.update,n),n._lastTime=t.getTimer(),n}return __extends(i,e),i.prototype.update=function(t){var e=t-this._lastTime;if(this._lastTime=t,this._paused)return!1;var i=e*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var n=this._callList[this._callIndex];n.listener.call(n.thisObject,i)}return this._callIndex=-1,this._callList=null,!1},i.prototype.register=function(t,e,i){void 0===i&&(i=0),this.$insertEventBin(this.callBackList,"",t,e,!1,i,!1)},i.prototype.unregister=function(t,e){this.$removeEventBin(this.callBackList,t,e)},i.prototype.setTimeScale=function(t){this._timeScale=t},i.prototype.getTimeScale=function(){return this._timeScale},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(t.EventDispatcher);t.Ticker=e,__reflect(e.prototype,"egret.Ticker")}(egret||(egret={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"stage",{get:function(){return t.sys.$TempStage},enumerable:!0,configurable:!0}),Object.defineProperty(i,"instance",{get:function(){return null==i._instance&&(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.deviceType=null,i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i}(t.EventDispatcher);t.MainContext=e,__reflect(e.prototype,"egret.MainContext")}(egret||(egret={})),egret.testDeviceType1=function(){if(!window.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},egret.MainContext.deviceType=egret.testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,delete egret.testDeviceType1,function(t){var e=function(e){function i(t){void 0===t&&(t=300);var i=e.call(this)||this;return i.objectPool=[],i._length=0,1>t&&(t=1),i.autoDisposeTime=t,i.frameCount=0,i}return __extends(i,e),i.$init=function(){t.ticker.$startTick(i.onUpdate,i)},i.onUpdate=function(t){for(var e=i._callBackList,n=e.length-1;n>=0;n--)e[n].$checkFrame();return!1},i.prototype.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},Object.defineProperty(i.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),i.prototype.push=function(t){var e=this.objectPool;-1==e.indexOf(t)&&(e.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,i._callBackList.push(this)))},i.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},i.prototype.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=i._callBackList,e=t.indexOf(this);-1!=e&&t.splice(e,1)},i._callBackList=[],i}(t.HashObject);t.Recycler=e,__reflect(e.prototype,"egret.Recycler"),e.$init()}(egret||(egret={})),function(t){function e(t){var e=t-o;for(var n in o=t,i){var r=i[n];r.delay-=e,r.delay<=0&&(r.delay=r.originDelay,r.listener.apply(r.thisObject,r.params))}return!1}var i={},n=0,r=0,o=0;t.setInterval=function(a,s,l){for(var u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];var c={listener:a,thisObject:s,delay:l,originDelay:l,params:u};return 1==++r&&(o=t.getTimer(),t.ticker.$startTick(e,null)),n++,i[n]=c,n},t.clearInterval=function(n){i[n]&&(r--,delete i[n],0==r&&t.ticker.$stopTick(e,null))}}(egret||(egret={})),function(t){function e(e){n[e]&&(o--,delete n[e],0==o&&t.ticker&&t.ticker.$stopTick(i,null))}function i(t){var i=t-a;for(var r in a=t,n){var o=r,s=n[o];s.delay-=i,s.delay<=0&&(s.listener.apply(s.thisObject,s.params),e(o))}return!1}var n={},r=0,o=0,a=0;t.setTimeout=function(e,s,l){for(var u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];var c={listener:e,thisObject:s,delay:l,params:u};return 1==++o&&t.ticker&&(a=t.getTimer(),t.ticker.$startTick(i,null)),r++,n[r]=c,r},t.clearTimeout=e}(egret||(egret={}));var RES;__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.resourceConfig=null,i.resourceConfig=t.configInstance,i}return __extends(i,e),i.prototype.addSubkey=function(t,e){this.resourceConfig.addSubkey(t,e)},i.prototype.loadFile=function(t,e,i){},i.prototype.getRes=function(t){},i.prototype.destroyRes=function(t){return!1},i.getStringPrefix=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(0,e):""},i.getStringTail=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(e+1):""},i}(egret.HashObject);t.AnalyzerBase=e,__reflect(e.prototype,"RES.AnalyzerBase")}(RES||(RES={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.fileDic={},t.resItemDic=[],t._dataFormat=egret.HttpResponseType.ARRAY_BUFFER,t.recycler=[],t}return __extends(i,e),i.prototype.loadFile=function(e,i,n){if(this.fileDic[e.name])i.call(n,e);else{var r=this.getRequest();this.resItemDic[r.hashCode]={item:e,func:i,thisObject:n},r.open(t.$getVirtualUrl(e.url)),r.send()}},i.prototype.getRequest=function(){var t=this.recycler.pop();return t||((t=new egret.HttpRequest).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t.responseType=this._dataFormat,t},i.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode];var n=i.item,r=i.func;n.loaded=t.type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e.response),this.recycler.push(e),r.call(i.thisObject,n)},i.prototype.analyzeData=function(t,e){var i=t.name;this.fileDic[i]||""!=e&&!e||(this.fileDic[i]=e)},i.prototype.getRes=function(t){return this.fileDic[t]},i.prototype.hasRes=function(t){return null!=this.getRes(t)},i.prototype.destroyRes=function(t){return!!this.fileDic[t]&&(this.onResourceDestroy(this.fileDic[t]),delete this.fileDic[t],!0)},i.prototype.onResourceDestroy=function(t){},i}(t.AnalyzerBase);t.BinAnalyzer=e,__reflect(e.prototype,"RES.BinAnalyzer")}(RES||(RES={})),function(t){var e=function(){function t(t,e,i){this.groupName="",this.data=null,this._loaded=!1,this.name=t,this.url=e,this.type=i}return Object.defineProperty(t.prototype,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(t){this.data&&(this.data.loaded=t),this._loaded=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t}();t.ResourceItem=e,__reflect(e.prototype,"RES.ResourceItem")}(RES||(RES={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.sheetMap={},t.textureMap={},t.recyclerIamge=[],t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(i,e),i.prototype.getRes=function(e){var i=this.fileDic[e];if(i||(i=this.textureMap[e]),!i){var n=t.AnalyzerBase.getStringPrefix(e);if(i=this.fileDic[n]){var r=t.AnalyzerBase.getStringTail(e);i=i.getTexture(r)}}return i},i.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.hashCode];var n=i.item,r=i.func;if(n.loaded=t.type==egret.Event.COMPLETE,n.loaded)if(e instanceof egret.HttpRequest){n.loaded=!1;var o=this.analyzeConfig(n,e.response);if(o)return this.loadImage(o,i),void this.recycler.push(e)}else{var a=new egret.Texture;a._setBitmapData(e.data),this.analyzeBitmap(n,a)}e instanceof egret.HttpRequest?this.recycler.push(e):this.recyclerIamge.push(e),r.call(i.thisObject,n)},i.prototype.analyzeConfig=function(t,e){var i,n=t.name,r="";try{var o=e;i=JSON.parse(o)}catch(i){egret.$warn(1017,t.url,e)}return i&&(this.sheetMap[n]=i,r=this.getRelativePath(t.url,i.file)),r},i.prototype.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n=this.sheetMap[i];delete this.sheetMap[i];var r=t.data&&t.data.subkeys?"":i,o=this.parseSpriteSheet(e,n,r);this.fileDic[i]=o}},i.prototype.getRelativePath=function(t,e){var i=(t=t.split("\\").join("/")).match(/#.*|\?.*/),n="";i&&(n=i[0]);var r=t.lastIndexOf("/");return(t=-1!=r?t.substring(0,r+1)+e:e)+n},i.prototype.parseSpriteSheet=function(t,e,i){var n=e.frames;if(!n)return null;var r=new egret.SpriteSheet(t),o=this.textureMap;for(var a in n){var s=n[a],l=r.createTexture(a,s.x,s.y,s.w,s.h,s.offX,s.offY,s.sourceW,s.sourceH);if(s.scale9grid){var u=s.scale9grid.split(",");l.scale9Grid=new egret.Rectangle(parseInt(u[0]),parseInt(u[1]),parseInt(u[2]),parseInt(u[3]))}null==o[a]&&(o[a]=l,i&&this.addSubkey(a,i))}return r},i.prototype.destroyRes=function(t){var e=this.fileDic[t];if(e){delete this.fileDic[t];var i=void 0;for(var n in e._textureMap)null==i&&(i=e._textureMap[n],this.onResourceDestroy(i),i=null),delete this.textureMap[n];return e.dispose&&e.dispose(),!0}return!1},i.prototype.loadImage=function(e,i){var n=this.getImageLoader();this.resItemDic[n.hashCode]=i,n.load(t.$getVirtualUrl(e))},i.prototype.getImageLoader=function(){var t=this.recyclerIamge.pop();return t||((t=new egret.ImageLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t},i.prototype.onResourceDestroy=function(t){t&&t.dispose()},i}(t.BinAnalyzer);t.SheetAnalyzer=e,__reflect(e.prototype,"RES.SheetAnalyzer")}(RES||(RES={})),RES||(RES={}),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.fileDic={},t.resItemDic=[],t.recycler=[],t}return __extends(i,e),i.prototype.loadFile=function(e,i,n){if(this.fileDic[e.name])i.call(n,e);else{var r=this.getLoader();this.resItemDic[r.$hashCode]={item:e,func:i,thisObject:n},r.load(t.$getVirtualUrl(e.url))}},i.prototype.getLoader=function(){var t=this.recycler.pop();return t||((t=new egret.ImageLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t},i.prototype.onLoadFinish=function(t){var e=t.$target,i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.$hashCode];var n=i.item,r=i.func;if(n.loaded=t.$type==egret.Event.COMPLETE,n.loaded){var o=new egret.Texture;o._setBitmapData(e.data),this.analyzeData(n,o)}this.recycler.push(e),r.call(i.thisObject,n)},i.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){this.fileDic[i]=e;var n=t.data;if(n&&n.scale9grid){var r=n.scale9grid.split(",");e.scale9Grid=new egret.Rectangle(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3]))}}},i.prototype.getRes=function(t){return this.fileDic[t]},i.prototype.hasRes=function(t){return null!=this.getRes(t)},i.prototype.destroyRes=function(t){return!!this.fileDic[t]&&(this.onResourceDestroy(this.fileDic[t]),delete this.fileDic[t],!0)},i.prototype.onResourceDestroy=function(t){t.dispose()},i}(t.AnalyzerBase);t.ImageAnalyzer=e,__reflect(e.prototype,"RES.ImageAnalyzer")}(RES||(RES={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(e,t),e}(t.BinAnalyzer);t.TextAnalyzer=e,__reflect(e.prototype,"RES.TextAnalyzer")}(RES||(RES={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var n=e;this.fileDic[i]=JSON.parse(n)}catch(i){egret.$warn(1017,t.url,e)}},e}(t.BinAnalyzer);t.JsonAnalyzer=e,__reflect(e.prototype,"RES.JsonAnalyzer")}(RES||(RES={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.thread=2,t.loadingCount=0,t.callBack=null,t.resInstance=null,t.groupTotalDic={},t.numLoadedDic={},t.itemListDic={},t.groupErrorDic={},t.retryTimesDic={},t.maxRetryTimes=3,t.failedList=new Array,t.priorityQueue={},t.lazyLoadList=new Array,t.analyzerDic={},t.queueIndex=0,t}return __extends(i,e),i.prototype.isGroupInLoading=function(t){return void 0!==this.itemListDic[t]},i.prototype.loadGroup=function(e,i,n){if(void 0===n&&(n=0),!this.itemListDic[i]&&i){if(!e||0==e.length){egret.$warn(3201,i);var r=new t.ResourceEvent(t.ResourceEvent.GROUP_LOAD_ERROR);return r.groupName=i,void this.dispatchEvent(r)}this.priorityQueue[n]?this.priorityQueue[n].push(i):this.priorityQueue[n]=[i],this.itemListDic[i]=e;for(var o=e.length,a=0;o>a;a++){e[a].groupName=i}this.groupTotalDic[i]=e.length,this.numLoadedDic[i]=0,this.next()}},i.prototype.loadItem=function(t){this.lazyLoadList.push(t),t.groupName="",this.next()},i.prototype.next=function(){for(;this.loadingCount<this.thread;){var t=this.getOneResourceItem();if(!t)break;if(this.loadingCount++,t.loaded)this.onItemComplete(t);else this.resInstance.$getAnalyzerByType(t.type).loadFile(t,this.onItemComplete,this)}},i.prototype.getOneResourceItem=function(){if(this.failedList.length>0)return this.failedList.shift();var t=Number.NEGATIVE_INFINITY;for(var e in this.priorityQueue)t=Math.max(t,e);var i=this.priorityQueue[t];if(!i||0==i.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();for(var n,r=i.length,o=0;r>o&&(this.queueIndex>=r&&(this.queueIndex=0),!((n=this.itemListDic[i[this.queueIndex]]).length>0));o++)this.queueIndex++;return 0==n.length?null:n.shift()},i.prototype.onItemComplete=function(e){this.loadingCount--;var i=e.groupName;if(!e.loaded){var n=this.retryTimesDic[e.name]||1;if(!(n>this.maxRetryTimes))return this.retryTimesDic[e.name]=n+1,this.failedList.push(e),void this.next();delete this.retryTimesDic[e.name],t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.ITEM_LOAD_ERROR,i,e)}if(i){this.numLoadedDic[i]++;var r=this.numLoadedDic[i],o=this.groupTotalDic[i];if(e.loaded||(this.groupErrorDic[i]=!0),t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.GROUP_PROGRESS,i,e,r,o),r==o){var a=this.groupErrorDic[i];this.removeGroupName(i),delete this.groupTotalDic[i],delete this.numLoadedDic[i],delete this.itemListDic[i],delete this.groupErrorDic[i],a?t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_LOAD_ERROR,i):t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,i)}}else this.callBack.call(this.resInstance,e);this.next()},i.prototype.removeGroupName=function(t){for(var e in this.priorityQueue){for(var i=this.priorityQueue[e],n=0,r=!1,o=i.length,a=0;o>a;a++){if(i[a]==t){i.splice(n,1),r=!0;break}n++}if(r){0==i.length&&delete this.priorityQueue[e];break}}},i}(egret.EventDispatcher);t.ResourceLoader=e,__reflect(e.prototype,"RES.ResourceLoader")}(RES||(RES={})),function(t){var e=function(){function e(){this.keyMap={},this.groupDic={},t.configInstance=this}return e.prototype.getGroupByName=function(t){var e=new Array;if(!this.groupDic[t])return e;for(var i=this.groupDic[t],n=i.length,r=0;n>r;r++){var o=i[r];e.push(this.parseResourceItem(o))}return e},e.prototype.getRawGroupByName=function(t){return this.groupDic[t]?this.groupDic[t]:[]},e.prototype.createGroup=function(t,e,i){if(void 0===i&&(i=!1),!i&&this.groupDic[t]||!e||0==e.length)return!1;for(var n=this.groupDic,r=[],o=e.length,a=0;o>a;a++){var s=e[a],l=n[s];if(l)for(var u=l.length,h=0;u>h;h++){var c=l[h];-1==r.indexOf(c)&&r.push(c)}else(c=this.keyMap[s])?-1==r.indexOf(c)&&r.push(c):egret.$warn(3200,s)}return 0!=r.length&&(this.groupDic[t]=r,!0)},e.prototype.parseConfig=function(t,e){if(t){var i=t.resources;if(i)for(var n=i.length,r=0;n>r;r++){var o=(d=i[r]).url;o&&-1==o.indexOf("://")&&(d.url=e+o),this.addItemToKeyMap(d)}var a=t.groups;if(a){var s=a.length;for(r=0;s>r;r++){for(var l=a[r],u=[],h=l.keys.split(","),c=h.length,p=0;c>p;p++){var d,f=h[p].trim();(d=this.keyMap[f])&&-1==u.indexOf(d)&&u.push(d)}this.groupDic[l.name]=u}}}},e.prototype.addSubkey=function(t,e){var i=this.keyMap[e];i&&!this.keyMap[t]&&(this.keyMap[t]=i)},e.prototype.addItemToKeyMap=function(t){if(this.keyMap[t.name]||(this.keyMap[t.name]=t),t.hasOwnProperty("subkeys")){var e=t.subkeys.split(",");t.subkeys=e;for(var i=e.length,n=0;i>n;n++){var r=e[n];null==this.keyMap[r]&&(this.keyMap[r]=t)}}},e.prototype.getName=function(t){var e=this.keyMap[t];return e?e.name:""},e.prototype.getType=function(t){var e=this.keyMap[t];return e?e.type:""},e.prototype.getRawResourceItem=function(t){return this.keyMap[t]},e.prototype.getResourceItem=function(t){var e=this.keyMap[t];return e?this.parseResourceItem(e):null},e.prototype.parseResourceItem=function(e){var i=new t.ResourceItem(e.name,e.url,e.type);return i.data=e,i},e}();t.ResourceConfig=e,__reflect(e.prototype,"RES.ResourceConfig")}(RES||(RES={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.soundDic={},t.resItemDic=[],t}return __extends(i,e),i.prototype.loadFile=function(e,i,n){if(this.soundDic[e.name])i.call(n,e);else{var r=new egret.Sound;r.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[r.$hashCode]={item:e,func:i,thisObject:n},r.load(t.$getVirtualUrl(e.url)),e.data&&(r.type=e.data.soundType)}},i.prototype.onLoadFinish=function(t){var e=t.$target;e.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.$hashCode];var n=i.item,r=i.func;n.loaded=t.$type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e),r.call(i.thisObject,n)},i.prototype.analyzeData=function(t,e){var i=t.name;!this.soundDic[i]&&e&&(this.soundDic[i]=e)},i.prototype.getRes=function(t){return this.soundDic[t]},i.prototype.hasRes=function(t){return!!this.getRes(t)},i.prototype.destroyRes=function(t){return!!this.soundDic[t]&&(delete this.soundDic[t],!0)},i}(t.AnalyzerBase);t.SoundAnalyzer=e,__reflect(e.prototype,"RES.SoundAnalyzer")}(RES||(RES={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var n=e,r=egret.XML.parse(n);this.fileDic[i]=r}catch(t){}},e}(t.BinAnalyzer);t.XMLAnalyzer=e,__reflect(e.prototype,"RES.XMLAnalyzer")}(RES||(RES={})),function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=t.call(this,e,i,n)||this;return r.itemsLoaded=0,r.itemsTotal=0,r.groupName="",r.resItem=null,r}return __extends(e,t),e.dispatchResourceEvent=function(t,i,n,r,o,a){void 0===n&&(n=""),void 0===r&&(r=null),void 0===o&&(o=0),void 0===a&&(a=0);var s=egret.Event.create(e,i);s.groupName=n,s.resItem=r,s.itemsLoaded=o,s.itemsTotal=a;var l=t.dispatchEvent(s);return egret.Event.release(s),l},e.ITEM_LOAD_ERROR="itemLoadError",e.CONFIG_COMPLETE="configComplete",e.CONFIG_LOAD_ERROR="configLoadError",e.GROUP_PROGRESS="groupProgress",e.GROUP_COMPLETE="groupComplete",e.GROUP_LOAD_ERROR="groupLoadError",e}(egret.Event);t.ResourceEvent=e,__reflect(e.prototype,"RES.ResourceEvent")}(RES||(RES={})),function(t){!function(e){var i=function(t){function e(){var e=t.call(this)||this;return e._versionInfo={},e}return __extends(e,t),e.prototype.fetchVersion=function(t){t.onSuccess(null)},e.prototype.getChangeList=function(){return[]},e.prototype.getVirtualUrl=function(t){return t},e}(egret.EventDispatcher);e.Html5VersionController=i,__reflect(i.prototype,"RES.web.Html5VersionController",["RES.VersionController","RES.IVersionController"]),t.VersionController=i}(t.web||(t.web={}))}(RES||(RES={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.analyzeConfig=function(t,e){var i,n=t.name,r="";try{var o=e;i=JSON.parse(o)}catch(t){}return i?r=this.getRelativePath(t.url,i.file):(i=e,r=this.getTexturePath(t.url,i)),this.sheetMap[n]=i,r},e.prototype.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n=this.sheetMap[i];delete this.sheetMap[i];var r=new egret.BitmapFont(e,n);this.fileDic[i]=r}},e.prototype.getTexturePath=function(t,e){var i="",n=e.split("\n")[2],r=n.indexOf('file="');return-1!=r&&(r=(n=n.substring(r+6)).indexOf('"'),i=n.substring(0,r)),-1!=(r=(t=t.split("\\").join("/")).lastIndexOf("/"))?t.substring(0,r+1)+i:i},e.prototype.onResourceDestroy=function(t){t&&t.dispose()},e}(t.SheetAnalyzer);t.FontAnalyzer=e,__reflect(e.prototype,"RES.FontAnalyzer")}(RES||(RES={})),function(t){t.registerAnalyzer=function(t,e){i.registerAnalyzer(t,e)},t.getAnalyzer=function(t){return i.$getAnalyzerByType(t)},t.registerVersionController=function(t){i.$registerVersionController(t)},t.getVersionController=function(){return i.vcs},t.loadConfig=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="json"),i.loadConfig(t,e,n)},t.loadGroup=function(t,e){void 0===e&&(e=0),i.loadGroup(t,e)},t.isGroupLoaded=function(t){return i.isGroupLoaded(t)},t.getGroupByName=function(t){return i.getGroupByName(t)},t.createGroup=function(t,e,n){return void 0===n&&(n=!1),i.createGroup(t,e,n)},t.hasRes=function(t){return i.hasRes(t)},t.parseConfig=function(t,e){void 0===e&&(e=""),i.parseConfig(t,e)},t.getRes=function(t){return i.getRes(t)},t.getResAsync=function(t,e,n){i.getResAsync(t,e,n)},t.getResByUrl=function(t,e,n,r){void 0===r&&(r=""),i.getResByUrl(t,e,n,r)},t.destroyRes=function(t,e){return i.destroyRes(t,e)},t.setMaxLoadingThread=function(t){i.setMaxLoadingThread(t)},t.setMaxRetryTimes=function(t){i.setMaxRetryTimes(t)},t.addEventListener=function(t,e,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0),i.addEventListener(t,e,n,r,o)},t.removeEventListener=function(t,e,n,r){void 0===r&&(r=!1),i.removeEventListener(t,e,n,r)},t.$getVirtualUrl=function(t){return i.vcs?i.vcs.getVirtualUrl(t):t};var e=function(e){function i(){var t=e.call(this)||this;return t.analyzerDic={},t.analyzerClassMap={},t.configItemList=[],t.callLaterFlag=!1,t.configComplete=!1,t.loadedGroups=[],t.groupNameList=[],t.asyncDic={},t._loadedUrlTypes={},t.init(),t}return __extends(i,e),i.prototype.$getAnalyzerByType=function(t){var e=this.analyzerDic[t];if(!e){var i=this.analyzerClassMap[t];if(!i)return null;e=this.analyzerDic[t]=new i}return e},i.prototype.registerAnalyzer=function(t,e){this.analyzerClassMap[t]=e},i.prototype.$registerVersionController=function(t){this.vcs=t},i.prototype.init=function(){this.vcs=new t.VersionController;var e=this.analyzerClassMap;e[t.ResourceItem.TYPE_BIN]=t.BinAnalyzer,e[t.ResourceItem.TYPE_IMAGE]=t.ImageAnalyzer,e[t.ResourceItem.TYPE_TEXT]=t.TextAnalyzer,e[t.ResourceItem.TYPE_JSON]=t.JsonAnalyzer,e[t.ResourceItem.TYPE_SHEET]=t.SheetAnalyzer,e[t.ResourceItem.TYPE_FONT]=t.FontAnalyzer,e[t.ResourceItem.TYPE_SOUND]=t.SoundAnalyzer,e[t.ResourceItem.TYPE_XML]=t.XMLAnalyzer,this.resConfig=new t.ResourceConfig,this.resLoader=new t.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(t.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(t.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},i.prototype.loadConfig=function(t,e,i){void 0===i&&(i="json");var n={url:t,resourceRoot:e,type:i};this.configItemList.push(n),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},i.prototype.startLoadConfig=function(){var e=this;this.callLaterFlag=!1;var n=this.configItemList;this.configItemList=[],this.loadingConfigList=n;for(var r=n.length,o=[],a=0;r>a;a++){var s=n[a],l=new t.ResourceItem(s.url,s.url,s.type);o.push(l)}var u={onSuccess:function(t){e.resLoader.loadGroup(o,i.GROUP_CONFIG,Number.MAX_VALUE)},onFail:function(i,n){t.ResourceEvent.dispatchResourceEvent(e,t.ResourceEvent.CONFIG_LOAD_ERROR)}};this.vcs?this.vcs.fetchVersion(u):this.resLoader.loadGroup(o,i.GROUP_CONFIG,Number.MAX_VALUE)},i.prototype.isGroupLoaded=function(t){return-1!=this.loadedGroups.indexOf(t)},i.prototype.getGroupByName=function(t){return this.resConfig.getGroupByName(t)},i.prototype.loadGroup=function(e,i){if(void 0===i&&(i=0),-1==this.loadedGroups.indexOf(e)){if(!this.resLoader.isGroupInLoading(e))if(this.configComplete){var n=this.resConfig.getGroupByName(e);this.resLoader.loadGroup(n,e,i)}else this.groupNameList.push({name:e,priority:i})}else t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,e)},i.prototype.createGroup=function(t,e,i){if(void 0===i&&(i=!1),i){var n=this.loadedGroups.indexOf(t);-1!=n&&this.loadedGroups.splice(n,1)}return this.resConfig.createGroup(t,e,i)},i.prototype.onGroupComp=function(e){if(e.groupName==i.GROUP_CONFIG){for(var n=this.loadingConfigList.length,r=0;n>r;r++){var o=this.loadingConfigList[r],a=this.$getAnalyzerByType(o.type),s=a.getRes(o.url);a.destroyRes(o.url),this.resConfig.parseConfig(s,o.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(e.groupName),this.dispatchEvent(e)},i.prototype.loadDelayGroups=function(){var t=this.groupNameList;this.groupNameList=[];for(var e=t.length,i=0;e>i;i++){var n=t[i];this.loadGroup(n.name,n.priority)}},i.prototype.onGroupError=function(e){e.groupName==i.GROUP_CONFIG?(this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(e)},i.prototype.hasRes=function(e){var i=this.resConfig.getType(e);if(""==i){var n=t.AnalyzerBase.getStringTail(e);if(""==(i=this.resConfig.getType(n)))return!1}return!0},i.prototype.parseConfig=function(t,e){this.resConfig.parseConfig(t,e),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},i.prototype.getRes=function(e){var i=this.resConfig.getType(e);if(""==i){var n=t.AnalyzerBase.getStringPrefix(e);if(""==(i=this.resConfig.getType(n)))return null}return this.$getAnalyzerByType(i).getRes(e)},i.prototype.getResAsync=function(e,i,n){var r=this.resConfig.getType(e),o=this.resConfig.getName(e);if(""!=r||(o=t.AnalyzerBase.getStringPrefix(e),""!=(r=this.resConfig.getType(o)))){var a=this.$getAnalyzerByType(r).getRes(e);if(a)egret.$callAsync(i,n,a,e);else{var s={key:e,compFunc:i,thisObject:n};if(this.asyncDic[o])this.asyncDic[o].push(s);else{this.asyncDic[o]=[s];var l=this.resConfig.getResourceItem(o);this.resLoader.loadItem(l)}}}else egret.$callAsync(i,n)},i.prototype.getResByUrl=function(e,i,n,r){if(void 0===r&&(r=""),e){r||(r=this.getTypeByUrl(e)),null!=this._loadedUrlTypes[e]&&this._loadedUrlTypes[e]!=r&&egret.$warn(3202),this._loadedUrlTypes[e]=r;var o=e,a=this.$getAnalyzerByType(r).getRes(o);if(a)egret.$callAsync(i,n,a,e);else{var s={key:o,compFunc:i,thisObject:n};if(this.asyncDic[o])this.asyncDic[o].push(s);else{this.asyncDic[o]=[s];var l=new t.ResourceItem(o,e,r);this.resLoader.loadItem(l)}}}else egret.$callAsync(i,n)},i.prototype.getTypeByUrl=function(e){var i,n=e.substr(e.lastIndexOf(".")+1);switch(n&&(n=n.toLowerCase()),n){case t.ResourceItem.TYPE_XML:case t.ResourceItem.TYPE_JSON:case t.ResourceItem.TYPE_SHEET:i=n;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":i=t.ResourceItem.TYPE_IMAGE;break;case"fnt":i=t.ResourceItem.TYPE_FONT;break;case"txt":i=t.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":i=t.ResourceItem.TYPE_SOUND;break;default:i=t.ResourceItem.TYPE_BIN}return i},i.prototype.onResourceItemComp=function(t){var e=this.asyncDic[t.name];delete this.asyncDic[t.name];for(var i=this.$getAnalyzerByType(t.type),n=e.length,r=0;n>r;r++){var o=e[r],a=i.getRes(o.key);o.compFunc.call(o.thisObject,a,o.key)}},i.prototype.destroyRes=function(t,e){void 0===e&&(e=!0);var i=this.resConfig.getRawGroupByName(t);if(i&&i.length>0){var n=this.loadedGroups.indexOf(t);-1!=n&&this.loadedGroups.splice(n,1);for(var r=i.length,o=0;r>o;o++){var a=i[o];if(!e&&this.isResInLoadedGroup(a.name));else a.loaded=!1,this.$getAnalyzerByType(a.type).destroyRes(a.name),this.removeLoadedGroupsByItemName(a.name)}return!0}var s=this.resConfig.getType(t);if(""==s)return null!=(s=this._loadedUrlTypes[t])&&""!=s&&(delete this._loadedUrlTypes[t],this.$getAnalyzerByType(s).destroyRes(t),!0);(a=this.resConfig.getRawResourceItem(t)).loaded=!1;var l=this.$getAnalyzerByType(s).destroyRes(t);return this.removeLoadedGroupsByItemName(a.name),l},i.prototype.removeLoadedGroupsByItemName=function(t){for(var e=this.loadedGroups,i=e.length,n=0;i>n;n++)for(var r=this.resConfig.getRawGroupByName(e[n]),o=r.length,a=0;o>a;a++){if(r[a].name==t){e.splice(n,1),n--,i=e.length;break}}},i.prototype.isResInLoadedGroup=function(t){for(var e=this.loadedGroups,i=e.length,n=0;i>n;n++)for(var r=this.resConfig.getRawGroupByName(e[n]),o=r.length,a=0;o>a;a++){if(r[a].name==t)return!0}return!1},i.prototype.setMaxLoadingThread=function(t){1>t&&(t=1),this.resLoader.thread=t},i.prototype.setMaxRetryTimes=function(t){t=Math.max(t,0),this.resLoader.maxRetryTimes=t},i.GROUP_CONFIG="RES__CONFIG",i}(egret.EventDispatcher);__reflect(e.prototype,"Resource");var i=new e}(RES||(RES={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.sheetMap={},t.recyclerIamge=[],t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(i,e),i.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.hashCode];var n=i.item,r=i.func;if(n.loaded=t.type==egret.Event.COMPLETE,n.loaded)if(e instanceof egret.HttpRequest){n.loaded=!1;var o=this.analyzeConfig(n,e.response);if(o)return this.loadImage(o,i),void this.recycler.push(e)}else this.analyzeBitmap(n,e.data);e instanceof egret.HttpRequest?this.recycler.push(e):this.recyclerIamge.push(e),r.call(i.thisObject,n)},i.prototype.analyzeConfig=function(t,e){var i,n=t.name,r="";try{var o=e;i=JSON.parse(o)}catch(i){egret.$warn(1017,t.url,e)}if(i)if(this.sheetMap[n]=i,i.file)r=this.getRelativePath(t.url,i.file);else{var a=t.url.split("?"),s=a[0].split("/");s[s.length-1]=s[s.length-1].split(".")[0]+".png",r="";for(var l=0;l<s.length;l++)r+=s[l]+(l<s.length-1?"/":"");2==a.length&&(r+=a[2])}return r},i.prototype.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n=this.sheetMap[i];delete this.sheetMap[i];var r=t.data&&t.data.subkeys?"":i,o=this.parseAnimation(e,n,r);this.fileDic[i]=o}},i.prototype.getRelativePath=function(t,e){var i=(t=t.split("\\").join("/")).lastIndexOf("/");return-1!=i?t.substring(0,i+1)+e:e},i.prototype.parseAnimation=function(t,e,i){for(var n,r=Object.keys(e.mc),o=e.mc[r[0]].frames,a=o.length,s=0;a>s;s++){n=e.res[o[s].res];var l=new egret.Texture;l.$bitmapData=t,l.$initData(n.x,n.y,n.w,n.h,o[s].x,o[s].y,o[s].sourceW,o[s].sourceH,t.width,t.height)}return[]},i.prototype.destroyRes=function(t){return!!this.fileDic[t]&&(delete this.fileDic[t],!0)},i.prototype.loadImage=function(e,i){var n=this.getImageLoader();this.resItemDic[n.hashCode]=i,n.load(t.$getVirtualUrl(e))},i.prototype.getImageLoader=function(){var t=this.recyclerIamge.pop();return t||((t=new egret.ImageLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t},i}(t.BinAnalyzer);t.AnimationAnalyzer=e,__reflect(e.prototype,"RES.AnimationAnalyzer")}(RES||(RES={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[3200]="RES.createGroup() passed in non-existed key value in configuration: {0}",e[3201]='RES loaded non-existed or empty resource group:"{0}"',e[3202]="Do not use the different types of ways to load the same material!",e[3203]="Can't find the analyzer of the specified file type:{0} Please register the specified analyzer in the initialization of the project first,then start the resource loading process"}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[3200]="RES.createGroup(): {0}",e[3201]='RES:"{0}"',e[3202]="",e[3203]=":{0} "}(egret||(egret={}));__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)}},e.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},e.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)*-.5:t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,__reflect(e.prototype,"egret.Ease")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){var r=e.call(this)||this;return r._target=null,r._useTicks=!1,r.ignoreGlobalPause=!1,r.loop=!1,r.pluginData=null,r._steps=null,r.paused=!1,r.duration=0,r._prevPos=-1,r.position=null,r._prevPosition=0,r._stepPosition=0,r.passive=!1,r.initialize(t,i,n),r}return __extends(i,e),i.get=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(t),new i(t,e,n)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,n=e.length-1;n>=0;n--)e[n]._target==t&&(e[n].paused=!0,e.splice(n,1));t.tween_count=0}},i.pauseTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;n>=0;n--)i[n]._target==e&&(i[n].paused=!0)},i.resumeTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;n>=0;n--)i[n]._target==e&&(i[n].paused=!1)},i.tick=function(t,e){void 0===e&&(e=!1);var n=t-i._lastTime;i._lastTime=t;for(var r=i._tweens.concat(),o=r.length-1;o>=0;o--){var a=r[o];e&&!a.ignoreGlobalPause||a.paused||a.$tick(a._useTicks?1:n)}return!1},i._register=function(e,n){var r=e._target,o=i._tweens;if(n)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),o.push(e),i._inited||(i._lastTime=t.getTimer(),t.ticker.$startTick(i.tick,null),i._inited=!0);else{r&&r.tween_count--;for(var a=o.length;a--;)if(o[a]==e)return void o.splice(a,1)}},i.removeAllTweens=function(){for(var t=i._tweens,e=0,n=t.length;n>e;e++){var r=t[e];r.paused=!0,r._target.tween_count=0}t.length=0},i.prototype.initialize=function(t,e,n){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,i.NONE)},i.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,n=!1;if(i>=this.duration)if(this.loop){var r=i%this.duration;i=i>0&&0===r?this.duration:r}else i=this.duration,n=!0;if(i==this._prevPos)return n;n&&this.setPaused(!0);var o=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target&&this._steps.length>0){for(var a=this._steps.length,s=-1,l=0;a>l&&!("step"==this._steps[l].type&&(s=l,this._steps[l].t<=i&&this._steps[l].t+this._steps[l].d>=i));l++);for(l=0;a>l;l++)if("action"==this._steps[l].type)0!=e&&(this._useTicks?this._runAction(this._steps[l],i,i):1==e&&o>i?(o!=this.duration&&this._runAction(this._steps[l],o,this.duration),this._runAction(this._steps[l],0,i,!0)):this._runAction(this._steps[l],o,i));else if("step"==this._steps[l].type&&s==l){var u=this._steps[s];this._updateTargetProps(u,Math.min((this._stepPosition=i-u.t)/u.d,1))}}return this.dispatchEventWith("change"),n},i.prototype._runAction=function(t,e,i,n){void 0===n&&(n=!1);var r=e,o=i;e>i&&(r=i,o=e);var a=t.t;(a==o||a>r&&o>a||n&&a==e)&&t.f.apply(t.o,t.p)},i.prototype._updateTargetProps=function(t,e){var n,r,o,a,s,l;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),n=t.p0,r=t.p1}else this.passive=!1,n=r=this._curQueueProps;for(var u in this._initQueueProps){null==(a=n[u])&&(n[u]=a=this._initQueueProps[u]),null==(s=r[u])&&(r[u]=s=a),o=a==s||0==e||1==e||"number"!=typeof a?1==e?s:a:a+(s-a)*e;var h=!1;if(l=i._plugins[u])for(var c=0,p=l.length;p>c;c++){var d=l[c].tween(this,u,o,n,r,e,!!t&&n==r,!t);d==i.IGNORE?h=!0:o=d}h||(this._target[u]=o)}},i.prototype.setPaused=function(t){return this.paused==t||(this.paused=t,i._register(this,!t)),this},i.prototype._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},i.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},i.prototype._appendQueueProps=function(t){var e,n,r,o,a;for(var s in t)if(void 0===this._initQueueProps[s]){if(n=this._target[s],e=i._plugins[s])for(r=0,o=e.length;o>r;r++)n=e[r].init(this,s,n);this._initQueueProps[s]=this._curQueueProps[s]=void 0===n?null:n}else n=this._curQueueProps[s];for(var s in t){if(n=this._curQueueProps[s],e=i._plugins[s])for(a=a||{},r=0,o=e.length;o>r;r++)e[r].step&&e[r].step(this,s,n,t[s],a);this._curQueueProps[s]=t[s]}return a&&this._appendQueueProps(a),this._curQueueProps},i.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},i.prototype._set=function(t,e){for(var i in t)e[i]=t[i]},i.prototype.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,p1:i,v:e})},i.prototype.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},i.prototype.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i||[],o:e||this._target})},i.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},i.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},i.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},i.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(t.EventDispatcher);t.Tween=e,__reflect(e.prototype,"egret.Tween")}(egret||(egret={})),function(t){!function(e){function i(e){if("function"==typeof e)return e;var i=t.Ease[e];return"function"==typeof i?i:null}function n(t,e,i,n){var r=t.prototype;r.__meta__=r.__meta__||{},r.__meta__[e]=i,n&&(r.__defaultProperty__=e)}var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="",e}return __extends(e,t),e}(t.EventDispatcher);e.BasePath=r,__reflect(r.prototype,"egret.tween.BasePath");var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.props=void 0,e.duration=500,e.ease=void 0,e}return __extends(e,t),e}(r);e.To=o,__reflect(o.prototype,"egret.tween.To");var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=500,e.passive=void 0,e}return __extends(e,t),e}(r);e.Wait=a,__reflect(a.prototype,"egret.tween.Wait");var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.props=void 0,e}return __extends(e,t),e}(r);e.Set=s,__reflect(s.prototype,"egret.tween.Set");var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=0,e}return __extends(e,t),e}(r);e.Tick=l,__reflect(l.prototype,"egret.tween.Tick");var u=function(e){function n(){var t=e.call(this)||this;return t.isStop=!1,t}return __extends(n,e),Object.defineProperty(n.prototype,"props",{get:function(){return this._props},set:function(t){this._props=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paths",{get:function(){return this._paths},set:function(t){this._paths=t||[]},enumerable:!0,configurable:!0}),n.prototype.play=function(t){this.tween?(this.tween.setPaused(!1),this.isStop&&null==t&&(t=0,this.isStop=!1),null!=t&&this.tween.setPosition(t)):this.createTween(t)},n.prototype.pause=function(){this.tween&&this.tween.setPaused(!0)},n.prototype.stop=function(){this.pause(),this.isStop=!0},n.prototype.createTween=function(e){this.tween=t.Tween.get(this._target,this._props),this._paths&&this.applyPaths(),null!=e&&this.tween.setPosition(e)},n.prototype.applyPaths=function(){for(var t=0;t<this._paths.length;t++){var e=this._paths[t];this.applyPath(e)}},n.prototype.applyPath=function(t){var e=this;t instanceof o?this.tween.to(t.props,t.duration,i(t.ease)):t instanceof a?this.tween.wait(t.duration,t.passive):t instanceof s?this.tween.set(t.props):t instanceof l&&this.tween.$tick(t.delta),this.tween.call((function(){return e.pathComplete(t)}))},n.prototype.pathComplete=function(t){t.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",!1,t);var e=this._paths.indexOf(t);e>=0&&e===this._paths.length-1&&this.dispatchEventWith("complete")},n}(t.EventDispatcher);e.TweenItem=u,__reflect(u.prototype,"egret.tween.TweenItem"),n(u,"paths","Array",!0);var h=function(t){function e(){var e=t.call(this)||this;return e.completeCount=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this.completeCount=0,this.registerEvent(!1),this._items=t,this.registerEvent(!0)},enumerable:!0,configurable:!0}),e.prototype.registerEvent=function(t){var e=this;this._items&&this._items.forEach((function(i){t?i.addEventListener("complete",e.itemComplete,e):i.removeEventListener("complete",e.itemComplete,e)}))},e.prototype.play=function(t){if(this._items)for(var e=0;e<this._items.length;e++){this._items[e].play(t)}},e.prototype.pause=function(){if(this._items)for(var t=0;t<this._items.length;t++){this._items[t].pause()}},e.prototype.stop=function(){if(this._items)for(var t=0;t<this._items.length;t++){this._items[t].stop()}},e.prototype.itemComplete=function(t){var e=t.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",!1,e),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)},e}(t.EventDispatcher);e.TweenGroup=h,__reflect(h.prototype,"egret.tween.TweenGroup"),n(h,"items","Array",!0)}(t.tween||(t.tween={}))}(egret||(egret={}));var EXML,eui;__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.targetLevel=Number.POSITIVE_INFINITY,e.invalidatePropertiesFlag=!1,e.invalidateClientPropertiesFlag=!1,e.invalidatePropertiesQueue=new i,e.invalidateSizeFlag=!1,e.invalidateClientSizeFlag=!1,e.invalidateSizeQueue=new i,e.invalidateDisplayListFlag=!1,e.invalidateDisplayListQueue=new i,e.eventDisplay=new egret.Bitmap,e.listenersAttached=!1,e}return __extends(e,t),e.prototype.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},e.prototype.validateProperties=function(){for(var t=this.invalidatePropertiesQueue,e=t.shift();e;)e.$stage&&e.validateProperties(),e=t.shift();t.isEmpty()&&(this.invalidatePropertiesFlag=!1)},e.prototype.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},e.prototype.validateSize=function(){for(var t=this.invalidateSizeQueue,e=t.pop();e;)e.$stage&&e.validateSize(),e=t.pop();t.isEmpty()&&(this.invalidateSizeFlag=!1)},e.prototype.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},e.prototype.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue,e=t.shift();e;)e.$stage&&e.validateDisplayList(),e=t.shift();t.isEmpty()&&(this.invalidateDisplayListFlag=!1)},e.prototype.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),egret.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},e.prototype.doPhasedInstantiationCallBack=function(t){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},e.prototype.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},e.prototype.validateClient=function(t){var e,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=t.$nestLevel);for(var r=this.invalidatePropertiesQueue,o=this.invalidateSizeQueue,a=this.invalidateDisplayListQueue;!i;){for(i=!0,e=r.removeSmallestChild(t);e;)e.$stage&&e.validateProperties(),e=r.removeSmallestChild(t);for(r.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,e=o.removeLargestChild(t);e;){if(e.$stage&&e.validateSize(),this.invalidateClientPropertiesFlag&&(e=r.removeSmallestChild(t))){r.insert(e),i=!1;break}e=o.removeLargestChild(t)}for(o.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,e=a.removeSmallestChild(t);e;){if(e.$stage&&e.validateDisplayList(),this.invalidateClientPropertiesFlag&&(e=r.removeSmallestChild(t))){r.insert(e),i=!1;break}if(this.invalidateClientSizeFlag&&(e=o.removeLargestChild(t))){o.insert(e),i=!1;break}e=a.removeSmallestChild(t)}a.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},e}(egret.EventDispatcher);t.Validator=e,__reflect(e.prototype,"eui.sys.Validator");var i=function(){function t(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}return t.prototype.insert=function(t){var e=t.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var i=this.depthBins[e];i||(i=this.depthBins[e]=new n),i.insert(t)},t.prototype.pop=function(){var t,e=this.minDepth;if(e<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<e)return null;i=this.depthBins[this.maxDepth]}for(t=i.pop();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<e));)i=this.depthBins[this.maxDepth]}return t},t.prototype.shift=function(){var t,e=this.maxDepth;if(this.minDepth<=e){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>e)return null;i=this.depthBins[this.minDepth]}for(t=i.pop();!(i&&0!=i.length||(this.minDepth++,this.minDepth>e));)i=this.depthBins[this.minDepth]}return t},t.prototype.removeLargestChild=function(t){for(var e=t.$hashCode,i=t.$nestLevel,n=this.maxDepth,r=i;n>=r;){var o=this.depthBins[n];if(o&&o.length>0){if(n===i){if(o.map[e])return o.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var a=o.items,s=o.length,l=0;s>l;l++){var u=a[l];if(t.contains(u))return o.remove(u),u}}n--}else if(n==this.maxDepth&&this.maxDepth--,r>--n)break}return null},t.prototype.removeSmallestChild=function(t){for(var e=t.$nestLevel,i=e,n=this.maxDepth,r=t.$hashCode;n>=i;){var o=this.depthBins[i];if(o&&o.length>0){if(i===e){if(o.map[r])return o.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var a=o.items,s=o.length,l=0;s>l;l++){var u=a[l];if(t.contains(u))return o.remove(u),u}}i++}else if(i==this.minDepth&&this.minDepth++,++i>n)break}return null},t.prototype.isEmpty=function(){return this.minDepth>this.maxDepth},t}();__reflect(i.prototype,"DepthQueue");var n=function(){function t(){this.map={},this.items=[],this.length=0}return t.prototype.insert=function(t){var e=t.$hashCode;this.map[e]||(this.map[e]=!0,this.length++,this.items.push(t))},t.prototype.pop=function(){var t=this.items.pop();return t&&(this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1),t},t.prototype.remove=function(t){var e=this.items.indexOf(t);e>=0&&(this.items.splice(e,1),this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1)},t}();__reflect(n.prototype,"DepthBin")}(t.sys||(t.sys={}))}(eui||(eui={})),(eui||(eui={})).registerProperty=function(t,e,i,n){var r=t.prototype;r.__meta__=r.__meta__||{},r.__meta__[e]=i,n&&(r.__defaultProperty__=e)},function(t){var e=function(e){function i(t,i){void 0===i&&(i=[]);var n=e.call(this)||this;return n.name=t,n.overrides=i,n}return __extends(i,e),i.prototype.initialize=function(e,i){for(var n=this.overrides,r=n.length,o=0;r>o;o++){var a=n[o];if(a instanceof t.AddItems){var s=e[a.target];s&&s instanceof t.Image&&!s.$parent&&(i.addChild(s),i.removeChild(s))}}},i}(egret.HashObject);t.State=e,__reflect(e.prototype,"eui.State")}(eui||(eui={})),function(t){!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"states",{get:function(){return this.$stateValues.states},set:function(t){t||(t=[]);var e=this.$stateValues;e.states=t;for(var i={},n=t.length,r=0;n>r;r++){var o=t[r];i[o.name]=o}e.statesMap=i,e.parent&&this.commitCurrentState()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this.$stateValues.currentState},set:function(t){var e=this.$stateValues;e.explicitState=t,e.currentState=t,this.commitCurrentState()},enumerable:!0,configurable:!0}),t.prototype.commitCurrentState=function(){var t=this.$stateValues;if(t.parent){if(!t.statesMap[t.currentState]){if(!(t.states.length>0))return;t.currentState=t.states[0].name}if(t.oldState!=t.currentState){var e=t.parent,i=t.statesMap[t.oldState];if(i)for(var n=(o=i.overrides).length,r=0;n>r;r++)o[r].remove(this,e);if(t.oldState=t.currentState,i=t.statesMap[t.currentState]){var o,a=(o=i.overrides).length;for(r=0;a>r;r++)o[r].apply(this,e)}}}},t.prototype.hasState=function(t){return!!this.$stateValues.statesMap[t]},t.prototype.initializeStates=function(t){this.$stateValues.intialized=!0;for(var e=this.states,i=e.length,n=0;i>n;n++)e[n].initialize(this,t)},t}();t.StateClient=e,__reflect(e.prototype,"eui.sys.StateClient");var i=function(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1};t.StateValues=i,__reflect(i.prototype,"eui.sys.StateValues")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){t.getAssets=function(e,i,n){var r=egret.getImplementation("eui.IAssetAdapter");r||(r=new t.DefaultAssetAdapter),r.getAsset(e,(function(t){i.call(n,t)}),this)},t.getTheme=function(e,i){var n=egret.getImplementation("eui.IThemeAdapter");n||(n=new t.DefaultThemeAdapter),n.getTheme(e,(function(t){i(t)}),(function(t){console.log(t)}),this)}}(eui||(eui={})),function(t){!function(e){function i(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d}function n(t,e){if("function"!=typeof t[e])return!1;var i=t[e].toString(),n=i.indexOf("{"),r=i.lastIndexOf("}");return""==(i=i.substring(n+1,r)).trim()}function r(t,e){for(var i in e)"prototype"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);for(var r=t.prototype,o=e.prototype,a=Object.keys(o),s=a.length,l=0;s>l;l++){var u=a[l];if("__meta__"!=u&&(!r.hasOwnProperty(u)||n(r,u))){var h=Object.getOwnPropertyDescriptor(o,u);Object.defineProperty(r,u,h)}}}var o="eui.UIComponent",a=new e.Validator,s=function(n){function r(){var t=n.call(this)||this;return t.initializeUIValues(),t}return __extends(r,n),r.prototype.initializeUIValues=function(){this.$UIComponent={0:NaN,1:NaN,2:NaN,3:NaN,4:NaN,5:NaN,6:NaN,7:NaN,8:NaN,9:NaN,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:NaN,19:NaN,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0,this.$touchEnabled=!0},r.prototype.createChildren=function(){},r.prototype.childrenCreated=function(){},r.prototype.commitProperties=function(){var e=this.$UIComponent;(e[22]!=e[10]||e[23]!=e[11])&&(this.dispatchEventWith(egret.Event.RESIZE),e[22]=e[10],e[23]=e[11]),(e[20]!=this.$getX()||e[21]!=this.$getY())&&(t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE),e[20]=this.$getX(),e[21]=this.$getY())},r.prototype.measure=function(){},r.prototype.updateDisplayList=function(t,e){},Object.defineProperty(r.prototype,"includeInLayout",{get:function(){return this.$includeInLayout},set:function(t){t=!!t,this.$includeInLayout!==t&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=t)},enumerable:!0,configurable:!0}),r.prototype.$onAddToStage=function(e,i){this.$super.$onAddToStage.call(this,e,i),this.checkInvalidateFlag();var n=this.$UIComponent;n[29]||(n[29]=!0,this.createChildren(),this.childrenCreated(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CREATION_COMPLETE))},r.prototype.checkInvalidateFlag=function(t){var e=this.$UIComponent;e[24]&&a.invalidateProperties(this),e[25]&&a.invalidateSize(this),e[26]&&a.invalidateDisplayList(this)},Object.defineProperty(r.prototype,"left",{get:function(){return this.$UIComponent[0]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[0]!==t&&(e[0]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$UIComponent[1]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[1]!==t&&(e[1]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$UIComponent[2]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[2]!==t&&(e[2]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$UIComponent[3]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[3]!=t&&(e[3]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalCenter",{get:function(){return this.$UIComponent[4]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[4]!==t&&(e[4]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalCenter",{get:function(){return this.$UIComponent[5]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[5]!==t&&(e[5]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentWidth",{get:function(){return this.$UIComponent[6]},set:function(t){t=+t;var e=this.$UIComponent;e[6]!==t&&(e[6]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentHeight",{get:function(){return this.$UIComponent[7]},set:function(t){t=+t;var e=this.$UIComponent;e[7]!==t&&(e[7]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitWidth",{get:function(){return this.$UIComponent[8]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitHeight",{get:function(){return this.$UIComponent[9]},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},r.prototype.$setWidth=function(t){t=+t;var e=this.$UIComponent;return!(0>t||e[10]===t&&e[8]===t)&&(e[8]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},r.prototype.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},r.prototype.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},r.prototype.$setHeight=function(t){t=+t;var e=this.$UIComponent;return!(0>t||e[11]===t&&e[9]===t)&&(e[9]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},Object.defineProperty(r.prototype,"minWidth",{get:function(){return this.$UIComponent[12]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[12]===t||(e[12]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this.$UIComponent[13]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[13]===t||(e[13]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minHeight",{get:function(){return this.$UIComponent[14]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[14]===t||(e[14]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){return this.$UIComponent[15]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[15]===t||(e[15]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),r.prototype.setMeasuredSize=function(t,e){var i=this.$UIComponent;i[16]=Math.ceil(+t||0),i[17]=Math.ceil(+e||0)},r.prototype.setActualSize=function(t,e){var i=!1,n=this.$UIComponent;n[10]!==t&&(n[10]=t,i=!0),n[11]!==e&&(n[11]=e,i=!0),i&&(this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.RESIZE))},r.prototype.$updateUseTransform=function(){this.$super.$updateUseTransform.call(this),this.invalidateParentLayout()},r.prototype.$setMatrix=function(t,e){return void 0===e&&(e=!0),this.$super.$setMatrix.call(this,t,e),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetX=function(t){return this.$super.$setAnchorOffsetX.call(this,t),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetY=function(t){return this.$super.$setAnchorOffsetY.call(this,t),this.invalidateParentLayout(),!0},r.prototype.$setX=function(t){var e=this.$super.$setX.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},r.prototype.$setY=function(t){var e=this.$super.$setY.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},r.prototype.invalidateProperties=function(){var t=this.$UIComponent;t[24]||(t[24]=!0,this.$stage&&a.invalidateProperties(this))},r.prototype.validateProperties=function(){var t=this.$UIComponent;t[24]&&(this.commitProperties(),t[24]=!1)},r.prototype.invalidateSize=function(){var t=this.$UIComponent;t[25]||(t[25]=!0,this.$stage&&a.invalidateSize(this))},r.prototype.validateSize=function(t){if(t){var e=this.$children;if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];egret.is(r,o)&&r.validateSize(!0)}}var a=this.$UIComponent;a[25]&&(this.measureSizes()&&(this.invalidateDisplayList(),this.invalidateParentLayout()),a[25]=!1)},r.prototype.measureSizes=function(){var t=!1,e=this.$UIComponent;if(!e[25])return t;(isNaN(e[8])||isNaN(e[9]))&&(this.measure(),e[16]<e[12]&&(e[16]=e[12]),e[16]>e[13]&&(e[16]=e[13]),e[17]<e[14]&&(e[17]=e[14]),e[17]>e[15]&&(e[17]=e[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return(i!==e[18]||n!==e[19])&&(e[18]=i,e[19]=n,t=!0),t},r.prototype.invalidateDisplayList=function(){var t=this.$UIComponent;t[26]||(t[26]=!0,this.$stage&&a.invalidateDisplayList(this))},r.prototype.validateDisplayList=function(){var t=this.$UIComponent;t[26]&&(this.updateFinalSize(),this.updateDisplayList(t[10],t[11]),t[26]=!1)},r.prototype.updateFinalSize=function(){var t,e,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],e=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(t,e)},r.prototype.validateNow=function(){this.$stage&&a.validateClient(this)},r.prototype.invalidateParentLayout=function(){var t=this.$parent;t&&this.$includeInLayout&&egret.is(t,o)&&(t.invalidateSize(),t.invalidateDisplayList())},r.prototype.setLayoutBoundsSize=function(t,n){if(t=+t,!(0>(n=+n)||0>t)){var r,o,a=this.$UIComponent,s=a[13],l=a[15],u=Math.min(a[12],s),h=Math.min(a[14],l);isNaN(t)?(a[27]=!1,r=this.getPreferredUWidth()):(a[27]=!0,r=Math.max(u,Math.min(s,t))),isNaN(n)?(a[28]=!1,o=this.getPreferredUHeight()):(a[28]=!0,o=Math.max(h,Math.min(l,n)));var c=this.getAnchorMatrix();if(i(c))return void this.setActualSize(r,o);var p=e.MatrixUtil.fitBounds(t,n,c,a[8],a[9],this.getPreferredUWidth(),this.getPreferredUHeight(),u,h,s,l);p||(p=egret.Point.create(u,h)),this.setActualSize(p.x,p.y),egret.Point.release(p)}},r.prototype.setLayoutBoundsPosition=function(e,n){if(!i(this.$getMatrix())||0!=this.anchorOffsetX||0!=this.anchorOffsetY){var r=egret.$TempRectangle;this.getLayoutBounds(r),e+=this.$getX()-r.x,n+=this.$getY()-r.y}var o=this.$super.$setX.call(this,e);(this.$super.$setY.call(this,n)||o)&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE)},r.prototype.getLayoutBounds=function(t){var e,i,n=this.$UIComponent;e=n[27]?n[10]:isNaN(n[8])?n[16]:n[8],i=n[28]?n[11]:isNaN(n[9])?n[17]:n[9],this.applyMatrix(t,e,i)},r.prototype.getPreferredUWidth=function(){var t=this.$UIComponent;return isNaN(t[8])?t[16]:t[8]},r.prototype.getPreferredUHeight=function(){var t=this.$UIComponent;return isNaN(t[9])?t[17]:t[9]},r.prototype.getPreferredBounds=function(t){var e=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(t,e,i)},r.prototype.applyMatrix=function(t,e,n){t.setTo(0,0,e,n);var r=this.getAnchorMatrix();i(r)?(t.x+=r.tx,t.y+=r.ty):r.$transformBounds(t)},r.prototype.getAnchorMatrix=function(){var t=this.$getMatrix(),e=this.anchorOffsetX,i=this.anchorOffsetY;if(0!=e||0!=i){var n=egret.$TempMatrix;return t.$preMultiplyInto(n.setTo(1,0,0,1,-e,-i),n),n}return t},r}(egret.DisplayObject);e.UIComponentImpl=s,__reflect(s.prototype,"eui.sys.UIComponentImpl",["eui.UIComponent","egret.DisplayObject"]),e.mixin=r,e.implementUIComponent=function(e,i,n){r(e,s);var o=e.prototype;o.$super=i.prototype,t.registerProperty(e,"left","Percentage"),t.registerProperty(e,"right","Percentage"),t.registerProperty(e,"top","Percentage"),t.registerProperty(e,"bottom","Percentage"),t.registerProperty(e,"horizontalCenter","Percentage"),t.registerProperty(e,"verticalCenter","Percentage"),n&&(o.$childAdded=function(t,e){this.invalidateSize(),this.invalidateDisplayList()},o.$childRemoved=function(t,e){this.invalidateSize(),this.invalidateDisplayList()})}}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$layout=null,i.$stateValues=new t.sys.StateValues,i.initializeUIValues(),i.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},i.$stateValues.parent=i,i}return __extends(i,e),Object.defineProperty(i.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},set:function(t){this.$setLayout(t)},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(t){return this.$layout!=t&&(this.$layout&&(this.$layout.target=null),this.$layout=t,t&&(t.target=this),this.invalidateSize(),this.invalidateDisplayList(),!0)},Object.defineProperty(i.prototype,"contentWidth",{get:function(){return this.$Group[0]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){return this.$Group[1]},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(e,i){e=Math.ceil(+e||0),i=Math.ceil(+i||0);var n=this.$Group,r=n[0]!==e,o=n[1]!==i;(r||o)&&(n[0]=e,n[1]=i,r&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),o&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},Object.defineProperty(i.prototype,"scrollEnabled",{get:function(){return this.$Group[4]},set:function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollH",{get:function(){return this.$Group[2]},set:function(e){e=+e||0;var i=this.$Group;e!==i[2]&&(i[2]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollH"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollV",{get:function(){return this.$Group[3]},set:function(e){e=+e||0;var i=this.$Group;e!=i[3]&&(i[3]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollV"))},enumerable:!0,configurable:!0}),i.prototype.updateScrollRect=function(){var t=this.$Group,e=t[4];if(e){var i=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(t[2],t[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return e},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getElementAt=function(t){return this.$children[t]},i.prototype.getVirtualElementAt=function(t){return this.getElementAt(t)},i.prototype.setVirtualElementIndicesInView=function(t,e){},Object.defineProperty(i.prototype,"touchThrough",{get:function(){return this.$Group[5]},set:function(t){this.$Group[5]=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);if(n||this.$Group[5])return n;if(!this.$visible||!this.touchEnabled||0===this.scaleX||0===this.scaleY||0===this.width||0===this.height)return null;var r=this.globalToLocal(t,i,egret.$TempPoint),o=this.$UIComponent,a=egret.$TempRectangle.setTo(0,0,o[10],o[11]),s=this.$scrollRect;return s&&(a.x=s.x,a.y=s.y),a.contains(r.x,r.y)?this:null},i.prototype.invalidateState=function(){var t=this.$stateValues;t.stateIsDirty||(t.stateIsDirty=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){this.$layout||this.$setLayout(new t.BasicLayout),this.initializeStates(this.$stage)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$stateValues;e.stateIsDirty&&(e.stateIsDirty=!1,e.explicitState||(e.currentState=this.getCurrentState(),this.commitCurrentState()))},i.prototype.measure=function(){return this.$layout?void this.$layout.measure():void this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(t,e){this.$layout&&this.$layout.updateDisplayList(t,e),this.updateScrollRect()},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Group=e,__reflect(e.prototype,"eui.Group",["eui.IViewport","eui.UIComponent","egret.DisplayObject"]),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]")}(eui||(eui={})),function(t){var e="__bindables__";t.registerBindable=function(t,i){if(t.hasOwnProperty(e))t[e].push(i);else{var n=[i];t[e]&&(n=t[e].concat(n)),t[e]=n}}}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initializeUIValues(),t.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!0,7:!0,8:null},t.$touchEnabled=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"hostComponentKey",{get:function(){return this.$Component[0]},set:function(t){this.$Component[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skinName",{get:function(){return this.$Component[1]},set:function(t){var e=this.$Component;if(e[5]=!0,e[1]!=t){if(t)e[1]=t;else{var i=egret.getImplementation("eui.Theme");if(i){var n=i.getSkinName(this);n&&(e[1]=n)}}this.$parseSkinName()}},enumerable:!0,configurable:!0}),i.prototype.$parseSkinName=function(){var t,e=this.skinName;if(e)if(e.prototype)t=new e;else if("string"==typeof e){var i=void 0,n=e.trim();if("<"==n.charAt(0))i=EXML.parse(n);else if(!(i=egret.getDefinitionByName(e))&&-1!=n.toLowerCase().indexOf(".exml"))return void EXML.load(e,this.onExmlLoaded,this,!0);i&&(t=new i)}else t=e;this.setSkin(t)},i.prototype.onExmlLoaded=function(t,e){if(this.skinName==e){var i=new t;this.setSkin(i)}},Object.defineProperty(i.prototype,"skin",{get:function(){return this.$Component[8]},enumerable:!0,configurable:!0}),i.prototype.setSkin=function(e){!e||e instanceof t.Skin||(e=null);var i=this.$Component,n=i[8];if(n){for(var r=(s=n.skinParts).length,o=0;r>o;o++){this[u=s[o]]&&this.setSkinPart(u,null)}if(c=n.$elementsContent){r=c.length;for(o=0;r>o;o++){var a=c[o];a.$parent==this&&this.removeChild(a)}}n.hostComponent=null}if(i[8]=e,e){var s,l=(s=e.skinParts).length;for(o=0;l>o;o++){var u,h=e[u=s[o]];h&&this.setSkinPart(u,h)}var c;if(c=e.$elementsContent)for(o=c.length-1;o>=0;o--)this.addChildAt(c[o],0);e.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.setSkinPart=function(t,e){var i=this[t];i&&this.partRemoved(t,i),this[t]=e,e&&this.partAdded(t,e)},i.prototype.partAdded=function(t,e){},i.prototype.partRemoved=function(t,e){},i.prototype.$setTouchChildren=function(t){t=!!t;var i=this.$Component;return i[6]=t,!i[3]||(i[6]=t,e.prototype.$setTouchChildren.call(this,t))},i.prototype.$setTouchEnabled=function(t){t=!!t;var i=this.$Component;i[7]=t,i[3]&&e.prototype.$setTouchEnabled.call(this,t)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(t){t=!!t,this.$setEnabled(t)},enumerable:!0,configurable:!0}),i.prototype.$setEnabled=function(t){var e=this.$Component;return t!==e[3]&&(e[3]=t,t?(this.$touchEnabled=e[7],this.$touchChildren=e[6]):(this.$touchEnabled=!1,this.$touchChildren=!1),this.invalidateState(),!0)},Object.defineProperty(i.prototype,"currentState",{get:function(){var t=this.$Component;return t[2]?t[2]:this.getCurrentState()},set:function(t){var e=this.$Component;t!=e[2]&&(e[2]=t,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.invalidateState=function(){var t=this.$Component;t[4]||(t[4]=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){var t=this.$Component;if(!t[1]){var e=egret.getImplementation("eui.Theme");if(e){var i=e.getSkinName(this);i&&(t[1]=i,this.$parseSkinName())}}},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$Component;e[4]&&(e[4]=!1,e[8]&&(e[8].currentState=this.currentState))},i.prototype.measure=function(){t.sys.measure(this);var e=this.$Component[8];if(e){var i=this.$UIComponent;isNaN(e.width)?(i[16]<e.minWidth&&(i[16]=e.minWidth),i[16]>e.maxWidth&&(i[16]=e.maxWidth)):i[16]=e.width,isNaN(e.height)?(i[17]<e.minHeight&&(i[17]=e.minHeight),i[17]>e.maxHeight&&(i[17]=e.maxHeight)):i[17]=e.height}},i.prototype.updateDisplayList=function(e,i){t.sys.updateDisplayList(this,e,i)},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Component=e,__reflect(e.prototype,"eui.Component",["eui.UIComponent","egret.DisplayObject"]),t.registerProperty(e,"skinName","Class"),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0)}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$dataProviderChanged=!1,t.$dataProvider=null,t.$indexToRenderer=[],t.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null,13:null,14:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"useVirtualLayout",{get:function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},set:function(t){t=!!t;var e=this.$DataGroup;t!==e[0]&&(e[0]=t,this.$layout&&(this.$layout.useVirtualLayout=t))},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(t){if(t==this.$layout)return!1;this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&t&&this.$layout.$useVirtualLayout!=t.$useVirtualLayout&&this.onUseVirtualLayoutChanged();var i=e.prototype.$setLayout.call(this,t);if(t){var n=this.$DataGroup[9];n&&t.setTypicalSize(n.width,n.height),t.useVirtualLayout=this.$DataGroup[0],t.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return i},i.prototype.onUseVirtualLayoutChanged=function(t){var e=this.$DataGroup;e[1]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},i.prototype.setVirtualElementIndicesInView=function(t,e){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=0;r>o;o++){var a=+n[o];(t>a||a>e)&&this.freeRendererByIndex(a)}},i.prototype.getElementAt=function(t){return this.$indexToRenderer[t]},i.prototype.getVirtualElementAt=function(t){if(0>(t=0|+t)||t>=this.$dataProvider.length)return null;var e=this.$indexToRenderer[t];if(!e){var i=this.$dataProvider.getItemAt(t);e=this.createVirtualRenderer(i),this.$indexToRenderer[t]=e,this.updateRenderer(e,t,i);var n=this.$DataGroup;n[4]&&(e.validateNow(),n[4]=!1,this.rendererAdded(e,t,i))}return e},i.prototype.freeRendererByIndex=function(t){var e=this.$indexToRenderer[t];e&&(delete this.$indexToRenderer[t],this.doFreeRenderer(e))},i.prototype.doFreeRenderer=function(t){var e=this.$DataGroup,i=e[2][t.$hashCode].$hashCode;e[3][i]||(e[3][i]=[]),e[3][i].push(t),t.visible=!1},i.prototype.invalidateSize=function(){this.$DataGroup[4]||e.prototype.invalidateSize.call(this)},i.prototype.createVirtualRenderer=function(t){var e,i=this.itemToRendererClass(t),n=i.$hashCode,r=this.$DataGroup,o=r[3];return o[n]&&o[n].length>0?((e=o[n].pop()).visible=!0,this.invalidateDisplayList(),e):(r[4]=!0,this.createOneRenderer(i))},i.prototype.createOneRenderer=function(t){var e=new t,i=this.$DataGroup;return i[2][e.$hashCode]=t,egret.is(e,"eui.IItemRenderer")?(i[13]&&this.setItemRenderSkinName(e,i[13]),this.addChild(e),e):null},i.prototype.setItemRenderSkinName=function(e,i){if(e&&e instanceof t.Component){var n=e;n.$Component[5]||(n.skinName=i,n.$Component[5]=!1)}},Object.defineProperty(i.prototype,"dataProvider",{get:function(){return this.$dataProvider},set:function(t){this.$setDataProvider(t)},enumerable:!0,configurable:!0}),i.prototype.$setDataProvider=function(t){return!(this.$dataProvider==t||t&&!t.getItemAt)&&(this.removeDataProviderListener(),this.$dataProvider=t,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList(),!0)},i.prototype.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},i.prototype.onCollectionChange=function(e){switch(e.kind){case t.CollectionEventKind.ADD:this.itemAddedHandler(e.items,e.location);break;case t.CollectionEventKind.REMOVE:this.itemRemovedHandler(e.items,e.location);break;case t.CollectionEventKind.UPDATE:case t.CollectionEventKind.REPLACE:this.itemUpdatedHandler(e.items[0],e.location);break;case t.CollectionEventKind.RESET:case t.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length-1;r>=0;r--){var o=+n[r];this.freeRendererByIndex(o)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},i.prototype.itemAddedHandler=function(t,e){for(var i=t.length,n=0;i>n;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},i.prototype.itemRemovedHandler=function(t,e){for(var i=t.length-1;i>=0;i--)this.itemRemoved(t[i],e+i);this.resetRenderersIndices()},i.prototype.itemAdded=function(t,e){if(this.$layout&&this.$layout.elementAdded(e),this.$layout&&this.$layout.$useVirtualLayout)this.$indexToRenderer.splice(e,0,null);else{var i=this.createVirtualRenderer(t);if(this.$indexToRenderer.splice(e,0,i),i){this.updateRenderer(i,e,t);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,e,t))}}},i.prototype.itemRemoved=function(t,e){this.$layout&&this.$layout.elementRemoved(e);var i=this.$indexToRenderer[e];this.$indexToRenderer.length>e&&this.$indexToRenderer.splice(e,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,e,t),this.removeChild(i)))},i.prototype.resetRenderersIndices=function(){var t=this.$indexToRenderer;if(0!=t.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=Object.keys(t),i=e.length,n=0;i>n;n++){var r=+e[n];this.resetRendererItemIndex(r)}else{var o=t.length;for(r=0;o>r;r++)this.resetRendererItemIndex(r)}},i.prototype.itemUpdatedHandler=function(t,e){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},i.prototype.resetRendererItemIndex=function(t){var e=this.$indexToRenderer[t];e&&(e.itemIndex=t)},Object.defineProperty(i.prototype,"itemRenderer",{get:function(){return this.$DataGroup[6]},set:function(t){var e=this.$DataGroup;e[6]!=t&&(e[6]=t,e[5]=!0,e[8]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererSkinName",{get:function(){return this.$DataGroup[13]},set:function(t){var e=this.$DataGroup;e[13]!=t&&(e[13]=t,this.$UIComponent[29]&&(e[14]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererFunction",{get:function(){return this.$DataGroup[7]},set:function(t){var e=this.$DataGroup;e[7]!=t&&(e[7]=t,e[5]=!0,e[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.itemToRendererClass=function(e){var i,n=this.$DataGroup;return n[7]&&(i=n[7](e)),i||(i=n[6]),i||(i=t.ItemRenderer),i.$hashCode||(i.$hashCode=egret.$hashCount++),i},i.prototype.createChildren=function(){if(!this.$layout){var i=new t.VerticalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},i.prototype.commitProperties=function(){var i=this.$DataGroup;if((i[5]||this.$dataProviderChanged||i[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),i[1]=!1,i[5]=!1,this.$dataProvider&&this.$dataProvider.addEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),e.prototype.commitProperties.call(this),i[8]&&(i[8]=!1,this.$dataProvider&&this.$dataProvider.length>0&&(i[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())),i[14]){i[14]=!1;for(var n=i[13],r=this.$indexToRenderer,o=Object.keys(r),a=o.length,s=0;a>s;s++){var l=o[s];this.setItemRenderSkinName(r[l],n)}var u=i[3];a=(o=Object.keys(u)).length;for(s=0;a>s;s++)for(var h=u[o[s]],c=h.length,p=0;c>p;p++)this.setItemRenderSkinName(h[p],n)}},i.prototype.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),e.prototype.measure.call(this)},i.prototype.updateDisplayList=function(t,i){var n=this.$layout&&this.$layout.$useVirtualLayout;n&&this.ensureTypicalLayoutElement(),e.prototype.updateDisplayList.call(this,t,i);var r=this.$DataGroup;if(n){var o=r[9];if(o){var a=this.$indexToRenderer[0];if(a){var s=egret.$TempRectangle;a.getPreferredBounds(s),(s.width!=o.width||s.height!=o.height)&&(r[9]=null)}}}},i.prototype.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&this.$dataProvider.length>0&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},i.prototype.measureRendererSize=function(){var t=this.$DataGroup;if(null!=t[12]){var e=this.createVirtualRenderer(t[12]);if(e){this.updateRenderer(e,0,t[12]),e.validateNow();var i=egret.$TempRectangle;e.getPreferredBounds(i);var n=new egret.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(t[4]&&this.rendererAdded(e,0,t[12]),this.doFreeRenderer(e)):this.removeChild(e),this.setTypicalLayoutRect(n),t[4]=!1}else this.setTypicalLayoutRect(null)}else this.setTypicalLayoutRect(null)},i.prototype.setTypicalLayoutRect=function(t){this.$DataGroup[9]=t,this.$layout&&(t?this.$layout.setTypicalSize(t.width,t.height):this.$layout.setTypicalSize(0,0))},i.prototype.removeAllRenderers=function(){for(var t=this.$indexToRenderer,e=Object.keys(t),i=e.length,n=0;i>n;n++){(c=t[e[n]])&&(this.rendererRemoved(c,c.itemIndex,c.data),this.removeChild(c))}this.$indexToRenderer=[];var r=this.$DataGroup;if(r[10]){var o=r[3],a=Object.keys(o),s=a.length;for(n=0;s>n;n++)for(var l=o[a[n]],u=l.length,h=0;u>h;h++){var c=l[h];this.rendererRemoved(c,c.itemIndex,c.data),this.removeChild(c)}r[3]={},r[2]={},r[10]=!1}},i.prototype.createRenderers=function(){if(this.$dataProvider)for(var t=0,e=this.$dataProvider.length,i=0;e>i;i++){var n=this.$dataProvider.getItemAt(i),r=this.itemToRendererClass(n),o=this.createOneRenderer(r);o&&(this.$indexToRenderer[t]=o,this.updateRenderer(o,t,n),this.rendererAdded(o,t,n),t++)}},i.prototype.updateRenderer=function(t,e,i){var n=this.$DataGroup;return n[11]=!0,t.itemIndex=e,t.parent==this&&this.setChildIndex(t,e),t.data=i,n[11]=!1,t},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$dataProvider?this.$dataProvider.length:0},enumerable:!0,configurable:!0}),i.prototype.rendererAdded=function(t,e,i){},i.prototype.rendererRemoved=function(t,e,i){},i}(t.Group);t.DataGroup=e,__reflect(e.prototype,"eui.DataGroup"),t.registerProperty(e,"itemRenderer","Class"),t.registerProperty(e,"itemRendererSkinName","Class"),t.registerProperty(e,"dataProvider","eui.ICollection",!0)}(eui||(eui={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.labelDisplay=null,e._label="",e.iconDisplay=null,e._icon=null,e.touchCaptured=!1,e.touchChildren=!1,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=t)},enumerable:!0,configurable:!0}),e.prototype.onTouchCancle=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},e.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},e.prototype.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(t.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},e.prototype.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},e.prototype.partAdded=function(t,e){e===this.labelDisplay?this.labelDisplay.text=this._label:e==this.iconDisplay&&(this.iconDisplay.source=this._icon)},e.prototype.buttonReleased=function(){},e}(t.Component);t.Button=e,__reflect(e.prototype,"eui.Button")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"maximum",{get:function(){return this.$Range[0]},set:function(t){t=+t||0;var e=this.$Range;t!==e[0]&&(e[0]=t,e[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this.$Range[2]},set:function(t){t=+t||0;var e=this.$Range;t!==e[2]&&(e[2]=t,e[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.$Range;return t[6]?t[5]:t[4]},set:function(t){t=+t||0,this.$setValue(t)},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(t){if(t===this.value)return!1;var e=this.$Range;return e[5]=t,e[6]=!0,this.invalidateProperties(),!0},Object.defineProperty(i.prototype,"snapInterval",{get:function(){return this.$Range[7]},set:function(t){var e=this.$Range;e[9]=!0,(t=+t||0)!==e[7]&&(isNaN(t)?(e[7]=1,e[9]=!1):e[7]=t,e[8]=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this);var t=this.$Range;if(t[2]>t[0]&&(t[1]?t[0]=t[2]:t[2]=t[0]),t[6]||t[1]||t[3]||t[8]){var i=t[6]?t[5]:t[4];t[6]=!1,t[1]=!1,t[3]=!1,t[8]=!1,this.setValue(this.nearestValidValue(i,t[7]))}},i.prototype.nearestValidSize=function(t){var e=this.snapInterval;if(0==e)return t;var i=Math.round(t/e)*e;return Math.abs(i)<e?e:i},i.prototype.nearestValidValue=function(t,e){var i=this.$Range;if(0==e)return Math.max(i[2],Math.min(i[0],t));var n=i[0]-i[2],r=1;if(t-=i[2],e!=Math.round(e)){var o=(1+e).toString().split(".");n*=r=Math.pow(10,o[1].length),t=Math.round(t*r),e=Math.round(e*r)}var a=Math.max(0,Math.floor(t/e)*e),s=Math.min(n,Math.floor((t+e)/e)*e);return(t-a>=(s-a)/2?s:a)/r+i[2]},i.prototype.setValue=function(e){var i=this.$Range;i[4]!==e&&(i[0]>i[2]?i[4]=Math.min(i[0],Math.max(i[2],e)):i[4]=e,i[6]=!1,this.invalidateDisplayList(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"value"))},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){},i}(t.Component);t.Range=e,__reflect(e.prototype,"eui.Range"),t.registerBindable(e.prototype,"value")}(eui||(eui={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.$target=null,e.$useVirtualLayout=!1,e.$typicalWidth=71,e.$typicalHeight=22,e}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},set:function(t){this.$target!==t&&(this.$target=t,this.clearVirtualLayoutCache())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(t){t=!!t,this.$useVirtualLayout!=t&&(this.$useVirtualLayout=t,this.dispatchEventWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),e.prototype.setTypicalSize=function(t,e){e=+e||22,((t=+t||71)!==this.$typicalWidth||e!==this.$typicalHeight)&&(this.$typicalWidth=t,this.$typicalHeight=e,this.$target&&this.$target.invalidateSize())},e.prototype.scrollPositionChanged=function(){},e.prototype.clearVirtualLayoutCache=function(){},e.prototype.elementAdded=function(t){},e.prototype.elementRemoved=function(t){},e.prototype.getElementIndicesInView=function(){return null},e.prototype.measure=function(){},e.prototype.updateDisplayList=function(t,e){},e}(egret.EventDispatcher);t.LayoutBase=e,__reflect(e.prototype,"eui.LayoutBase")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null,8:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"requireSelection",{get:function(){return this.$ListBase[0]},set:function(t){t=!!t;var e=this.$ListBase;t!==e[0]&&(e[0]=t,t&&(e[1]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$getSelectedIndex()},set:function(t){t=0|+t,this.setSelectedIndex(t,!1)},enumerable:!0,configurable:!0}),i.prototype.$getSelectedIndex=function(){var t=this.$ListBase;return t[2]!=i.NO_PROPOSED_SELECTION?t[2]:t[3]},i.prototype.setSelectedIndex=function(t,e){if(t!=this.selectedIndex){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[2]=t,this.invalidateProperties()}},Object.defineProperty(i.prototype,"selectedItem",{get:function(){var t=this.$ListBase;if(void 0!==t[5])return t[5];var e=this.$getSelectedIndex();return e!=i.NO_SELECTION&&null!=this.$dataProvider&&this.$dataProvider.length>e?this.$dataProvider.getItemAt(e):void 0},set:function(t){this.setSelectedItem(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedItem=function(t,e){if(void 0===e&&(e=!1),this.selectedItem!==t){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[5]=t,this.invalidateProperties()}},i.prototype.commitProperties=function(){var n=this.$dataProviderChanged;e.prototype.commitProperties.call(this);var r=this.$ListBase,o=this.$getSelectedIndex(),a=this.$dataProvider;n&&(o>=0&&a&&o<a.length?this.itemSelected(o,!0):this.requireSelection?r[2]=0:this.setSelectedIndex(-1,!1)),r[1]&&(r[1]=!1,r[0]&&o==i.NO_SELECTION&&a&&a.length>0&&(r[2]=0)),void 0!==r[5]&&(r[2]=a?a.getItemIndex(r[5]):i.NO_SELECTION,r[5]=void 0);var s=!1;r[2]!=i.NO_PROPOSED_SELECTION&&(s=this.commitSelection()),r[6]&&(r[6]=!1,s||t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.updateRenderer=function(t,i,n){return this.itemSelected(i,this.$isItemIndexSelected(i)),e.prototype.updateRenderer.call(this,t,i,n)},i.prototype.itemSelected=function(t,e){var i=this.$indexToRenderer[t];i&&(i.selected=e)},i.prototype.$isItemIndexSelected=function(t){return t==this.selectedIndex},i.prototype.commitSelection=function(e){void 0===e&&(e=!0);var n=this.$dataProvider,r=this.$ListBase,o=n?n.length-1:-1,a=r[3],s=r[2];if(s<i.NO_SELECTION&&(s=i.NO_SELECTION),s>o&&(s=o),r[0]&&s==i.NO_SELECTION&&n&&n.length>0)return r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1;if(r[4]&&!this.dispatchEventWith(egret.Event.CHANGING,!1,!0,!0))return this.itemSelected(r[2],!1),r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1;return r[3]=s,r[2]=i.NO_PROPOSED_SELECTION,a!=i.NO_SELECTION&&this.itemSelected(a,!1),r[3]!=i.NO_SELECTION&&this.itemSelected(r[3],!0),e&&(r[4]&&(this.dispatchEventWith(egret.Event.CHANGE),r[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},i.prototype.adjustSelection=function(t,e){void 0===e&&(e=!1);var n=this.$ListBase;n[2]!=i.NO_PROPOSED_SELECTION?n[2]=t:n[3]=t,n[6]=!0,this.invalidateProperties()},i.prototype.itemAdded=function(t,n){e.prototype.itemAdded.call(this,t,n);var r=this.$getSelectedIndex();r==i.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(n,!0):r>=n&&this.adjustSelection(r+1,!0)},i.prototype.itemRemoved=function(t,n){if(e.prototype.itemRemoved.call(this,t,n),this.selectedIndex!=i.NO_SELECTION){var r=this.$getSelectedIndex();n==r?this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0?0==n?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):r>n&&this.adjustSelection(r-1,!1)}},i.prototype.onCollectionChange=function(n){e.prototype.onCollectionChange.call(this,n),n.kind==t.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(i.NO_SELECTION,!1):n.kind==t.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},i.prototype.dataProviderRefreshed=function(){this.setSelectedIndex(i.NO_SELECTION,!1)},i.prototype.rendererAdded=function(t,e,i){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.rendererRemoved=function(t,e,i){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.onRendererTouchBegin=function(t){if(this.$stage){var e=this.$ListBase;t.$isDefaultPrevented||(e[8]=!1,e[7]=t.$currentTarget,this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))}},i.prototype.onRendererTouchCancle=function(t){var e=this.$ListBase;e[7]=null,e[8]=!0,this.$stage&&this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)},i.prototype.onRendererTouchEnd=function(e){var i=this.$ListBase,n=e.$currentTarget;n==i[7]&&(i[8]||(this.setSelectedIndex(n.itemIndex,!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)),i[8]=!1)},i.prototype.stage_touchEndHandler=function(t){t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},i.NO_SELECTION=-1,i.NO_PROPOSED_SELECTION=-2,i}(t.DataGroup);t.ListBase=e,__reflect(e.prototype,"eui.ListBase"),t.registerBindable(e.prototype,"selectedIndex"),t.registerBindable(e.prototype,"selectedItem")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.thumb=null,t.$viewport=null,t.autoVisibility=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"viewport",{get:function(){return this.$viewport},set:function(e){if(e!=this.$viewport){var i=this.$viewport;i&&(i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),i.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.$viewport=e,e&&(e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),e.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}},enumerable:!0,configurable:!0}),i.prototype.onViewportResize=function(t){this.invalidateDisplayList()},i.prototype.onPropertyChanged=function(t){},i}(t.Component);t.ScrollBarBase=e,__reflect(e.prototype,"eui.ScrollBarBase")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.trackHighlight=null,t.thumb=null,t.track=null,t.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},t.maximum=10,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this.$SliderBase[6]},set:function(t){this.$SliderBase[6]=+t||0},enumerable:!0,configurable:!0}),i.prototype.pointToValue=function(t,e){return this.minimum},Object.defineProperty(i.prototype,"liveDragging",{get:function(){return this.$SliderBase[9]},set:function(t){this.$SliderBase[9]=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pendingValue",{get:function(){return this.$SliderBase[7]},set:function(t){t=+t||0;var e=this.$SliderBase;t!==e[7]&&(e[7]=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t){this.$SliderBase[7]=t,e.prototype.setValue.call(this,t)},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.thumb?(this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track?(this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,egret.is(this.trackHighlight,"egret.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.thumb?(this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track&&(this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this))},i.prototype.onTrackOrThumbResize=function(t){this.updateSkinDisplayList()},i.prototype.onThumbTouchBegin=function(e){var i=this.$SliderBase;i[5]&&i[5].isPlaying&&this.stopAnimation();var n=this.$stage;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var r=this.thumb.globalToLocal(e.stageX,e.stageY,egret.$TempPoint);i[0]=r.x,i[1]=r.y,t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START)},i.prototype.onStageTouchMove=function(t){var e=this.$SliderBase;e[2]=t.$stageX,e[3]=t.$stageY;var i=this.track;if(i){var n=i.globalToLocal(e[2],e[3],egret.$TempPoint),r=this.pointToValue(n.x-e[0],n.y-e[1]);r=this.nearestValidValue(r,this.snapInterval),this.updateWhenTouchMove(r),t.updateAfterEvent()}},i.prototype.updateWhenTouchMove=function(t){t!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(t),this.dispatchEventWith(egret.Event.CHANGE)):this.pendingValue=t)},i.prototype.onStageTouchEnd=function(e){var i=e.$currentTarget;i.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END);var n=this.$SliderBase;this.liveDragging||this.value==n[7]||(this.setValue(n[7]),this.dispatchEventWith(egret.Event.CHANGE))},i.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=t.$target},i.prototype.stageTouchEndHandler=function(t){var e=t.$target,i=this.$SliderBase;t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=e&&this.contains(e)&&egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,!0,!0,t.$stageX,t.$stageY,t.touchPointID),i[4]=null},i.prototype.$animationUpdateHandler=function(t){this.pendingValue=t.currentValue},i.prototype.animationEndHandler=function(e){this.setValue(this.$SliderBase[8]),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},i.prototype.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},i.prototype.onTrackTouchBegin=function(e){var i=this.thumb?this.thumb.width:0,n=this.thumb?this.thumb.height:0,r=e.$stageX-i/2,o=e.$stageY-n/2,a=this.track.globalToLocal(r,o,egret.$TempPoint),s=this.$Range,l=this.pointToValue(a.x,a.y);l=this.nearestValidValue(l,s[7]);var u=this.$SliderBase;if(l!=u[7])if(0!=u[6]){u[5]||(u[5]=new t.sys.Animation(this.$animationUpdateHandler,this),u[5].endFunction=this.animationEndHandler);var h=u[5];h.isPlaying&&this.stopAnimation(),u[8]=l,h.duration=u[6]*(Math.abs(u[7]-u[8])/(s[0]-s[2])),h.from=u[7],h.to=u[8],t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),h.play()}else this.setValue(l),this.dispatchEventWith(egret.Event.CHANGE)},i}(t.Range);t.SliderBase=e,__reflect(e.prototype,"eui.SliderBase")}(eui||(eui={})),function(t){!function(t){function e(t){if(!t)return"";for(var e="  at <"+t.name,i=t.attributes,n=Object.keys(i),r=n.length,o=0;r>o;o++){var a=n[o],s=i[a];("id"!=a||"__"!=s.substring(0,2))&&(e+=" "+a+'="'+s+'"')}return e+(0==t.children.length?"/>":">")}function i(t){return e(t.parent)+"\n      \t"+e(t).substring(5)}var n=[],r=1,o="hostComponent",a="egret.Rectangle",s="Class",l="Array",u="skinName",h=[l,"boolean","string","number"],c=["id","locked","includeIn","excludeFrom"],p=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],d=["null","NaN","undefined","true","false"],f=function(){function e(){this.delayAssignmentDic={}}return e.prototype.$parseCode=function(t,e){var i=e||"$exmlClass"+r++,n=(0,eval)(t);if(n){egret.registerClass(n,i);for(var o=i.split("."),a=o.length,s=__global,l=0;a-1>l;l++){var u=o[l];s=s[u]||(s[u]={})}s[o[a-1]]||(s[o[a-1]]=n)}return n},e.prototype.parse=function(t){var e=null,i=!1,n="";(e=egret.XML.parse(t)).attributes.class?(n=e.attributes.class,delete e.attributes.class,i=!!n):n="$exmlClass"+r++;var o,a=this.parseClass(e,n).toCode();if(o=(0,eval)(a),i&&o){egret.registerClass(o,n);for(var s=n.split("."),l=s.length,u=__global,h=0;l-1>h;h++){var c=s[h];u=u[c]||(u[c]={})}u[s[l-1]]||(u[s[l-1]]=o)}return o},e.prototype.parseClass=function(e,i){t.exmlConfig||(t.exmlConfig=new t.EXMLConfig),this.currentXML=e,this.currentClassName=i,this.delayAssignmentDic={},this.idDic={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new t.EXClass,this.stateIds=[];var n=i.lastIndexOf(".");this.currentClass.className=-1!=n?i.substring(n+1):i,this.startCompile();var r=this.currentClass;return this.currentClass=null,r},e.prototype.startCompile=function(){var e=this.getClassNameOfNode(this.currentXML);this.isSkinClass="eui.Skin"==e,this.currentClass.superClass=e,this.getStateNames();var i=this.currentXML.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1===o.nodeType&&o.namespace==t.NS_W&&"Declarations"==o.localName){this.declarations=o;break}}this.currentXML.namespace&&(this.addIds(this.currentXML.children),this.createConstructFunc())},e.prototype.addIds=function(e){if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];if(1==r.nodeType&&r.namespace&&!this.isInnerClass(r)&&(this.addIds(r.children),r.namespace!=t.NS_W&&r.localName))if(this.isProperty(r)){var o=r.localName.indexOf("."),a=r.children;if(-1==o||!a||0==a.length)continue;var s=a[0];this.stateIds.push(s.attributes.id)}else if(1===r.nodeType){var l=r.attributes.id;if(l){var u=new RegExp("^[a-zA-Z_$]{1}[a-z0-9A-Z_$]*");null==l.match(u)&&egret.$warn(2022,l),null!=l.match(new RegExp(/ /g))&&egret.$warn(2022,l),-1==this.skinParts.indexOf(l)&&this.skinParts.push(l),this.createVarForNode(r),this.isStateNode(r)&&this.stateIds.push(l)}else this.createIdForNode(r),this.isStateNode(r)&&this.stateIds.push(r.attributes.id)}}},e.prototype.isInnerClass=function(e){if(e.hasOwnProperty("isInnerClass"))return e.isInnerClass;var i="Skin"==e.localName&&e.namespace==t.NS_S;if(!i)if(this.isProperty(e))i=!1;else{var n=void 0,r=e.parent;if(this.isProperty(r)){var o=(n=r.localName).indexOf(".");-1!=o&&(n.substring(o+1),n=n.substring(0,o)),r=r.parent}else n=t.exmlConfig.getDefaultPropById(r.localName,r.namespace);var a=t.exmlConfig.getClassNameById(r.localName,r.namespace);i=t.exmlConfig.getPropertyType(n,a)==s}return e.isInnerClass=i,i},e.prototype.containsState=function(t){var e=t.attributes;if(e.includeIn||e.excludeFrom)return!0;for(var i=Object.keys(e),n=i.length,r=0;n>r;r++){if(-1!=i[r].indexOf("."))return!0}return!1},e.prototype.createIdForNode=function(t){var e=this.getNodeId(t);this.idDic[e]?this.idDic[e]++:this.idDic[e]=1,e+=this.idDic[e],t.attributes.id=e},e.prototype.getNodeId=function(t){return t.attributes.id?t.attributes.id:"_"+t.localName},e.prototype.createVarForNode=function(e){""!=this.getClassNameOfNode(e)&&(this.currentClass.getVariableByName(e.attributes.id)||this.currentClass.addVariable(new t.EXVariable(e.attributes.id)))},e.prototype.createFuncForNode=function(e){var i=e.localName;if(this.isBasicTypeData(i))return this.createBasicTypeForNode(e);var n=this.getClassNameOfNode(e),r=new t.EXFunction,o=e.attributes.id;r.name=o+"_i",this.currentClass.addFunction(r);var a=new t.EXCodeBlock;r.codeBlock=a;var s="t";"Object"==i?a.addVar(s,"{}"):a.addVar(s,"new "+n+"()"),!!this.currentClass.getVariableByName(o)&&a.addAssignment("this."+o,s),this.addAttributesToCodeBlock(a,s,e),this.initlizeChildNode(e,a,s);var l=this.delayAssignmentDic[o];if(l)for(var u=l.length,h=0;u>h;h++){var c=l[h];a.concat(c)}return a.addReturn(s),"this."+r.name+"()"},e.prototype.isBasicTypeData=function(t){return-1!=h.indexOf(t)},e.prototype.createBasicTypeForNode=function(t){var e=t.localName,i="",n=this.currentClass.getVariableByName(t.attributes.id),r=t.children,o="";if(r&&r.length>0){var a=r[0];3==a.nodeType&&(o=a.text.trim())}switch(e){case l:var s=[];if(r)for(var u=r.length,h=0;u>h;h++){var c=r[h];1==c.nodeType&&s.push(this.createFuncForNode(c))}i="["+s.join(",")+"]";break;case"boolean":i="false"!=o&&o?"true":"false";break;case"number":-1!=(i=o).indexOf("%")&&(i=i.substring(0,i.length-1));break;case"string":i=this.formatString(o)}return n&&(n.defaultValue=i),i},e.prototype.addAttributesToCodeBlock=function(e,i,n){var r,o,a=n.attributes,s=Object.keys(a);s.sort();for(var l=s.length,u=0;l>u;u++)if(r=s[u],this.isNormalKey(r)&&(o=a[r],r=this.formatKey(r,o),o=this.formatValue(r,o,n))){if(this.currentClass.getVariableByName(o)){var h="this.",c=a.id,p=h+c+" = t;";this.currentClass.getVariableByName(c)||this.createVarForNode(n),e.containsCodeLine(p)||e.addCodeLineAt(p,1);var d=new t.EXCodeBlock;"this"==i?d.addAssignment(i,h+o,r):(d.startIf(h+c),d.addAssignment(h+c,h+o,r),d.endBlock()),this.delayAssignmentDic[o]||(this.delayAssignmentDic[o]=[]),this.delayAssignmentDic[o].push(d),o=h+o}e.addAssignment(i,o,r)}},e.prototype.initlizeChildNode=function(e,n,r){var o=e.children;if(o&&0!=o.length){for(var a,s=t.exmlConfig.getClassNameById(e.localName,e.namespace),l=[],h=o.length,c=[],p=0;h>p;p++){var d=o[p];if(1==d.nodeType&&d.namespace!=t.NS_W)if(this.isInnerClass(d)){if("Skin"==d.localName){var f=this.parseInnerClass(d);(y=t.exmlConfig.getPropertyType(u,s))?n.addAssignment(r,f,u):egret.$error(2005,this.currentClassName,u,i(d))}}else{var g=d.localName;if(this.isProperty(d)){if(!this.isNormalKey(g))continue;var y;if(!(y=t.exmlConfig.getPropertyType(d.localName,s)))continue;if(!d.children||0==d.children.length)continue;this.addChildrenToProp(d.children,y,g,n,r,a,c,e)}else l.push(d)}}if(0!=l.length){var v=t.exmlConfig.getDefaultPropById(e.localName,e.namespace),m=t.exmlConfig.getPropertyType(v,s);v&&m&&this.addChildrenToProp(l,m,v,n,r,a,c,e)}}},e.prototype.parseInnerClass=function(t){var i=n.pop();i||(i=new e);var o=this.currentClass.className+"$"+t.localName+r++,a=i.parseClass(t,o);return this.currentClass.addInnerClass(a),n.push(i),o},e.prototype.addChildrenToProp=function(t,e,i,n,r,o,a,u){var h="",c=t.length;if(c>1){if(e!=l)return;for(var p=[],d=0;c>d;d++){1==(v=t[d]).nodeType&&(h=this.createFuncForNode(v),this.getClassNameOfNode(v),this.isStateNode(v)||p.push(h))}h="["+p.join(",")+"]"}else{var f=t[0];if(e==l)if(f.localName==l){p=[];if(f.children)for(var g=f.children.length,y=0;g>y;y++){var v;1==(v=f.children[y]).nodeType&&(h=this.createFuncForNode(v),this.getClassNameOfNode(v),this.isStateNode(v)||p.push(h))}h="["+p.join(",")+"]"}else h=this.createFuncForNode(f),this.getClassNameOfNode(f),h=this.isStateNode(f)?"[]":"["+h+"]";else if(1==f.nodeType)if(e==s){if(c>1)return;h=this.parseInnerClass(t[0])}else this.getClassNameOfNode(f),h=this.createFuncForNode(f);else h=this.formatValue(i,f.text,u)}""!=h&&(-1==h.indexOf("()")&&(i=this.formatKey(i,h)),-1==a.indexOf(i)&&a.push(i),n.addAssignment(r,h,i))},e.prototype.isProperty=function(e){if(e.hasOwnProperty("isProperty"))return e.isProperty;var i,n=e.localName;if(n&&1===e.nodeType&&e.parent&&!this.isBasicTypeData(n)){var r=e.parent,o=n.indexOf(".");-1!=o&&(n=n.substr(0,o));var a=t.exmlConfig.getClassNameById(r.localName,r.namespace);i=!!t.exmlConfig.getPropertyType(n,a)}else i=!1;return e.isProperty=i,i},e.prototype.isNormalKey=function(t){return!(!t||-1!=t.indexOf(".")||-1!=t.indexOf(":")||-1!=c.indexOf(t))},e.prototype.formatKey=function(t,e){return-1!=e.indexOf("%")&&("height"==t?t="percentHeight":"width"==t&&(t="percentWidth")),t},e.prototype.formatValue=function(e,i,n){i||(i="");var r=i;i=i.trim();var o=this.getClassNameOfNode(n),l=t.exmlConfig.getPropertyType(e,o),h=this.formatBinding(e,i,n);if(h){this.checkIdForState(n);var c="this";n!==this.currentXML&&(c+="."+n.attributes.id),this.bindings.push(new t.EXBinding(c,e,h.templates,h.chainIndex)),i=""}else if(l==a)i="new "+a+"("+i+")";else if("Percentage"==l)-1!=i.indexOf("%")&&(i=this.formatString(i));else switch(l){case s:e==u&&(i=this.formatString(r));break;case"number":0==i.indexOf("#")?i="0x"+i.substring(1):-1!=i.indexOf("%")&&(i=parseFloat(i.substr(0,i.length-1)).toString());break;case"boolean":i="false"!=i&&i?"true":"false";break;case"string":case"any":i=this.formatString(r)}return i},e.prototype.formatString=function(t){return'"'+(t=(t=(t=(t=this.unescapeHTMLEntity(t)).split("\n").join("\\n")).split("\r").join("\\n")).split('"').join('\\"'))+'"'},e.prototype.formatBinding=function(t,e,i){if(!e)return null;if("{"!=(e=e.trim()).charAt(0)||"}"!=e.charAt(e.length-1))return null;for(var n=-1==(e=e.substring(1,e.length-1).trim()).indexOf("+")?[e]:this.parseTemplates(e),r=[],a=n.length,s=0;a>s;s++){var l=n[s].trim();if(l){var u=l.charAt(0);if(!("'"==u||'"'==u||u>="0"&&"9">=u||"-"==u||-1==l.indexOf(".")&&-1!=d.indexOf(l))){0==l.indexOf("this.")&&(l=l.substring(5));var h=l.split(".")[0];h!=o&&-1==this.skinParts.indexOf(h)&&(l=o+"."+l),n[s]='"'+l+'"',r.push(s)}}else n.splice(s,1),s--,a--}return{templates:n,chainIndex:r}},e.prototype.parseTemplates=function(t){if(-1==t.indexOf("'"))return t.split("+");var e=!1,i="";for(t=t.split("\\'").join("\v0\v");t.length>0;){var n=t.indexOf("'");if(-1==n){i+=t;break}i+=t.substring(0,n+1),-1==(n=(t=t.substring(n+1)).indexOf("'"))&&(n=t.length-1,e=!0),i+=t.substring(0,n+1).split("+").join("\v1\v"),t=t.substring(n+1)}t=i.split("\v0\v").join("\\'"),e&&(t+="'");for(var r=t.split("+"),o=r.length,a=0;o>a;a++)r[a]=r[a].split("\v1\v").join("+");return r},e.prototype.unescapeHTMLEntity=function(t){if(!t)return"";for(var e=p.length,i=0;e>i;i++){var n=p[i],r=n[0],o=n[1];t=t.split(o).join(r)}return t},e.prototype.createConstructFunc=function(){var e=new t.EXCodeBlock;e.addEmptyLine();var i="this";if(this.addAttributesToCodeBlock(e,i,this.currentXML),this.declarations){var n=this.declarations.children;if(n&&n.length>0)for(var r=n.length,o=0;r>o;o++){var a=n[o];if(1==a.nodeType){var s=this.createFuncForNode(a);s&&e.addCodeLine(s+";")}}}this.initlizeChildNode(this.currentXML,e,i);var l,u,h=this.stateIds;if(h.length>0){u=h.length;for(o=0;u>o;o++)l=h[o],e.addCodeLine("this."+l+"_i();");e.addEmptyLine()}var c=this.skinParts,p="[]";if((u=c.length)>0){for(o=0;u>o;o++)c[o]='"'+c[o]+'"';p="["+c.join(",")+"]"}var d=new t.EXFunction;d.name="skinParts",d.isGet=!0;var f=new t.EXCodeBlock;f.addReturn(p),d.codeBlock=f,this.currentClass.addFunction(d),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var g,y=this.currentXML,v=(this.getClassNameOfNode(y),y.attributes),m=Object.keys(v),$=m.length,b=0;$>b;b++){var _=m[b],x=v[_],T=_.indexOf(".");if(-1!=T){var E=_.substring(0,T);E=this.formatKey(E,x);var S=this.formatValue(E,x,y);if(!S)continue;var C=_.substr(T+1),w=(g=this.getStateByName(C,y)).length;if(w>0)for(o=0;w>o;o++){(L=g[o]).addOverride(new t.EXSetProperty("",E,S))}}}var P=this.stateCode;if((u=P.length)>0){e.addCodeLine("this.states = [");var D=!0;for(o=0;u>o;o++){var L=P[o];D?D=!1:e.addCodeLine("\t,");for(var I=L.toCode().split("\n"),O=0;O<I.length;){var R=I[O];R&&e.addCodeLine("\t"+R),O++}}e.addCodeLine("];")}var N=this.bindings;if((u=N.length)>0){e.addEmptyLine();for(o=0;u>o;o++){var A=N[o];e.addCodeLine(A.toCode())}}this.currentClass.constructCode=e},e.prototype.isStateNode=function(t){var e=t.attributes;return e.hasOwnProperty("includeIn")||e.hasOwnProperty("excludeFrom")},e.prototype.getStateNames=function(){var e=this.currentXML,i=t.exmlConfig.getClassNameById(e.localName,e.namespace);if("State[]"==t.exmlConfig.getPropertyType("states",i)){var n=e.attributes.states;n&&delete e.attributes.states;var r,o,a=this.stateNames,s=e.children;if(s)for(var l=s.length,u=0;l>u;u++)if(1==(o=s[u]).nodeType&&"states"==o.localName){o.namespace=t.NS_W,r=o.children;break}if(r||n)if(n){var h=n.split(","),c=h.length;for(u=0;c>u;u++){(b=h[u].trim())&&(-1==a.indexOf(b)&&a.push(b),this.stateCode.push(new t.EXState(b)))}}else{var p=r.length;for(u=0;p>u;u++){var d=r[u];if(1==d.nodeType){var f=[],g=d.attributes;if(g.stateGroups)for(var y=g.stateGroups.split(","),v=y.length,m=0;v>m;m++){var $=y[m].trim();$&&(-1==a.indexOf($)&&a.push($),f.push($))}var b=g.name;-1==a.indexOf(b)&&a.push(b),this.stateCode.push(new t.EXState(b,f))}}}}},e.prototype.createStates=function(e){var i=e.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1==o.nodeType&&!this.isInnerClass(o)&&(this.createStates(o),o.namespace!=t.NS_W&&o.localName))if(this.isProperty(o)){var a=o.localName,s=a.indexOf("."),u=o.children;if(-1==s||!u||0==u.length)continue;var h=a.substring(s+1);a=a.substring(0,s);var c=this.getClassNameOfNode(e),p=(t.exmlConfig.getPropertyType(a,c),u[0]),d=void 0;if(1==p.nodeType?(this.createFuncForNode(p),this.checkIdForState(p),d="this."+p.attributes.id):d=this.formatValue(a,p.text,e),(P=(v=this.getStateByName(h,o)).length)>0)for(var f=0;P>f;f++){(m=v[f]).addOverride(new t.EXSetProperty(e.attributes.id,a,d))}}else if(this.containsState(o)){var g=o.attributes,y=g.id;this.getClassNameOfNode(o),this.checkIdForState(o);h=void 0;var v=void 0,m=void 0;if(this.isStateNode(o)){var $="",b=o.parent;b.localName==l&&(b=b.parent),b&&b.parent&&this.isProperty(b)&&(b=b.parent),b&&b!=this.currentXML&&($=b.attributes.id,this.checkIdForState(b));var _=this.findNearNodeId(o),x=[];if(g.includeIn)x=g.includeIn.split(",");else{var T=g.excludeFrom.split(","),E=T.length;for(f=0;E>f;f++){var S=T[f];this.getStateByName(S,o)}E=this.stateCode.length;for(f=0;E>f;f++)m=this.stateCode[f],-1==T.indexOf(m.name)&&x.push(m.name)}for(var C=x.length,w=0;C>w;w++)if(h=x[w],(v=this.getStateByName(h,o)).length>0){var P=v.length;for(f=0;P>f;f++)(m=v[f]).addOverride(new t.EXAddItems(y,$,_.position,_.relativeTo))}}for(var D=Object.keys(g),L=D.length,I=0;L>I;I++){var O=D[I];d=g[O];if(-1!=(s=O.indexOf("."))){var R=O.substring(0,s);R=this.formatKey(R,d);var N=this.formatBinding(R,d,o);if(!N&&!(d=this.formatValue(R,d,o)))continue;if(h=O.substr(s+1),(P=(v=this.getStateByName(h,o)).length)>0)for(f=0;P>f;f++)m=v[f],N?m.addOverride(new t.EXSetStateProperty(y,R,N.templates,N.chainIndex)):m.addOverride(new t.EXSetProperty(y,R,d))}}}}},e.prototype.checkIdForState=function(t){if(t&&!this.currentClass.getVariableByName(t.attributes.id)){this.createVarForNode(t);var e=t.attributes.id,i=e+"_i",n=this.currentClass.getFuncByName(i);if(n){var r="this."+e+" = t;",o=n.codeBlock;o&&(o.containsCodeLine(r)||o.addCodeLineAt(r,1))}}},e.prototype.getStateByName=function(t,e){for(var i=[],n=this.stateCode,r=n.length,o=0;r>o;o++){var a=n[o];if(a.name==t)-1==i.indexOf(a)&&i.push(a);else if(a.stateGroups.length>0){for(var s=!1,l=a.stateGroups.length,u=0;l>u;u++){if(a.stateGroups[u]==t){s=!0;break}}s&&-1==i.indexOf(a)&&i.push(a)}}return i},e.prototype.findNearNodeId=function(t){for(var e,i,n="",r=-1,o=!1,a=t.parent.children,s=a.length,l=0;s>l;l++){var u=a[l];this.isProperty(u)||(u==t?(o=!0,r=l):!o||i||this.isStateNode(u)||(i=u),o||this.isStateNode(u)||u)}return 0==r?{position:e=0,relativeTo:n}:r==s-1?{position:e=1,relativeTo:n}:i&&(e=2,n=i.attributes.id)?(this.checkIdForState(i),{position:e,relativeTo:n}):{position:1,relativeTo:n}},e.prototype.getClassNameOfNode=function(e){return t.exmlConfig.getClassNameById(e.localName,e.namespace)},e}();t.EXMLParser=f,__reflect(f.prototype,"eui.sys.EXMLParser")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.$selected=!1,t.$autoSelected=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"selected",{get:function(){return this.$selected},set:function(t){this.$setSelected(t)},enumerable:!0,configurable:!0}),i.prototype.$setSelected=function(e){return(e=!!e)!==this.$selected&&(this.$selected=e,this.invalidateState(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selected"),!0)},i.prototype.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);if(this.$selected){var i=t+"AndSelected",n=this.skin;return n&&n.hasState(i)?i:"disabled"==t?"disabled":"down"}return t},i.prototype.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.dispatchEventWith(egret.Event.CHANGE))},i}(t.Button);t.ToggleButton=e,__reflect(e.prototype,"eui.ToggleButton"),t.registerBindable(e.prototype,"selected")}(eui||(eui={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$horizontalAlign="left",e.$verticalAlign="top",e.$gap=6,e.$paddingLeft=0,e.$paddingRight=0,e.$paddingTop=0,e.$paddingBottom=0,e.elementSizeTable=[],e.startIndex=-1,e.endIndex=-1,e.indexInViewCalculated=!1,e.maxElementSize=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"horizontalAlign",{get:function(){return this.$horizontalAlign},set:function(t){this.$horizontalAlign!=t&&(this.$horizontalAlign=t,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return this.$gap},set:function(t){t=+t||0,this.$gap!==t&&(this.$gap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.$paddingLeft},set:function(t){t=+t||0,this.$paddingLeft!==t&&(this.$paddingLeft=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.$paddingRight},set:function(t){t=+t||0,this.$paddingRight!==t&&(this.$paddingRight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.$paddingTop},set:function(t){t=+t||0,this.$paddingTop!==t&&(this.$paddingTop=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.$paddingBottom},set:function(t){t=+t||0,this.$paddingBottom!==t&&(this.$paddingBottom=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),e.prototype.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},e.prototype.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},e.prototype.measureReal=function(){},e.prototype.measureVirtual=function(){},e.prototype.updateDisplayList=function(t,e){var i=this.$target;if(i)return 0==i.numElements?void i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)):void(this.$useVirtualLayout?this.updateDisplayListVirtual(t,e):this.updateDisplayListReal(t,e))},e.prototype.getStartPosition=function(t){return 0},e.prototype.getElementSize=function(t){return 0},e.prototype.getElementTotalSize=function(){return 0},e.prototype.elementRemoved=function(e){this.$useVirtualLayout&&(t.prototype.elementRemoved.call(this,e),this.elementSizeTable.splice(e,1))},e.prototype.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},e.prototype.findIndexAt=function(t,e,i){var n=.5*(e+i)|0,r=this.getStartPosition(n),o=this.getElementSize(n);return t>=r&&t<r+o+this.$gap?n:e==i?-1:r>t?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},e.prototype.scrollPositionChanged=function(){(t.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout)&&(this.getIndexInView()&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList()))},e.prototype.getIndexInView=function(){return!1},e.prototype.updateDisplayListVirtual=function(t,e){},e.prototype.updateDisplayListReal=function(t,e){},e.prototype.flexChildrenProportionally=function(t,e,i,n){var r,o=n.length;do{r=!0;var a=e-t*i/100;a>0?e-=a:a=0;for(var s=e/i,l=0;o>l;l++){var u=n[l],h=u.percent*s;if(h<u.min){var c=u.min;u.size=c,n[l]=n[--o],n[o]=u,i-=u.percent,a>=c?a-=c:(e-=c-a,a=0),r=!1;break}if(h>u.max){var p=u.max;u.size=p,n[l]=n[--o],n[o]=u,i-=u.percent,a>=p?a-=p:(e-=p-a,a=0),r=!1;break}u.size=h}}while(!r)},e}(t.LayoutBase);t.LinearLayoutBase=e,__reflect(e.prototype,"eui.LinearLayoutBase")}(eui||(eui={})),function(t){!function(t){var e=function(){this.layoutElement=null,this.size=0,this.percent=NaN,this.min=NaN,this.max=NaN};t.ChildInfo=e,__reflect(e.prototype,"eui.sys.ChildInfo")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?t/r*n:0)},e.prototype.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.width;return this.thumb.getLayoutBounds(t),e-t.width},e.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?(this.pendingValue-t[2])/i*e:0,r=this.track.localToGlobal(n,0,egret.$TempPoint),o=r.x,a=r.y,s=this.thumb.$parent.globalToLocal(o,a,egret.$TempPoint).x,l=egret.$TempRectangle;if(this.thumb.getLayoutBounds(l),this.thumb.setLayoutBoundsPosition(Math.round(s),l.y),this.trackHighlight&&this.trackHighlight.$parent){var u=this.trackHighlight.$parent.globalToLocal(o,a,egret.$TempPoint).x-n;this.trackHighlight.x=Math.round(u),this.trackHighlight.width=Math.round(n)}}},e}(t.SliderBase);t.HSlider=e,__reflect(e.prototype,"eui.HSlider")}(eui||(eui={})),function(t){var e=[],i={},n={},r=function(){function t(){}return t.prototype.getAsset=function(t,r,o){var a=i[t];if(a)a.push([r,o]);else{var s=e.pop();s||(s=new egret.ImageLoader),i[t]=[[r,o]],n[s.$hashCode]=t,s.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),s.load(t)}},t.prototype.onLoadFinish=function(t){var r,o=t.currentTarget;o.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),o.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),t.$type==egret.Event.COMPLETE&&((r=new egret.Texture)._setBitmapData(o.data),o.data=null),e.push(o);var a=n[o.$hashCode];delete n[o.$hashCode];var s=i[a];delete i[a];for(var l=s.length,u=0;l>u;u++){var h=s[u];h[0].call(h[1],r,a)}},t}();t.DefaultAssetAdapter=r,__reflect(r.prototype,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])}(eui||(eui={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.sourceChanged=!1,i._source=null,i.initializeUIValues(),t&&(i.source=t),i}return __extends(i,e),Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t),this.invalidateDisplayList()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){t!=this.$fillMode&&(e.prototype.$setFillMode.call(this,t),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(t){var i=e.prototype.$setFillMode.call(this,t);return this.invalidateDisplayList(),i},Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this.$stage?this.parseSource():(this.sourceChanged=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(t){if(t==this.$texture)return!1;var i=e.prototype.$setTexture.call(this,t);return this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList(),i},i.prototype.parseSource=function(){this.sourceChanged=!1;var e=this._source;e&&"string"==typeof e?t.getAssets(this._source,(function(t){e===this._source&&egret.is(t,"egret.Texture")&&(this.$setTexture(t),t&&this.dispatchEventWith(egret.Event.COMPLETE))}),this):this.$setTexture(e)},i.prototype.$measureContentBounds=function(t){var e=this.$texture;if(e){var i=this.$UIComponent,n=i[10],r=i[11];if(isNaN(n)||isNaN(r))return void t.setEmpty();"clip"==this.$fillMode&&(n>e.$getTextureWidth()&&(n=e.$getTextureWidth()),r>e.$getTextureHeight()&&(r=e.$getTextureHeight())),t.setTo(0,0,n,r)}else t.setEmpty()},i.prototype.createChildren=function(){this.sourceChanged&&this.parseSource()},i.prototype.setActualSize=function(i,n){t.sys.UIComponentImpl.prototype.setActualSize.call(this,i,n),e.prototype.$setWidth.call(this,i),e.prototype.$setHeight.call(this,n)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},i.prototype.measure=function(){var t=this.$texture;t?this.setMeasuredSize(t.$getTextureWidth(),t.$getTextureHeight()):this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(t,e){this.$renderDirty=!0},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.Bitmap);t.Image=e,__reflect(e.prototype,"eui.Image",["eui.UIComponent","egret.DisplayObject"]),t.sys.implementUIComponent(e,egret.Bitmap),t.registerProperty(e,"scale9Grid","egret.Rectangle")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._data=null,t._selected=!1,t.itemIndex=-1,t.touchCaptured=!1,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()},enumerable:!0,configurable:!0}),i.prototype.dataChanged=function(){},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&(this._selected=t,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.onTouchCancle=function(t){this.touchCaptured=!1;var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.invalidateState()},i.prototype.onTouchBegin=function(t){this.$stage&&(this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent())},i.prototype.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},i.prototype.getCurrentState=function(){var t="up";if(this.enabled||(t="disabled"),this.touchCaptured&&(t="down"),this._selected){var e=t+"AndSelected",i=this.skin;return i&&i.hasState(e)?e:"disabled"==t?"disabled":"down"}return t},i}(t.Component);t.ItemRenderer=e,__reflect(e.prototype,"eui.ItemRenderer",["eui.IItemRenderer"]),t.registerBindable(e.prototype,"data")}(eui||(eui={})),function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){var e=i.call(this)||this;return e.$styleSetMap={fontFamily:!0,size:!0,bold:!0,italic:!0,textAlign:!0,verticalAlign:!0,lineSpacing:!0,textColor:!0,wordWrap:!0,displayAsPassword:!0,strokeColor:!0,stroke:!0,maxChars:!0,multiline:!0,border:!0,borderColor:!0,background:!0,backgroundColor:!0},e.$revertStyle={},e.$style=null,e.$changeFromStyle=!1,e._widthConstraint=NaN,e.initializeUIValues(),e.text=t,e}return __extends(n,i),Object.defineProperty(n.prototype,"style",{get:function(){return this.$style},set:function(t){this.$setStyle(t)},enumerable:!0,configurable:!0}),n.prototype.$setStyle=function(t){if(this.$style!=t){this.$style=t;var e=egret.getImplementation("eui.Theme");if(e){for(var i in this.$changeFromStyle=!0,this.$revertStyle)this[i]=this.$revertStyle[i];if(this.$revertStyle={},null==t)return void(this.$changeFromStyle=!1);for(var n=t.split(","),r=0;r<n.length;r++){var o=e.$getStyleConfig(n[r]);if(o)for(var i in o)if(this.$styleSetMap[i]){var a=this[i];this[i]=o[i],this.$revertStyle[i]=a}}this.$changeFromStyle=!1}}},n.prototype.$setFontFamily=function(t){return this.$changeFromStyle||(delete this.$revertStyle.fontFanily,this.$styleSetMap.fontFanily=!1),i.prototype.$setFontFamily.call(this,t)},n.prototype.$setSize=function(t){return this.$changeFromStyle||(delete this.$revertStyle.size,this.$styleSetMap.size=!1),i.prototype.$setSize.call(this,t)},n.prototype.$setBold=function(t){return this.$changeFromStyle||(delete this.$revertStyle.bold,this.$styleSetMap.bold=!1),i.prototype.$setBold.call(this,t)},n.prototype.$setItalic=function(t){return this.$changeFromStyle||(delete this.$revertStyle.italic,this.$styleSetMap.italic=!1),i.prototype.$setItalic.call(this,t)},n.prototype.$setTextAlign=function(t){return this.$changeFromStyle||(delete this.$revertStyle.textAlign,this.$styleSetMap.textAlign=!1),i.prototype.$setTextAlign.call(this,t)},n.prototype.$setVerticalAlign=function(t){return this.$changeFromStyle||(delete this.$revertStyle.verticalAlign,this.$styleSetMap.verticalAlign=!1),i.prototype.$setVerticalAlign.call(this,t)},n.prototype.$setLineSpacing=function(t){return this.$changeFromStyle||(delete this.$revertStyle.lineSpacing,this.$styleSetMap.lineSpacing=!1),i.prototype.$setLineSpacing.call(this,t)},n.prototype.$setTextColor=function(t){return this.$changeFromStyle||(delete this.$revertStyle.textColor,this.$styleSetMap.textColor=!1),i.prototype.$setTextColor.call(this,t)},n.prototype.$setWordWrap=function(t){this.$changeFromStyle||(delete this.$revertStyle.wordWrap,this.$styleSetMap.wordWrap=!1),i.prototype.$setWordWrap.call(this,t)},n.prototype.$setDisplayAsPassword=function(t){return this.$changeFromStyle||(delete this.$revertStyle.displayAsPassword,this.$styleSetMap.displayAsPassword=!1),i.prototype.$setDisplayAsPassword.call(this,t)},n.prototype.$setStrokeColor=function(t){return this.$changeFromStyle||(delete this.$revertStyle.strokeColor,this.$styleSetMap.strokeColor=!1),i.prototype.$setStrokeColor.call(this,t)},n.prototype.$setStroke=function(t){return this.$changeFromStyle||(delete this.$revertStyle.stroke,this.$styleSetMap.stroke=!1),i.prototype.$setStroke.call(this,t)},n.prototype.$setMaxChars=function(t){return this.$changeFromStyle||(delete this.$revertStyle.maxChars,this.$styleSetMap.maxChars=!1),i.prototype.$setMaxChars.call(this,t)},n.prototype.$setMultiline=function(t){return this.$changeFromStyle||(delete this.$revertStyle.multiline,this.$styleSetMap.multiline=!1),i.prototype.$setMultiline.call(this,t)},n.prototype.$setBorder=function(t){this.$changeFromStyle||(delete this.$revertStyle.border,this.$styleSetMap.border=!1),i.prototype.$setBorder.call(this,t)},n.prototype.$setBorderColor=function(t){this.$changeFromStyle||(delete this.$revertStyle.borderColor,this.$styleSetMap.borderColor=!1),i.prototype.$setBorderColor.call(this,t)},n.prototype.$setBackground=function(t){this.$changeFromStyle||(delete this.$revertStyle.background,this.$styleSetMap.background=!1),i.prototype.$setBackground.call(this,t)},n.prototype.$setBackgroundColor=function(t){this.$changeFromStyle||(delete this.$revertStyle.backgroundColor,this.$styleSetMap.backgroundColor=!1),i.prototype.$setBackgroundColor.call(this,t)},n.prototype.$invalidateTextField=function(){i.prototype.$invalidateTextField.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.createChildren=function(){},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$TextField[3],n=NaN;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(n=t[13]):n=t[8]:(n=this._widthConstraint,this._widthConstraint=NaN),i.prototype.$setWidth.call(this,n),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,e)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),isNaN(t)||t===this._widthConstraint||0==t)this._widthConstraint=t;else{this._widthConstraint=t;var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&this.invalidateSize()}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.TextField);t.Label=i,__reflect(i.prototype,"eui.Label",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowMultipleSelection=!1,t._selectedIndices=[],t.isValidIndex=function(e,i,n){return t.$dataProvider&&e>=0&&e<t.$dataProvider.length&&e%1==0},t}return __extends(i,e),Object.defineProperty(i.prototype,"selectedIndices",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},set:function(t){this.setSelectedIndices(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},set:function(t){this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedItems",{get:function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;i>n;n++)t[n]=this.$dataProvider.getItemAt(e[n]);return t},set:function(t){var e=[];if(t)for(var i=t.length,n=0;i>n;n++){var r=this.$dataProvider.getItemIndex(t[n]);if(-1!=r&&e.splice(0,0,r),-1==r){e=[];break}}this.setSelectedIndices(e,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndices=function(t,e){var i=this.$ListBase;e&&(i[4]=i[4]||e),this._proposedSelectedIndices=t||[],this.invalidateProperties()},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},i.prototype.commitSelection=function(i){void 0===i&&(i=!0);var n=this.$ListBase,r=n[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var o=[];o.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=o}this._proposedSelectedIndices.length>0?n[2]=this._proposedSelectedIndices[0]:n[2]=-1}var a=e.prototype.commitSelection.call(this,!1);if(!a)return this._proposedSelectedIndices=null,!1;var s=this.$getSelectedIndex();return s>t.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(s)&&this._proposedSelectedIndices.push(s):this._proposedSelectedIndices=[s]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(r)&&this.itemSelected(r,!0),this.commitMultipleSelection()),i&&a&&(n[4]&&(this.dispatchEventWith(egret.Event.CHANGE),n[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),a},i.prototype.commitMultipleSelection=function(){var t,e,i=[],n=[],r=this._selectedIndices,o=this._proposedSelectedIndices;if(r.length>0&&o.length>0){for(e=o.length,t=0;e>t;t++)-1==r.indexOf(o[t])&&n.push(o[t]);for(e=r.length,t=0;e>t;t++)-1==o.indexOf(r[t])&&i.push(r[t])}else r.length>0?i=r:o.length>0&&(n=o);if(this._selectedIndices=o,i.length>0)for(e=i.length,t=0;e>t;t++)this.itemSelected(i[t],!1);if(n.length>0)for(e=n.length,t=0;e>t;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},i.prototype.$isItemIndexSelected=function(t){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):e.prototype.$isItemIndexSelected.call(this,t)},i.prototype.dataProviderRefreshed=function(){this.allowMultipleSelection||e.prototype.dataProviderRefreshed.call(this)},i.prototype.calculateSelectedIndices=function(t){var e=[],i=this._selectedIndices,n=i.length;if(n>0){if(1==n&&i[0]==t)return this.$ListBase[0]?(e.splice(0,0,i[0]),e):e;for(var r=!1,o=0;n>o;o++)i[o]==t?r=!0:i[o]!=t&&e.splice(0,0,i[o]);return r||e.splice(0,0,t),e}return e.splice(0,0,t),e},i.prototype.onRendererTouchEnd=function(i){if(this.allowMultipleSelection){var n=i.currentTarget;if(n!=this.$ListBase[7])return;this.setSelectedIndices(this.calculateSelectedIndices(n.itemIndex),!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)}else e.prototype.onRendererTouchEnd.call(this,i)},i}(t.ListBase);t.List=e,__reflect(e.prototype,"eui.List")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.closeButton=null,t.moveArea=null,t.titleDisplay=null,t._title="",t.offsetPointX=0,t.offsetPointY=0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onWindowTouchBegin,t,!1,100),t}return __extends(i,e),i.prototype.onWindowTouchBegin=function(t){this.$parent.addChild(this)},Object.defineProperty(i.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)},enumerable:!0,configurable:!0}),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.titleDisplay?this.titleDisplay.text=this._title:i==this.moveArea?this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.onCloseButtonClick=function(e){t.UIEvent.dispatchUIEvent(this,t.UIEvent.CLOSING,!0,!0)&&this.close()},i.prototype.close=function(){this.$parent&&this.$parent.removeChild(this)},i.prototype.onTouchBegin=function(t){this.$includeInLayout=!1,this.offsetPointX=this.x-t.$stageX,this.offsetPointY=this.y-t.$stageY,this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i.prototype.onTouchMove=function(t){this.x=t.$stageX+this.offsetPointX,this.y=t.$stageY+this.offsetPointY},i.prototype.onTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i}(t.Component);t.Panel=e,__reflect(e.prototype,"eui.Panel"),t.registerProperty(e,"elementsContent","Array",!0)}(eui||(eui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.thumb=null,i.labelDisplay=null,i._labelFunction=null,i._slideDuration=500,i._direction=t.Direction.LTR,i.slideToValue=0,i.animationValue=0,i.thumbInitX=0,i.thumbInitY=0,i.animation=new t.sys.Animation(i.animationUpdateHandler,i),i}return __extends(i,e),Object.defineProperty(i.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(t){t=0|+t,this._slideDuration!==t&&(this._slideDuration=t,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!=t&&(this.thumb&&(this.thumb.x=this.thumbInitX),this.thumb&&(this.thumb.y=this.thumbInitY),this._direction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(t){if(this.value===t)return!1;var i=this.$Range,n=e.prototype.$setValue.call(this,t);if(this._slideDuration>0&&this.$stage){this.validateProperties();var r=this.animation;if(r.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),r.stop()),this.slideToValue=this.nearestValidValue(t,i[7]),this.slideToValue===this.animationValue)return n;var o=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(i[0]-i[2]));r.duration=o===1/0?0:o,r.from=this.animationValue,r.to=this.slideToValue,r.play()}else this.animationValue=this.value;return n},i.prototype.animationUpdateHandler=function(t){var e=this.$Range,i=this.nearestValidValue(t.currentValue,e[7]);this.animationValue=Math.min(e[0],Math.max(e[2],i)),this.invalidateDisplayList()},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i===this.thumb&&(this.thumb.x&&(this.thumbInitX=this.thumb.x),this.thumb.y&&(this.thumbInitY=this.thumb.y),this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this))},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i===this.thumb&&this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)},i.prototype.onThumbResize=function(t){this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){var e=this.animation.isPlaying?this.animationValue:this.value,i=this.maximum,n=this.thumb;if(n){var r=n.width,o=n.height,a=Math.round(e/i*r);(0>a||a===1/0)&&(a=0);var s=Math.round(e/i*o);(0>s||s===1/0)&&(s=0);var l=n.$scrollRect;l||(l=egret.$TempRectangle),l.setTo(0,0,r,o);var u=n.x-l.x,h=n.y-l.y;switch(this._direction){case t.Direction.LTR:l.width=a,n.x=u;break;case t.Direction.RTL:l.width=a,l.x=r-a,n.x=l.x;break;case t.Direction.TTB:l.height=s,n.y=h;break;case t.Direction.BTT:l.height=s,l.y=o-s,n.y=l.y}n.scrollRect=l}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(e,i))},i}(t.Range);t.ProgressBar=e,__reflect(e.prototype,"eui.ProgressBar")}(eui||(eui={})),function(t){var e={},i=function(i){function n(){var t=i.call(this)||this;return t.$indexNumber=0,t.$radioButtonGroup=null,t._group=null,t.groupChanged=!1,t._groupName="radioGroup",t._value=null,t.groupName="radioGroup",t}return __extends(n,i),Object.defineProperty(n.prototype,"enabled",{get:function(){return!!this.$Component[3]&&(!this.$radioButtonGroup||this.$radioButtonGroup.$enabled)},set:function(t){this.$setEnabled(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"group",{get:function(){if(!this._group&&this._groupName){var i=e[this._groupName];i||((i=new t.RadioButtonGroup).$name=this._groupName,e[this._groupName]=i),this._group=i}return this._group},set:function(t){this._group!=t&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=t,this._groupName=t?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupName",{get:function(){return this._groupName},set:function(t){t&&""!=t&&(this._groupName=t,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.$setSelected=function(t){var e=i.prototype.$setSelected.call(this,t);return this.invalidateDisplayList(),e},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&(this._value=e,this.$selected&&this.group&&t.PropertyEvent.dispatchPropertyEvent(this.group,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))},enumerable:!0,configurable:!0}),n.prototype.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},n.prototype.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},n.prototype.addToGroup=function(){var t=this.group;return t&&t.$addInstance(this),t},n}(t.ToggleButton);t.RadioButton=i,__reflect(i.prototype,"eui.RadioButton")}(eui||(eui={})),function(t){function e(t,i){var n=t.parent,r=i.parent;if(!n||!r)return 0;var o=t.$nestLevel,a=i.$nestLevel,s=0,l=0;return n==r&&(s=n.getChildIndex(t),l=r.getChildIndex(i)),o>a||s>l?1:a>o||l>s?-1:t==i?0:e(n,r)}var i=0,n=function(n){function r(){var t=n.call(this)||this;return t.$name=null,t.radioButtons=[],t.$enabled=!0,t._selectedValue=null,t._selection=null,t.$name="_radioButtonGroup"+i++,t}return __extends(r,n),r.prototype.getRadioButtonAt=function(t){return this.radioButtons[t]},Object.defineProperty(r.prototype,"enabled",{get:function(){return this.$enabled},set:function(t){if(t=!!t,this.$enabled!==t){this.$enabled=t;for(var e=this.radioButtons,i=e.length,n=0;i>n;n++)e[n].invalidateState()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numRadioButtons",{get:function(){return this.radioButtons.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedValue",{get:function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},set:function(e){if(this._selectedValue=e,null!=e)for(var i=this.numRadioButtons,n=0;i>n;n++){var r=this.radioButtons[n];if(r.value==e||r.label==e){this.changeSelection(n,!1),this._selectedValue=null,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}else this.$setSelection(null,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection!=t&&this.$setSelection(t,!1)},enumerable:!0,configurable:!0}),r.prototype.$addInstance=function(t){t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this);var i=this.radioButtons;i.push(t),i.sort(e);for(var n=i.length,r=0;n>r;r++)i[r].$indexNumber=r;this._selectedValue&&(this.selectedValue=this._selectedValue),1==t.selected&&(this.selection=t),t.$radioButtonGroup=this,t.invalidateState()},r.prototype.$removeInstance=function(t,e){if(t)for(var i=!1,n=this.radioButtons,r=n.length,o=0;r>o;o++){var a=n[o];i?a.$indexNumber=a.$indexNumber-1:a==t&&(e&&t.addEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this),t==this._selection&&(this._selection=null),t.$radioButtonGroup=null,t.invalidateState(),this.radioButtons.splice(o,1),i=!0,o--,r--)}},r.prototype.$setSelection=function(e,i){if(this._selection==e)return!1;if(e){for(var n=this.numRadioButtons,r=0;n>r;r++)if(e==this.getRadioButtonAt(r)){this.changeSelection(r,i);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,i&&this.dispatchEventWith(egret.Event.CHANGE));return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"),!0},r.prototype.changeSelection=function(t,e){var i=this.getRadioButtonAt(t);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,e&&this.dispatchEventWith(egret.Event.CHANGE))},r.prototype.addedHandler=function(t){var e=t.target;e==t.currentTarget&&(e.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this),this.$addInstance(e))},r.prototype.removedHandler=function(t){var e=t.target;e==t.currentTarget&&(e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this),this.$removeInstance(e,!0))},r}(egret.EventDispatcher);t.RadioButtonGroup=n,__reflect(n.prototype,"eui.RadioButtonGroup"),t.registerBindable(n.prototype,"selectedValue")}(eui||(eui={})),function(t){var e=function(t){function e(e,i,n){var r=t.call(this)||this;return r.$fillColor=0,r.$fillAlpha=1,r.$strokeColor=4473924,r.$strokeAlpha=1,r.$strokeWeight=0,r.$ellipseWidth=0,r.$ellipseHeight=0,r.touchChildren=!1,r.$graphics=new egret.Graphics,r.$graphics.$setTarget(r),r.width=e,r.height=i,r.fillColor=n,r}return __extends(e,t),e.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(e.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),e.prototype.$measureContentBounds=function(t){this.$graphics&&t.setTo(0,0,this.width,this.height)},Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.$fillColor},set:function(t){null!=t&&this.$fillColor!=t&&(this.$fillColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillAlpha",{get:function(){return this.$fillAlpha},set:function(t){this.$fillAlpha!=t&&(this.$fillAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeColor",{get:function(){return this.$strokeColor},set:function(t){this.$strokeColor!=t&&(this.$strokeColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeAlpha",{get:function(){return this.$strokeAlpha},set:function(t){this.$strokeAlpha!=t&&(this.$strokeAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWeight",{get:function(){return this.$strokeWeight},set:function(t){this.$strokeWeight!=t&&(this.$strokeWeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipseWidth",{get:function(){return this.$ellipseWidth},set:function(t){this.$ellipseWidth!=t&&(this.$ellipseWidth=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipseHeight",{get:function(){return this.$ellipseHeight},set:function(t){this.$ellipseHeight!=t&&(this.$ellipseHeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),e.prototype.updateDisplayList=function(t,e){var i=this.graphics;i.clear(),this.$strokeWeight>0&&(i.beginFill(this.$fillColor,0),i.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight):i.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()),i.beginFill(this.$fillColor,this.$fillAlpha),i.lineStyle(this.$strokeWeight,this.$strokeColor,0,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight):i.drawRoundRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},e}(t.Component);t.Rect=e,__reflect(e.prototype,"eui.Rect")}(eui||(eui={})),function(t){var e,i=function(i){function n(){var e=i.call(this)||this;e.$bounces=!0,e.horizontalScrollBar=null,e.verticalScrollBar=null;var n=new t.sys.TouchScroll(e.horizontalUpdateHandler,e.horizontalEndHandler,e),r=new t.sys.TouchScroll(e.verticalUpdateHandler,e.verticalEndHanlder,e);return e.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:n,9:r,10:null,11:!1,12:!1},e}return __extends(n,i),Object.defineProperty(n.prototype,"bounces",{get:function(){return this.$bounces},set:function(t){this.$bounces=!!t;var e=this.$Scroller[8];e&&(e.$bounces=this.$bounces);var i=this.$Scroller[9];i&&(i.$bounces=this.$bounces)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"throwSpeed",{get:function(){return this.$Scroller[8].$scrollFactor},set:function(t){0>(t=+t)&&(t=0),this.$Scroller[8].$scrollFactor=t,this.$Scroller[9].$scrollFactor=t},enumerable:!0,configurable:!0}),n.prototype.$getThrowInfo=function(i,n){return e?(e.currentPos=i,e.toPos=n):e=new t.ScrollerThrowEvent(t.ScrollerThrowEvent.THROW,!1,!1,i,n),e},Object.defineProperty(n.prototype,"scrollPolicyV",{get:function(){return this.$Scroller[0]},set:function(t){var e=this.$Scroller;e[0]!=t&&(e[0]=t,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollPolicyH",{get:function(){return this.$Scroller[1]},set:function(t){var e=this.$Scroller;e[1]!=t&&(e[1]=t,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),n.prototype.stopAnimation=function(){var e=this.$Scroller,i=e[9],n=e[8];(i.animation.isPlaying||n.animation.isPlaying)&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END),i.stop(),n.stop();var r=this.verticalScrollBar,o=this.horizontalScrollBar;r&&r.autoVisibility&&(r.visible=!1),o&&o.autoVisibility&&(o.visible=!1)},Object.defineProperty(n.prototype,"viewport",{get:function(){return this.$Scroller[10]},set:function(t){var e=this.$Scroller;t!=e[10]&&(this.uninstallViewport(),e[10]=t,e[11]=!1,this.installViewport())},enumerable:!0,configurable:!0}),n.prototype.installViewport=function(){var t=this.viewport;t&&(this.addChildAt(t,0),t.scrollEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=t),this.verticalScrollBar&&(this.verticalScrollBar.viewport=t)},n.prototype.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var t=this.viewport;t&&(t.scrollEnabled=!1,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this),0==this.$Scroller[11]&&this.removeChild(t))},n.prototype.onViewPortRemove=function(t){t.target==this.viewport&&(this.$Scroller[11]=!0,this.viewport=null)},n.prototype.setSkin=function(t){i.prototype.setSkin.call(this,t);var e=this.viewport;e&&this.addChildAt(e,0)},n.prototype.onTouchBeginCapture=function(t){this.$stage&&(this.$Scroller[12]=!1,this.checkScrollPolicy()&&this.onTouchBegin(t))},n.prototype.onTouchEndCapture=function(t){this.$Scroller[12]&&(t.$bubbles=!1,this.dispatchBubbleEvent(t),t.$bubbles=!0,t.stopPropagation(),this.onTouchEnd(t))},n.prototype.onTouchTapCapture=function(t){this.$Scroller[12]&&(t.$bubbles=!1,this.dispatchBubbleEvent(t),t.$bubbles=!0,t.stopPropagation())},n.prototype.checkScrollPolicy=function(){var t=this.$Scroller,e=t[10];if(!e)return!1;var i,n,r=e.$UIComponent;switch(t[1]){case"auto":i=e.contentWidth>r[10]||0!==e.scrollH;break;case"on":i=!0;break;case"off":i=!1}switch(t[6]=i,t[0]){case"auto":n=e.contentHeight>r[11]||0!==e.scrollV;break;case"on":n=!0;break;case"off":n=!1}return t[7]=n,i||n},n.prototype.onTouchBegin=function(t){if(!t.isDefaultPrevented()&&this.checkScrollPolicy()){this.downTarget=t.target;var e=this.$Scroller;this.stopAnimation(),e[3]=t.$stageX,e[4]=t.$stageY,e[6]&&e[8].start(t.$stageX),e[7]&&e[9].start(t.$stageY);var i=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this),this.tempStage=i}},n.prototype.onTouchMove=function(e){if(!e.isDefaultPrevented()){var i=this.$Scroller;if(!i[5]){var r;r=!(Math.abs(i[3]-e.$stageX)<n.scrollThreshold);var o;if(o=!(Math.abs(i[4]-e.$stageY)<n.scrollThreshold),!r&&!o)return;if(!o&&r&&"off"==i[1])return;if(!r&&o&&"off"==i[0])return;i[12]=!0,i[5]=!0,this.dispatchCancelEvent(e);var a=this.horizontalScrollBar,s=this.verticalScrollBar;a&&a.autoVisibility&&i[6]&&(a.visible=!0),s&&s.autoVisibility&&i[7]&&(s.visible=!0),i[2]&&i[2].reset(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}e.preventDefault();var l=i[10],u=l.$UIComponent;i[6]&&i[8].update(e.$stageX,l.contentWidth-u[10],l.scrollH),i[7]&&i[9].update(e.$stageY,l.contentHeight-u[11],l.scrollV)}},n.prototype.onTouchCancel=function(t){this.$Scroller[5]||this.onRemoveListeners()},n.prototype.dispatchBubbleEvent=function(t){var e=this.$Scroller[10];if(e){var i=egret.Event.create(egret.TouchEvent,t.type,t.bubbles,t.cancelable);i.$initTo(t.$stageX,t.$stageY,t.touchPointID);var n=this.downTarget;i.$setTarget(n);for(var r=this.$getPropagationList(n),o=r.length,a=(r.length,-1),s=0;o>s;s++)if(r[s]===e){a=s;break}r.splice(0,r.length-a+1),0,this.$dispatchPropagationEvent(i,r,0),egret.Event.release(i)}},n.prototype.dispatchCancelEvent=function(t){var e=this.$Scroller[10];if(e){var i=egret.Event.create(egret.TouchEvent,egret.TouchEvent.TOUCH_CANCEL,t.bubbles,t.cancelable);i.$initTo(t.$stageX,t.$stageY,t.touchPointID);var n=this.downTarget;i.$setTarget(n);for(var r=this.$getPropagationList(n),o=r.length,a=.5*r.length,s=-1,l=0;o>l;l++)if(r[l]===e){s=l;break}r.splice(0,s+1-2),r.splice(r.length-1-s+2,s+1-2),a-=s+1,this.$dispatchPropagationEvent(i,r,a),egret.Event.release(i)}},n.prototype.onTouchEnd=function(t){var e=this.$Scroller;e[5]=!1,this.onRemoveListeners();var i=e[10],n=i.$UIComponent;e[8].isStarted()&&e[8].finish(i.scrollH,i.contentWidth-n[10]),e[9].isStarted()&&e[9].finish(i.scrollV,i.contentHeight-n[11])},n.prototype.onRemoveListeners=function(){var t=this.tempStage||this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},n.prototype.horizontalUpdateHandler=function(t){var e=this.$Scroller[10];e&&(e.scrollH=t),this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.verticalUpdateHandler=function(t){var e=this.$Scroller[10];e&&(e.scrollV=t),this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},n.prototype.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},n.prototype.onChangeEnd=function(){var e=this.$Scroller,i=this.horizontalScrollBar,n=this.verticalScrollBar;(i&&i.visible||n&&n.visible)&&(e[2]||(e[2]=new egret.Timer(200,1),e[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),e[2].reset(),e[2].start()),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},n.prototype.onAutoHideTimer=function(t){var e=this.horizontalScrollBar,i=this.verticalScrollBar;e&&e.autoVisibility&&(e.visible=!1),i&&i.autoVisibility&&(i.visible=!1)},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e);var n=this.viewport;n&&(n.setLayoutBoundsSize(t,e),n.setLayoutBoundsPosition(0,0))},n.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.autoVisibility&&(this.horizontalScrollBar.visible=!1)):e==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.autoVisibility&&(this.verticalScrollBar.visible=!1))},n.scrollThreshold=5,n}(t.Component);t.Scroller=i,__reflect(i.prototype,"eui.Scroller"),t.registerProperty(i,"viewport","eui.IViewport",!0)}(eui||(eui={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.maxWidth=1e5,i.minWidth=0,i.maxHeight=1e5,i.minHeight=0,i.width=NaN,i.height=NaN,i.$elementsContent=[],i._hostComponent=null,i.$stateValues=new t.sys.StateValues,i}return __extends(i,e),Object.defineProperty(i.prototype,"elementsContent",{set:function(t){this.$elementsContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hostComponent",{get:function(){return this._hostComponent},set:function(e){this._hostComponent!=e&&(this._hostComponent&&this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=e,this.$stateValues.parent=e,e&&(this.commitCurrentState(),this.$stateValues.intialized||(e.$stage?this.initializeStates(e.$stage):e.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this))),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"hostComponent"))},enumerable:!0,configurable:!0}),i.prototype.onAddedToStage=function(t){this.initializeStates(this._hostComponent.$stage)},i}(egret.EventDispatcher);t.Skin=e,__reflect(e.prototype,"eui.Skin"),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]"),t.registerBindable(e.prototype,"hostComponent")}(eui||(eui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.indexBeingUpdated=!1,t.requireSelection=!0,t.useVirtualLayout=!1,t}return __extends(i,e),i.prototype.createChildren=function(){if(!this.$layout){var i=new t.HorizontalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.JUSTIFY,i.verticalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},i.prototype.$setDataProvider=function(i){var n=this.$dataProvider;return n&&n instanceof t.ViewStack&&(n.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),i&&i instanceof t.ViewStack&&(i.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),e.prototype.$setDataProvider.call(this,i)},i.prototype.onIndexChanged=function(t){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},i.prototype.onViewStackIndexChange=function(t){"selectedIndex"!=t.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},i}(t.ListBase);t.TabBar=e,__reflect(e.prototype,"eui.TabBar")}(eui||(eui={})),function(t){var e=egret.FocusEvent,i=function(i){function n(){var t=i.call(this)||this;return t.isFocus=!1,t.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null,8:egret.TextFieldInputType.TEXT},t}return __extends(n,i),Object.defineProperty(n.prototype,"prompt",{get:function(){return this.promptDisplay?this.promptDisplay.text:this.$TextInput[0]},set:function(t){this.$TextInput[0]=t,this.promptDisplay&&(this.promptDisplay.text=t),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){if(this.textDisplay)return this.textDisplay.displayAsPassword;var t=this.$TextInput[1];return t||!1},set:function(t){this.$TextInput[1]=t,this.textDisplay&&(this.textDisplay.displayAsPassword=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputType",{get:function(){return this.textDisplay?this.textDisplay.inputType:this.$TextInput[8]},set:function(t){this.$TextInput[8]=t,this.textDisplay&&(this.textDisplay.inputType=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textColor",{get:function(){return this.textDisplay?this.textDisplay.textColor:this.$TextInput[2]},set:function(t){this.$TextInput[2]=t,this.textDisplay&&(this.textDisplay.textColor=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxChars",{get:function(){if(this.textDisplay)return this.textDisplay.maxChars;var t=this.$TextInput[3];return t||0},set:function(t){this.$TextInput[3]=t,this.textDisplay&&(this.textDisplay.maxChars=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){if(this.textDisplay)return this.textDisplay.maxWidth;var t=this.$TextInput[4];return t||1e5},set:function(t){this.$TextInput[4]=t,this.textDisplay&&(this.textDisplay.maxWidth=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){this.textDisplay;var t=this.$TextInput[5];return t||1e5},set:function(t){this.$TextInput[5]=t,this.textDisplay&&(this.textDisplay.maxHeight=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.textDisplay?this.textDisplay.text:this.$TextInput[6]},set:function(t){this.$TextInput[6]=t,this.textDisplay&&(this.textDisplay.text=t),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restrict",{get:function(){return this.textDisplay?this.textDisplay.restrict:this.$TextInput[7]},set:function(t){this.$TextInput[7]=t,this.textDisplay&&(this.textDisplay.restrict=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),n.prototype.focusInHandler=function(t){this.isFocus=!0,this.invalidateState()},n.prototype.focusOutHandler=function(t){this.isFocus=!1,this.invalidateState()},n.prototype.getCurrentState=function(){var t=this.skin;return!this.prompt||this.isFocus||this.text?this.enabled?"normal":"disabled":this.enabled&&t.hasState("normalWithPrompt")?"normalWithPrompt":!this.enabled&&t.hasState("disabledWithPrompt")?"disabledWithPrompt":void 0},n.prototype.partAdded=function(n,r){i.prototype.partAdded.call(this,n,r);var o=this.$TextInput;r==this.textDisplay?(this.textDisplayAdded(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.addEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.addEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&o[0]&&(this.promptDisplay.text=o[0])},n.prototype.partRemoved=function(n,r){i.prototype.partRemoved.call(this,n,r),r==this.textDisplay?(this.textDisplayRemoved(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.removeEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.removeEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&(this.$TextInput[0]=this.promptDisplay.text)},n.prototype.textDisplayAdded=function(){var t=this.$TextInput;t[1]&&(this.textDisplay.displayAsPassword=t[1]),t[2]&&(this.textDisplay.textColor=t[2]),t[3]&&(this.textDisplay.maxChars=t[3]),t[4]&&(this.textDisplay.maxWidth=t[4]),t[5]&&(this.textDisplay.maxHeight=t[5]),t[6]&&(this.textDisplay.text=t[6]),t[7]&&(this.textDisplay.restrict=t[7]),t[8]&&(this.textDisplay.inputType=t[8])},n.prototype.textDisplayRemoved=function(){var t=this.$TextInput;t[1]=this.textDisplay.displayAsPassword,t[2]=this.textDisplay.textColor,t[3]=this.textDisplay.maxChars,t[4]=this.textDisplay.maxWidth,t[5]=this.textDisplay.maxHeight,t[6]=this.textDisplay.text,t[7]=this.textDisplay.restrict,t[8]=this.textDisplay.inputType},n}(t.Component);t.TextInput=i,__reflect(i.prototype,"eui.TextInput")}(eui||(eui={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ToggleButton);t.CheckBox=e,__reflect(e.prototype,"eui.CheckBox")}(eui||(eui={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ToggleButton);t.ToggleSwitch=e,__reflect(e.prototype,"eui.ToggleSwitch")}(eui||(eui={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoveFromStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},e.prototype.onRemoveFromStage=function(t){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.onResize=function(t){var e=this.$stage;this.$setWidth(e.$stageWidth),this.$setHeight(e.$stageHeight)},e}(t.Group);t.UILayer=e,__reflect(e.prototype,"eui.UILayer")}(eui||(eui={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var a=o.height,s=o.x,l=r.scrollV,u=r.contentHeight,h=r.height;if(0>=l){var c=a*(1- -l/(.5*h));c=Math.max(5,Math.round(c)),n.setLayoutBoundsSize(NaN,c),n.setLayoutBoundsPosition(s,0)}else if(l>=u-h){c=a*(1-(l-u+h)/(.5*h));c=Math.max(5,Math.round(c)),n.setLayoutBoundsSize(NaN,c),n.setLayoutBoundsPosition(s,i-c)}else{var p=(i-a)*l/(u-h);n.setLayoutBoundsSize(NaN,NaN),n.setLayoutBoundsPosition(s,p)}}},e.prototype.onPropertyChanged=function(t){switch(t.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.VScrollBar=e,__reflect(e.prototype,"eui.VScrollBar")}(eui||(eui={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?(r-e)/r*n:0)},e.prototype.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.height;return this.thumb.getLayoutBounds(t),e-t.height},e.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?e-(this.pendingValue-t[2])/i*e:0,r=this.track.localToGlobal(0,n,egret.$TempPoint),o=r.x,a=r.y,s=this.thumb.$parent.globalToLocal(o,a,egret.$TempPoint).y,l=egret.$TempRectangle,u=l.height;if(this.thumb.getLayoutBounds(l),this.thumb.setLayoutBoundsPosition(l.x,Math.round(s)),this.trackHighlight){var h=this.trackHighlight.$parent.globalToLocal(o,a,egret.$TempPoint).y;this.trackHighlight.y=Math.round(h+u),this.trackHighlight.height=Math.round(e-h)}}},e}(t.SliderBase);t.VSlider=e,__reflect(e.prototype,"eui.VSlider")}(eui||(eui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._selectedChild=null,i.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION,i._selectedIndex=-1,i}return __extends(i,e),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedChild",{get:function(){var t=this.selectedIndex;return t>=0&&t<this.numChildren?this.getChildAt(t):null},set:function(t){var e=this.getChildIndex(t);e>=0&&e<this.numChildren&&this.setSelectedIndex(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(t){t=0|+t,this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(e){e!=this.selectedIndex&&(this.proposedSelectedIndex=e,this.invalidateProperties(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.$childAdded=function(i,n){e.prototype.$childAdded.call(this,i,n),this.showOrHide(i,!1);var r=this.selectedIndex;-1==r?this.setSelectedIndex(n):n<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(r+1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.ADD,n,-1,[i.name])},i.prototype.$childRemoved=function(i,n){e.prototype.$childRemoved.call(this,i,n),this.showOrHide(i,!0);var r=this.selectedIndex;n==r?this.numChildren>0?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):r>n&&this.setSelectedIndex(r-1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.REMOVE,n,-1,[i.name])},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION)},i.prototype.commitSelection=function(t){t>=0&&t<this.numChildren?(this._selectedIndex=t,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},i.prototype.showOrHide=function(t,e){egret.is(t,"eui.UIComponent")&&(t.includeInLayout=e),t.visible=e},Object.defineProperty(i.prototype,"length",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getItemAt=function(t){var e=this.$children[t];return e?e.name:""},i.prototype.getItemIndex=function(t){for(var e=this.$children,i=e.length,n=0;i>n;n++)if(e[n].name==t)return n;return-1},i}(t.Group);t.ViewStack=e,__reflect(e.prototype,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]),t.registerBindable(e.prototype,"selectedIndex")}(eui||(eui={})),function(t){!function(t){function e(t){return-.5*(Math.cos(Math.PI*t)-1)}var i=function(){function t(t,i){this.easerFunction=e,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=i}return t.prototype.play=function(){this.stop(),this.start()},t.prototype.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},t.prototype.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},t.prototype.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(e,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var r=e>=i;return r&&this.stop(),r&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=i,__reflect(i.prototype,"eui.sys.Animation")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){var r=new egret.HttpRequest;r.addEventListener(egret.Event.COMPLETE,(function(t){var i=t.target;e.call(n,i.response)}),n),r.addEventListener(egret.IOErrorEvent.IO_ERROR,(function(t){i.call(n)}),n),r.responseType=egret.HttpResponseType.TEXT,r.open(t),r.send()},t}();t.DefaultThemeAdapter=e,__reflect(e.prototype,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])}(eui||(eui={})),function(t){function e(t,i){var n=Object.getOwnPropertyDescriptor(t,i);if(n)return n;var r=Object.getPrototypeOf(t);return r?e(r,i):null}function i(t,e){for(var i=t[n],r=i.length,o=0;r>o;o+=2){var a=i[o],s=i[o+1];a.call(s,e)}}var n="__listeners__",r=0,o=function(){function o(t,e,i,n){this.isExecuting=!1,this.property=t,this.handler=e,this.next=n,this.thisObject=i}return o.watch=function(t,e,i,n){if(e.length>0){var r=e.shift(),a=o.watch(null,e,i,n),s=new o(r,i,n,a);return s.reset(t),s}return null},o.checkBindable=function(o,a){var s=o.__bindables__;if(s&&-1!=s.indexOf(a))return!0;var l=egret.is(o,"egret.IEventDispatcher");l||o[n]||(o[n]=[]);var u=e(o,a);if(u&&u.set&&u.get){var h=u.set;u.set=function(e){this[a]!=e&&(h.call(this,e),l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,a):i(this,a))}}else{if(u&&(u.get||u.set))return!1;var c="_"+ ++r+a;o[c]=u?u.value:null,(u={enumerable:!0,configurable:!0}).get=function(){return this[c]},u.set=function(e){this[c]!=e&&(this[c]=e,l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,a):i(this,a))}}Object.defineProperty(o,a,u),t.registerBindable(o,a)},o.prototype.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},o.prototype.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},o.prototype.setHandler=function(t,e){this.handler=t,this.thisObject=e,this.next&&this.next.setHandler(t,e)},o.prototype.reset=function(e){var i=this.host;if(i)if(egret.is(i,"egret.IEventDispatcher"))i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this);else{var r=(a=i[n]).indexOf(this);a.splice(r-1,2)}if(this.host=e,e)if(o.checkBindable(e,this.property),egret.is(e,"egret.IEventDispatcher"))e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100);else{var a;(a=e[n]).push(this.onPropertyChange),a.push(this)}this.next&&this.next.reset(this.getHostPropertyValue())},o.prototype.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},o.prototype.wrapHandler=function(t){this.onPropertyChange(t.property)},o.prototype.onPropertyChange=function(t){if(t==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},o}();t.Watcher=o,__reflect(o.prototype,"eui.Watcher")}(eui||(eui={})),function(t){var e=function(){function e(){}return e.bindProperty=function(e,i,n,r){var o=t.Watcher.watch(e,i,null,null);if(o){var a=function(t){n[r]=t};o.setHandler(a,null),a(o.getValue())}return o},e.bindHandler=function(e,i,n,r){var o=t.Watcher.watch(e,i,n,r);return o&&n.call(r,o.getValue()),o},e.$bindProperties=function(i,n,r,o,a){if(1==n.length&&1==r.length)return e.bindProperty(i,n[0].split("."),o,a);for(var s,l=function(){o[a]=function(e){for(var i=e[0],n=i instanceof t.Watcher?i.getValue():i,r=e.length,o=1;r>o;o++){var a=e[o];a instanceof t.Watcher&&(a=a.getValue()),n+=a}return n}(n)},u=r.length,h=0;u>h;h++){var c=r[h],p=n[c].split(".");(s=t.Watcher.watch(i,p,null,null))&&(n[c]=s,s.setHandler(l,null))}return l(),s},e}();t.Binding=e,__reflect(e.prototype,"eui.Binding")}(eui||(eui={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._source=t||[],i}return __extends(i,e),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(e){e||(e=[]),this._source=e,this.dispatchCoEvent(t.CollectionEventKind.RESET)},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){this.dispatchCoEvent(t.CollectionEventKind.REFRESH)},Object.defineProperty(i.prototype,"length",{get:function(){return this._source.length},enumerable:!0,configurable:!0}),i.prototype.addItem=function(e){this._source.push(e),this.dispatchCoEvent(t.CollectionEventKind.ADD,this._source.length-1,-1,[e])},i.prototype.addItemAt=function(e,i){0>i||this._source.length,this._source.splice(i,0,e),this.dispatchCoEvent(t.CollectionEventKind.ADD,i,-1,[e])},i.prototype.getItemAt=function(t){return this._source[t]},i.prototype.getItemIndex=function(t){for(var e=this._source.length,i=0;e>i;i++)if(this._source[i]===t)return i;return-1},i.prototype.itemUpdated=function(e){var i=this.getItemIndex(e);-1!=i&&this.dispatchCoEvent(t.CollectionEventKind.UPDATE,i,-1,[e])},i.prototype.removeAll=function(){var e=this._source.concat();this._source=[],this.dispatchCoEvent(t.CollectionEventKind.REMOVE,0,-1,e)},i.prototype.removeItemAt=function(e){if(!(0>e||e>=this._source.length)){var i=this._source.splice(e,1)[0];return this.dispatchCoEvent(t.CollectionEventKind.REMOVE,e,-1,[i]),i}},i.prototype.replaceItemAt=function(e,i){if(!(0>i||i>=this._source.length)){var n=this._source.splice(i,1,e)[0];return this.dispatchCoEvent(t.CollectionEventKind.REPLACE,i,-1,[e],[n]),n}},i.prototype.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;i>n;n++)this.removeItemAt(e);for(n=0;e>n;n++)n>=i?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},i.prototype.dispatchCoEvent=function(e,i,n,r,o){t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,e,i,n,r,o)},i}(egret.EventDispatcher);t.ArrayCollection=e,__reflect(e.prototype,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]),t.registerProperty(e,"source","Array",!0)}(eui||(eui={})),function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(){var t=i.call(this)||this;return t._widthConstraint=NaN,t.$isShowPrompt=!1,t.$promptColor=6710886,t.$isFocusIn=!1,t.initializeUIValues(),t.type=egret.TextFieldType.INPUT,t.$EditableText={0:null,1:16777215,2:!1},t}return __extends(n,i),n.prototype.$invalidateTextField=function(){i.prototype.$invalidateTextField.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$getText=function(){var t=i.prototype.$getText.call(this);return t==this.$EditableText[0]&&(t=""),t},n.prototype.$setText=function(e){var n=this.$EditableText[0];(n!=e||null==n)&&(this.$isShowPrompt=!1,this.textColor=this.$EditableText[1],this.displayAsPassword=this.$EditableText[2]),this.$isFocusIn||(""==e||null==e)&&(e=n,this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1));var r=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),r},n.prototype.$onAddToStage=function(e,i){t.sys.UIComponentImpl.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},n.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},Object.defineProperty(n.prototype,"prompt",{get:function(){return this.$EditableText[0]},set:function(t){var e=this.$EditableText,i=e[0];if(i!=t){e[0]=t;var n=this.text;n&&n!=i||this.showPromptText()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptColor",{get:function(){return this.$promptColor},set:function(t){if(t=0|+t,this.$promptColor!=t){this.$promptColor=t;var e=this.text;e&&e!=this.$EditableText[0]||this.showPromptText()}},enumerable:!0,configurable:!0}),n.prototype.onfocusOut=function(){this.$isFocusIn=!1,this.text||this.showPromptText()},n.prototype.onfocusIn=function(){this.$isFocusIn=!0,this.$isShowPrompt=!1,this.displayAsPassword=this.$EditableText[2];var t=this.$EditableText,e=this.text;e&&e!=t[0]||(this.textColor=t[1],this.text="")},n.prototype.showPromptText=function(){var t=this.$EditableText;this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1),this.text=t[0]},n.prototype.$setTextColor=function(t){return t=0|+t,this.$EditableText[1]=t,this.$isShowPrompt||i.prototype.$setTextColor.call(this,t),!0},n.prototype.$setDisplayAsPassword=function(t){return this.$EditableText[2]=t,this.$isShowPrompt||i.prototype.$setDisplayAsPassword.call(this,t),!0},n.prototype.createChildren=function(){this.onfocusOut()},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$TextField[3],n=NaN;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(n=t[13]):n=t[8]:(n=this._widthConstraint,this._widthConstraint=NaN),i.prototype.$setWidth.call(this,n),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,e)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.TextField);t.EditableText=i,__reflect(i.prototype,"eui.EditableText",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={})),function(t){!function(t){function e(t){var e=t-1;return e*e*e+1}var i=[1,1.33,1.66,2],n=.02,r=.998,o=Math.log(r),a=function(){function a(i,n,r){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,this.updateFunction=i,this.endFunction=n,this.target=r,this.animation=new t.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=e}return a.prototype.isPlaying=function(){return this.animation.isPlaying},a.prototype.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},a.prototype.isStarted=function(){return this.started},a.prototype.start=function(t){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=t,egret.startTick(this.onTick,this)},a.prototype.update=function(t,e,i){e=Math.max(e,0),this.currentPosition=t,this.maxScrollPos=e;var n=this.offsetPoint-t,r=n+i;this.offsetPoint=t,0>r&&(this.$bounces?r-=.5*n:r=0),r>e&&(this.$bounces?r-=.5*n:r=e),this.currentScrollPos=r,this.updateFunction.call(this.target,r)},a.prototype.finish=function(t,e){egret.stopTick(this.onTick,this),this.started=!1;for(var a=2.33*this.velocity,s=this.previousVelocity,l=s.length,u=2.33,h=0;l>h;h++){var c=i[h];a+=s[0]*c,u+=c}var p=a/u,d=Math.abs(p),f=0,g=0;if(d>n)if(0>(g=t+(p-n)/o*2*this.$scrollFactor)||g>e)for(g=t;Math.abs(p)>n;)p*=0>(g-=p)||g>e?.95*r:r,f++;else f=Math.log(n/d)/o;else g=t;this.target.$getThrowInfo&&(g=this.target.$getThrowInfo(t,g).toPos);f>0?(this.$bounces||(0>g?g=0:g>e&&(g=e)),this.throwTo(g,f)):this.finishScrolling()},a.prototype.onTick=function(t){var e=t-this.previousTime;if(e>10){var i=this.previousVelocity;i.length>=4&&i.shift(),this.velocity=(this.currentPosition-this.previousPosition)/e,i.push(this.velocity),this.previousTime=t,this.previousPosition=this.currentPosition}return!0},a.prototype.finishScrolling=function(t){var e=this.currentScrollPos,i=this.maxScrollPos,n=e;0>e&&(n=0),e>i&&(n=i),this.throwTo(n,300)},a.prototype.throwTo=function(t,e){void 0===e&&(e=500);var i=this.currentScrollPos;if(i!=t){var n=this.animation;n.duration=e,n.from=i,n.to=t,n.play()}else this.endFunction.call(this.target)},a.prototype.onScrollingUpdate=function(t){this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue)},a}();t.TouchScroll=a,__reflect(a.prototype,"eui.sys.TouchScroll")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(){function t(){}return t.LTR="ltr",t.RTL="rtl",t.TTB="ttb",t.BTT="btt",t}();t.Direction=e,__reflect(e.prototype,"eui.Direction")}(eui||(eui={})),function(t){var e=function(){function t(){}return t.AUTO="auto",t.OFF="off",t.ON="on",t}();t.ScrollPolicy=e,__reflect(e.prototype,"eui.ScrollPolicy")}(eui||(eui={})),function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.delayList=[],n.skinMap={},n.$styles={},n.initialized=!t,i&&egret.registerImplementation("eui.Theme",n),n.$configURL=t,n.load(t),n}return __extends(i,e),i.prototype.load=function(e){var i=this;t.getTheme(e,(function(t){return i.onConfigLoaded(t)}))},i.prototype.onConfigLoaded=function(t){var e;if("string"==typeof t)try{e=JSON.parse(t)}catch(t){egret.$error(3e3)}else e=t;if(e&&e.skins)for(var i=this.skinMap,n=e.skins,r=Object.keys(n),o=r.length,a=0;o>a;a++){var s=r[a];i[s]||this.mapSkin(s,n[s])}e.styles&&(this.$styles=e.styles);var l=e.paths;for(var u in l)EXML.update(u,l[u]);e.exmls&&0!=e.exmls.length?e.exmls[0].gjs?(e.exmls.forEach((function(t){return EXML.$parseURLContentAsJs(t.path,t.gjs,t.className)})),this.onLoaded()):e.exmls[0].content?(e.exmls.forEach((function(t){return EXML.$parseURLContent(t.path,t.content)})),this.onLoaded()):EXML.$loadAll(e.exmls,this.onLoaded,this,!0):this.onLoaded()},i.prototype.onLoaded=function(t,e){this.initialized=!0,this.handleDelayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.handleDelayList=function(){for(var t=this.delayList,e=t.length,i=0;e>i;i++){var n=t[i];if(!n.$Component[5]){var r=this.getSkinName(n);r&&(n.$Component[1]=r,n.$parseSkinName())}}t.length=0},i.prototype.getSkinName=function(t){if(!this.initialized)return-1==this.delayList.indexOf(t)&&this.delayList.push(t),"";var e=this.skinMap[t.hostComponentKey];return e||(e=this.findSkinName(t)),e},i.prototype.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"eui.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},i.prototype.mapSkin=function(t,e){this.skinMap[t]=e},i.prototype.$getStyleConfig=function(t){return this.$styles[t]},i}(egret.EventDispatcher);t.Theme=e,__reflect(e.prototype,"eui.Theme")}(eui||(eui={})),function(t){var e=function(t){function e(e,i,n,r,o,a,s,l){var u=t.call(this,e,i,n)||this;return u.$initTo(r,o,a,s,l),u}return __extends(e,t),e.prototype.$initTo=function(t,e,i,n,r){this.kind=t,this.location=0|+e,this.oldLocation=0|+i,this.items=n||[],this.oldItems=r||[]},e.prototype.clean=function(){t.prototype.clean.call(this),this.items=this.oldItems=null},e.dispatchCollectionEvent=function(t,i,n,r,o,a,s){if(!t.hasEventListener(i))return!0;var l=egret.Event.create(e,i);l.$initTo(n,r,o,a,s);var u=t.dispatchEvent(l);return egret.Event.release(l),u},e.COLLECTION_CHANGE="collectionChange",e}(egret.Event);t.CollectionEvent=e,__reflect(e.prototype,"eui.CollectionEvent")}(eui||(eui={})),function(t){var e=function(){function t(){}return t.ADD="add",t.REFRESH="refresh",t.REMOVE="remove",t.REPLACE="replace",t.RESET="reset",t.UPDATE="update",t}();t.CollectionEventKind=e,__reflect(e.prototype,"eui.CollectionEventKind")}(eui||(eui={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e.itemRenderer=null,e.itemIndex=-1,e}return __extends(e,t),e.prototype.clean=function(){t.prototype.clean.call(this),this.item=this.itemRenderer=null},e.dispatchItemTapEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i);r.item=n.data,r.itemIndex=n.itemIndex,r.itemRenderer=n;var o=t.dispatchEvent(r);return egret.Event.release(r),o},e.ITEM_TAP="itemTap",e}(egret.Event);t.ItemTapEvent=e,__reflect(e.prototype,"eui.ItemTapEvent")}(eui||(eui={})),function(t){var e=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o.property=r,o}return __extends(e,t),e.dispatchPropertyEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i);r.property=n;var o=t.dispatchEvent(r);return egret.Event.release(r),o},e.PROPERTY_CHANGE="propertyChange",e}(egret.Event);t.PropertyEvent=e,__reflect(e.prototype,"eui.PropertyEvent")}(eui||(eui={})),function(t){var e=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n)||this;return r=+r,o=+o,a.currentPos=r,a.toPos=o,a}return __extends(e,t),e.THROW="throw",e}(egret.Event);t.ScrollerThrowEvent=e,__reflect(e.prototype,"eui.ScrollerThrowEvent")}(eui||(eui={})),function(t){var e=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return __extends(e,t),e.dispatchUIEvent=function(t,i,n,r){if(!t.hasEventListener(i))return!0;var o=egret.Event.create(e,i,n,r),a=t.dispatchEvent(o);return egret.Event.release(o),a},e.CREATION_COMPLETE="creationComplete",e.CHANGE_END="changeEnd",e.CHANGE_START="changeStart",e.CLOSING="closing",e.MOVE="move",e}(egret.Event);t.UIEvent=e,__reflect(e.prototype,"eui.UIEvent")}(eui||(eui={})),function(t){!function(t){var e=function(){function t(){this.indent=0}return t.prototype.toCode=function(){return""},t.prototype.getIndent=function(t){void 0===t&&(t=this.indent);for(var e="",i=0;t>i;i++)e+="\t";return e},t}();t.CodeBase=e,__reflect(e.prototype,"eui.sys.CodeBase");var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className="",e.superClass="",e.innerClassBlock=[],e.variableBlock=[],e.functionBlock=[],e}return __extends(e,t),e.prototype.addInnerClass=function(t){-1==this.innerClassBlock.indexOf(t)&&this.innerClassBlock.push(t)},e.prototype.addVariable=function(t){-1==this.variableBlock.indexOf(t)&&this.variableBlock.push(t)},e.prototype.getVariableByName=function(t){for(var e=this.variableBlock,i=e.length,n=0;i>n;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.addFunction=function(t){-1==this.functionBlock.indexOf(t)&&this.functionBlock.push(t)},e.prototype.getFuncByName=function(t){for(var e=this.functionBlock,i=e.length,n=0;i>n;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.toCode=function(){var t=this.indent,e=this.getIndent(t),i=this.getIndent(t+1),n=this.getIndent(t+2),r=e+"(function (";r+=this.superClass?"_super) {\n"+i+"__extends("+this.className+", _super);\n":") {\n";for(var o=this.innerClassBlock,a=o.length,s=0;a>s;s++){var l=o[s];l.indent=t+1,r+=i+"var "+l.className+" = "+l.toCode()+"\n\n"}r+=i+"function "+this.className+"() {\n",this.superClass&&(r+=n+"_super.call(this);\n");var u=this.variableBlock;a=u.length;for(s=0;a>s;s++){var h=u[s];h.defaultValue&&(r+=n+h.toCode()+"\n")}if(this.constructCode){var c=this.constructCode.toCode().split("\n");a=c.length;for(s=0;a>s;s++){r+=n+c[s]+"\n"}}r+=i+"}\n",r+=i+"var _proto = "+this.className+".prototype;\n\n";var p=this.functionBlock;a=p.length;for(s=0;a>s;s++){var d=p[s];d.indent=t+1,r+=d.toCode()+"\n"}return(r+=i+"return "+this.className+";\n"+e)+(this.superClass?"})("+this.superClass+");":"})();")},e}(e);t.EXClass=i,__reflect(i.prototype,"eui.sys.EXClass");var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lines=[],e}return __extends(e,t),e.prototype.addVar=function(t,e){var i=e?" = "+e:"";this.addCodeLine("var "+t+i+";")},e.prototype.addAssignment=function(t,e,i){var n=i?"."+i:"";this.addCodeLine(t+n+" = "+e+";")},e.prototype.addReturn=function(t){this.addCodeLine("return "+t+";")},e.prototype.addEmptyLine=function(){this.addCodeLine("")},e.prototype.startIf=function(t){this.addCodeLine("if("+t+")"),this.startBlock()},e.prototype.startElse=function(){this.addCodeLine("else"),this.startBlock()},e.prototype.startElseIf=function(t){this.addCodeLine("else if("+t+")"),this.startBlock()},e.prototype.startBlock=function(){this.addCodeLine("{"),this.indent++},e.prototype.endBlock=function(){this.indent--,this.addCodeLine("}")},e.prototype.doFunction=function(t,e){var i=e.join(",");this.addCodeLine(t+"("+i+")")},e.prototype.addCodeLine=function(t){this.lines.push(this.getIndent()+t)},e.prototype.addCodeLineAt=function(t,e){this.lines.splice(e,0,this.getIndent()+t)},e.prototype.containsCodeLine=function(t){return-1!=this.lines.indexOf(t)},e.prototype.concat=function(t){this.lines=this.lines.concat(t.lines)},e.prototype.toCode=function(){return this.lines.join("\n")},e}(e);t.EXCodeBlock=n,__reflect(n.prototype,"eui.sys.EXCodeBlock");var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.codeBlock=null,e.isGet=!1,e.name="",e}return __extends(e,t),e.prototype.toCode=function(){var t,e=this.getIndent(),i=this.getIndent(this.indent+1),n=e;if(this.isGet?(t=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(t=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var r=this.codeBlock.toCode().split("\n"),o=r.length,a=0;o>a;a++){n+=t+r[a]+"\n"}return n+(this.isGet?i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+e+"});":e+"};")},e}(e);t.EXFunction=r,__reflect(r.prototype,"eui.sys.EXFunction");var o=function(t){function e(e,i){var n=t.call(this)||this;return n.indent=2,n.name=e,n.defaultValue=i,n}return __extends(e,t),e.prototype.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},e}(e);t.EXVariable=o,__reflect(o.prototype,"eui.sys.EXVariable");var a=function(t){function e(e,i){var n=t.call(this)||this;return n.name="",n.stateGroups=[],n.addItems=[],n.setProperty=[],n.name=e,i&&(n.stateGroups=i),n}return __extends(e,t),e.prototype.addOverride=function(t){t instanceof s?this.addItems.push(t):this.setProperty.push(t)},e.prototype.toCode=function(){for(var t=this.getIndent(1),e='new eui.State ("'+this.name+'",\n'+t+"[\n",i=0,n=!0,r=this.addItems.concat(this.setProperty);i<r.length;){n?n=!1:e+=",\n";for(var o=r[i].toCode().split("\n"),a=o.length,s=0;a>s;s++){var l=o[s];o[s]=t+t+l}e+=o.join("\n"),i++}return e+"\n"+t+"])"},e}(e);t.EXState=a,__reflect(a.prototype,"eui.sys.EXState");var s=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.target=e,o.property=i,o.position=n,o.relativeTo=r,o}return __extends(e,t),e.prototype.toCode=function(){return'new eui.AddItems("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")'},e}(e);t.EXAddItems=s,__reflect(s.prototype,"eui.sys.EXAddItems");var l=function(t){function e(e,i,n){var r=t.call(this)||this;return r.target=e,r.name=i,r.value=n,r}return __extends(e,t),e.prototype.toCode=function(){return'new eui.SetProperty("'+this.target+'","'+this.name+'",'+this.value+")"},e}(e);t.EXSetProperty=l,__reflect(l.prototype,"eui.sys.EXSetProperty");var u=function(t){function e(e,i,n,r){var o=t.call(this)||this;return e=e?"this."+e:"this",o.target=e,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(e,t),e.prototype.toCode=function(){return"new eui.SetStateProperty(this, ["+this.templates.join(",")+"],["+this.chainIndex.join(",")+"],"+this.target+',"'+this.property+'")'},e}(e);t.EXSetStateProperty=u,__reflect(u.prototype,"eui.sys.EXSetStateProperty");var h=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.target=e,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(e,t),e.prototype.toCode=function(){return"eui.Binding.$bindProperties(this, ["+this.templates.join(",")+"],["+this.chainIndex.join(",")+"],"+this.target+',"'+this.property+'")'},e}(e);t.EXBinding=h,__reflect(h.prototype,"eui.sys.EXBinding")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){var e=i.call(this)||this;return e.$createChildrenCalled=!1,e.$fontChanged=!1,e._widthConstraint=NaN,e._heightConstraint=NaN,e.initializeUIValues(),e.text=t,e}return __extends(n,i),n.prototype.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.$setFont=function(t){return this.$fontForBitmapLabel!=t&&(this.$fontForBitmapLabel=t,this.$createChildrenCalled?this.$parseFont():this.$fontChanged=!0,this.$fontStringChanged=!0,!0)},n.prototype.$parseFont=function(){this.$fontChanged=!1;var e=this.$fontForBitmapLabel;"string"==typeof e?t.getAssets(e,(function(t){this.$setFontData(t,e)}),this):this.$setFontData(e)},n.prototype.$setFontData=function(t,e){return e&&e!=this.$fontForBitmapLabel?void 0:t!=this.$font&&(this.$font=t,this.$invalidateContentBounds(),!0)},n.prototype.createChildren=function(){this.$fontChanged&&this.$parseFont(),this.$createChildrenCalled=!0},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$textFieldWidth,n=this.$textFieldHeight,r=NaN;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=NaN),i.prototype.$setWidth.call(this,r);var o=NaN;isNaN(this._heightConstraint)?isNaN(t[9])?1e5!=t[15]&&(o=t[15]):o=t[9]:(o=this._heightConstraint,this._heightConstraint=NaN),i.prototype.$setHeight.call(this,o),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,e),i.prototype.$setHeight.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this._heightConstraint=i,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.BitmapText);t.BitmapLabel=i,__reflect(i.prototype,"eui.BitmapLabel",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.BitmapText),t.registerBindable(i.prototype,"text")}(eui||(eui={})),function(t){function e(t){return a.parse(t)}function i(t,e,i,n){var o=[];t.forEach((function(t,i){if(!(t in l)||e[t]){var n=r(t,e[t]);o[i]=n}else o[i]=l[t]})),i&&i.call(n,o,t)}function n(t,e){l[t]=e;var i=s[t];delete s[t];for(var n=i?i.length:0,r=0;n>r;r++){var o=i[r];o[0]&&o[1]&&o[0].call(o[1],e,t)}}function r(t,i){var n=null;if(i&&"string"==typeof i)try{n=e(i)}catch(e){console.error(t+"\n"+e.message)}if(i&&i.prototype&&(n=i),t){n&&(l[t]=n);var r=s[t];delete s[t];for(var o=r?r.length:0,a=0;o>a;a++){var u=r[a];u[0]&&u[1]&&u[0].call(u[1],n,t)}}return n}function o(t,e){var i=t;-1==t.indexOf("://")&&(i=u+t);eui.getTheme(i,(function(i){i||(i=""),e(t,i)}))}var a=new eui.sys.EXMLParser,s={},l={},u="";Object.defineProperty(t,"prefixURL",{get:function(){return u},set:function(t){u=t},enumerable:!0,configurable:!0}),t.parse=e,t.load=function(t,e,i,n){if(void 0===n&&(n=!1),!n||!(t in l)){var a=s[t];return a?void a.push([e,i]):(s[t]=[[e,i]],void o(t,r))}e&&e.call(i,l[t],t)},t.$loadAll=function(t,e,n,r){if(void 0===r&&(r=!1),t&&0!=t.length){var a=[];t.forEach((function(s){var u=function(r,o){a[r]=o,a.push(r),a.length==t.length&&i(t,a,e,n)};return r&&s in l?void u(s,""):void o(s,u)}))}else e&&e.call(n,[],t)},t.update=n,t.$parseURLContentAsJs=function(t,e,i){e&&n(t,a.$parseCode(e,i))},t.$parseURLContent=r}(EXML||(EXML={})),function(t){!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){var e=egret.getDefinitionByName(t);return e?e.prototype:null}function n(t){return t?new t:null}t.NS_S="http://ns.egret.com/eui",t.NS_W="http://ns.egret.com/wing";var r=["Point","Matrix","Rectangle"],o=["Array","boolean","string","number"],a=0,s={},l=function(){function l(){}return l.prototype.$describe=function(t){if(!t)return null;var i,r=Object.getPrototypeOf(t);if(!r)return null;if(r.hasOwnProperty("__hashCode__")&&(i=s[r.__hashCode__]))return i;var l=Object.getPrototypeOf(r);if(!l)return null;var u=n(l.constructor),h=this.$describe(u);if(h){var c=function(){};c.prototype=h,i=new c}else i={};for(var p=Object.keys(r).concat(Object.keys(t)),d=p.length,f=t.__meta__,g=0;d>g;g++){var y=p[g];if("constructor"!=y&&"_"!=y.charAt(0)&&"$"!=y.charAt(0)){var v=void 0;if(f&&f[y])v=f[y];else if(e(t[y]))v="Array";else{if("function"==(v=typeof t[y]))continue;-1==o.indexOf(v)&&(v="any")}i[y]=v}}return Object.getPrototypeOf(l)&&(r.__hashCode__=a++,s[r.__hashCode__]=i),i},l.prototype.getClassNameById=function(e,n){if(n==t.NS_S){if("Object"==e)return e;if(-1!=r.indexOf(e))return"egret."+e}var a="";return-1!=o.indexOf(e)?e:(n==t.NS_W||(a=n&&n!=t.NS_S?n.substring(0,n.length-1)+e:"eui."+e),i(a)||(a=""),a)},l.prototype.getDefaultPropById=function(t,e){var n,r=i(this.getClassNameById(t,e));return r&&(n=r.__defaultProperty__),n||""},l.prototype.getPropertyType=function(t,e){if("Object"==e)return"any";var r="",o=i(e);if(o){if(!o.hasOwnProperty("__hashCode__")){var a=n(egret.getDefinitionByName(e));if(!a)return r;this.$describe(a)}var l=s[o.__hashCode__];l&&(r=l[t])}return r},l}();t.EXMLConfig=l,__reflect(l.prototype,"eui.sys.EXMLConfig")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.en_US=egret.$locale_strings.en_US||{};var e=egret.$locale_strings.en_US;e[2001]="EXML parsing error {0}: EXML file can't be found ",e[2002]="EXML parsing error : invalid XML file:\n{0}",e[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}",e[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}",e[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}",e[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}",e[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}",e[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}",e[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}",e[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}",e[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}",e[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}",e[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ",e[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}",e[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}",e[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}",e[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}",e[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}",e[2019]="EXML parsing error {0}: the containers child item must be visible nodes: {1}",e[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}",e[2021]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[2022]="EXML parsing error: there contains illegal characters in the id `{0}`",e[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}",e[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}",e[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}",e[2104]="EXML parsing warnning, Instantiate class {0} errorthe parameters of its constructor method must be empty.",e[2201]="BasicLayout doesn't support virtualization.",e[2202]="parse skinName errorthe parsing result of skinName must be a instance of eui.Skin.",e[2203]="Could not find the skin class '{0}'",e[2301]="parse source failedcould not find asset from URL{0} ."}(eui||(eui={})),function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.zh_CN=egret.$locale_strings.zh_CN||{};var e=egret.$locale_strings.zh_CN;e[2001]="EXML {0}: EXML",e[2002]="EXML: XML:\n{0}",e[2003]="EXML {0}: \n{1}",e[2004]="EXML {0}: id\n{1}",e[2005]="EXML {0}: '{1}':\n{2}",e[2006]="EXML {0}: :'{1}'\n{2}",e[2007]="EXML {0}:  UIComponent includeInexcludeFrom\n{1}",e[2008]="EXML {0}: '{1}':'{2}'\n{3}",e[2009]="EXML {0}: {}ID\n{1}",e[2010]="EXML {0}: :'{1}'ID: '{2}'\n{3}",e[2011]="EXML {0}: :'{1}'\n{2}",e[2012]="EXML {0}: \n{1}",e[2013]="EXML {0}: Array\n{1}",e[2014]="EXML {0}: \n{1}",e[2015]="EXML {0}: :{1}\n{2}",e[2016]="EXML {0}: 'scale9Grid':{1}",e[2017]="EXML {0}: :{1}",e[2018]="EXML {0}: 'skinName':{1}",e[2019]="EXML {0}: :{1}",e[2020]="EXML {0}: w:DeclarationsincludeInexcludeFrom\n{1}",e[2021]="{0}  : {1} : {2}",e[2022]="EXML: id `{0}` ",e[2101]="EXML: EXML class : {0} \n{1}",e[2102]="EXML {0}: \n{1}",e[2103]="EXML {0}: '{1}'\n{2}",e[2104]="EXML{0} EXMLEXML",e[2201]="BasicLayout ",e[2202]=" skinName  eui.Skin ",e[2203]=" '{0}'",e[2301]="URL{0} "}(eui||(eui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.measure=function(){e.prototype.measure.call(this),t.sys.measure(this.$target)},i.prototype.updateDisplayList=function(i,n){e.prototype.updateDisplayList.call(this,i,n);var r=this.$target,o=t.sys.updateDisplayList(r,i,n);r.setContentSize(Math.ceil(o.x),Math.ceil(o.y))},i}(t.LayoutBase);t.BasicLayout=e,__reflect(e.prototype,"eui.BasicLayout")}(eui||(eui={})),function(t){!function(t){function e(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");return-1==n?+i:.01*+i.substring(0,n)*e}var i="eui.UIComponent";t.measure=function(t){if(t){for(var e=0,n=0,r=egret.$TempRectangle,o=t.numChildren,a=0;o>a;a++){var s=t.getChildAt(a);if(egret.is(s,i)&&s.$includeInLayout){var l=s.$UIComponent,u=+l[4],h=+l[5],c=+l[0],p=+l[1],d=+l[2],f=+l[3],g=void 0,y=void 0;s.getPreferredBounds(r),isNaN(c)||isNaN(p)?isNaN(u)?isNaN(c)&&isNaN(p)?g=r.x:(g=isNaN(c)?0:c,g+=isNaN(p)?0:p):g=2*Math.abs(u):g=c+p,isNaN(d)||isNaN(f)?isNaN(h)?isNaN(d)&&isNaN(f)?y=r.y:(y=isNaN(d)?0:d,y+=isNaN(f)?0:f):y=2*Math.abs(h):y=d+f;var v=r.width,m=r.height;e=Math.ceil(Math.max(e,g+v)),n=Math.ceil(Math.max(n,y+m))}}t.setMeasuredSize(e,n)}},t.updateDisplayList=function(t,n,r){if(t){for(var o=t.numChildren,a=0,s=0,l=egret.$TempRectangle,u=0;o>u;u++){var h=t.getChildAt(u);if(egret.is(h,i)&&h.$includeInLayout){var c=h.$UIComponent,p=e(c[4],.5*n),d=e(c[5],.5*r),f=e(c[0],n),g=e(c[1],n),y=e(c[2],r),v=e(c[3],r),m=c[6],$=c[7],b=NaN,_=NaN;isNaN(f)||isNaN(g)?isNaN(m)||(b=Math.round(n*Math.min(.01*m,1))):b=n-g-f,isNaN(y)||isNaN(v)?isNaN($)||(_=Math.round(r*Math.min(.01*$,1))):_=r-v-y,h.setLayoutBoundsSize(b,_),h.getLayoutBounds(l);var x,T,E=l.width,S=l.height;x=isNaN(p)?isNaN(f)?isNaN(g)?l.x:n-E-g:f:Math.round((n-E)/2+p),T=isNaN(d)?isNaN(y)?isNaN(v)?l.y:r-S-v:y:Math.round((r-S)/2+d),h.setLayoutBoundsPosition(x,T),a=Math.max(a,x+E),s=Math.max(s,T+S)}}return egret.$TempPoint.setTo(a,s)}}}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_WIDTH="justifyUsingWidth",t}();t.ColumnAlign=e,__reflect(e.prototype,"eui.ColumnAlign")}(eui||(eui={})),function(t){var e="eui.UIComponent",i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,r=0,o=0,a=egret.$TempRectangle,s=0;i>s;s++){var l=t.getElementAt(s);egret.is(l,e)&&l.$includeInLayout?(l.getPreferredBounds(a),r+=a.width,o=Math.max(o,a.height)):n--}r+=(n-1)*this.$gap;var u=this.$paddingLeft+this.$paddingRight,h=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+u,o+h)},n.prototype.measureVirtual=function(){for(var t=this.$target,i=this.$typicalWidth,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalHeight),o=egret.$TempRectangle,a=this.endIndex,s=this.elementSizeTable,l=this.startIndex;a>l;l++){var u=t.getElementAt(l);egret.is(u,e)&&u.$includeInLayout&&(u.getPreferredBounds(o),n+=o.width,n-=isNaN(s[l])?i:s[l],r=Math.max(r,o.height))}var h=this.$paddingLeft+this.$paddingRight,c=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+h,r+c)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,a=this.$paddingRight,s=this.$paddingTop,l=this.$paddingBottom,u=this.$gap,h=Math.max(0,i-o-a),c=Math.max(0,n-s-l),p=this.$horizontalAlign==t.JustifyAlign.JUSTIFY,d=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var g,y,v,m=r.numElements,$=m,b=o,_=s,x=0,T=0,E=[],S=h,C=this.maxElementSize,w=egret.$TempRectangle;for(g=0;m>g;g++){var P=r.getElementAt(g);if(egret.is(P,e)&&P.$includeInLayout)if(P.getPreferredBounds(w),C=Math.max(C,w.height),p)x+=w.width;else{var D=P.$UIComponent;isNaN(D[6])?S-=w.width:(T+=D[6],(v=new t.sys.ChildInfo).layoutElement=P,v.percent=D[6],v.min=D[12],v.max=D[13],E.push(v))}else $--}S=(S-=u*($-1))>0?S:0;var L,I=h-x-u*($-1),O=$,R={};if(p){if(0>I){for(L=S/$,g=0;m>g;g++)y=r.getElementAt(g),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(w),w.width<=L&&(S-=w.width,O--));S=S>0?S:0}}else if(T>0){this.flexChildrenProportionally(h,S,T,E);var N=0,A=E.length;for(g=0;A>g;g++){v=E[g];var M=Math.round(v.size+N);N+=v.size-M,R[v.layoutElement.$hashCode]=M,S-=M}S=S>0?S:0}this.$horizontalAlign==egret.HorizontalAlign.CENTER?b=o+.5*S:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(b=o+S);var B=o,k=s,F=0,j=0,H=Math.ceil(c);this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(H=Math.ceil(Math.max(c,C)));var U,G,V=0;for(g=0;m>g;g++){var W=0;if(y=r.getElementAt(g),egret.is(y,e)&&y.$includeInLayout){if(y.getPreferredBounds(w),U=NaN,p?(G=NaN,I>0?G=S*w.width/x:0>I&&w.width>L&&(G=S/O),isNaN(G)||(V+=G-(U=Math.round(G+V)))):U=R[y.$hashCode],d)_=s,y.setLayoutBoundsSize(U,H),y.getLayoutBounds(w);else{var z=NaN;D=y.$UIComponent;if(!isNaN(y.percentHeight)){var X=Math.min(100,D[7]);z=Math.round(c*X*.01)}y.setLayoutBoundsSize(U,z),y.getLayoutBounds(w),_=s+(W=(W=(c-w.height)*f)>0?W:0)}y.setLayoutBoundsPosition(Math.round(b),Math.round(_)),F=Math.ceil(w.width),j=Math.ceil(w.height),B=Math.max(B,b+F),k=Math.max(k,_+j),b+=F+u}}this.maxElementSize=C,r.setContentSize(B+a,k+l)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,a=this.$paddingRight,s=this.$paddingTop,l=this.$paddingBottom,u=this.$gap,h=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(h)-u+a,void r.setContentSize(o,r.contentHeight);var c=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,c);var p=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,d=this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;p||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var g,y=egret.$TempRectangle,v=Math.max(0,n-s-l),m=Math.ceil(v),$=this.$typicalHeight,b=this.$typicalWidth,_=this.maxElementSize,x=Math.max($,this.maxElementSize);if(d){for(var T=this.startIndex;c>=T;T++)g=r.getVirtualElementAt(T),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(y),_=Math.max(_,y.height));m=Math.ceil(Math.max(v,_))}for(var E=0,S=0,C=0,w=!1,P=this.elementSizeTable,D=this.startIndex;c>=D;D++){var L=0;g=r.getVirtualElementAt(D),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(y),d||(_=Math.max(_,y.height)),p?(S=s,g.setLayoutBoundsSize(NaN,m),g.getLayoutBounds(y)):(g.getLayoutBounds(y),S=s+(L=(L=(v-y.height)*f)>0?L:0)),C=Math.max(C,y.height),w||(isNaN(P[D])?b:P[D])!=y.width&&(w=!0),P[D]=y.width,E=this.getStartPosition(D),g.setLayoutBoundsPosition(Math.round(E),Math.round(S)))}C+=s+l,o=this.getStartPosition(h)-u+a,this.maxElementSize=_,r.setContentSize(o,C),(w||x<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,r=this.$gap,o=this.elementSizeTable,a=0;t>a;a++){var s=o[a];isNaN(s)&&(s=i),n+=s+r}return n},n.prototype.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalWidth),e}return this.$target?this.$target.getElementAt(t).width:0},n.prototype.getElementTotalSize=function(){for(var t=this.$typicalWidth,e=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var a=r[o];isNaN(a)&&(a=t),i+=a+e}return i-e},n.prototype.elementAdded=function(t){this.useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalWidth))},n.prototype.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(e[10]<=0||e[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,r=t.scrollH;if(r>n-this.$paddingRight)return this.startIndex=-1,this.endIndex=-1,!1;var o=t.scrollH+e[10];if(o<this.$paddingLeft)return this.startIndex=-1,this.endIndex=-1,!1;var a=this.startIndex,s=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||s!=this.endIndex},n}(t.LinearLayoutBase);t.HorizontalLayout=i,__reflect(i.prototype,"eui.HorizontalLayout")}(eui||(eui={})),function(t){var e=function(){function t(){}return t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.JustifyAlign=e,__reflect(e.prototype,"eui.JustifyAlign")}(eui||(eui={})),function(t){var e=function(){function t(){}return t.TOP="top",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t}();t.RowAlign=e,__reflect(e.prototype,"eui.RowAlign")}(eui||(eui={})),function(t){var e="eui.UIComponent",i=function(i){function n(){var e=i.call(this)||this;return e.explicitHorizontalGap=NaN,e._horizontalGap=6,e.explicitVerticalGap=NaN,e._verticalGap=6,e._columnCount=-1,e._requestedColumnCount=0,e._rowCount=-1,e._requestedRowCount=0,e.explicitColumnWidth=NaN,e._columnWidth=NaN,e.explicitRowHeight=NaN,e._rowHeight=NaN,e._paddingLeft=0,e._paddingRight=0,e._paddingTop=0,e._paddingBottom=0,e._horizontalAlign=t.JustifyAlign.JUSTIFY,e._verticalAlign=t.JustifyAlign.JUSTIFY,e._columnAlign=t.ColumnAlign.LEFT,e._rowAlign=t.RowAlign.TOP,e._orientation=t.TileOrientation.ROWS,e.maxElementWidth=0,e.maxElementHeight=0,e.startIndex=-1,e.endIndex=-1,e.indexInViewCalculated=!1,e}return __extends(n,i),Object.defineProperty(n.prototype,"horizontalGap",{get:function(){return this._horizontalGap},set:function(t){(t=+t)!==this._horizontalGap&&(this.explicitHorizontalGap=t,this._horizontalGap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalGap",{get:function(){return this._verticalGap},set:function(t){(t=+t)!==this._verticalGap&&(this.explicitVerticalGap=t,this._verticalGap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedColumnCount",{get:function(){return this._requestedColumnCount},set:function(t){t=+t||0,this._requestedColumnCount!==t&&(this._requestedColumnCount=t,this._columnCount=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedRowCount",{get:function(){return this._requestedRowCount},set:function(t){t=+t||0,this._requestedRowCount!=t&&(this._requestedRowCount=t,this._rowCount=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(t){(t=+t)!==this._columnWidth&&(this.explicitColumnWidth=t,this._columnWidth=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){(t=+t)!==this._rowHeight&&(this.explicitRowHeight=t,this._rowHeight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){t=+t||0,this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){t=+t||0,this._paddingRight!==t&&(this._paddingRight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){t=+t||0,this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){t=+t||0,this._paddingBottom!==t&&(this._paddingBottom=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAlign",{get:function(){return this._columnAlign},set:function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAlign",{get:function(){return this._rowAlign},set:function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),n.prototype.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},n.prototype.measure=function(){var t=this.$target;if(t){var e=this._columnCount,i=this._rowCount,n=this._columnWidth,r=this._rowHeight,o=0,a=0,s=t.$UIComponent;this.calculateRowAndColumn(s[8],s[9]);var l=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount,u=this._requestedRowCount>0?this._requestedRowCount:this._rowCount,h=isNaN(this._horizontalGap)?0:this._horizontalGap,c=isNaN(this._verticalGap)?0:this._verticalGap;l>0&&(o=l*(this._columnWidth+h)-h),u>0&&(a=u*(this._rowHeight+c)-c);var p=this._paddingLeft+this._paddingRight,d=this._paddingTop+this._paddingBottom;t.setMeasuredSize(o+p,a+d),this._columnCount=e,this._rowCount=i,this._columnWidth=n,this._rowHeight=r}},n.prototype.calculateRowAndColumn=function(i,n){var r=this.$target,o=isNaN(this._horizontalGap)?0:this._horizontalGap,a=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var s=r.numElements,l=s,u=0;l>u;u++){var h=r.getElementAt(u);!h||egret.is(h,e)&&h.$includeInLayout||s--}if(0!=s){(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight;var c=this._columnWidth+o;0>=c&&(c=1);var p=this._rowHeight+a;0>=p&&(p=1);var d=this._orientation==t.TileOrientation.COLUMNS,f=!isNaN(i),g=!isNaN(n),y=this._paddingLeft,v=this._paddingRight,m=this._paddingTop,$=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0)this._requestedRowCount>0&&(this._rowCount=Math.min(this._requestedRowCount,s)),this._requestedColumnCount>0&&(this._columnCount=Math.min(this._requestedColumnCount,s));else if(f||g)if(!f||g&&d){var b=Math.max(0,n-m-$);this._rowCount=Math.floor((b+a)/p),this._rowCount=Math.max(1,Math.min(this._rowCount,s))}else{var _=Math.max(0,i-y-v);this._columnCount=Math.floor((_+o)/c),this._columnCount=Math.max(1,Math.min(this._columnCount,s))}else{var x=Math.sqrt(s*c*p);d?this._rowCount=Math.max(1,Math.round(x/p)):this._columnCount=Math.max(1,Math.round(x/c))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(s/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(s/this._rowCount))),this._requestedColumnCount>0&&this._requestedRowCount>0&&(this._orientation==t.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(s/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(s/this._requestedRowCount)))}else this._rowCount=this._columnCount=0},n.prototype.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},n.prototype.doUpdateMaxElementSize=function(t,i){var n=this.maxElementWidth,r=this.maxElementHeight,o=egret.$TempRectangle,a=this.$target;if(-1!=t&&-1!=i)for(var s=t;i>=s;s++){var l=a.getVirtualElementAt(s);egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(o),n=Math.max(n,o.width),r=Math.max(r,o.height))}this.maxElementWidth=n,this.maxElementHeight=r},n.prototype.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},n.prototype.scrollPositionChanged=function(){this.$useVirtualLayout&&(this.getIndexInView()&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList()))},n.prototype.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var e=this.$target,i=e.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=i-1,!1;var n=e.$UIComponent;if(0==n[10]||0==n[11])return this.startIndex=this.endIndex=-1,!1;var r=this.startIndex,o=this.endIndex,a=this._paddingLeft,s=this._paddingTop,l=isNaN(this._horizontalGap)?0:this._horizontalGap,u=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==t.TileOrientation.COLUMNS){var h=this._columnWidth+l;if(0>=h)return this.startIndex=0,this.endIndex=i-1,!1;var c=e.scrollH,p=c+n[10],d=Math.floor((c-a)/h);0>d&&(d=0);var f=Math.ceil((p-a)/h);0>f&&(f=0),this.startIndex=Math.min(i-1,Math.max(0,d*this._rowCount)),this.endIndex=Math.min(i-1,Math.max(0,f*this._rowCount-1))}else{var g=this._rowHeight+u;if(0>=g)return this.startIndex=0,this.endIndex=i-1,!1;var y=e.scrollV,v=y+n[11],m=Math.floor((y-s)/g);0>m&&(m=0);var $=Math.ceil((v-s)/g);0>$&&($=0),this.startIndex=Math.min(i-1,Math.max(0,m*this._columnCount)),this.endIndex=Math.min(i-1,Math.max(0,$*this._columnCount-1))}return this.startIndex!=r||this.endIndex!=o},n.prototype.updateDisplayList=function(n,r){if(i.prototype.updateDisplayList.call(this,n,r),this.$target){var o=this.$target,a=this._paddingLeft,s=this._paddingRight,l=this._paddingTop,u=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(n,r),0==this._rowCount||0==this._columnCount)return void o.setContentSize(a+s,l+u);this.adjustForJustify(n,r),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(n,r),this.adjustForJustify(n,r)),-1==this.startIndex||-1==this.endIndex)return void o.setContentSize(0,0);var h=this.endIndex;o.setVirtualElementIndicesInView(this.startIndex,h);for(var c,p,d,f,g,y=this._orientation==t.TileOrientation.COLUMNS,v=this.startIndex,m=isNaN(this._horizontalGap)?0:this._horizontalGap,$=isNaN(this._verticalGap)?0:this._verticalGap,b=this._rowCount,_=this._columnCount,x=this._columnWidth,T=this._rowHeight,E=this.startIndex;h>=E;E++)if(c=this.$useVirtualLayout?this.target.getVirtualElementAt(E):this.target.getElementAt(E),egret.is(c,e)&&c.$includeInLayout){switch(y?(f=Math.ceil((v+1)/b)-1,-1==(g=Math.ceil((v+1)%b)-1)&&(g=b-1)):(-1==(f=Math.ceil((v+1)%_)-1)&&(f=_-1),g=Math.ceil((v+1)/_)-1),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:p=n-(f+1)*(x+m)+m-s;break;case egret.HorizontalAlign.LEFT:default:p=f*(x+m)+a}switch(this._verticalAlign){case egret.VerticalAlign.TOP:d=g*(T+$)+l;break;case egret.VerticalAlign.BOTTOM:d=r-(g+1)*(T+$)+$-u;break;default:d=g*(T+$)+l}this.sizeAndPositionElement(c,p,d,x,T),v++}var S=a+s,C=l+u,w=(x+m)*_-m,P=(T+$)*b-$;o.setContentSize(w+S,P+C)}},n.prototype.sizeAndPositionElement=function(e,i,n,r,o){var a=NaN,s=NaN,l=e.$UIComponent;this._horizontalAlign==t.JustifyAlign.JUSTIFY?a=r:isNaN(l[6])||(a=r*l[6]*.01),this._verticalAlign==t.JustifyAlign.JUSTIFY?s=o:isNaN(l[7])||(s=o*l[7]*.01),e.setLayoutBoundsSize(Math.round(a),Math.round(s));var u=i,h=egret.$TempRectangle;switch(e.getLayoutBounds(h),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:u+=r-h.width;break;case egret.HorizontalAlign.CENTER:u=i+(r-h.width)/2}var c=n;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:c+=o-h.height;break;case egret.VerticalAlign.MIDDLE:c+=(o-h.height)/2}e.setLayoutBoundsPosition(Math.round(u),Math.round(c))},n.prototype.adjustForJustify=function(e,i){var n=this._paddingLeft,r=this._paddingRight,o=this._paddingTop,a=this._paddingBottom,s=Math.max(0,e-n-r),l=Math.max(0,i-o-a);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var u,h=l-this._rowHeight*this._rowCount,c=s-this._columnWidth*this._columnCount;h>0&&(this._rowAlign==t.RowAlign.JUSTIFY_USING_GAP?(u=Math.max(1,this._rowCount-1),this._verticalGap=h/u):this._rowAlign==t.RowAlign.JUSTIFY_USING_HEIGHT&&this._rowCount>0&&(this._rowHeight+=(h-(this._rowCount-1)*this._verticalGap)/this._rowCount)),c>0&&(this._columnAlign==t.ColumnAlign.JUSTIFY_USING_GAP?(u=Math.max(1,this._columnCount-1),this._horizontalGap=c/u):this._columnAlign==t.ColumnAlign.JUSTIFY_USING_WIDTH&&this._columnCount>0&&(this._columnWidth+=(c-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(t.LayoutBase);t.TileLayout=i,__reflect(i.prototype,"eui.TileLayout")}(eui||(eui={})),function(t){var e=function(){function t(){}return t.ROWS="rows",t.COLUMNS="columns",t}();t.TileOrientation=e,__reflect(e.prototype,"eui.TileOrientation")}(eui||(eui={})),function(t){var e="eui.UIComponent",i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,r=0,o=0,a=egret.$TempRectangle,s=0;i>s;s++){var l=t.getElementAt(s);egret.is(l,e)&&l.$includeInLayout?(l.getPreferredBounds(a),o+=a.height,r=Math.max(r,a.width)):n--}o+=(n-1)*this.$gap;var u=this.$paddingLeft+this.$paddingRight,h=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+u,o+h)},n.prototype.measureVirtual=function(){for(var t=this.$target,i=this.$typicalHeight,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalWidth),o=egret.$TempRectangle,a=this.endIndex,s=this.elementSizeTable,l=this.startIndex;a>l;l++){var u=t.getElementAt(l);egret.is(u,e)&&u.$includeInLayout&&(u.getPreferredBounds(o),n+=o.height,n-=isNaN(s[l])?i:s[l],r=Math.max(r,o.width))}var h=this.$paddingLeft+this.$paddingRight,c=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+h,n+c)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,a=this.$paddingRight,s=this.$paddingTop,l=this.$paddingBottom,u=this.$gap,h=Math.max(0,i-o-a),c=Math.max(0,n-s-l),p=this.$verticalAlign==t.JustifyAlign.JUSTIFY,d=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var g,y,v,m=r.numElements,$=m,b=o,_=s,x=0,T=0,E=[],S=c,C=this.maxElementSize,w=egret.$TempRectangle;for(g=0;m>g;g++){var P=r.getElementAt(g);if(egret.is(P,e)&&P.$includeInLayout)if(P.getPreferredBounds(w),C=Math.max(C,w.width),p)x+=w.height;else{var D=P.$UIComponent;isNaN(D[7])?S-=w.height:(T+=D[7],(v=new t.sys.ChildInfo).layoutElement=P,v.percent=D[7],v.min=D[14],v.max=D[15],E.push(v))}else $--}S=(S-=u*($-1))>0?S:0;var L,I=c-x-u*($-1),O=$,R={};if(p){if(0>I){for(L=S/$,g=0;m>g;g++)y=r.getElementAt(g),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(w),w.height<=L&&(S-=w.height,O--));S=S>0?S:0}}else if(T>0){this.flexChildrenProportionally(c,S,T,E);var N=0,A=E.length;for(g=0;A>g;g++){v=E[g];var M=Math.round(v.size+N);N+=v.size-M,R[v.layoutElement.$hashCode]=M,S-=M}S=S>0?S:0}this.$verticalAlign==egret.VerticalAlign.MIDDLE?_=s+.5*S:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(_=s+S);var B=o,k=s,F=0,j=0,H=Math.ceil(h);this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(H=Math.ceil(Math.max(h,C)));var U,G,V=0;for(g=0;m>g;g++){var W=0;if(y=r.getElementAt(g),egret.is(y,e)&&y.$includeInLayout){if(y.getPreferredBounds(w),U=NaN,p?(G=NaN,I>0?G=S*w.height/x:0>I&&w.height>L&&(G=S/O),isNaN(G)||(V+=G-(U=Math.round(G+V)))):U=R[y.$hashCode],d)b=o,y.setLayoutBoundsSize(H,U),y.getLayoutBounds(w);else{var z=NaN;D=y.$UIComponent;if(!isNaN(D[6])){var X=Math.min(100,D[6]);z=Math.round(h*X*.01)}y.setLayoutBoundsSize(z,U),y.getLayoutBounds(w),b=o+(W=(W=(h-w.width)*f)>0?W:0)}y.setLayoutBoundsPosition(Math.round(b),Math.round(_)),F=Math.ceil(w.width),j=Math.ceil(w.height),B=Math.max(B,b+F),k=Math.max(k,_+j),_+=j+u}}this.maxElementSize=C,r.setContentSize(B+a,k+l)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,a=this.$paddingBottom,s=this.$paddingLeft,l=this.$paddingRight,u=this.$gap,h=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(h)-u+a,void r.setContentSize(r.contentWidth,o);var c=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,c);var p=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,d=this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;p||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var g,y=egret.$TempRectangle,v=Math.max(0,i-s-l),m=Math.ceil(v),$=this.$typicalHeight,b=this.$typicalWidth,_=this.maxElementSize,x=Math.max(b,this.maxElementSize);if(d){for(var T=this.startIndex;c>=T;T++)g=r.getVirtualElementAt(T),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(y),_=Math.max(_,y.width));m=Math.ceil(Math.max(v,_))}for(var E=0,S=0,C=0,w=!1,P=this.elementSizeTable,D=this.startIndex;c>=D;D++){var L=0;g=r.getVirtualElementAt(D),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(y),d||(_=Math.max(_,y.width)),p?(E=s,g.setLayoutBoundsSize(m,NaN),g.getLayoutBounds(y)):(g.getLayoutBounds(y),E=s+(L=(L=(v-y.width)*f)>0?L:0)),C=Math.max(C,y.width),w||(isNaN(P[D])?$:P[D])!=y.height&&(w=!0),P[D]=y.height,S=this.getStartPosition(D),g.setLayoutBoundsPosition(Math.round(E),Math.round(S)))}C+=s+l,o=this.getStartPosition(h)-u+a,this.maxElementSize=_,r.setContentSize(C,o),(w||x<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.y}for(var i=this.$typicalHeight,n=this.$paddingTop,r=this.$gap,o=this.elementSizeTable,a=0;t>a;a++){var s=o[a];isNaN(s)&&(s=i),n+=s+r}return n},n.prototype.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalHeight),e}return this.$target?this.$target.getElementAt(t).height:0},n.prototype.getElementTotalSize=function(){for(var t=this.$typicalHeight,e=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var a=r[o];isNaN(a)&&(a=t),i+=a+e}return i-e},n.prototype.elementAdded=function(t){this.$useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight))},n.prototype.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(0==e[10]||0==e[11])return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,r=t.scrollV;if(r>n-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var o=t.scrollV+e[11];if(o<this.$paddingTop)return this.startIndex=-1,this.endIndex=-1,!1;var a=this.startIndex,s=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||s!=this.endIndex},n}(t.LinearLayoutBase);t.VerticalLayout=i,__reflect(i.prototype,"eui.VerticalLayout")}(eui||(eui={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var a=o.width,s=o.y,l=r.scrollH,u=r.contentWidth,h=r.width;if(0>=l){var c=a*(1- -l/(.5*h));c=Math.max(5,Math.round(c)),n.setLayoutBoundsSize(c,NaN),n.setLayoutBoundsPosition(0,s)}else if(l>=u-h){c=a*(1-(l-u+h)/(.5*h));c=Math.max(5,Math.round(c)),n.setLayoutBoundsSize(c,NaN),n.setLayoutBoundsPosition(e-c,s)}else{var p=(e-a)*l/(u-h);n.setLayoutBoundsSize(NaN,NaN),n.setLayoutBoundsPosition(p,s)}}},e.prototype.onPropertyChanged=function(t){switch(t.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.HScrollBar=e,__reflect(e.prototype,"eui.HScrollBar")}(eui||(eui={})),function(t){var e=function(){function t(t,e,i,n){this.target=t,this.propertyName=e,this.position=i,this.relativeTo=n}return t.prototype.apply=function(t,e){var i,n=t[this.relativeTo],r=t[this.target],o=this.propertyName?t[this.propertyName]:e;if(r&&o){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=o.getChildIndex(n);break;case 3:i=o.getChildIndex(n)+1}-1==i&&(i=o.numChildren),egret.is(o,"eui.Component")&&o.$Component[8].$elementsContent.push(r),o.addChildAt(r,i)}},t.prototype.remove=function(t,e){var i=this.propertyName?t[this.propertyName]:e,n=t[this.target];if(n&&i&&(n.$parent===i&&i.removeChild(n),egret.is(i,"eui.Component"))){var r=i.$Component[8].$elementsContent,o=r.indexOf(n);o>-1&&r.splice(o,1)}},t}();t.AddItems=e,__reflect(e.prototype,"eui.AddItems",["eui.IOverride"])}(eui||(eui={})),function(t){var e=function(){function t(t,e,i){this.target=t,this.name=e,this.value=i}return t.prototype.apply=function(t,e){var i=this.target?t[this.target]:t;i&&(this.oldValue=i[this.name],this.setPropertyValue(i,this.name,this.value,this.oldValue))},t.prototype.remove=function(t,e){var i=this.target?t[this.target]:t;i&&(this.setPropertyValue(i,this.name,this.oldValue,this.oldValue),this.oldValue=null)},t.prototype.setPropertyValue=function(t,e,i,n){t[e]=null==i?i:"number"==typeof n?+i:"boolean"==typeof n?this.toBoolean(i):i},t.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();t.SetProperty=e,__reflect(e.prototype,"eui.SetProperty",["eui.IOverride"])}(eui||(eui={})),function(t){var e=function(){function e(t,e,i,n,r){this.host=t,this.templates=e,this.chainIndex=i,this.target=n,this.prop=r}return e.prototype.apply=function(e,i){if(this.target){var n=this.target[this.prop];this.oldValue&&this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue),n&&(this.oldValue=n),t.Binding.$bindProperties(this.host,this.templates.concat(),this.chainIndex.concat(),this.target,this.prop)}},e.prototype.remove=function(t,e){if(this.target){var i=this.oldValue;this.target[this.prop]&&(this.oldValue=this.target[this.prop]),i&&this.setPropertyValue(this.target,this.prop,i,i)}},e.prototype.setPropertyValue=function(t,e,i,n){t[e]=null==i?i:"number"==typeof n?+i:"boolean"==typeof n?this.toBoolean(i):i},e.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},e}();t.SetStateProperty=e,__reflect(e.prototype,"eui.SetStateProperty",["eui.IOverride"])}(eui||(eui={})),function(t){!function(t){function e(t,e,i,n,o,a,s,l,u,h){var c;if(!isNaN(i)&&isNaN(n)){if(c=r(t,e,i,a,i,l,i,h))return c}else if(isNaN(i)&&!isNaN(n)&&(c=r(t,e,o,n,s,n,u,n)))return c;return r(t,e,o,a,s,l,u,h)}function i(t,e,i,r,o,a,s,l,u,h){var c;if(!isNaN(i)&&isNaN(r)){if(c=n(t,e,i,a,i,l,i,h))return c}else if(isNaN(i)&&!isNaN(r)&&(c=n(t,e,o,r,s,r,u,r)))return c;return n(t,e,o,a,s,l,u,h)}function n(t,e,i,n,r,a,l,u){var h=e.b,c=e.d;if(h>-1e-9&&1e-9>h&&(h=0),c>-1e-9&&1e-9>c&&(c=0),0==h&&0==c)return null;if(0==h&&0==c)return null;if(0==h)return egret.Point.create(i,t/Math.abs(c));if(0==c)return egret.Point.create(t/Math.abs(h),n);var p,d,f,g=h*c>=0?c:-c;if(0!=g&&i>0){var y=1/g;(f=(t-h*(d=i=Math.max(r,Math.min(l,i))))*y)>=a&&u>=f&&h*d+g*f>=0&&(p=egret.Point.create(d,f)),(f=(-t-h*d)*y)>=a&&u>=f&&0>h*d+g*f&&(!p||s(p.x,p.y,e).width>s(d,f,e).width)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(0!=h&&n>0){var v=1/h;(d=(t-g*(f=n=Math.max(a,Math.min(u,n))))*v)>=r&&l>=d&&h*d+g*f>=0&&(!p||s(p.x,p.y,e).width>s(d,f,e).width)&&(p=egret.Point.create(d,f)),(d=(-t-g*f)*v)>=r&&l>=d&&0>h*d+g*f&&(!p||s(p.x,p.y,e).width>s(d,f,e).width)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(p)return p;var m=e.a,$=e.c;return o(h,g,t,r,a,l,u,m,m*$>=0?$:-$)}function r(t,e,i,n,r,a,l,u){var h=e.a,c=e.c;if(h>-1e-9&&1e-9>h&&(h=0),c>-1e-9&&1e-9>c&&(c=0),0==h&&0==c)return null;if(0==h)return egret.Point.create(i,t/Math.abs(c));if(0==c)return egret.Point.create(t/Math.abs(h),n);var p,d,f,g=h*c>=0?c:-c;if(0!=g&&i>0){var y=1/g;(f=(t-h*(d=i=Math.max(r,Math.min(l,i))))*y)>=a&&u>=f&&h*d+g*f>=0&&(p=egret.Point.create(d,f)),(f=(-t-h*d)*y)>=a&&u>=f&&0>h*d+g*f&&(!p||s(p.x,p.y,e).height>s(d,f,e).height)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(0!=h&&n>0){var v=1/h;(d=(t-g*(f=n=Math.max(a,Math.min(u,n))))*v)>=r&&l>=d&&h*d+g*f>=0&&(!p||s(p.x,p.y,e).height>s(d,f,e).height)&&(egret.Point.release(p),p=egret.Point.create(d,f)),(d=(-t-g*f)*v)>=r&&l>=d&&0>h*d+g*f&&(!p||s(p.x,p.y,e).height>s(d,f,e).height)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(p)return p;var m=e.b,$=e.d;return o(h,g,t,r,a,l,u,m,m*$>=0?$:-$)}function o(t,e,i,n,r,o,a,s,l){if(0==t||0==e)return null;var u,h,c=(i-n*t)/e,p=(i-o*t)/e,d=Math.max(r,Math.min(c,p)),f=Math.min(a,Math.max(c,p)),g=s*e-t*l;return f>=d?(h=Math.abs(g)<1e-9?i/(t+e):s*i/g,u=(i-e*(h=Math.max(d,Math.min(h,f))))/t,egret.Point.create(u,h)):(c=-(n*t+i)/e,p=-(o*t+i)/e,d=Math.max(r,Math.min(c,p)),(f=Math.min(a,Math.max(c,p)))>=d?(h=Math.abs(g)<1e-9?-i/(t+e):-s*i/g,u=(-i-e*(h=Math.max(d,Math.min(h,f))))/t,egret.Point.create(u,h)):null)}function a(t,e,i,n,r,a,s){var u=i.a,h=i.b,c=i.c,p=i.d;if(u>-1e-9&&1e-9>u&&(u=0),h>-1e-9&&1e-9>h&&(h=0),c>-1e-9&&1e-9>c&&(c=0),p>-1e-9&&1e-9>p&&(p=0),0==h&&0==c)return 0==u||0==p?null:egret.Point.create(t/Math.abs(u),e/Math.abs(p));if(0==u&&0==p)return 0==h||0==c?null:egret.Point.create(e/Math.abs(h),t/Math.abs(c));var d=u*c>=0?c:-c,f=h*p>=0?p:-p,g=u*f-h*d;if(Math.abs(g)<1e-9)return 0==d||0==u||u==-d||Math.abs(u*e-h*t)>1e-9?null:o(u,d,t,n,n,a,s,h,f);var y,v=1/g;return(y=l(u,d,h,f,t*=v,e*=v))&&n<=y.x&&y.x<=a&&r<=y.y&&y.y<=s&&u*y.x+d*y.x>=0&&h*y.x+f*y.y>=0?y:(y=l(u,d,h,f,t,-e))&&n<=y.x&&y.x<=a&&r<=y.y&&y.y<=s&&u*y.x+d*y.x>=0&&h*y.x+f*y.y<0?y:(y=l(u,d,h,f,-t,e))&&n<=y.x&&y.x<=a&&r<=y.y&&y.y<=s&&u*y.x+d*y.x<0&&h*y.x+f*y.y>=0?y:(y=l(u,d,h,f,-t,-e))&&n<=y.x&&y.x<=a&&r<=y.y&&y.y<=s&&u*y.x+d*y.x<0&&h*y.x+f*y.y<0?y:(egret.Point.release(y),null)}function s(t,e,i){var n=egret.$TempRectangle.setTo(0,0,t,e);return i.$transformBounds(n),n}function l(t,e,i,n,r,o){return egret.Point.create(n*r-e*o,t*o-i*r)}var u=.1,h=function(){function t(){}return t.fitBounds=function(t,n,r,o,l,h,c,p,d,f,g){if(isNaN(t)&&isNaN(n))return egret.Point.create(h,c);var y,v=u>p?0:p-u,m=u>d?0:d-u,$=f+u,b=g+u;if(isNaN(t)||isNaN(n))return isNaN(t)?i(n,r,o,l,h,c,v,m,$,b):e(t,r,o,l,h,c,v,m,$,b);if(!(y=a(t,n,r,v,m,$,b))){var _=void 0;if(_=e(t,r,o,l,h,c,v,m,$,b))s(_.x,_.y,r).height-.1>n&&(egret.Point.release(_),_=null);var x=void 0;if(x=i(n,r,o,l,h,c,v,m,$,b))s(x.x,x.y,r).width-.1>t&&(egret.Point.release(x),x=null);y=_&&x?_.x*_.y>x.x*x.y?_:x:_||x,egret.Point.release(_),egret.Point.release(x)}return y},t}();t.MatrixUtil=h,__reflect(h.prototype,"eui.sys.MatrixUtil")}(t.sys||(t.sys={}))}(eui||(eui={}));var egret,nest;__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};egret||(egret={}),function(t){var e=function(e){function i(n,r){void 0===n&&(n=""),void 0===r&&(r=0);var o=e.call(this)||this;return o._writeMessage="",o._readMessage="",o._connected=!1,o._connecting=!1,o._isReadySend=!1,o._bytesWrite=!1,o._type=i.TYPE_STRING,o._connected=!1,o._writeMessage="",o._readMessage="",o.socket=new t.ISocket,o.socket.addCallBacks(o.onConnect,o.onClose,o.onSocketData,o.onError,o),o}return __extends(i,e),i.prototype.connect=function(t,e){this._connecting||this._connected||(this._connecting=!0,this.socket.connect(t,e))},i.prototype.connectByUrl=function(t){this._connecting||this._connected||(this._connecting=!0,this.socket.connectByUrl(t))},i.prototype.close=function(){this._connected&&this.socket.close()},i.prototype.onConnect=function(){this._connected=!0,this._connecting=!1,this.dispatchEventWith(t.Event.CONNECT)},i.prototype.onClose=function(){this._connected=!1,this.dispatchEventWith(t.Event.CLOSE)},i.prototype.onError=function(){this._connecting&&(this._connecting=!1),this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},i.prototype.onSocketData=function(e){"string"==typeof e?this._readMessage+=e:this._readByte._writeUint8Array(new Uint8Array(e)),t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.SOCKET_DATA)},i.prototype.flush=function(){return this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),void(this._isReadySend=!1)):void t.$warn(3101)},i.prototype.writeUTF=function(e){return this._connected?(this._type==i.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(e)):this._writeMessage+=e,void this.flush()):void t.$warn(3101)},i.prototype.readUTF=function(){var t;return this._type==i.TYPE_BINARY?(this._readByte.position=0,t=this._readByte.readUTF(),this._readByte.clear()):(t=this._readMessage,this._readMessage=""),t},i.prototype.writeBytes=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._connected?this._writeByte?(this._bytesWrite=!0,this._writeByte.writeBytes(e,i,n),void this.flush()):void t.$warn(3102):void t.$warn(3101)},i.prototype.readBytes=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(e,i,n),void this._readByte.clear()):void t.$warn(3102)},Object.defineProperty(i.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,e!=i.TYPE_BINARY||this._writeByte||(this._readByte=new t.ByteArray,this._writeByte=new t.ByteArray)},enumerable:!0,configurable:!0}),i.TYPE_STRING="webSocketTypeString",i.TYPE_BINARY="webSocketTypeBinary",i}(t.EventDispatcher);t.WebSocket=e,__reflect(e.prototype,"egret.WebSocket")}(egret||(egret={})),function(t){!function(e){var i=function(){function e(){this.host="",this.port=0,window.WebSocket||t.$error(3100)}return e.prototype.addCallBacks=function(t,e,i,n,r){this.onConnect=t,this.onClose=e,this.onSocketData=i,this.onError=n,this.thisObject=r},e.prototype.connect=function(t,e){this.host=t,this.port=e;var i="ws://"+this.host+":"+this.port;this.socket=new window.WebSocket(i),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype.connectByUrl=function(t){this.socket=new window.WebSocket(t),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},e.prototype.send=function(t){this.socket.send(t)},e.prototype.close=function(){this.socket.close()},e.prototype.disconnect=function(){this.socket.disconnect&&this.socket.disconnect()},e}();e.HTML5WebSocket=i,__reflect(i.prototype,"egret.web.HTML5WebSocket",["egret.ISocket"]),t.ISocket=i}(t.web||(t.web={}))}(egret||(egret={})),function(t){t.user||(t.user={})}(nest||(nest={})),function(t){!function(e){function i(e){t.user.checkLogin({},(function(t){(s=t).result=0,n((function(){e({result:0})}))}))}function n(e){t.user.isSupport({},(function(t){l=t.getInfo;var i=t.loginTypes;if(i&&i.length)u=i;else if(t.loginType&&t.loginType.length){for(var n=t.loginType,r=[],o=0;o<n.length;o++)r.push({loginType:n[o]});u=r}else u=[];e()}))}function r(e,i){var n={};e&&""!=e&&"default"!=e&&(n.loginType=e),t.user.login(n,(function(t){t.token?(a(),t.result=0,i(t)):(null==t.result&&(t.result=-2),i(t))}))}function o(){return t.utils.$isRuntime?"1"==egret.localStorage.getItem("egret_logout"):"1"==window.localStorage.getItem("egret_logout")}function a(){t.utils.$isRuntime?egret.localStorage.setItem("egret_logout",null):window.localStorage.setItem("egret_logout",null)}e.startup=function(e,n){t.core.startup(e,(function(t){i(n)}))},e.getLoginTypes=function(){if(s&&s.token)return[];if(o()&&u&&u.length)for(var t=0;t<u.length;t++){var e=u[t];e.accInfo=null,u[t]=e}return u.concat()};var s,l,u,h=!0;e.login=function(t,e){h?(h=!1,s&&s.token?e(s):r(t.loginType,e)):r(t.loginType,e)},e.logout=function(e,i){t.user.logout(e,(function(e){0==e.result&&(s=null,t.utils.$isRuntime?egret.localStorage.setItem("egret_logout","1"):window.localStorage.setItem("egret_logout","1")),i(e)}))},e.isSupport=function(t,e){e({result:0,getInfo:l})},e.getInfo=function(e,i){t.user.getInfo(e,i)}}(t.easyuser||(t.easyuser={}))}(nest||(nest={})),function(t){!function(e){function i(e,i){var n,r=t[e][i];n="isSupport"==i?function(t,n){a("[Nest]nest."+e+"."+i);var o=t,s=n;"function"==typeof t&&(o={},s=t);r.call(null,o,(function(t){a("[Nest]nest."+e+"."+i+" : "+JSON.stringify(t)),s.call(null,t)}))}:function(t,n){a("[Nest]nest."+e+"."+i);r.call(null,t,(function(t){a("[Nest]nest."+e+"."+i+" : "+JSON.stringify(t)),n.call(null,t)}))},t[e][i]=n}function n(){return null==e.$spid&&(e.$spid=parseInt(o("egret.runtime.spid"))),e.$spid}function r(t){return n()==t}function o(t){if(e.$EGRET_SUPPORT)return egret.getOption(t);if(window.location){var i=location.search;if(""==i)return"";for(var n=(i=i.slice(1)).split("&"),r=n.length,o=0;r>o;o++){var a=n[o].split("=");if(a[0]==t)return a[1]}}return""}function a(t){e.$DEBUG_LOG&&(e.$EGRET_SUPPORT&&egret.log?egret.log(t):console.log(t))}var s,l;e.$DEBUG_LOG=!1,e.$changeMethod=function(e){for(var n=["user","iap","share","social","app"],r=0;r<n.length;r++){var o=n[r];if(t[e]&&t[e][o]){for(var a in null==t[o]&&(t[o]={}),t[e][o])t[o][a]=t[e][o][a];for(var a in t[o]){"function"==typeof t[o][a]&&i(o,a)}}}},e.$getSpid=n,e.$getChannelTag=function(){return null==s&&(s=o("channelTag")),s},e.$isQQBrowser=function(){return null==l&&(l=r(9392)),l},e.$isTargetPlatform=r,e.$getOption=o,e.$log=a,e.setProxy=function(t,e,i,n,r){var o="";for(var a in e)o+=a+"="+e[a]+"&";""!=o&&(o=o.substr(0,o.length-1));var s=new egret.URLLoader;s.addEventListener(egret.Event.COMPLETE,(function(){var t=JSON.parse(s.data);n(t)}),this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,(function(){r()}),this);var l=new egret.URLRequest(t);l.method=i,l.data=new egret.URLVariables(o),s.load(l)}}(t.utils||(t.utils={}))}(nest||(nest={})),this.navigator?nest.utils.$isRuntime=!1:nest.utils.$isRuntime=!0,nest.utils.$isRuntime&&(10044!=egret_native.getOption("egret.runtime.spid")&&egret_native.getOption("egret.runtime.nest")||function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[a]={exports:{}};e[a][0].call(h.exports,(function(t){var i=e[a][1][t];return r(i||t)}),h,h.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){var n=function(){return this}(),r=n.CMGAME_SDK_EGRET={},o=t(9),a=t(8),s=t(5),l=!1;o.getVersion=function(){return l},a.checkIsGameSDK((function(t,e){t&&(l=e)})),r.pay=n.CMPAY_EGRET=o,r.client=n.CMGAME_EGRET=a,r.ad=s},{5:5,8:8,9:9}],2:[function(t,e,i){var n=t(12);e.exports=function(t){var e,i=!1,r=!1,o=[];return function(a){i?a.apply(null,e):(o.push(a),r||(r=!0,t((function(){i||(i=!0,r=!1,e=n.slice(arguments),n.forEach(o,(function(t){t.apply(null,e)})),o.length=0,o=null)}))))}}},{12:12}],3:[function(t,e,i){e.exports=function(t){var e,i=!1,n=!1,r=[];return function(o){i?o(i,e):(r.push(o),n||(n=!0,t((function(t,o){(i=t)&&(e=o),setTimeout((function(){n=!1;for(var t=0,o=r.length;o>t;++t){(0,r[t])(i,e)}r.length=0,i&&(r=null)}))}))))}}},{}],4:[function(t,e,i){function n(){this._listeners={}}var r=t(12),o=n.prototype;o.on=function(t,e){var i=this._listeners;(i.hasOwnProperty(t)?i[t]:i[t]=[]).push(e)},o.off=function(t,e){var i,n=this._listeners;n.hasOwnProperty(t)&&(i=n[t]);for(var r=i.length,o=0;r>o;++o)i[o]===e&&i.splice(o,1)},o.fire=function(t){var e=this._listeners;if(e.hasOwnProperty(t))for(var i=r.slice(arguments,1),n=e[t],o=n.length,a=n.slice(),s=0;o>s;++s){var l=a[s];try{l.apply(null,i)}catch(t){}}},e.exports=n},{12:12}],5:[function(t,e,i){function n(t){this._option=t}function r(t){var e=Date.now();return 3e4>e-p?c.error("Only one ad allowed in 30s"):(p=e,t=l({gameid:"",pos:n.POS_CENTER},t),o||(o=u((function(e){s.ajax({url:"http://api.gc.liebao.cn/index.php?r=1/cp",data:{gameid:t.gameid}},(function(t,i,n){var r;if(t)try{r=JSON.parse(n)}catch(t){}e(Boolean(t&&r&&0===r.ret&&r.data),r)}))}))),void o((function(e,i){if(e){var r=i.data,o=t.pos||n.POS_CENTER;a&&(a.destroy(),a=null);var s=r[o];if(!s||!s.length)return;!function(t,e){var i=0,n=t.length;!function r(){if(n>i){var o=t[i],a=o.type;if(a&&h.hasOwnProperty(a)){var s=h[a];s.canShow?s.canShow((function(t){t?e(o):(++i,r())})):e(o)}else++i,r()}else e(null)}()}(s,(function(e){if(e){var i=e.type,n=l({gameid:t.gameid,debug:t.debug,adtype:i,pos:o,container:document.documentElement},e),r=new(0,h[i])(n);a=r,r.show()}}))}})))}var o,a,s=t(11),l=t(12).extend,u=t(3),h={gdt:t(7)};n.POS_CENTER=1,n.POS_BOTTOM=2,n.show=r,n.prototype.show=function(){r(this._option)};var c=function(){return this.console}(),p=0;e.exports=n},{11:11,12:12,3:3,7:7}],6:[function(t,e,i){function n(){}var r=t(11).report,o=1,a=2,s=3,l=4,u=n.prototype;u._report=function(t,e){var i=this._option;r("http://api.gc.liebao.cn/index.php?r=1/cp/report",{gameid:i.gameid,type:t,clientId:i.clientId,slotId:i.slotId,_code:e,adtype:i.adtype,_:Math.random()})},u._onShow=function(){this._report(o)},u._onError=function(t){this._report(l,t)},u._onClick=function(){this._report(a)},u._onClose=function(t){this._report(s,t)},e.exports=n},{11:11}],7:[function(t,e,i){function n(t){this._option=t,this._destroyed=!1}var r=t(8),o=t(12),a=t(6);n.canShow=function(t){r.checkIsGameSDK(t)};var s=n.prototype=o.create(a.prototype);s.show=function(){var t=this,e=t._option;return!t._destroyed&&e&&e.clientId&&e.slotId?(r.callWidePointAd({clientid:e.clientId,posid:e.slotId}),void t._onShow()):t._onError(-902)},s.destroy=function(){this._destroyed=!0},e.exports=n},{12:12,6:6,8:8}],8:[function(t,e,i){var n=t(2),r=i;r.checkIsGameSDK=n((function(t){!function(t,e){var i=!1,n=!1,r=egret.setTimeout((function(){n||(n=!0,e(i))}),null,t);egret.ExternalInterface.addCallback("get_game_sdk_version",(function(t){egret.clearTimeout(r),n||(n=!0,e(i=t))})),egret.ExternalInterface.call("get_game_sdk_version","")}(1e4,(function(e){e&&!isNaN(e)?t(!0,e):t(!1,-1)}))})),r.saveShortcutInfo=function(t){egret.ExternalInterface.call("save_shortcut_info",JSON.stringify({token:String(Math.random()),value:JSON.stringify(t)}))},r.pushIcon=function(t){t.title=t.Title,t.detailUrl=t.DetailUrl,t.picUrl=t.PicUrl,egret.ExternalInterface.call("push_icon",JSON.stringify(t))},r.dispatchGameLoginData=function(){var t;return egret.ExternalInterface.addCallback("dispatchGameLoginData",(function(e){if(t){var i=!1;if("string"==typeof e)try{i=JSON.parse(e)}catch(t){}else i=e;t(i)}})),function(e,i){var n=t;t=function(e){t=n,i(e)},egret.ExternalInterface.call("dispatchGameLoginData",JSON.stringify(e))}}();var o="";r.getGameSDKDeviceID=function(){return o},r.getGameSDKDeviceIDAsync=n((function(t){egret.ExternalInterface.addCallback("get_device_info",(function(e){var i=!1;if("string"==typeof e)try{i=JSON.parse(e)}catch(t){}else i=e;o=i,t(i)}))})),r.wsjLaunchPay=function(){var t={};return egret.ExternalInterface.addCallback("wsj_pay",(function(e){var i,n;try{i=JSON.parse(e)}catch(t){}if(i&&(n=i.token),n&&t.hasOwnProperty(n)){var r;try{r=JSON.parse(i.response)}catch(t){}var o=t[n];delete t[n],o(r)}})),function(e,i){var n=String(Math.random());t[n]=i,egret.ExternalInterface.call("wsj_pay",JSON.stringify({token:n,request:JSON.stringify(e)}))}}()},{2:2}],9:[function(t,e,i){var n=t(4),r=t(10),o=t(8).wsjLaunchPay,a=e.exports=new n;a.purchase=function(t){r.place({data:t,debug:void 0!==t.debug?t.debug:Boolean(window.CMPAY_DEBUG)},(function(t,e,i,n){a.fire("cmpay_order_placed",{type:"cmpay_order_placed",transaction_id:n&&n.data?n.data.transaction_id:null,ret:e,msg:i,success:t,response:n}),t?o(n.data.args,(function(t){var e=t&&"number"==typeof t.resultCode?t.resultCode:-99,i=t&&0===t.resultCode;a.fire("cmpay_order_complete",{type:"cmpay_order_complete",transaction_id:n.data.transaction_id,ret:e,success:i,payed:i,paid:i,wsjResponse:t})})):a.fire("cmpay_order_complete",{type:"cmpay_order_complete",transaction_id:n&&n.data?n.data.transaction_id:null,ret:-99,success:!1,payed:!1,paid:!1,wsjResponse:null})}))}},{10:10,4:4,8:8}],10:[function(t,e,i){var n=t(11).ajax,r=t(12).param,o=t(2)((function(t){var e=egret.setTimeout((function(){t("")}),null,1e3);egret.ExternalInterface.addCallback("getPackageInfo",(function(i){egret.clearTimeout(e),t(i)})),egret.ExternalInterface.call("getPackageInfo","")}));i.place=function(t,e){!function(t,e){var i=t.data&&t.data.access_token;i?o((function(o){if(32===i.length||"sdk"===i.slice(0,3)){var a={token:i,method:t.pay_method,dev:t.debug?1:null,packageInfo:o},s=t.data;for(var l in s)s.hasOwnProperty(l)&&"access_token"!==l&&(a[l]=s[l]);n({method:"GET",url:"http://gclogin.liebao.cn/api/native/order/pay",data:a},e)}else{(s=t.data).packageInfo=o,n({method:"GET",url:"http://gc.liebao.cn/pay/topay.php",data:{method:t.pay_method,args:r(s),dev:t.debug?1:null}},e)}})):e(!1,-1,'{"msg":"Token not provided."}')}({pay_method:"wsjpay/sdk",data:t.data,debug:t.debug},(function(t,i,n){var r,o="Unkown error";if(n){n=n.replace(/"transaction_id":(\d+)/,'"transaction_id":"$1"');try{r=JSON.parse(n)}catch(e){t=!1,o="Empty response"}}else t=!1;var a=t&&r&&r.data&&r.data.args&&r.data.args.goodsTokenUrl&&1===r.ret;a&&r.data&&(o=r.data.goodsTokenUrl?"ok":"Empty goods token url");e(a,a?0:r?r.ret:-1,o,r)}))}},{11:11,12:12,2:2}],11:[function(t,e,i){var n=t(12).param;i.ajax=function(t,e){var i=new egret.URLLoader,r=new egret.URLRequest;t.method&&"post"===t.method.toLowerCase()&&(r.method=egret.URLRequestMethod.POST);var o="";t.data&&(o="string"==typeof t.data?t.data:n(t.data),r.data=new egret.URLVariables(o)),r.url=t.url,i.dataFormat=egret.URLLoaderDataFormat.TEXT,i.addEventListener(egret.Event.COMPLETE,(function(){e(!0,0,i.data)})),i.addEventListener(egret.IOErrorEvent.IO_ERROR,(function(){e(!1,-1,i.data)}),this),i.load(r)},i.report=function(){}},{12:12}],12:[function(t,e,i){function n(){}var r=Array.prototype.slice;i.param=function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],r=typeof n;("number"===r||"string"===r||"boolean"===r)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}return e.join("&")},i.forEach=function(t,e){var i;if(t&&"object"==typeof t){var n=t.length;if("number"==typeof n){if(0===n)return;if(0 in t&&[n-1]in t){for(i=0;n>i&&!1!==e(t[i],i);++i);return}}for(i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}},i.slice=function(t,e,i){return r.call(t,e,i)},i.extend=function(t,e){if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},i.create=function(t){return n.prototype=t,new n}},{}]},{},[1])),function(t){!function(e){function i(t,e,i){void 0===i&&(i=!1);var o="nest";i?(egret.ExternalInterface.addCallback(o,(function(t){var i=JSON.parse(t);e(i.data)})),egret.ExternalInterface.call(o,JSON.stringify(t))):(r.push({data:t,callback:e}),n())}function n(){if(r.length){if(o)return;o=!0;var t=r.shift(),e="nest";egret.ExternalInterface.addCallback(e,(function(e){var i=JSON.parse(e);t.callback(i.data),o=!1,n()})),egret.ExternalInterface.call(e,JSON.stringify(t.data))}}!function(t){t.callCustomMethod=function(t,e){i({module:"core",action:"callCustomMethod",param:t},e)}}(e.core||(e.core={})),function(t){t.isSupport=function(t,e){i({module:"user",action:"isSupport",param:t},e)},t.checkLogin=function(t,e){i({module:"user",action:"checkLogin",param:t},e)},t.login=function(t,e){i({module:"user",action:"login",param:t},e,!0)},t.logout=function(t,e){var n=egret.getOption("egret.runtime.nest");n>=4||"custom"==n?i({module:"user",action:"logout",param:t},e):e({result:0})},t.getInfo=function(t,e){i({module:"user",action:"getInfo",param:t},e)}}(e.user||(e.user={})),function(t){t.pay=function(t,e){i({module:"iap",action:"pay",param:t},e)}}(e.iap||(e.iap={})),function(t){t.isSupport=function(t,e){i({module:"share",action:"isSupport",param:t},e)},t.setDefaultData=function(t,e){e.call(null,{result:-2})},t.share=function(t,e){i({module:"share",action:"share",param:t},e,!0)}}(e.share||(e.share={})),function(t){t.isSupport=function(t,e){i({module:"social",action:"isSupport",param:t},e)},t.getFriends=function(t,e){i({module:"social",action:"getFriends",param:t},e)},t.openBBS=function(t,e){i({module:"social",action:"openBBS",param:t},e)}}(e.social||(e.social={})),function(e){e.isSupport=function(t,e){i({module:"app",action:"isSupport",param:t},e)},e.attention=function(t,e){i({module:"app",action:"attention",param:t},e)},e.exitGame=function(t,e){i({module:"app",action:"exitGame",param:t},e)},e.sendToDesktop=function(t,e){i({module:"app",action:"sendToDesktop",param:t},e)},e.getInfo=function(e,i){var n=t.utils.$API_DOMAIN+"user/getCustomInfo",r={appId:t.utils.$APP_ID,runtime:1,egretChanId:t.utils.$getSpid()};t.utils.setProxy(n,r,egret.URLRequestMethod.GET,(function(t){var e=t.data;e.result=0,0==t.code?i.call(null,e):i.call(null,{result:-2})}),(function(){i.call(null,{result:-2})}))}}(e.app||(e.app={}));var r=[];e.callRuntime=i;var o=!1;e._getData=n}(t.runtime||(t.runtime={}))}(nest||(nest={})),function(t){!function(e){function i(t,e){n("http://gclogin.liebao.cn/api/user/quick_register",t,egret.URLRequestMethod.POST,e)}function n(t,e,i,n){var r="";for(var o in e)r+=o+"="+e[o]+"&";""!=r&&(r=r.substr(0,r.length-1)),console.log("cm old solution ="+t+"?"+r);var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,(function(){console.log("cm old solution  ="+a.data);var t=JSON.parse(a.data);n(t)}),this);var s=new egret.URLRequest(t);s.method=i,s.data=new egret.URLVariables(r),a.load(s)}e.callRuntime=function(t,e){var n;if(n=egret.localStorage.getItem("deviceid")){if(console.log("cm old local deviceid "+n),n.indexOf("{")>=0){var r=JSON.parse(n);t.postData.deviceid=r.did}else t.postData.deviceid=n;i(t.postData,e)}else{console.log("cm old CMPAY_EGRET.version "+CMPAY_EGRET.getVersion());var o=0==CMPAY_EGRET.getVersion()||0==CMPAY_EGRET.getVersion()?"getUid":"get_device_info",a=!1,s=function(n){a||(a=!0,console.log(n),t.postData.deviceid=n||egret.localStorage.getItem("deviceid")||"",i(t.postData,e))};egret.ExternalInterface.addCallback(o,(function(t){if(console.log("cm old CMPAY_EGRET"),"get_device_info"==o)if(console.log("cm old get_device_info "+t),t){var e=JSON.parse(t);s(e.did)}else s(null);else s(t)})),egret.setTimeout((function(){console.log("cm old timeout"),s(null)}),this,2e3),egret.ExternalInterface.call(o,"")}},e.loginBefore=function(e){var i={},r=t.utils.$API_DOMAIN+"app/getInfo";i.egretChanId=t.utils.$getSpid(),i.egretGameId=t.utils.$APP_ID,i.debug=1,n(r,i,egret.URLRequestMethod.GET,(function(t){e(t)}))},e.loginAfter=function(e,i,r){var o={};o.access_token=e.access_token,o.openid=e.openid;var a=t.utils.$API_DOMAIN+"game/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID+"/";o.runtime=1,o.showGame=1,r&&(o.newLiebaoApi=1),n(a,o,egret.URLRequestMethod.GET,(function(t){i(t)}))},e.payBefore=function(i,r){var o=t.utils.$API_DOMAIN+"user/placeOrder",a={id:e.user.egretInfo.egretUserId,appId:t.utils.$APP_ID,time:Date.now(),runtime:1};for(var s in i)a[s]=i[s];n(o,a,egret.URLRequestMethod.GET,(function(t){r(t)}))}}(t.cm||(t.cm={}))}(nest||(nest={})),function(t){!function(e){!function(e){e.checkLogin=function(i,n){function r(t){e.egretInfo={egretUserId:t.data.id},t.data.result=t.status,n(t.data)}function o(e){1==e.ret?(e.access_token=e.ssid,egret.localStorage.getItem("deviceid")||egret.localStorage.setItem("deviceid",e.deviceid),t.cm.loginAfter(e,r,!1)):n({result:1})}function a(e){console.log("cm old loginHandler1"),console.log(JSON.stringify(e,null,4));var i={};i.access_token=e.cp.token,i.openid=e.user.openid,egret.localStorage.setItem("cm_token",i.access_token),console.log("cm old loginHandler2"),t.cm.loginAfter(i,r,!0)}var s={};t.cm.loginBefore((function(e){if(0==e.code){var r=e.data;s.client_id=r.client_id,s.client_secret=r.client_secret,s.redirect_uri=r.redirect_uri,t.cm.app.$initDesktop({Title:r.title,DetailUrl:r.detailUrl,PicUrl:r.picUrl}),CMGAME_EGRET.checkIsGameSDK((function(e,n){if(e){console.log("cm old checkIsGameSDK1");var l={clientId:r.client_id,clientSecret:r.client_secret,redirectUri:r.redirect_uri};egret.localStorage.getItem("cm_token"),console.log(JSON.stringify(l,null,4)),console.log("cm old checkIsGameSDK2"),CMGAME_EGRET.dispatchGameLoginData(l,a)}else console.log("cm old checkIsGameSDK2"),t.cm.callRuntime({module:"user",action:"checkLogin",param:i,postData:s},o)}))}else n({result:1})}))},e.login=function(e,i){var n={module:"user",action:"login",param:e};t.cm.callRuntime(n,i)},e.isSupport=function(t,e){console.log("cm old nest isSupport start"),e({getInfo:0,loginType:null,loginTypes:null,result:0})},e.logout=function(e,i){t.runtime.user.logout(e,i)}}(e.user||(e.user={}))}(t.cm||(t.cm={}))}(nest||(nest={})),function(t){!function(t){!function(e){var i=!0;e.pay=function(e,n){t.payBefore(e,(function(t){if(0==t.code){i&&(CMPAY_EGRET.on("cmpay_order_complete",(function(t){console.log("cm old solution cmpay_order_complete  "+JSON.stringify(t,null,4)),n(1==t.success?{result:0}:2==t.ret?{result:-1}:{result:-2})})),i=!1);var e={access_token:t.data.access_token,client_id:t.data.client_id,product_id:t.data.product_id,unit:t.data.unit,payload:t.data.payload,notify_url:t.data.notify_url,money:t.data.money,order_name:t.data.order_name,game_icon:t.data.game_icon,game_name:t.data.game_name};CMPAY_EGRET.purchase(e)}else n({result:-2})}))}}(t.iap||(t.iap={}))}(t.cm||(t.cm={}))}(nest||(nest={})),function(t){!function(e){!function(e){e.isSupport=function(e,i){t.runtime.social.isSupport(e,i)},e.getFriends=function(e,i){t.runtime.social.getFriends(e,i)},e.openBBS=function(e,i){t.runtime.social.openBBS(e,i)}}(e.social||(e.social={}))}(t.cm||(t.cm={}))}(nest||(nest={})),function(t){!function(t){!function(t){t.isSupport=function(t,e){e({result:0,share:0})}}(t.share||(t.share={}))}(t.cm||(t.cm={}))}(nest||(nest={})),function(t){!function(t){!function(t){var e;t.$initDesktop=function(t){e=t,egret.ExternalInterface.call("save_shortcut_info",JSON.stringify({token:String(Math.random()),value:JSON.stringify(t)}))},t.isSupport=function(t,e){e(0!=CMPAY_EGRET.getVersion()&&!isNaN(CMPAY_EGRET.getVersion())&&CMPAY_EGRET.getVersion()>301030?{result:0,sendToDesktop:1,attention:0}:{result:0,sendToDesktop:0,attention:0})},t.sendToDesktop=function(t,i){e?(egret.ExternalInterface.call("push_icon",JSON.stringify({title:e.Title,detailUrl:e.DetailUrl,picUrl:e.PicUrl})),i({result:0})):i({result:-1})}}(t.app||(t.app={}))}(t.cm||(t.cm={}))}(nest||(nest={})),function(t){!function(e){function i(t,e,i,n){var r="";for(var o in e)r+=o+"="+e[o]+"&";""!=r&&(r=r.substr(0,r.length-1)),console.log("[Nest]qq hall send : "+t+"?"+r);var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,(function(){console.log("[Nest]qq hall get data : "+a.data);var t=JSON.parse(a.data);n(t)}),this);var s=new egret.URLRequest(t);s.method=i,s.data=new egret.URLVariables(r),a.load(s)}function n(t){var e=JSON.stringify(t);egret.ExternalInterface.call("HALL_EGRET_MSG_FROM",e)}e.login_call_type=102,e.login_back_call_type=100,e.pay_call_type=101,e.share_call_type=104,e.login_callback_type=200,e.pay_callback_type=201,e.share_callback_type=204,e.loginCallback=null,e.payCallback=null,e.shareCallback=null,e.version="V1.0.0",e.loginNum=0,e.payBefore=function(n,r){var o=t.utils.$API_DOMAIN+"user/placeOrder",a={id:e.userId,appId:t.utils.$APP_ID,time:Date.now(),openid:e.OpenId,openkey:e.OpenKey,paytoken:e.payToken,runtime:1};for(var s in n)a[s]=n[s];i(o,a,egret.URLRequestMethod.GET,(function(t){r(t)}))},e.callHall=n,e.init=function(){egret.ExternalInterface.addCallback("HALL_EGRET_MSG_TO",(function(r){var o=JSON.parse(r);switch(o.msgType){case e.login_callback_type:if(null==o.accessToken){if(e.loginNum++,e.loginNum>=3){return e.loginCallback.call(null,{result:-1,token:void 0}),void(e.loginCallback=null)}var a="OpenId/OpenKey ";return n({msgType:e.login_back_call_type,msgVersion:e.version,errorID:1,loginInfoStr:a}),void n({msgType:e.login_call_type,msgVersion:e.version})}if(e.loginCallback){e.gameType=o.msgType,e.gameVersion=o.msgVersion,e.OpenId=o.openId,e.OpenKey=o.accessToken,e.enterType=o.enterType,e.enterId=o.enterId,e.payToken=o.payToken;a="";n({msgType:e.login_back_call_type,msgVersion:e.version,errorID:0,loginInfoStr:a});var s=t.utils.$API_DOMAIN+"game/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID,l={};l.openkey=e.OpenKey,l.openid=e.OpenId,l.paytoken=e.payToken,l.runtime=1,l.showGame=1,i(s,l,egret.URLRequestMethod.GET,(function(t){var i=t.data;e.userId=i.id,e.loginCallback.call(null,i),e.loginCallback=null}))}break;case e.pay_callback_type:if(e.payCallback){var u=-1;switch(o.payState){case-1:case 1:case 2:e.payOrderInfo=null,e.payCallback.call(null,{result:u,status:u}),e.payCallback=null;break;case 0:e.iap.repay()}}break;case e.share_callback_type:if(e.shareCallback){u=o.errorid;e.shareCallback.call(null,{result:u,status:u}),e.shareCallback=null}}}))}}(t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){!function(t){!function(e){e.isSupport=function(t,e){var i={status:0,result:0,checkLogin:0,login:1,logout:0,getInfo:0};e.call(null,i)},e.checkLogin=function(t,e){var i={status:-1,result:-1,loginType:void 0,token:void 0};e.call(null,i)},e.login=function(e,i){t.loginCallback=i,t.callHall({msgType:t.login_call_type,msgVersion:t.version})}}(t.user||(t.user={}))}(t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){!function(t){!function(e){e.pay=function(e,i){t.payOrderInfo||(t.payOrderInfo=e,t.payBefore(e,(function(e){0==(e=e.data).code?i.call(null,{result:0,status:0}):(t.payCallback=i,t.callHall({msgType:t.pay_call_type,msgVersion:"V1.0.0",acctType:"",zoneId:"",payValue:e.qCoins,isCanChange:!1}))})))},e.repay=function(){if(t.payOrderInfo){var e=t.payOrderInfo,i=t.payCallback;t.payBefore(e,(function(t){var e=(t=t.data).status;i.call(null,{result:e,status:e})})),t.payOrderInfo=null,t.payCallback=null}}}(t.iap||(t.iap={}))}(t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){!function(t){!function(t){t.isSupport=function(t,e){var i={status:0,result:0,attention:0,sendToDesktop:0,exitGame:1};e.call(null,i)},t.exitGame=function(t){var e={status:0,result:0};t.call(null,e)},t.attention=function(t,e){},t.sendToDesktop=function(t,e){}}(t.app||(t.app={}))}(t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){!function(t){!function(e){e.isSupport=function(t,e){var i={status:0,result:0,share:1};e.call(null,i)},e.share=function(e,i){t.shareCallback=i,t.callHall({msgType:t.share_call_type,msgVersion:"V1.0.0",title:e.title,summary:e.description,imageLocalUrl:"",targetUrl:e.url})}}(t.share||(t.share={}))}(t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){!function(t){!function(t){t.isSupport=function(t,e){var i={status:0,result:0,getFriends:0,openBBS:0};e.call(null,i)},t.getFriends=function(t,e){},t.openBBS=function(t,e){}}(t.social||(t.social={}))}(t.qqhall||(t.qqhall={}))}(nest||(nest={})),function(t){!function(e){function i(e,i,n,r){var o="";for(var a in i)o+=a+"="+encodeURIComponent(i[a])+"&";""!=o&&(o=o.substr(0,o.length-1));for(var s="[Nest]qq hall2 send : "+e+"?"+o,l=0;l<Math.ceil(s.length/450);l++)t.utils.$log(s.slice(450*l,450*(l+1)));var u=new egret.URLLoader;u.addEventListener(egret.Event.COMPLETE,(function(){t.utils.$log("[Nest]qq hall2 get data : "+u.data);var e=JSON.parse(u.data);r(e)}),this);var h=new egret.URLRequest(e);h.method=n,h.data=new egret.URLVariables(o),u.load(h)}function n(e,n){var r=t.utils.$API_DOMAIN+"user/placeOrder",o={id:x,appId:t.utils.$APP_ID,time:Date.now(),qbopenkey:$,runtime:1};for(var a in e)o[a]=e[a];i(r,o,egret.URLRequestMethod.GET,(function(t){n(t)}))}function r(e){var i=JSON.stringify(e);t.utils.$log("call hall : "+i),egret.ExternalInterface.call("HALL_EGRET_MSG_FROM",i)}function o(t){z=t,r({msgType:O,appid:l,appsig:u,appsigData:h,qbopenid:m,msgVersion:q})}function a(t){X=t,r({msgType:R,appid:l,appsig:u,msgVersion:q})}function s(t){W=t,r({msgType:I,appid:l,qbopenid:m,refreshToken:"",msgVersion:q})}var l,u,h,c,p,d,f,g,y,v,m,$,b,_,x,T,E,S,C,w,P,D,L,I=106,O=107,R=108,N=109,A=200,M=201,B=204,k=206,F=207,j=208,H=209,U=null,G=null,V=null,W=null,z=null,X=null,Y=null,q="1.0.0",J=0,K=[];e.init=function(){egret.ExternalInterface.addCallback("HALL_EGRET_MSG_TO",(function(e){t.utils.$log("get hall data : "+e);for(var n=0;n<Math.ceil(e.length/450);n++)t.utils.$log(e.slice(450*n,450*(n+1)));var r,s=JSON.parse(e);switch(s.msgType){case A:if(U)if(0==(r=s.result)){s.msgType,s.msgVersion,g=s.openId,y=s.accessToken,s.enterType,s.enterId,v=s.payToken,m=s.qbopenid,$=s.qbopenkey,b=s.nickName,_=s.avatarUrl;var l=function(){if(U){var e=t.utils.$API_DOMAIN+"game/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID,n={};n.openId=g,n.accessToken=y,n.payToken=v,n.qbopenid=m,n.qbopenkey=$,n.nickName=b,n.avatarUrl=_,n.balance=J,n.gen_balance=c,n.first_save=p,n.save_amt=d,n.pf=T,n.baseinfo=JSON.stringify(f),n.runtime=1,i(e,n,egret.URLRequestMethod.GET,(function(t){var e=t.data;x=e.id,U.call(null,e),U=null}))}},u=!1,h=!1;o((function(){(u=!0)&&h&&l()})),a((function(){h=!0,u&&h&&l()}))}else U.call(null,{result:-2}),U=null;break;case M:if(G){if(0!=S){var C={};C.realSaveNum=s.realSaveNum,C.orderno=s.orderno,C.customMeta=D,function(e,n){i(t.utils.$API_DOMAIN+"pay/"+t.utils.$getSpid()+"/"+t.utils.$APP_ID,e,egret.URLRequestMethod.GET,(function(t){n(t)}))}(C,(function(t){0==t.code?(E=null,G.call(null,{result:0,status:0}),G=null,o(null)):(E=null,G.call(null,{result:-2,status:-2}),G=null)}));break}2==s.resultCode?(E=null,G.call(null,{result:-1,status:-1}),G=null):0==s.resultCode?o((function(){L.repay()})):(E=null,G.call(null,{result:-2,status:-2}),G=null)}break;case B:V&&(r=s.errorid,V.call(null,{result:r,status:r}),V=null);break;case k:0==s.result&&($=s.qbopenkey),W&&(W.call(null),W=null);break;case F:0==s.result&&(J=s.balance,c=s.gen_balance,p=s.first_save,d=s.save_amt),z&&(z.call(null),z=null);break;case j:0==s.result&&(f=s.baseinfo),X&&(X.call(null),X=null);break;case H:1==s.loginType?K.push("qq"):2==s.loginType?K.push("wx"):3==s.loginType&&(K.push("qq"),K.push("wx")),Y&&(Y.call(null),Y=null)}}))},function(e){e.isSupport=function(t,e){!function(t){Y=t,r({msgType:N,appid:l,appsig:u,appsigData:h,qbopenid:"",qbopenkey:"",msgVersion:q})}((function(){var t={status:0,result:0,loginType:K,checkLogin:0,login:1,logout:0,getInfo:0};e.call(null,t)}))},e.checkLogin=function(e,n){i(t.utils.$API_DOMAIN+"app/getSignInfo",{egretChanId:t.utils.$getSpid(),appId:t.utils.$APP_ID},egret.URLRequestMethod.GET,(function(t){l=t.data.appid,u=t.data.appsig,h=t.data.appsigdata;var e={status:-2,result:-2,loginType:void 0,token:void 0};n.call(null,e)}))},e.login=function(t,e){U=e,T=t.loginType,r({msgType:100,appid:l,appsig:u,appsigData:h,loginType:T,msgVersion:q})}}(e.user||(e.user={})),function(t){function e(){r({msgType:101,msgVersion:q,payType:S,appid:l,appsig:u,appsigData:h,payItem:w,payInfo:P,reqTime:Date.now(),customMeta:D,payValue:C,qbopenid:m,qbopenkey:$,isCanChange:!1})}t.pay=function(t,i){E||(E=t,s((function(){n(t,(function(t){t=t.data,C=t.payValue,P=t.payInfo,w=t.payItem,D=t.customMeta,G=i,S=C>J?0:1,e()}))})))},t.repay=function(){C>J?G&&(E=null,G.call(null,{result:-2,status:-2}),G=null):(S=1,e())}}(L=e.iap||(e.iap={})),function(t){t.isSupport=function(t,e){var i={status:0,result:0,attention:0,sendToDesktop:0,exitGame:0};e.call(null,i)},t.exitGame=function(t,e){},t.attention=function(t,e){},t.sendToDesktop=function(t,e){}}(e.app||(e.app={})),function(t){t.isSupport=function(t,e){var i={status:0,result:0,share:1};e.call(null,i)},t.share=function(t,e){V=e,s((function(){r({msgType:104,msgVersion:q,appid:l,appsig:u,appsigData:h,qbopenid:m,qbopenkey:$,title:t.title,summary:t.description,imageLocalUrl:t.img_url,img_title:t.img_title,cus_txt:"",targetUrl:t.url})}))}}(e.share||(e.share={})),function(t){t.isSupport=function(t,e){var i={status:0,result:0,getFriends:0,openBBS:0};e.call(null,i)},t.getFriends=function(t,e){},t.openBBS=function(t,e){}}(e.social||(e.social={}))}(t.qqhall2||(t.qqhall2={}))}(nest||(nest={})),function(t){!function(e){e.uid=void 0,function(e){e.isSupport=function(e,i){var n=[];t.utils.$isQQBrowser()&&(n.push("qq"),n.push("wx"));var r={result:0,loginType:n,loginTypes:void 0,getInfo:0};i.call(null,r)},e.checkLogin=function(e,i){EgretH5Sdk.checkLogin((function(e){t.h5.uid=e.id;var n=e.status;t.h5.uid&&(n=0);var r={result:n,token:e.token};i.call(null,r)}),null)},e.login=function(e,i){EgretH5Sdk.login((function(e){t.h5.uid=e.id;var n=e.status;t.h5.uid&&(n=0);var r={result:n,token:e.token};i.call(null,r)}),null,e.loginType)},e.logout=function(t,e){EgretH5Sdk.logout((function(t){var i=1==t.status?0:1;e.call(null,{result:i})}),null)}}(e.user||(e.user={})),function(e){e.pay=function(e,i){t.h5.uid&&(e.appId=t.utils.$APP_ID,e.uId=t.h5.uid,EgretH5Sdk.pay(e,(function(t){i(t)}),this))}}(e.iap||(e.iap={})),function(e){e.isSupport=function(e,i){EgretH5Sdk.isOpenShare(t.utils.$APP_ID,t.h5.uid,(function(t){var e={share:t.status};i.call(null,e)}),null)},e.share=function(e,i){EgretH5Sdk.share(t.utils.$APP_ID,t.h5.uid,e,(function(t){var e=t.status;0==e?e=-1:1==e&&(e=0);var n={status:e,result:e};i.call(null,n)}),null)}}(e.share||(e.share={})),function(t){t.isSupport=function(t,e){e.call(null,{result:0,getFriends:0,openBBS:0})},t.getFriends=function(t,e){},t.openBBS=function(t,e){}}(e.social||(e.social={})),function(e){e.isSupport=function(e,i){EgretH5Sdk.isOpenAttention(t.utils.$APP_ID,t.h5.uid,(function(t){var e={attention:t.status};i.call(null,e)}),null)},e.attention=function(e,i){EgretH5Sdk.attention(t.utils.$APP_ID,t.h5.uid),i.call(null,{result:0})},e.sendToDesktop=function(t,e){e.call(null,{result:-1})},e.getInfo=function(e,i){EgretH5Sdk.getCustomInfo(t.utils.$APP_ID,t.h5.uid,(function(t){var e={result:0,contact:t.contact};i.call(null,e)}),null)}}(e.app||(e.app={}))}(t.h5||(t.h5={}))}(nest||(nest={})),function(t){!function(t){!function(t){t.isSupport=function(t,e){var i={result:0,loginType:void 0,loginTypes:void 0,getInfo:0};EgretH5Sdk.getLoginType({},(function(t){i.loginType=t.loginType,i.loginTypes=t.loginTypes,e.call(null,i)}))},t.checkLogin=function(t,e){EgretH5Sdk.checkLogin(t,e)},t.login=function(t,e){EgretH5Sdk.login(t,e)},t.logout=function(t,e){EgretH5Sdk.logout(t,e)},t.getInfo=function(t,e){e.call(null,{result:-2})}}(t.user||(t.user={})),function(t){t.pay=function(t,e){EgretH5Sdk.pay(t,e)}}(t.iap||(t.iap={})),function(t){t.isSupport=function(t,e){EgretH5Sdk.isSupportShare({},(function(t){var i={share:t.result,msg:t.msg};e.call(null,i)}))},t.setDefaultData=function(t,e){t.imgUrl=t.img_url,EgretH5Sdk.setShareDefaultData(t,e)},t.share=function(t,e){t.imgUrl=t.img_url,EgretH5Sdk.share(t,e)}}(t.share||(t.share={})),function(t){t.isSupport=function(t,e){EgretH5Sdk.isSupportAttention({},(function(t){var i={result:0,getFriends:0,openBBS:t.result};e.call(null,i)}))},t.getFriends=function(t,e){e.call(null,{result:-2})},t.openBBS=function(t,e){EgretH5Sdk.openBBS(t,e)}}(t.social||(t.social={})),function(t){t.isSupport=function(t,e){var i,n,r=function(t){n=t.result;var r={attention:i,getInfo:1,exitGame:0,sendToDesktop:n};e.call(null,r)};EgretH5Sdk.isSupportAttention({},(function(t){i=t.result,EgretH5Sdk.isSupportSendToDesktop({},r)}))},t.attention=function(t,e){EgretH5Sdk.attention({},e)},t.sendToDesktop=function(t,e){EgretH5Sdk.sendToDesktop(t,e)},t.exitGame=function(t,e){e.call(null,{result:-2})},t.getInfo=function(t,e){EgretH5Sdk.getCustomInfo({},e)}}(t.app||(t.app={}))}(t.h5_2||(t.h5_2={}))}(nest||(nest={})),nest.core=nest.core||{},nest.core.startup=function(t,e){try{new egret.HashObject,nest.utils.$EGRET_SUPPORT=!0}catch(t){nest.utils.$EGRET_SUPPORT=!1}var i="http://api.egret-labs.org/v2/";if(nest.utils.$APP_ID=t.egretAppId,nest.utils.$DEBUG_LOG=t.debug,nest.utils.$isRuntime)if((nest.utils.$isQQBrowser()||nest.utils.$isTargetPlatform(10080)||nest.utils.$isTargetPlatform(10835)||nest.utils.$isTargetPlatform(20546))&&(i="http://api.gz.1251278653.clb.myqcloud.com/v2/"),nest.utils.$API_DOMAIN=i,nest.core.callCustomMethod=nest.runtime.core.callCustomMethod,nest.utils.$isTargetPlatform(10044)||!nest.utils.$getOption("egret.runtime.nest")){egret_native.setOption("channelTag","liebao"),CMPAY_DEBUG=!1,n=85==nest.utils.$APP_ID||88==nest.utils.$APP_ID?10044:18287,egret_native.setOption("egret.runtime.spid",n),nest.utils.$spid=n,nest.utils.$changeMethod("cm")}else if(nest.utils.$isTargetPlatform(10835)||nest.utils.$isTargetPlatform(20546)){var n;66==nest.utils.$APP_ID||86==nest.utils.$APP_ID?(nest.qqhall.init(),nest.utils.$changeMethod("qqhall")):(nest.qqhall2.init(),nest.utils.$changeMethod("qqhall2"))}else nest.utils.$changeMethod("runtime");else{var r=nest.utils.$getOption("egretServerDomain");r?i=r+"/":nest.utils.$API_DOMAIN=i;var o=nest.utils.$getOption("egretSdkDomain");if(o||(o=nest.utils.$API_DOMAIN),2==t.version){nest.utils.$changeMethod("h5_2");var a=o+"/misc/scripts/egreth5sdk.js",s=document.createElement("script");return s.hasOwnProperty("async")&&(s.async=!1),s.src=a,s.id="egreth5sdk",s.addEventListener("load",(function(){this.removeEventListener("load",arguments.callee,!1),EgretH5Sdk.init({},e)}),!1),s.addEventListener("error",(function(){s.parentNode.removeChild(s),this.removeEventListener("error",arguments.callee,!1),e({result:-2})}),!1),void document.head.appendChild(s)}nest.utils.$changeMethod("h5")}e({result:0})};var DCAgentPaymentConfig=function(){},DCAgentConfig=function(){};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("DCAgent",["exports"],e):e(t.DCAgent={})}(this,(function(t){function e(){}function i(t){return"function"==typeof t}function n(t,e,n){if(i(t))try{return t.apply(e,n)}catch(e){t.toString(),e.stack}}function r(t,e,i){if(!t||t&&t.length>=i)return t;i=void 0===(i=Math.ceil(i-t.length)/e.length)?0:i;for(var n="",r=0;i>r;r+=1)n+=e;return t+n}function o(t,e,i){return function(){var r;for(Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]),r=0;r<e.length;r+=1)if(!1===n(e[r],this,arguments))return;var o=n(t,this,arguments);if(!1===o)return!1;for(r=0;r<i.length;r+=1)n(i[r],this,arguments);return o}}function a(t,e,i){return e=void 0===e?0:e,t>=1e21&&(t=9527e16),H.parseInt(t,void 0===i?10:i)||e}function s(t){return void 0!==H[t]}function l(t,e){return t=h(t),J.setItem(t,e),Et.set(t,e,3650),e}function u(t){return t=h(t),J.getItem(t)||Et.get(t)}function h(t){return Z||ut===t?t:(z.appId,z.appId+"."+t)}function c(t){var e,i;e=Array.prototype.forEach,i=Array.prototype.map,this.each=function(t,i,n){if(null!==t)if(e&&t.forEach===e)t.forEach(i,n);else if(t.length===+t.length)for(var r=0,o=t.length;o>r&&i.call(n,t[r],r,t)!=={};r++);else for(r in t)if(t.hasOwnProperty(r)&&i.call(n,t[r],r,t)==={})break},this.map=function(t,e,n){var r=[];return null==t?r:i&&t.map===i?t.map(e,n):(this.each(t,(function(t,i,o){r[r.length]=e.call(n,t,i,o)})),r)},"object"==typeof t?(this.hasher=t.hasher,this.screen_resolution=t.screen_resolution,this.screen_orientation=t.screen_orientation,this.canvas=t.canvas,this.ie_activex=t.ie_activex):"function"==typeof t&&(this.hasher=t)}function p(t){return t+"?__deuid="+z.uid+"&__deappid="+z.appId}function d(t){t=h(t);try{var e=JSON.parse(J.getItem(t));return Array.isArray(e)?e:[]}catch(e){return J.removeItem(t),[]}}function f(t,e){var i=d(e);Array.isArray(t)?t.forEach((function(t){return i.push(t)})):i.push(t),J.setItem(h(e),JSON.stringify(i))}function g(){J.removeItem(h(st)),J.removeItem(h(lt))}function y(){H.addEventListener&&H.addEventListener("error",(function(t){n((function(){if(Ct.isReportAllowed(t.filename)){Ct.count+=1;var e={};["colno","filename","lineno","message"].forEach((function(i){return e[i]=t[i]||"1"}));var r=t.error||{};if(e.stack=encodeURIComponent(r.stack||r.stacktrace||""),e.type=r.name||"Error",e.timestamp=parseInt(t.timeStamp/1e3),i(z.getErrorScene)&&(r=n(z.getErrorScene,r,[t]))){if(r&&"[object Object]"===V.call(r)){var o,a="";for(o in r)a+="\t"+o+"="+r[o]+"\n";r=a}else r=String(r);e.stack+="\n\nError scene:\n"+encodeURIComponent(r)}Lt.updateStorageByKey(e,lt)}}))}),!1)}function v(){var t=function(){if(!Ht)for(var t in Ht={ver:It},mt.split(",").forEach((function(t){Ht[t]=z.hasOwnProperty(t)?z[t]:""})),Nt)Ht[t]=z[t]||Nt[t],Ht[t]||0===Ht[t]||(Ht[t]="");return Ht}();return t.accountId=z.accountId||z.uid,($t+","+bt).split(",").forEach((function(e){t[e]=z.hasOwnProperty(e)?z[e]:""})),t}function m(t){}function $(t){var e=new egret.URLLoader,i=Date.now();e.addEventListener(egret.Event.COMPLETE,(function(e){var r=Date.now()-i;n("success"===(e=e.target).data?t.success:t.error,e,[e,r,r>=gt]),n(t.complete,e,[e,r])}));var r=new egret.URLRequest(t.url);r.method=egret.URLRequestMethod.POST,r.data=t.data?JSON.stringify(t.data):null,e.load(r)}function b(t,e){if(t.data){t.data.errorInfoList&&t.data.errorInfoList.length>Ct.max&&(Ct.max,t.data.errorInfoList=t.data.errorInfoList.slice(0,Ct.max));var i=function(t){var e,i;for(e in t)i=t[e],t[e]=i;return(2<=arguments.length?[].slice.call(arguments,1):[]).forEach((function(n){var r;for(e in r=[],n)i=n[e],r.push(t[e]=i);return r})),t}({headerInfo:v()},t.data);Vt({url:Xt+"//"+e,data:i,success:function(e,i){n(t.success,e,[e,i])},error:function(e,i,r){zt+=1,n(t.error,e,[e,i,r])},complete:function(e,i){Wt+=1,n(t.complete,e,[e,i])}})}}function _(){if(Gt)return Gt;if(!((Yt+=1)>4)){var t,e={egret:"egret",layabox:"layabox",cocos:"cc.game",impact:"ig",phaser:"Phaser",pixi:"PIXI",create:"createjs",three:"THREE",gameMaker:"asset_get_type",playCanvas:"pc.fw",turbulenz:"TurbulenzEngine",quintus:"Quintus",melon:"me.game",lychee:"lychee",wade:"wade.addSceneObject",crafty:"Crafty",lime:"lime.Scene",enchant:"enchant",isogenic:"IgeEngine",gameclosure:"GC.Application",panda:"game.Scene",kiwi:"Kiwi",jaws:"jaws",sirius2d:"ss2d",collie:"collie",physics:"Physics",stage:"Stage.Anim",babylon:"BABYLON"};for(t in e){if(-1<(i=e[t]).indexOf(".")){var i=i.split("."),n=H[i[0]];if(n&&n[i[1]])return Gt=t}else if(H[i])return Gt=t}}}function x(t,e,i,r){var o=parseInt(Date.now()/1e3)-z.loginTime||1;if(o>=yt||0>=o);else{var a={data:{onlineInfo:{loginTime:z.loginTime,onlineTime:o,extendMap:{from:z.from,engine:_()||"",app:z.app}},eventInfoList:t||[],errorInfoList:e||[]},success:r};i&&(a.data.userInfo=i),t=Lt.getStorageByKey(st),e=Lt.getStorageByKey(lt),(t.length||e.length)&&(Lt.clear(),a.data.eventInfoList=a.data.eventInfoList.concat(t),a.data.errorInfoList=a.data.errorInfoList.concat(e),a.error=function(){Lt.updateStorageByKey(a.data.eventInfoList,st),Lt.updateStorageByKey(a.data.errorInfoList,lt),n(r,0,arguments)}),Wt&&0==Wt%z.network&&a.data.eventInfoList.push({eventId:ft,eventMap:{succ:Wt-zt,fail:zt,total:Wt}}),b(a,p(ct))}}function T(t){W&&U[W]||x(0,0,0,t)}function E(t,e){this.status="constructed",this.run=function(){Jt(this.timer),this.status="running",n(t);var i=this;this.timer=qt((function(){return i.run()}),e)},this.stop=function(){this.status="stopped",Jt(this.timer)}}function S(t){if(z.uid){var e=r(z.uid,pt,dt);t!==e&&(z.uid=e,l(et,parseInt(Date.now()/1e3)),t=z.uid)}if(!t){var i;try{if(X.realBrowser)i=new Dt({canvas:!0,screen_resolution:!0,ie_activex:!0}).get().toString();else if(X.engine.layabox){var n=layabox.getDeviceInfo()||{};i=(i=n.mac||n.idfa)&&i.replace(/[-_:=\s]+/g,"").toUpperCase()}}catch(t){i=null}(i=r(i,pt,dt))||(i=Date.now().toString(36).toUpperCase(),i=function(t){var e,i;return e=Date.now(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i;return i=(e+16*Math.random())%16|0,e=Math.floor(e/16),"x"===t?i.toString(16):(7&i|8).toString(16)})),(t||"")+i.replace(/-/g,"").toUpperCase()}(X.engine.egret?it+i:X.engine.layabox?nt+i:X.engine.cocos?rt+i:ot+i)),t=i}return l(ut,i=t),i}function C(t){var e=(i=u(ut))?0:1,i=S(i);z.uid=i,z.accountId=i,z.interval=1e3*Math.max(vt,parseFloat(t.interval||vt)),z.virus&&X.realBrowser&&(z.parentId=function(t){var e=G.hash,i="!"+t,n="";if(e){var r=/![0-9A-Z]{32,128}/gi;(e=e.match(r))?(t===(e=e[0].slice(1))||u(at)||(n=e),G.href=G.href.replace(r,i)):G.href+=i}else G.href+="#"+i;return l(at,n),n}(i)),z.errorReport&&(Ct.excludes=Array.isArray(t.excludes)?Ct.excludes.concat(t.excludes):[],y()),z.timer=new E(T,z.interval),z.timer.status="running",z.loginTime=parseInt(Date.now()/1e3),z.initTime=z.loginTime,(i=u(et))||(i=z.loginTime,l(et,i)),z.createTime=parseInt(i),e=e?{actTime:i,regTime:i,parentId:z.parentId}:null,x([{eventId:_t,eventMap:{page:encodeURIComponent(X.realBrowser?G.pathname+G.search:"!")}}],0,e),qt((function(){return z.timer.run()}),z.interval),Kt((function(){var t=parseInt(Date.now()/1e3);l(ht,t)})),F.setUserOptions(t),F.inited=!0}function w(t){t=h(t);try{var e=JSON.parse(J.getItem(t));return Array.isArray(e)?e:[]}catch(e){return J.removeItem(t),[]}}function P(t,e){var i=w(e);Array.isArray(t)?t.forEach((function(t){return i.push(t)})):i.push(t),J.setItem(h(e),JSON.stringify(i))}function D(){J.removeItem(h(st)),J.removeItem(h(lt))}function L(t,e){if(!t)return!1;2<arguments.length&&(e=arguments[2]);var i={};if(e&&"[object Object]"===V.call(e))for(var n in e)i[n.replace("%","_")]="number"==typeof e[n]?e[n]:encodeURIComponent(e[n]);Zt.updateStorageByKey({eventId:t,eventMap:i},st)}function I(t,e,i,n){var r=arguments;bt.split(",").forEach((function(t,e){return z[t]=r[e]||""})),z.roleLevel=a(n)||1}function O(t){return function(){var e=F.getLoginStatus();if(0===e)return!1;if(1===e){var i=[t];return[].forEach.call(arguments,(function(t){return i.push(t)})),ne.push(i),!1}}}function R(){ne.forEach((function(t){return ie[t.shift()].apply(0,t)})),ne.length=0}function N(){Jt(Qt);var t=z.timer;t.stop(),Qt=qt((function(){t.run()}),xt)}function A(){var t=!0===F.inited;return t}var M,B,k=0,F={getUserOptions:function(){return M},setUserOptions:function(t){M=JSON.stringify(t)},setLoginStatus:function(t){k=t},getLoginStatus:function(){return k}},j=(0,eval)("this"),H=j||{},U=j.document||{},G=j.location||{},V=Object.prototype.toString,W="hidden"in U?"hidden":"webkitHidden"in U?"webkitHidden":"mozHidden"in U?"mozHidden":"msHidden"in U?"msHidden":null,z={age:0,gender:0,roleLevel:0,netType:3},X={get engine(){return K},get localStorage(){return Q},get realBrowser(){return Z},get cookie(){return tt}};if("function"==typeof U.createElement){var Y=U.createElement("div");if(Y&&"function"==typeof Y.querySelector){Y.innerHTML="<i></i>";var q=Y.querySelector("i");B=!!q&&"I"===q.tagName}}var J,K={egret:s("egret"),layabox:s("layabox"),cocos:s("cc")&&cc.game},Q=!!H.localStorage||K.egret||K.cocos,Z=B,tt=Z&&"cookie"in U,et="dcagent_create_time",it="EGRET",nt="LAYA",rt="COCOS",ot="UE",at="dcagent_parent_id",st="dcagent_client_events",lt="dcagent_client_errors",ut="dcagent_client_id",ht="dc_p_lo",ct="rd.gdatacube.net/dc/hh5/sync",pt="0A",dt=32,ft="DE_EVENT_OSS",gt=3e4,yt=172800,vt=40,mt="appId,appVersion,brand,channel,customDeviceId,idfa,imei,lonLat,mac,netType,operator,osVersion,platform,simCardOp,uid",$t="accountId,accountType,age,gender,gameServer",bt="roleId,roleRace,roleClass,roleLevel",_t="DE_EVENT_PV",xt=5e3;J=X.engine.egret?egret.localStorage:X.engine.cocos?cc.sys.localStorage:X.localStorage?H.localStorage:{getItem:e,setItem:e,removeItem:e};var Tt,Et=Tt=X.cookie?{get:function(t){return(t=U.cookie.match(new RegExp("(^|)\\s*"+t+"=([^\\s]*)")))&&3<=t.length?decodeURIComponent(t[2]):null},set:function(t,e,i,n,r,o){var a;i&&(a=new Date).setTime(a.getTime()+864e5*i),i=i?" expires="+a.toGMTString():"",r=" path="+(r||"/"),n=n?" domain="+n:"",o=o?" secure":"",U.cookie=t+"="+encodeURIComponent(e)+i+r+n+o},remove:function(t,e,i){Tt.set(t,"",-1,e,i)}}:{get:e,set:e,remove:e},St={max:100,count:0,excludes:[],isReportAllowed:function(t){return St.count<St.max?St.excludes.every((function(e){return-1===t.indexOf(e)})):void 0}},Ct=St,wt=H.screen,Pt=H.navigator;c.prototype.get=function(){var t=[];if(t.push(Pt.userAgent),t.push(Pt.language),t.push(wt.colorDepth),this.screen_resolution){var e=this.getScreenResolution();void 0!==e&&t.push(e.join("x"))}return t.push((new Date).getTimezoneOffset()),t.push(this.hasSessionStorage()),t.push(this.hasLocalStorage()),t.push(!!H.indexedDB),U.body?t.push(typeof U.body.addBehavior):t.push("undefined"),t.push(typeof H.openDatabase),t.push(Pt.cpuClass),t.push(Pt.platform),t.push(Pt.doNotTrack),t.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&t.push(this.getCanvasFingerprint()),this.hasher?this.hasher(t.join("###"),31):this.murmurhash3_32_gc(t.join("###"),31)},c.prototype.murmurhash3_32_gc=function(t,e){var i,n,r,o,a;for(i=3&t.length,n=t.length-i,r=e,a=0;n>a;)o=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24,++a,r=27492+(65535&(r=5*(65535&(r=(r^=o=461845907*(65535&(o=(o=3432918353*(65535&o)+((3432918353*(o>>>16)&65535)<<16)&4294967295)<<15|o>>>17))+((461845907*(o>>>16)&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(o=0,i){case 3:t.charCodeAt(a+2);break;case 2:t.charCodeAt(a+1);break;case 1:r^=461845907*(65535&(o=(o=3432918353*(65535&(o^=255&t.charCodeAt(a)))+((3432918353*(o>>>16)&65535)<<16)&4294967295)<<15|o>>>17))+((461845907*(o>>>16)&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,((r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295)^r>>>16)>>>0},c.prototype.hasLocalStorage=function(){try{return!!H.localStorage}catch(t){return!0}},c.prototype.hasSessionStorage=function(){try{return!!H.sessionStorage}catch(t){return!0}},c.prototype.isCanvasSupported=function(){var t=U.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},c.prototype.isIE=function(){return!!("Microsoft Internet Explorer"===Pt.appName||"Netscape"===Pt.appName&&/Trident/.test(Pt.userAgent))},c.prototype.getPluginsString=function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},c.prototype.getRegularPluginsString=function(){return this.map(Pt.plugins,(function(t){var e=this.map(t,(function(t){return[t.type,t.suffixes].join("~")})).join(",");return[t.name,t.description,e].join("::")}),this).join(";")},c.prototype.getIEPluginsString=function(){return H.ActiveXObject?this.map("ShockwaveFlash.ShockwaveFlash;AcroPDF.PDF;PDF.PdfCtrl;QuickTime.QuickTime;rmocx.RealPlayer G2 Control;rmocx.RealPlayer G2 Control.1;RealPlayer.RealPlayer(tm) ActiveX Control (32-bit);RealVideo.RealVideo(tm) ActiveX Control (32-bit);RealPlayer;SWCtl.SWCtl;WMPlayer.OCX;AgControl.AgControl;Skype.Detection".split(";"),(function(t){try{return new H.ActiveXObject(t),t}catch(t){return null}})).join(";"):""},c.prototype.getScreenResolution=function(){return this.screen_orientation?wt.height>wt.width?[wt.height,wt.width]:[wt.width,wt.height]:[wt.height,wt.width]},c.prototype.getCanvasFingerprint=function(){var t=U.createElement("canvas"),e=t.getContext("2d");return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText("http://www.dataeye.com/",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText("http://www.dataeye.com/",4,17),t.toDataURL()};var Dt=c,Lt={get getStorageByKey(){return d},get updateStorageByKey(){return f},get clear(){return g}},It=23;t.version=It;var Ot,Rt,Nt={get resolution(){return Mt},get brand(){return Ot},get osVersion(){return Rt},get platform(){return Bt}},At=H.screen||{},Mt=At.width&&At.width+"*"+At.height,Bt=0;if(!H.navigator||!H.navigator.userAgent){var kt=["ios","android"];if(K.layabox){var Ft=layabox.getDeviceInfo()||{};Mt=Ft.resolution||"0*0";Ot=Ft.phonemodel,Bt=kt.indexOf(Ft.os.toLowerCase()),Rt=(Ft.os+" "+Ft.osversion).toLowerCase()}else if(K.cocos){var jt=cc.view.getViewPortRect()||{};Mt=jt.width+"*"+jt.height,Bt=kt.indexOf(cc.sys.os.toLowerCase())}-1===[0,1,2,3].indexOf(Bt)&&(Bt=0)}Mt||(Mt="0*0");var Ht,Ut=H.XDomainRequest?function(){return new H.XDomainRequest}:function(){return new H.XMLHttpRequest};try{Ut().timeout=1,!0}catch(t){!1}var Gt,Vt=H.XMLHttpRequest?m:X.engine.cocos?(Ut=function(){return cc.loader.getXMLHttpRequest()},m):X.engine.egret?$:e,Wt=0,zt=0,Xt="https:"===G.protocol?"https:":"http:",Yt=0,qt=H.setTimeout,Jt=H.clearTimeout;K.egret&&(qt=function(t,e){egret.setTimeout(t,H,e)},Jt=function(t){egret.clearTimeout(t)});var Kt=function(t){if(H.addEventListener){var e;t:{e=["pagehide","beforeunload","unload"];for(var i=0;i<e.length;i+=1)if("on"+e[i]in H){e=e[i];break t}e=void 0}e&&H.addEventListener(e,t)}};t.init=function(t){!function(t){try{return t.setItem(".","."),t.removeItem("."),!0}catch(t){return!1}}(J)?X.localStorage:F.inited||(t=t||{}).appId&&(t.appId=t.appId.toUpperCase(),z.errorReport=!!t.errorReport,z.virus=!!t.virus,z.network="number"==typeof t.network?t.network:0,z.app=t.appName||"",z.from=t.from||function(t){return t?(t=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/))&&t[3]:""}(U.referrer),z.getErrorScene=t.getErrorScene,mt.split(",").forEach((function(e){t.hasOwnProperty(e)&&(z[e]=t[e])})),C(t),Vt({url:Xt+"//rd.gdatacube.net/echo?type=h520&appId="+z.appId+"&uid="+z.uid+"&mac="+(z.mac||"")+"&imei="+(z.imei||"")+"&idfa="+(z.idfa||""),method:"GET"}))};var Qt,Zt={get getStorageByKey(){return w},get updateStorageByKey(){return P},get clear(){return D}},te={get initBasedAPI(){return ee},get loginBasedAPI(){return ie},get cacheBeforeLogin(){return O},get clearLoginInvokeList(){return R},get asap(){return N},get checkInit(){return A}},ee={login:function(t){t&&(z.accountId===t?F.setLoginStatus(2):1===F.getLoginStatus()||(z.timer.stop(),F.setLoginStatus(1),T((function(){F.setLoginStatus(2),($t+","+bt).split(",").forEach((function(t){return delete z[t]})),z.age=0,z.gender=0,z.roleLevel=0,z.loginTime=parseInt(Date.now()/1e3),z.accountId=t,te.clearLoginInvokeList(),z.timer.run()}))))},getUid:function(){return z.uid||""},onEvent:L},ie={createRole:function(t,e,i,n){I(t,e,i,n),L("DE_EVENT_CREATE_ROLE",{roleId:String(t),roleRace:String(e),roleClass:String(i)})},onCoinGet:function(t,e,i,n){L("DE_EVENT_COIN_ACTION",{actionType:"coinGet",coinType:i,balanceNum:a(e),coinNum:a(t),reason:n})},onCoinUse:function(t,e,i,n){L("DE_EVENT_COIN_ACTION",{actionType:"coinUse",coinType:i,balanceNum:a(e),coinNum:a(t),reason:n})},onItemBuy:function(t,e,i,n,r){L("DE_EVENT_ITEM_ACTION",{actionType:"itemBuy",itemId:t,itemNum:a(e),coinType:i,coinNum:a(n),missonID:r})},onItemProduce:function(t,e,i,n){L("DE_EVENT_ITEM_ACTION",{actionType:"itemGet",itemId:t,itemNum:a(e),missonID:i,reason:n})},onItemUse:function(t,e,i,n){L("DE_EVENT_ITEM_ACTION",{actionType:"itemUse",itemId:t,itemNum:parseInt(e),reason:n,missonID:i})},onLevelUp:function(t,e,i){e=a(e),z.roleLevel=e,L("DE_EVENT_LEVELUP",{startLevel:a(t),endLevel:e,duration:a(i)})},onMissionFinished:function(t,e){L("DE_EVENT_GUANKA_ACTION",{actionType:"guankaFinish",guankaId:t,duration:a(e)})},onMissionUnfinished:function(t,e){L("DE_EVENT_GUANKA_ACTION",{actionType:"guankaUnfinish",guankaId:t,duration:a(e)})},onPayment:function(t){t&&t.hasOwnProperty("amount")&&b({data:{paymentInfo:{currencyAmount:parseFloat(t.amount,10)||0,currencyType:t.currencyType||"CNY",payType:String(t.payType||""),iapid:String(t.iapid||""),payTime:a(Date.now()/1e3),extendMap:{orderId:String(t.orderId||"")}}}},p(ct))},onTaskFinished:function(t,e){L("DE_EVENT_TASK_ACTION",{actionType:"taskFinish",taskId:t,elapsed:a(e)})},onTaskUnfinished:function(t,e){L("DE_EVENT_TASK_ACTION",{actionType:"taskUnfinish",taskId:t,elapsed:a(e)})},setAccountType:function(t){z.accountType=String(void 0===t?"":t)},setAge:function(t){t=a(t),z.age=t>0&&128>t?t:0},setGameServer:function(t){z.gameServer=String(void 0===t?"":t)},setGender:function(t){z.gender=2===t?2:1},setRoleInfo:I},ne=[];t.player={get isNew(){return z.createTime===z.loginTime},get initTime(){return z.initTime},get createTime(){return z.createTime},get loginTime(){return z.loginTime},get lastLogoutTime(){return a(u(ht))},get getReportCount(){return Wt},get getReportFailedCount(){return zt}},t.isReady=function(){return!0===F.inited};var re,oe=F.getUserOptions,ae=[A],se=[N];for(re in ee)t[re]=o(ee[re],ae,"onEvent"===re&&se);for(re in ie)t[re]=o(ie[re],[O(re)],"onPayment"!==re&&se);var le=H.DCAgentObject;if(le){var ue=H[le];if(i(ue)){var he=ue.cache;he.length&&(he.forEach((function(e){n(t[e[0]],t,[].slice.call(e,1,void 0))})),he.length=0)}}t.__options=oe}));var bigInt=function(){"use strict";function t(t,e){this.value=t,this.sign=e,this.isSmall=!1}function e(t){this.value=t,this.sign=0>t,this.isSmall=!0}function i(t){return t>-k&&k>t}function n(t){return 1e7>t?[t]:1e14>t?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function r(t){o(t);var e=t.length;if(4>e&&E(t,F)<0)switch(e){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*M;default:return t[0]+(t[1]+t[2]*M)*M}return t}function o(t){for(var e=t.length;0===t[--e];);t.length=e+1}function a(t){for(var e=new Array(t),i=-1;++i<t;)e[i]=0;return e}function s(t){return t>0?Math.floor(t):Math.ceil(t)}function l(t,e){var i,n,r=t.length,o=e.length,a=new Array(r),s=0,l=M;for(n=0;o>n;n++)s=(i=t[n]+e[n]+s)>=l?1:0,a[n]=i-s*l;for(;r>n;)s=(i=t[n]+s)===l?1:0,a[n++]=i-s*l;return s>0&&a.push(s),a}function u(t,e){return t.length>=e.length?l(t,e):l(e,t)}function h(t,e){var i,n,r=t.length,o=new Array(r),a=M;for(n=0;r>n;n++)i=t[n]-a+e,e=Math.floor(i/a),o[n]=i-e*a,e+=1;for(;e>0;)o[n++]=e%a,e=Math.floor(e/a);return o}function c(t,e){var i,n,r=t.length,a=e.length,s=new Array(r),l=0,u=M;for(i=0;a>i;i++)0>(n=t[i]-l-e[i])?(n+=u,l=1):l=0,s[i]=n;for(i=a;r>i;i++){if(!(0>(n=t[i]-l))){s[i++]=n;break}n+=u,s[i]=n}for(;r>i;i++)s[i]=t[i];return o(s),s}function p(i,n,o){var a;return E(i,n)>=0?a=c(i,n):(a=c(n,i),o=!o),"number"==typeof(a=r(a))?(o&&(a=-a),new e(a)):new t(a,o)}function d(i,n,o){var a,s,l=i.length,u=new Array(l),h=-n,c=M;for(a=0;l>a;a++)s=i[a]+h,h=Math.floor(s/c),s%=c,u[a]=0>s?s+c:s;return"number"==typeof(u=r(u))?(o&&(u=-u),new e(u)):new t(u,o)}function f(t,e){var i,n,r,s,l=t.length,u=e.length,h=a(l+u),c=M;for(r=0;l>r;++r){s=t[r];for(var p=0;u>p;++p)i=s*e[p]+h[r+p],n=Math.floor(i/c),h[r+p]=i-n*c,h[r+p+1]+=n}return o(h),h}function g(t,e){var i,n,r=t.length,o=new Array(r),a=M,s=0;for(n=0;r>n;n++)i=t[n]*e+s,s=Math.floor(i/a),o[n]=i-s*a;for(;s>0;)o[n++]=s%a,s=Math.floor(s/a);return o}function y(t,e){for(var i=[];e-- >0;)i.push(0);return i.concat(t)}function v(t,e){var i=Math.max(t.length,e.length);if(400>=i)return f(t,e);i=Math.ceil(i/2);var n=t.slice(i),r=t.slice(0,i),o=e.slice(i),a=e.slice(0,i),s=v(r,a),l=v(n,o),h=v(u(r,n),u(a,o));return u(u(s,y(c(c(h,s),l),i)),y(l,2*i))}function m(e,i,r){return new t(M>e?g(i,e):f(i,n(e)),r)}function $(t){var e,i,n,r,s=t.length,l=a(s+s),u=M;for(n=0;s>n;n++){r=t[n];for(var h=0;s>h;h++)e=r*t[h]+l[n+h],i=Math.floor(e/u),l[n+h]=e-i*u,l[n+h+1]+=i}return o(l),l}function b(t,e){var i,n,o,s,l,u,h,c=t.length,p=e.length,d=M,f=a(e.length),y=e[p-1],v=Math.ceil(d/(2*y)),m=g(t,v),$=g(e,v);for(m.length<=c&&m.push(0),$.push(0),y=$[p-1],n=c-p;n>=0;n--){for(i=d-1,m[n+p]!==y&&(i=Math.floor((m[n+p]*d+m[n+p-1])/y)),o=0,s=0,u=$.length,l=0;u>l;l++)o+=i*$[l],h=Math.floor(o/d),s+=m[n+l]-(o-h*d),o=h,0>s?(m[n+l]=s+d,s=-1):(m[n+l]=s,s=0);for(;0!==s;){for(i-=1,o=0,l=0;u>l;l++)0>(o+=m[n+l]-d+$[l])?(m[n+l]=o+d,o=0):(m[n+l]=o,o=1);s+=o}f[n]=i}return m=x(m,v)[0],[r(f),r(m)]}function _(t,e){for(var i,n,o,a,s,l=t.length,u=e.length,h=[],p=[],d=M;l;)if(p.unshift(t[--l]),E(p,e)<0)h.push(0);else{o=p[(n=p.length)-1]*d+p[n-2],a=e[u-1]*d+e[u-2],n>u&&(o=(o+1)*d),i=Math.ceil(o/a);do{if(E(s=g(e,i),p)<=0)break;i--}while(i);h.push(i),p=c(p,s)}return h.reverse(),[r(h),r(p)]}function x(t,e){var i,n,r,o,l=t.length,u=a(l),h=M;for(r=0,i=l-1;i>=0;--i)r=(o=r*h+t[i])-(n=s(o/e))*e,u[i]=0|n;return[u,0|r]}function T(i,o){var a,l,u=A(o),h=i.value,c=u.value;if(0===c)throw new Error("Cannot divide by zero");if(i.isSmall)return u.isSmall?[new e(s(h/c)),new e(h%c)]:[X[0],i];if(u.isSmall){if(1===c)return[i,X[0]];if(-1==c)return[i.negate(),X[0]];var p=Math.abs(c);if(M>p){l=r((a=x(h,p))[0]);var d=a[1];return i.sign&&(d=-d),"number"==typeof l?(i.sign!==u.sign&&(l=-l),[new e(l),new e(d)]):[new t(l,i.sign!==u.sign),new e(d)]}c=n(p)}var f=E(h,c);if(-1===f)return[X[0],i];if(0===f)return[X[i.sign===u.sign?1:-1],X[0]];l=(a=h.length+c.length<=200?b(h,c):_(h,c))[0];var g=i.sign!==u.sign,y=a[1],v=i.sign;return"number"==typeof l?(g&&(l=-l),l=new e(l)):l=new t(l,g),"number"==typeof y?(v&&(y=-y),y=new e(y)):y=new t(y,v),[l,y]}function E(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var i=t.length-1;i>=0;i--)if(t[i]!==e[i])return t[i]>e[i]?1:-1;return 0}function S(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(25)||void 0))}function C(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=M||e instanceof t&&e.value.length<=1}function w(t,e,i){e=A(e);for(var n=t.isNegative(),r=e.isNegative(),o=n?t.not():t,a=r?e.not():e,s=[],l=[],u=!1,h=!1;!u||!h;)o.isZero()?(u=!0,s.push(n?1:0)):s.push(n?o.isEven()?1:0:o.isEven()?0:1),a.isZero()?(h=!0,l.push(r?1:0)):l.push(r?a.isEven()?1:0:a.isEven()?0:1),o=o.over(2),a=a.over(2);for(var c=[],p=0;p<s.length;p++)c.push(i(s[p],l[p]));for(var d=bigInt(c.pop()).negate().times(bigInt(2).pow(c.length));c.length;)d=d.add(bigInt(c.pop()).times(bigInt(2).pow(c.length)));return d}function P(t){var e=t.value,i="number"==typeof e?e|V:e[0]+e[1]*M|W;return i&-i}function D(t,e){return t=A(t),e=A(e),t.greater(e)?t:e}function L(t,e){return t=A(t),e=A(e),t.lesser(e)?t:e}function I(t,e){if(t=A(t).abs(),e=A(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var i,n,r=X[1];t.isEven()&&e.isEven();)i=Math.min(P(t),P(e)),t=t.divide(i),e=e.divide(i),r=r.multiply(i);for(;t.isEven();)t=t.divide(P(t));do{for(;e.isEven();)e=e.divide(P(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return r.isUnit()?t:t.multiply(r)}function O(t){var e=t.value;return"number"==typeof e&&(e=[e]),1===e.length&&e[0]<=36?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e[0]):"<"+e+">"}function R(t,e){if((e=bigInt(e)).isZero()){if(t.isZero())return"0";throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1))return t.isZero()?"0":t.isNegative()?new Array(1-t).join("10"):"1"+new Array(+t).join("01");var i="";if(t.isNegative()&&e.isPositive()&&(i="-",t=t.abs()),e.equals(1))return t.isZero()?"0":i+new Array(+t+1).join(1);for(var n,r=[],o=t;o.isNegative()||o.compareAbs(e)>=0;){n=o.divmod(e),o=n.quotient;var a=n.remainder;a.isNegative()&&(a=e.minus(a).abs(),o=o.next()),r.push(O(a))}return r.push(O(o)),i+r.reverse().join("")}function N(n){if(i(+n)){var r=+n;if(r===s(r))return new e(r);throw"Invalid integer: "+n}var a="-"===n[0];a&&(n=n.slice(1));var l=n.split(/e/i);if(l.length>2)throw new Error("Invalid integer: "+h.join("e"));if(2===l.length){var u=l[1];if("+"===u[0]&&(u=u.slice(1)),(u=+u)!==s(u)||!i(u))throw new Error("Invalid integer: "+u+" is not a valid exponent.");var h=l[0],c=h.indexOf(".");if(c>=0&&(u-=h.length-c,h=h.slice(0,c)+h.slice(c+1)),0>u)throw new Error("Cannot include negative exponent part for integers");n=h+=new Array(u+1).join("0")}if(!/^([0-9][0-9]*)$/.test(n))throw new Error("Invalid integer: "+n);for(var p=[],d=n.length,f=B,g=d-f;d>0;)p.push(+n.slice(g,d)),0>(g-=f)&&(g=0),d-=f;return o(p),new t(p,a)}function A(t){return"number"==typeof t?function(t){return i(t)?new e(t):N(t.toString())}(t):"string"==typeof t?N(t):t}var M=1e7,B=7,k=9007199254740992,F=n(k),j=Math.log(k);t.prototype.add=function(e){var i=A(e);if(this.sign!==i.sign)return this.subtract(i.negate());var n=this.value,r=i.value;return i.isSmall?new t(h(n,Math.abs(r)),this.sign):new t(u(n,r),this.sign)},t.prototype.plus=t.prototype.add,e.prototype.add=function(r){var o=A(r),a=this.value;if(0>a!==o.sign)return this.subtract(o.negate());var s=o.value;if(o.isSmall){if(i(a+s))return new e(a+s);s=n(Math.abs(s))}return new t(h(s,Math.abs(a)),0>a)},e.prototype.plus=e.prototype.add,t.prototype.subtract=function(t){var e=A(t);if(this.sign!==e.sign)return this.add(e.negate());var i=this.value,n=e.value;return e.isSmall?d(i,Math.abs(n),this.sign):p(i,n,this.sign)},t.prototype.minus=t.prototype.subtract,e.prototype.subtract=function(t){var i=A(t),n=this.value;if(0>n!==i.sign)return this.add(i.negate());var r=i.value;return i.isSmall?new e(n-r):d(r,Math.abs(n),n>=0)},e.prototype.minus=e.prototype.subtract,t.prototype.negate=function(){return new t(this.value,!this.sign)},e.prototype.negate=function(){var t=this.sign,i=new e(-this.value);return i.sign=!t,i},t.prototype.abs=function(){return new t(this.value,!1)},e.prototype.abs=function(){return new e(Math.abs(this.value))},t.prototype.multiply=function(e){var i,r=A(e),o=this.value,a=r.value,s=this.sign!==r.sign;if(r.isSmall){if(0===a)return X[0];if(1===a)return this;if(-1===a)return this.negate();if(i=Math.abs(a),M>i)return new t(g(o,i),s);a=n(i)}return o.length+a.length>4e3?new t(v(o,a),s):new t(f(o,a),s)},t.prototype.times=t.prototype.multiply,e.prototype._multiplyBySmall=function(t){return i(t.value*this.value)?new e(t.value*this.value):m(Math.abs(t.value),n(Math.abs(this.value)),this.sign!==t.sign)},t.prototype._multiplyBySmall=function(t){return 0===t.value?X[0]:1===t.value?this:-1===t.value?this.negate():m(Math.abs(t.value),this.value,this.sign!==t.sign)},e.prototype.multiply=function(t){return A(t)._multiplyBySmall(this)},e.prototype.times=e.prototype.multiply,t.prototype.square=function(){return new t($(this.value),!1)},e.prototype.square=function(){var r=this.value*this.value;return i(r)?new e(r):new t($(n(Math.abs(this.value))),!1)},t.prototype.divmod=function(t){var e=T(this,t);return{quotient:e[0],remainder:e[1]}},e.prototype.divmod=t.prototype.divmod,t.prototype.divide=function(t){return T(this,t)[0]},e.prototype.over=e.prototype.divide=t.prototype.over=t.prototype.divide,t.prototype.mod=function(t){return T(this,t)[1]},e.prototype.remainder=e.prototype.mod=t.prototype.remainder=t.prototype.mod,t.prototype.pow=function(t){var n,r,o,a=A(t),l=this.value,u=a.value;if(0===u)return X[1];if(0===l)return X[0];if(1===l)return X[1];if(-1===l)return a.isEven()?X[1]:X[-1];if(a.sign)return X[0];if(!a.isSmall)throw new Error("The exponent "+a.toString()+" is too large.");if(this.isSmall&&i(n=Math.pow(l,u)))return new e(s(n));for(r=this,o=X[1];!0&u&&(o=o.times(r),--u),0!==u;)u/=2,r=r.square();return o},e.prototype.pow=t.prototype.pow,t.prototype.modPow=function(t,e){if(t=A(t),(e=A(e)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var i=X[1],n=this.mod(e);t.isPositive();){if(n.isZero())return X[0];t.isOdd()&&(i=i.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return i},e.prototype.modPow=t.prototype.modPow,t.prototype.compareAbs=function(t){var e=A(t),i=this.value,n=e.value;return e.isSmall?1:E(i,n)},e.prototype.compareAbs=function(t){var e=A(t),i=Math.abs(this.value),n=e.value;return e.isSmall?i===(n=Math.abs(n))?0:i>n?1:-1:-1},t.prototype.compare=function(t){if(1/0===t)return-1;if(t===-1/0)return 1;var e=A(t),i=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:E(i,n)*(this.sign?-1:1)},t.prototype.compareTo=t.prototype.compare,e.prototype.compare=function(t){if(1/0===t)return-1;if(t===-1/0)return 1;var e=A(t),i=this.value,n=e.value;return e.isSmall?i==n?0:i>n?1:-1:0>i!==e.sign?0>i?-1:1:0>i?1:-1},e.prototype.compareTo=e.prototype.compare,t.prototype.equals=function(t){return 0===this.compare(t)},e.prototype.eq=e.prototype.equals=t.prototype.eq=t.prototype.equals,t.prototype.notEquals=function(t){return 0!==this.compare(t)},e.prototype.neq=e.prototype.notEquals=t.prototype.neq=t.prototype.notEquals,t.prototype.greater=function(t){return this.compare(t)>0},e.prototype.gt=e.prototype.greater=t.prototype.gt=t.prototype.greater,t.prototype.lesser=function(t){return this.compare(t)<0},e.prototype.lt=e.prototype.lesser=t.prototype.lt=t.prototype.lesser,t.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},e.prototype.geq=e.prototype.greaterOrEquals=t.prototype.geq=t.prototype.greaterOrEquals,t.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},e.prototype.leq=e.prototype.lesserOrEquals=t.prototype.leq=t.prototype.lesserOrEquals,t.prototype.isEven=function(){return 0==(1&this.value[0])},e.prototype.isEven=function(){return 0==(1&this.value)},t.prototype.isOdd=function(){return 1==(1&this.value[0])},e.prototype.isOdd=function(){return 1==(1&this.value)},t.prototype.isPositive=function(){return!this.sign},e.prototype.isPositive=function(){return this.value>0},t.prototype.isNegative=function(){return this.sign},e.prototype.isNegative=function(){return this.value<0},t.prototype.isUnit=function(){return!1},e.prototype.isUnit=function(){return 1===Math.abs(this.value)},t.prototype.isZero=function(){return!1},e.prototype.isZero=function(){return 0===this.value},t.prototype.isDivisibleBy=function(t){var e=A(t),i=e.value;return 0!==i&&(1===i||(2===i?this.isEven():this.mod(e).equals(X[0])))},e.prototype.isDivisibleBy=t.prototype.isDivisibleBy,t.prototype.isPrime=function(){var t=S(this);if(void 0!==t)return t;for(var e,i,n,r,o=this.abs(),a=o.prev(),s=[2,3,5,7,11,13,17,19],l=a;l.isEven();)l=l.divide(2);for(n=0;n<s.length;n++)if(!(r=bigInt(s[n]).modPow(l,o)).equals(X[1])&&!r.equals(a)){for(i=!0,e=l;i&&e.lesser(a);e=e.multiply(2))(r=r.square().mod(o)).equals(a)&&(i=!1);if(i)return!1}return!0},e.prototype.isPrime=t.prototype.isPrime,t.prototype.isProbablePrime=function(t){var e=S(this);if(void 0!==e)return e;for(var i=this.abs(),n=void 0===t?5:t,r=0;n>r;r++){if(!bigInt.randBetween(2,i.minus(2)).modPow(i.prev(),i).isUnit())return!1}return!0},e.prototype.isProbablePrime=t.prototype.isProbablePrime,t.prototype.next=function(){var e=this.value;return this.sign?d(e,1,this.sign):new t(h(e,1),this.sign)},e.prototype.next=function(){var i=this.value;return k>i+1?new e(i+1):new t(F,!1)},t.prototype.prev=function(){var e=this.value;return this.sign?new t(h(e,1),!0):d(e,1,this.sign)},e.prototype.prev=function(){var i=this.value;return i-1>-k?new e(i-1):new t(F,!0)};for(var H=[1];H[H.length-1]<=M;)H.push(2*H[H.length-1]);var U=H.length,G=H[U-1];t.prototype.shiftLeft=function(t){if(!C(t))return t.isNegative()?this.shiftRight(t.abs()):this.times(X[2].pow(t));if(0>(t=+t))return this.shiftRight(-t);for(var e=this;t>=U;)e=e.multiply(G),t-=U-1;return e.multiply(H[t])},e.prototype.shiftLeft=t.prototype.shiftLeft,t.prototype.shiftRight=function(t){var e;if(!C(t))return t.isNegative()?this.shiftLeft(t.abs()):(e=this.divmod(X[2].pow(t))).remainder.isNegative()?e.quotient.prev():e.quotient;if(0>(t=+t))return this.shiftLeft(-t);for(var i=this;t>=U;){if(i.isZero())return i;i=(e=T(i,G))[1].isNegative()?e[0].prev():e[0],t-=U-1}return(e=T(i,H[t]))[1].isNegative()?e[0].prev():e[0]},e.prototype.shiftRight=t.prototype.shiftRight,t.prototype.not=function(){return this.negate().prev()},e.prototype.not=t.prototype.not,t.prototype.and=function(t){return w(this,t,(function(t,e){return t&e}))},e.prototype.and=t.prototype.and,t.prototype.or=function(t){return w(this,t,(function(t,e){return t|e}))},e.prototype.or=t.prototype.or,t.prototype.xor=function(t){return w(this,t,(function(t,e){return t^e}))},e.prototype.xor=t.prototype.xor;var V=1<<30,W=(M&-M)*(M&-M)|V,z=function(t,i){var n=X[0],r=X[1],o=t.length;if(i>=2&&36>=i&&o<=j/Math.log(i))return new e(parseInt(t,i));i=A(i);var a,s=[],l="-"===t[0];for(a=l?1:0;a<t.length;a++){var u=t[a].toLowerCase(),h=u.charCodeAt(0);if(h>=48&&57>=h)s.push(A(u));else if(h>=97&&122>=h)s.push(A(u.charCodeAt(0)-87));else{if("<"!==u)throw new Error(u+" is not a valid character");var c=a;do{a++}while(">"!==t[a]);s.push(A(t.slice(c+1,a)))}}for(s.reverse(),a=0;a<s.length;a++)n=n.add(s[a].times(r)),r=r.times(i);return l?n.negate():n};t.prototype.toString=function(t){if(void 0===t&&(t=10),10!==t)return R(this,t);for(var e,i=this.value,n=i.length,r=String(i[--n]);--n>=0;)e=String(i[n]),r+="0000000".slice(e.length)+e;return(this.sign?"-":"")+r},e.prototype.toString=function(t){return void 0===t&&(t=10),10!=t?R(this,t):String(this.value)},t.prototype.valueOf=function(){return+this.toString()},t.prototype.toJSNumber=t.prototype.valueOf,e.prototype.valueOf=function(){return this.value},e.prototype.toJSNumber=e.prototype.valueOf;for(var X=function(t,e){return void 0===t?X[0]:void 0!==e?10==+e?A(t):z(t,e):A(t)},Y=0;1e3>Y;Y++)X[Y]=new e(Y),Y>0&&(X[-Y]=new e(-Y));return X.one=X[1],X.zero=X[0],X.minusOne=X[-1],X.max=D,X.min=L,X.gcd=I,X.lcm=function(t,e){return t=A(t).abs(),e=A(e).abs(),t.divide(I(t,e)).multiply(e)},X.isInstance=function(i){return i instanceof t||i instanceof e},X.randBetween=function(i,n){var o=L(i=A(i),n=A(n)),a=D(i,n).subtract(o);if(a.isSmall)return o.add(Math.round(Math.random()*a));for(var l=[],u=!0,h=a.value.length-1;h>=0;h--){var c=u?a.value[h]:M,p=s(Math.random()*c);l.unshift(p),c>p&&(u=!1)}return l=r(l),o.add("number"==typeof l?new e(l):new t(l,!1))},X.BigInteger=t,X.SmallInteger=e,X}();"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports=bigInt),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){var i=[],n=i.slice,r=i.concat,o=i.push,a=i.indexOf,s={},l=s.toString,u=s.hasOwnProperty,h={},c=t.document,p="2.1.4",d=function(t,e){return new d.fn.init(t,e)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,y=/-([\da-z])/gi,v=function(t,e){return e.toUpperCase()};function m(t){var e="length"in t&&t.length,i=d.type(t);return"function"!==i&&!d.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}d.fn=d.prototype={jquery:p,constructor:d,selector:"",length:0,toArray:function(){return n.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:n.call(this)},pushStack:function(t){var e=d.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return d.each(this,t,e)},map:function(t){return this.pushStack(d.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:i.sort,splice:i.splice},d.extend=d.fn.extend=function(){var t,e,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||d.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)i=a[e],a!==(n=t[e])&&(u&&n&&(d.isPlainObject(n)||(r=d.isArray(n)))?(r?(r=!1,o=i&&d.isArray(i)?i:[]):o=i&&d.isPlainObject(i)?i:{},a[e]=d.extend(u,o,n)):void 0!==n&&(a[e]=n));return a},d.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===d.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!d.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"===d.type(t)&&!t.nodeType&&!d.isWindow(t)&&!(t.constructor&&!u.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?s[l.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=d.trim(t))&&(1===t.indexOf("use strict")?((e=c.createElement("script")).text=t,c.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(g,"ms-").replace(y,v)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n=0,r=t.length,o=m(t);if(i){if(o)for(;r>n&&!1!==e.apply(t[n],i);n++);else for(n in t)if(!1===e.apply(t[n],i))break}else if(o)for(;r>n&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(f,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(m(Object(t))?d.merge(i,"string"==typeof t?[t]:t):o.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:a.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;o>r;r++)!e(t[r],r)!==a&&n.push(t[r]);return n},map:function(t,e,i){var n,o=0,a=t.length,s=[];if(m(t))for(;a>o;o++)null!=(n=e(t[o],o,i))&&s.push(n);else for(o in t)null!=(n=e(t[o],o,i))&&s.push(n);return r.apply([],s)},guid:1,proxy:function(t,e){var i,r,o;return"string"==typeof e&&(i=t[e],e=t,t=i),d.isFunction(t)?(r=n.call(arguments,2),o=function(){return t.apply(e||this,r.concat(n.call(arguments)))},o.guid=t.guid=t.guid||d.guid++,o):void 0},now:Date.now,support:h}),d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){s["[object "+e+"]"]=e.toLowerCase()}));var $=function(t){var e,i,n,r,o,a,s,l,u,h,c,p,d,f,g,y,v,m,$,b="sizzle"+1*new Date,_=t.document,x=0,T=0,E=at(),S=at(),C=at(),w=function(t,e){return t===e&&(c=!0),0},P=1<<31,D={}.hasOwnProperty,L=[],I=L.pop,O=L.push,R=L.push,N=L.slice,A=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=k.replace("w","w#"),j="\\["+B+"*("+k+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",H=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",U=new RegExp(B+"+","g"),G=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),V=new RegExp("^"+B+"*,"+B+"*"),W=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),z=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),X=new RegExp(H),Y=new RegExp("^"+F+"$"),q={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k.replace("w","w*")+")"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,it=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),nt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},rt=function(){p()};try{R.apply(L=N.call(_.childNodes),_.childNodes),L[_.childNodes.length].nodeType}catch(t){R={apply:L.length?function(t,e){O.apply(t,N.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function ot(t,e,n,r){var o,s,u,h,c,f,v,m,x,T;if((e?e.ownerDocument||e:_)!==d&&p(e),n=n||[],h=(e=e||d).nodeType,"string"!=typeof t||!t||1!==h&&9!==h&&11!==h)return n;if(!r&&g){if(11!==h&&(o=Z.exec(t)))if(u=o[1]){if(9===h){if(!(s=e.getElementById(u))||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(u))&&$(e,s)&&s.id===u)return n.push(s),n}else{if(o[2])return R.apply(n,e.getElementsByTagName(t)),n;if((u=o[3])&&i.getElementsByClassName)return R.apply(n,e.getElementsByClassName(u)),n}if(i.qsa&&(!y||!y.test(t))){if(m=v=b,x=e,T=1!==h&&t,1===h&&"object"!==e.nodeName.toLowerCase()){for(f=a(t),(v=e.getAttribute("id"))?m=v.replace(et,"\\$&"):e.setAttribute("id",m),m="[id='"+m+"'] ",c=f.length;c--;)f[c]=m+yt(f[c]);x=tt.test(t)&&ft(e.parentNode)||e,T=f.join(",")}if(T)try{return R.apply(n,x.querySelectorAll(T)),n}catch(t){}finally{v||e.removeAttribute("id")}}}return l(t.replace(G,"$1"),e,n,r)}function at(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function st(t){return t[b]=!0,t}function lt(t){var e=d.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),r=t.length;r--;)n.attrHandle[i[r]]=e}function ht(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||P)-(~t.sourceIndex||P);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ct(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function dt(t){return st((function(e){return e=+e,st((function(i,n){for(var r,o=t([],i.length,e),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))}))}))}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=ot.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:_;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,f=a.documentElement,(r=a.defaultView)&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",rt,!1):r.attachEvent&&r.attachEvent("onunload",rt)),g=!o(a),i.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=lt((function(t){return t.appendChild(a.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(a.getElementsByClassName),i.getById=lt((function(t){return f.appendChild(t).id=b,!a.getElementsByName||!a.getElementsByName(b).length})),i.getById?(n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(t){var e=t.replace(it,nt);return function(t){return t.getAttribute("id")===e}}):(delete n.find.ID,n.filter.ID=function(t){var e=t.replace(it,nt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(t,e){return g?e.getElementsByClassName(t):void 0},v=[],y=[],(i.qsa=Q.test(a.querySelectorAll))&&(lt((function(t){f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||y.push("\\["+B+"*(?:value|"+M+")"),t.querySelectorAll("[id~="+b+"-]").length||y.push("~="),t.querySelectorAll(":checked").length||y.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")})),lt((function(t){var e=a.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&y.push("name"+B+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")}))),(i.matchesSelector=Q.test(m=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&lt((function(t){i.disconnectedMatch=m.call(t,"div"),m.call(t,"[s!='']:x"),v.push("!=",H)})),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),e=Q.test(f.compareDocumentPosition),$=e||Q.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},w=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===a||t.ownerDocument===_&&$(_,t)?-1:e===a||e.ownerDocument===_&&$(_,e)?1:h?A(h,t)-A(h,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!r||!o)return t===a?-1:e===a?1:r?-1:o?1:h?A(h,t)-A(h,e):0;if(r===o)return ht(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?ht(s[n],l[n]):s[n]===_?-1:l[n]===_?1:0},a):d},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&p(t),e=e.replace(z,"='$1']"),!(!i.matchesSelector||!g||v&&v.test(e)||y&&y.test(e)))try{var n=m.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return ot(e,d,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==d&&p(t),$(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==d&&p(t);var r=n.attrHandle[e.toLowerCase()],o=r&&D.call(n.attrHandle,e.toLowerCase())?r(t,e,!g):void 0;return void 0!==o?o:i.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,n=[],r=0,o=0;if(c=!i.detectDuplicates,h=!i.sortStable&&t.slice(0),t.sort(w),c){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)t.splice(n[r],1)}return h=null,t},r=ot.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},n=ot.selectors={cacheLength:50,createPseudo:st,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(it,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&X.test(i)&&(e=a(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&E(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=ot.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(U," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var u,h,c,p,d,f,g=o!==a?"nextSibling":"previousSibling",y=e.parentNode,v=s&&e.nodeName.toLowerCase(),m=!l&&!s;if(y){if(o){for(;g;){for(c=e;c=c[g];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?y.firstChild:y.lastChild],a&&m){for(d=(u=(h=y[b]||(y[b]={}))[t]||[])[0]===x&&u[1],p=u[0]===x&&u[2],c=d&&y.childNodes[d];c=++d&&c&&c[g]||(p=d=0)||f.pop();)if(1===c.nodeType&&++p&&c===e){h[t]=[x,d,p];break}}else if(m&&(u=(e[b]||(e[b]={}))[t])&&u[0]===x)p=u[1];else for(;(c=++d&&c&&c[g]||(p=d=0)||f.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++p||(m&&((c[b]||(c[b]={}))[t]=[x,p]),c!==e)););return(p-=r)===n||p%n==0&&p/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,i){for(var n,o=r(t,e),a=o.length;a--;)t[n=A(t,o[a])]=!(i[n]=o[a])})):function(t){return r(t,0,i)}):r}},pseudos:{not:st((function(t){var e=[],i=[],n=s(t.replace(G,"$1"));return n[b]?st((function(t,e,i,r){for(var o,a=n(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,r,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}})),has:st((function(t){return function(e){return ot(t,e).length>0}})),contains:st((function(t){return t=t.replace(it,nt),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}})),lang:st((function(t){return Y.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(it,nt).toLowerCase(),function(e){var i;do{if(i=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt((function(){return[0]})),last:dt((function(t,e){return[e-1]})),eq:dt((function(t,e,i){return[0>i?i+e:i]})),even:dt((function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t})),odd:dt((function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t})),lt:dt((function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t})),gt:dt((function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ct(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=pt(e);function gt(){}function yt(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function vt(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=T++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,a){var s,l,u=[x,o];if(a){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,a))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if((s=(l=e[b]||(e[b]={}))[n])&&s[0]===x&&s[1]===o)return u[2]=s[2];if(l[n]=u,u[2]=t(e,i,a))return!0}}}function mt(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function $t(t,e,i,n,r){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!i||i(o,n,r))&&(a.push(o),u&&e.push(s));return a}function bt(t,e,i,n,r,o){return n&&!n[b]&&(n=bt(n)),r&&!r[b]&&(r=bt(r,o)),st((function(o,a,s,l){var u,h,c,p=[],d=[],f=a.length,g=o||function(t,e,i){for(var n=0,r=e.length;r>n;n++)ot(t,e[n],i);return i}(e||"*",s.nodeType?[s]:s,[]),y=!t||!o&&e?g:$t(g,p,t,s,l),v=i?r||(o?t:f||n)?[]:a:y;if(i&&i(y,v,s,l),n)for(u=$t(v,d),n(u,[],s,l),h=u.length;h--;)(c=u[h])&&(v[d[h]]=!(y[d[h]]=c));if(o){if(r||t){if(r){for(u=[],h=v.length;h--;)(c=v[h])&&u.push(y[h]=c);r(null,v=[],u,l)}for(h=v.length;h--;)(c=v[h])&&(u=r?A(o,c):p[h])>-1&&(o[u]=!(a[u]=c))}}else v=$t(v===a?v.splice(f,v.length):v),r?r(null,a,v,l):R.apply(a,v)}))}function _t(t){for(var e,i,r,o=t.length,a=n.relative[t[0].type],s=a||n.relative[" "],l=a?1:0,h=vt((function(t){return t===e}),s,!0),c=vt((function(t){return A(e,t)>-1}),s,!0),p=[function(t,i,n){var r=!a&&(n||i!==u)||((e=i).nodeType?h(t,i,n):c(t,i,n));return e=null,r}];o>l;l++)if(i=n.relative[t[l].type])p=[vt(mt(p),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(r=++l;o>r&&!n.relative[t[r].type];r++);return bt(l>1&&mt(p),l>1&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(G,"$1"),i,r>l&&_t(t.slice(l,r)),o>r&&_t(t=t.slice(r)),o>r&&yt(t))}p.push(i)}return mt(p)}function xt(t,e){var i=e.length>0,r=t.length>0,o=function(o,a,s,l,h){var c,p,f,g=0,y="0",v=o&&[],m=[],$=u,b=o||r&&n.find.TAG("*",h),_=x+=null==$?1:Math.random()||.1,T=b.length;for(h&&(u=a!==d&&a);y!==T&&null!=(c=b[y]);y++){if(r&&c){for(p=0;f=t[p++];)if(f(c,a,s)){l.push(c);break}h&&(x=_)}i&&((c=!f&&c)&&g--,o&&v.push(c))}if(g+=y,i&&y!==g){for(p=0;f=e[p++];)f(v,m,a,s);if(o){if(g>0)for(;y--;)v[y]||m[y]||(m[y]=I.call(l));m=$t(m)}R.apply(l,m),h&&!o&&m.length>0&&g+e.length>1&&ot.uniqueSort(l)}return h&&(x=_,u=$),v};return i?st(o):o}return gt.prototype=n.filters=n.pseudos,n.setFilters=new gt,a=ot.tokenize=function(t,e){var i,r,o,a,s,l,u,h=S[t+" "];if(h)return e?0:h.slice(0);for(s=t,l=[],u=n.preFilter;s;){for(a in(!i||(r=V.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=W.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(G," ")}),s=s.slice(i.length)),n.filter)!(r=q[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return e?s.length:s?ot.error(t):S(t,l).slice(0)},s=ot.compile=function(t,e){var i,n=[],r=[],o=C[t+" "];if(!o){for(e||(e=a(t)),i=e.length;i--;)(o=_t(e[i]))[b]?n.push(o):r.push(o);(o=C(t,xt(r,n))).selector=t}return o},l=ot.select=function(t,e,r,o){var l,u,h,c,p,d="function"==typeof t&&t,f=!o&&a(t=d.selector||t);if(r=r||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(h=u[0]).type&&i.getById&&9===e.nodeType&&g&&n.relative[u[1].type]){if(!(e=(n.find.ID(h.matches[0].replace(it,nt),e)||[])[0]))return r;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(l=q.needsContext.test(t)?0:u.length;l--&&(h=u[l],!n.relative[c=h.type]);)if((p=n.find[c])&&(o=p(h.matches[0].replace(it,nt),tt.test(u[0].type)&&ft(e.parentNode)||e))){if(u.splice(l,1),!(t=o.length&&yt(u)))return R.apply(r,o),r;break}}return(d||s(t,f))(o,e,!g,r,tt.test(t)&&ft(e.parentNode)||e),r},i.sortStable=b.split("").sort(w).join("")===b,i.detectDuplicates=!!c,p(),i.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(d.createElement("div"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ut(M,(function(t,e,i){var n;return i?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),ot}(t);d.find=$,d.expr=$.selectors,d.expr[":"]=d.expr.pseudos,d.unique=$.uniqueSort,d.text=$.getText,d.isXMLDoc=$.isXML,d.contains=$.contains;var b=d.expr.match.needsContext,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,x=/^.[^:#\[\.,]*$/;function T(t,e,i){if(d.isFunction(e))return d.grep(t,(function(t,n){return!!e.call(t,n,t)!==i}));if(e.nodeType)return d.grep(t,(function(t){return t===e!==i}));if("string"==typeof e){if(x.test(e))return d.filter(e,t,i);e=d.filter(e,t)}return d.grep(t,(function(t){return a.call(e,t)>=0!==i}))}d.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?d.find.matchesSelector(n,t)?[n]:[]:d.find.matches(t,d.grep(e,(function(t){return 1===t.nodeType})))},d.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(d(t).filter((function(){for(e=0;i>e;e++)if(d.contains(r[e],this))return!0})));for(e=0;i>e;e++)d.find(t,r[e],n);return(n=this.pushStack(i>1?d.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"==typeof t&&b.test(t)?d(t):t||[],!1).length}});var E,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=d.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:S.exec(t))||!i[1]&&e)return!e||e.jquery?(e||E).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof d?e[0]:e,d.merge(this,d.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:c,!0)),_.test(i[1])&&d.isPlainObject(e))for(i in e)d.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(n=c.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=c,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):d.isFunction(t)?void 0!==E.ready?E.ready(t):t(d):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),d.makeArray(t,this))};C.prototype=d.fn,E=d(c);var w=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function D(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}d.extend({dir:function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&d(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),d.fn.extend({has:function(t){var e=d(t,this),i=e.length;return this.filter((function(){for(var t=0;i>t;t++)if(d.contains(this,e[t]))return!0}))},closest:function(t,e){for(var i,n=0,r=this.length,o=[],a=b.test(t)||"string"!=typeof t?d(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&d.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?d.unique(o):o)},index:function(t){return t?"string"==typeof t?a.call(d(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(d.unique(d.merge(this.get(),d(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),d.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return d.dir(t,"parentNode")},parentsUntil:function(t,e,i){return d.dir(t,"parentNode",i)},next:function(t){return D(t,"nextSibling")},prev:function(t){return D(t,"previousSibling")},nextAll:function(t){return d.dir(t,"nextSibling")},prevAll:function(t){return d.dir(t,"previousSibling")},nextUntil:function(t,e,i){return d.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return d.dir(t,"previousSibling",i)},siblings:function(t){return d.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return d.sibling(t.firstChild)},contents:function(t){return t.contentDocument||d.merge([],t.childNodes)}},(function(t,e){d.fn[t]=function(i,n){var r=d.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=d.filter(n,r)),this.length>1&&(P[t]||d.unique(r),w.test(t)&&r.reverse()),this.pushStack(r)}}));var L,I=/\S+/g,O={};function R(){c.removeEventListener("DOMContentLoaded",R,!1),t.removeEventListener("load",R,!1),d.ready()}d.Callbacks=function(t){t="string"==typeof t?O[t]||function(t){var e=O[t]={};return d.each(t.match(I)||[],(function(t,i){e[i]=!0})),e}(t):d.extend({},t);var e,i,n,r,o,a,s=[],l=!t.once&&[],u=function(c){for(e=t.memory&&c,i=!0,a=r||0,r=0,o=s.length,n=!0;s&&o>a;a++)if(!1===s[a].apply(c[0],c[1])&&t.stopOnFalse){e=!1;break}n=!1,s&&(l?l.length&&u(l.shift()):e?s=[]:h.disable())},h={add:function(){if(s){var i=s.length;!function e(i){d.each(i,(function(i,n){var r=d.type(n);"function"===r?t.unique&&h.has(n)||s.push(n):n&&n.length&&"string"!==r&&e(n)}))}(arguments),n?o=s.length:e&&(r=i,u(e))}return this},remove:function(){return s&&d.each(arguments,(function(t,e){for(var i;(i=d.inArray(e,s,i))>-1;)s.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)})),this},has:function(t){return t?d.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=l=e=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,e||h.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!s||i&&!l||(e=[t,(e=e||[]).slice?e.slice():e],n?l.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},d.extend({Deferred:function(t){var e=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return d.Deferred((function(i){d.each(e,(function(e,o){var a=d.isFunction(t[e])&&t[e];r[o[1]]((function(){var t=a&&a.apply(this,arguments);t&&d.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,a?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?d.extend(t,n):n}},r={};return n.pipe=n.then,d.each(e,(function(t,o){var a=o[2],s=o[3];n[o[1]]=a.add,s&&a.add((function(){i=s}),e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=a.fireWith})),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,r,o=0,a=n.call(arguments),s=a.length,l=1!==s||t&&d.isFunction(t.promise)?s:0,u=1===l?t:d.Deferred(),h=function(t,i,r){return function(o){i[t]=this,r[t]=arguments.length>1?n.call(arguments):o,r===e?u.notifyWith(i,r):--l||u.resolveWith(i,r)}};if(s>1)for(e=new Array(s),i=new Array(s),r=new Array(s);s>o;o++)a[o]&&d.isFunction(a[o].promise)?a[o].promise().done(h(o,r,a)).fail(u.reject).progress(h(o,i,e)):--l;return l||u.resolveWith(r,a),u.promise()}}),d.fn.ready=function(t){return d.ready.promise().done(t),this},d.extend({isReady:!1,readyWait:1,holdReady:function(t){t?d.readyWait++:d.ready(!0)},ready:function(t){(!0===t?--d.readyWait:d.isReady)||(d.isReady=!0,!0!==t&&--d.readyWait>0||(L.resolveWith(c,[d]),d.fn.triggerHandler&&(d(c).triggerHandler("ready"),d(c).off("ready"))))}}),d.ready.promise=function(e){return L||(L=d.Deferred(),"complete"===c.readyState?setTimeout(d.ready):(c.addEventListener("DOMContentLoaded",R,!1),t.addEventListener("load",R,!1))),L.promise(e)},d.ready.promise();var N=d.access=function(t,e,i,n,r,o,a){var s=0,l=t.length,u=null==i;if("object"===d.type(i))for(s in r=!0,i)d.access(t,e,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,d.isFunction(n)||(a=!0),u&&(a?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(d(t),i)})),e))for(;l>s;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return r?t:u?e.call(t):l?e(t[0],i):o};function A(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=d.expando+A.uid++}d.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},A.uid=1,A.accepts=d.acceptData,A.prototype={key:function(t){if(!A.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=A.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,d.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=i;else if(d.isEmptyObject(o))d.extend(this.cache[r],e);else for(n in e)o[n]=e[n];return o},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?void 0!==(n=this.get(t,e))?n:this.get(t,d.camelCase(e)):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{d.isArray(e)?n=e.concat(e.map(d.camelCase)):(r=d.camelCase(e),e in a?n=[e,r]:n=(n=r)in a?[n]:n.match(I)||[]),i=n.length;for(;i--;)delete a[n[i]]}},hasData:function(t){return!d.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var M=new A,B=new A,k=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,F=/([A-Z])/g;function j(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(F,"-$1").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:k.test(i)?d.parseJSON(i):i)}catch(t){}B.set(t,e,i)}else i=void 0;return i}d.extend({hasData:function(t){return B.hasData(t)||M.hasData(t)},data:function(t,e,i){return B.access(t,e,i)},removeData:function(t,e){B.remove(t,e)},_data:function(t,e,i){return M.access(t,e,i)},_removeData:function(t,e){M.remove(t,e)}}),d.fn.extend({data:function(t,e){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=B.get(o),1===o.nodeType&&!M.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(0===(n=a[i].name).indexOf("data-")&&(n=d.camelCase(n.slice(5)),j(o,n,r[n])));M.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){B.set(this,t)})):N(this,(function(e){var i,n=d.camelCase(t);if(o&&void 0===e){if(void 0!==(i=B.get(o,t)))return i;if(void 0!==(i=B.get(o,n)))return i;if(void 0!==(i=j(o,n,void 0)))return i}else this.each((function(){var i=B.get(this,n);B.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&B.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){B.remove(this,t)}))}}),d.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=M.get(t,e),i&&(!n||d.isArray(i)?n=M.access(t,e,d.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=d.queue(t,e),n=i.length,r=i.shift(),o=d._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,(function(){d.dequeue(t,e)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return M.get(t,i)||M.access(t,i,{empty:d.Callbacks("once memory").add((function(){M.remove(t,[e+"queue",i])}))})}}),d.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?d.queue(this[0],t):void 0===e?this:this.each((function(){var i=d.queue(this,t,e);d._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&d.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){d.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=d.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=M.get(o[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(e)}});var H=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],G=function(t,e){return t=e||t,"none"===d.css(t,"display")||!d.contains(t.ownerDocument,t)},V=/^(?:checkbox|radio)$/i;!function(){var t=c.createDocumentFragment().appendChild(c.createElement("div")),e=c.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),h.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var W="undefined";h.focusinBubbles="onfocusin"in t;var z=/^key/,X=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,q=/^([^.]*)(?:\.(.+)|)$/;function J(){return!0}function K(){return!1}function Q(){try{return c.activeElement}catch(t){}}d.event={global:{},add:function(t,e,i,n,r){var o,a,s,l,u,h,c,p,f,g,y,v=M.get(t);if(v)for(i.handler&&(i=(o=i).handler,r=o.selector),i.guid||(i.guid=d.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof d!==W&&d.event.triggered!==e.type?d.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(I)||[""]).length;u--;)f=y=(s=q.exec(e[u])||[])[1],g=(s[2]||"").split(".").sort(),f&&(c=d.event.special[f]||{},f=(r?c.delegateType:c.bindType)||f,c=d.event.special[f]||{},h=d.extend({type:f,origType:y,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&d.expr.match.needsContext.test(r),namespace:g.join(".")},o),(p=l[f])||((p=l[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,g,a)||t.addEventListener&&t.addEventListener(f,a,!1)),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,h):p.push(h),d.event.global[f]=!0)},remove:function(t,e,i,n,r){var o,a,s,l,u,h,c,p,f,g,y,v=M.hasData(t)&&M.get(t);if(v&&(l=v.events)){for(u=(e=(e||"").match(I)||[""]).length;u--;)if(f=y=(s=q.exec(e[u])||[])[1],g=(s[2]||"").split(".").sort(),f){for(c=d.event.special[f]||{},p=l[f=(n?c.delegateType:c.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)h=p[o],!r&&y!==h.origType||i&&i.guid!==h.guid||s&&!s.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(p.splice(o,1),h.selector&&p.delegateCount--,c.remove&&c.remove.call(t,h));a&&!p.length&&(c.teardown&&!1!==c.teardown.call(t,g,v.handle)||d.removeEvent(t,f,v.handle),delete l[f])}else for(f in l)d.event.remove(t,f+e[u],i,n,!0);d.isEmptyObject(l)&&(delete v.handle,M.remove(t,"events"))}},trigger:function(e,i,n,r){var o,a,s,l,h,p,f,g=[n||c],y=u.call(e,"type")?e.type:e,v=u.call(e,"namespace")?e.namespace.split("."):[];if(a=s=n=n||c,3!==n.nodeType&&8!==n.nodeType&&!Y.test(y+d.event.triggered)&&(y.indexOf(".")>=0&&(v=y.split("."),y=v.shift(),v.sort()),h=y.indexOf(":")<0&&"on"+y,(e=e[d.expando]?e:new d.Event(y,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=v.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:d.makeArray(i,[e]),f=d.event.special[y]||{},r||!f.trigger||!1!==f.trigger.apply(n,i))){if(!r&&!f.noBubble&&!d.isWindow(n)){for(l=f.delegateType||y,Y.test(l+y)||(a=a.parentNode);a;a=a.parentNode)g.push(a),s=a;s===(n.ownerDocument||c)&&g.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=g[o++])&&!e.isPropagationStopped();)e.type=o>1?l:f.bindType||y,(p=(M.get(a,"events")||{})[e.type]&&M.get(a,"handle"))&&p.apply(a,i),(p=h&&a[h])&&p.apply&&d.acceptData(a)&&(e.result=p.apply(a,i),!1===e.result&&e.preventDefault());return e.type=y,r||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),i)||!d.acceptData(n)||h&&d.isFunction(n[y])&&!d.isWindow(n)&&((s=n[h])&&(n[h]=null),d.event.triggered=y,n[y](),d.event.triggered=void 0,s&&(n[h]=s)),e.result}},dispatch:function(t){t=d.event.fix(t);var e,i,r,o,a,s=[],l=n.call(arguments),u=(M.get(this,"events")||{})[t.type]||[],h=d.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,t)){for(s=d.event.handlers.call(this,t,u),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(a.namespace))&&(t.handleObj=a,t.data=a.data,void 0!==(r=((d.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l))&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(n=[],i=0;s>i;i++)void 0===n[r=(o=e[i]).selector+" "]&&(n[r]=o.needsContext?d(r,this).index(l)>=0:d.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&a.push({elem:l,handlers:n})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||c).documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[d.expando])return t;var e,i,n,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=X.test(r)?this.mouseHooks:z.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,t=new d.Event(o),e=n.length;e--;)t[i=n[e]]=o[i];return t.target||(t.target=c),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==Q()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===Q()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&d.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return d.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=d.extend(new d.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?d.event.trigger(r,null,e):d.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},d.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},d.Event=function(t,e){return this instanceof d.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?J:K):this.type=t,e&&d.extend(this,e),this.timeStamp=t&&t.timeStamp||d.now(),void(this[d.expando]=!0)):new d.Event(t,e)},d.Event.prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=J,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=J,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=J,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){d.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==n&&!d.contains(n,r))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}})),h.focusinBubbles||d.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){d.event.simulate(e,t.target,d.event.fix(t),!0)};d.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=M.access(n,e);r||n.addEventListener(t,i,!0),M.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=M.access(n,e)-1;r?M.access(n,e,r):(n.removeEventListener(t,i,!0),M.remove(n,e))}}})),d.fn.extend({on:function(t,e,i,n,r){var o,a;if("object"==typeof t){for(a in"string"!=typeof e&&(i=i||e,e=void 0),t)this.on(a,e,i,t[a],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=K;else if(!n)return this;return 1===r&&(o=n,n=function(t){return d().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=d.guid++)),this.each((function(){d.event.add(this,t,n,i,e)}))},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,d(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(!1===e||"function"==typeof e)&&(i=e,e=void 0),!1===i&&(i=K),this.each((function(){d.event.remove(this,t,i,e)}))},trigger:function(t,e){return this.each((function(){d.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];return i?d.event.trigger(t,e,i,!0):void 0}});var Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,tt=/<([\w:]+)/,et=/<|&#?\w+;/,it=/<(?:script|style|link)/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^$|\/(?:java|ecma)script/i,ot=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,st={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function lt(t,e){return d.nodeName(t,"table")&&d.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function ut(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function ht(t){var e=ot.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function ct(t,e){for(var i=0,n=t.length;n>i;i++)M.set(t[i],"globalEval",!e||M.get(e[i],"globalEval"))}function pt(t,e){var i,n,r,o,a,s,l,u;if(1===e.nodeType){if(M.hasData(t)&&(o=M.access(t),a=M.set(e,o),u=o.events))for(r in delete a.handle,a.events={},u)for(i=0,n=u[r].length;n>i;i++)d.event.add(e,r,u[r][i]);B.hasData(t)&&(s=B.access(t),l=d.extend({},s),B.set(e,l))}}function dt(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&d.nodeName(t,e)?d.merge([t],i):i}function ft(t,e){var i=e.nodeName.toLowerCase();"input"===i&&V.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}st.optgroup=st.option,st.tbody=st.tfoot=st.colgroup=st.caption=st.thead,st.th=st.td,d.extend({clone:function(t,e,i){var n,r,o,a,s=t.cloneNode(!0),l=d.contains(t.ownerDocument,t);if(!(h.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||d.isXMLDoc(t)))for(a=dt(s),n=0,r=(o=dt(t)).length;r>n;n++)ft(o[n],a[n]);if(e)if(i)for(o=o||dt(t),a=a||dt(s),n=0,r=o.length;r>n;n++)pt(o[n],a[n]);else pt(t,s);return(a=dt(s,"script")).length>0&&ct(a,!l&&dt(t,"script")),s},buildFragment:function(t,e,i,n){for(var r,o,a,s,l,u,h=e.createDocumentFragment(),c=[],p=0,f=t.length;f>p;p++)if((r=t[p])||0===r)if("object"===d.type(r))d.merge(c,r.nodeType?[r]:r);else if(et.test(r)){for(o=o||h.appendChild(e.createElement("div")),a=(tt.exec(r)||["",""])[1].toLowerCase(),s=st[a]||st._default,o.innerHTML=s[1]+r.replace(Z,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;d.merge(c,o.childNodes),(o=h.firstChild).textContent=""}else c.push(e.createTextNode(r));for(h.textContent="",p=0;r=c[p++];)if((!n||-1===d.inArray(r,n))&&(l=d.contains(r.ownerDocument,r),o=dt(h.appendChild(r),"script"),l&&ct(o),i))for(u=0;r=o[u++];)rt.test(r.type||"")&&i.push(r);return h},cleanData:function(t){for(var e,i,n,r,o=d.event.special,a=0;void 0!==(i=t[a]);a++){if(d.acceptData(i)&&((r=i[M.expando])&&(e=M.cache[r]))){if(e.events)for(n in e.events)o[n]?d.event.remove(i,n):d.removeEvent(i,n,e.handle);M.cache[r]&&delete M.cache[r]}delete B.cache[i[B.expando]]}}}),d.fn.extend({text:function(t){return N(this,(function(t){return void 0===t?d.text(this):this.empty().each((function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return this.domManip(arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||lt(this,t).appendChild(t)}))},prepend:function(){return this.domManip(arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=lt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return this.domManip(arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return this.domManip(arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},remove:function(t,e){for(var i,n=t?d.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||d.cleanData(dt(i)),i.parentNode&&(e&&d.contains(i.ownerDocument,i)&&ct(dt(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(d.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return d.clone(this,t,e)}))},html:function(t){return N(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!it.test(t)&&!st[(tt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Z,"<$1></$2>");try{for(;n>i;i++)1===(e=this[i]||{}).nodeType&&(d.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,(function(e){t=this.parentNode,d.cleanData(dt(this)),t&&t.replaceChild(e,this)})),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=r.apply([],t);var i,n,o,a,s,l,u=0,c=this.length,p=this,f=c-1,g=t[0],y=d.isFunction(g);if(y||c>1&&"string"==typeof g&&!h.checkClone&&nt.test(g))return this.each((function(i){var n=p.eq(i);y&&(t[0]=g.call(this,i,n.html())),n.domManip(t,e)}));if(c&&(n=(i=d.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===i.childNodes.length&&(i=n),n)){for(a=(o=d.map(dt(i,"script"),ut)).length;c>u;u++)s=i,u!==f&&(s=d.clone(s,!0,!0),a&&d.merge(o,dt(s,"script"))),e.call(this[u],s,u);if(a)for(l=o[o.length-1].ownerDocument,d.map(o,ht),u=0;a>u;u++)s=o[u],rt.test(s.type||"")&&!M.access(s,"globalEval")&&d.contains(l,s)&&(s.src?d._evalUrl&&d._evalUrl(s.src):d.globalEval(s.textContent.replace(at,"")))}return this}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){d.fn[t]=function(t){for(var i,n=[],r=d(t),a=r.length-1,s=0;a>=s;s++)i=s===a?this:this.clone(!0),d(r[s])[e](i),o.apply(n,i.get());return this.pushStack(n)}}));var gt,yt={};function vt(e,i){var n,r=d(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(r[0]))?n.display:d.css(r[0],"display");return r.detach(),o}function mt(t){var e=c,i=yt[t];return i||("none"!==(i=vt(t,e))&&i||((e=(gt=(gt||d("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),i=vt(t,e),gt.detach()),yt[t]=i),i}var $t=/^margin/,bt=new RegExp("^("+H+")(?!px)[a-z%]+$","i"),_t=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};function xt(t,e,i){var n,r,o,a,s=t.style;return(i=i||_t(t))&&(a=i.getPropertyValue(e)||i[e]),i&&(""!==a||d.contains(t.ownerDocument,t)||(a=d.style(t,e)),bt.test(a)&&$t.test(e)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Tt(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}!function(){var e,i,n=c.documentElement,r=c.createElement("div"),o=c.createElement("div");if(o.style){function a(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",n.appendChild(r);var a=t.getComputedStyle(o,null);e="1%"!==a.top,i="4px"===a.width,n.removeChild(r)}o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===o.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(o),t.getComputedStyle&&d.extend(h,{pixelPosition:function(){return a(),e},boxSizingReliable:function(){return null==i&&a(),i},reliableMarginRight:function(){var e,i=o.appendChild(c.createElement("div"));return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",n.appendChild(r),e=!parseFloat(t.getComputedStyle(i,null).marginRight),n.removeChild(r),o.removeChild(i),e}})}}(),d.swap=function(t,e,i,n){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=i.apply(t,n||[]),e)t.style[o]=a[o];return r};var Et=/^(none|table(?!-c[ea]).+)/,St=new RegExp("^("+H+")(.*)$","i"),Ct=new RegExp("^([+-])=("+H+")","i"),wt={position:"absolute",visibility:"hidden",display:"block"},Pt={letterSpacing:"0",fontWeight:"400"},Dt=["Webkit","O","Moz","ms"];function Lt(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,r=Dt.length;r--;)if((e=Dt[r]+i)in t)return e;return n}function It(t,e,i){var n=St.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function Ot(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===i&&(a+=d.css(t,i+U[o],!0,r)),n?("content"===i&&(a-=d.css(t,"padding"+U[o],!0,r)),"margin"!==i&&(a-=d.css(t,"border"+U[o]+"Width",!0,r))):(a+=d.css(t,"padding"+U[o],!0,r),"padding"!==i&&(a+=d.css(t,"border"+U[o]+"Width",!0,r)));return a}function Rt(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=_t(t),a="border-box"===d.css(t,"boxSizing",!1,o);if(0>=r||null==r){if((0>(r=xt(t,e,o))||null==r)&&(r=t.style[e]),bt.test(r))return r;n=a&&(h.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+Ot(t,e,i||(a?"border":"content"),n,o)+"px"}function Nt(t,e){for(var i,n,r,o=[],a=0,s=t.length;s>a;a++)(n=t[a]).style&&(o[a]=M.get(n,"olddisplay"),i=n.style.display,e?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&G(n)&&(o[a]=M.access(n,"olddisplay",mt(n.nodeName)))):(r=G(n),"none"===i&&r||M.set(n,"olddisplay",r?i:d.css(n,"display"))));for(a=0;s>a;a++)(n=t[a]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[a]||"":"none"));return t}function At(t,e,i,n,r){return new At.prototype.init(t,e,i,n,r)}d.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=xt(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=d.camelCase(e),l=t.style;return e=d.cssProps[s]||(d.cssProps[s]=Lt(l,s)),a=d.cssHooks[e]||d.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:l[e]:("string"===(o=typeof i)&&(r=Ct.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(d.css(t,e)),o="number"),void(null!=i&&i==i&&("number"!==o||d.cssNumber[s]||(i+="px"),h.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l[e]=i))))}},css:function(t,e,i,n){var r,o,a,s=d.camelCase(e);return e=d.cssProps[s]||(d.cssProps[s]=Lt(t.style,s)),(a=d.cssHooks[e]||d.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,i)),void 0===r&&(r=xt(t,e,n)),"normal"===r&&e in Pt&&(r=Pt[e]),""===i||i?(o=parseFloat(r),!0===i||d.isNumeric(o)?o||0:r):r}}),d.each(["height","width"],(function(t,e){d.cssHooks[e]={get:function(t,i,n){return i?Et.test(d.css(t,"display"))&&0===t.offsetWidth?d.swap(t,wt,(function(){return Rt(t,e,n)})):Rt(t,e,n):void 0},set:function(t,i,n){var r=n&&_t(t);return It(0,i,n?Ot(t,e,n,"border-box"===d.css(t,"boxSizing",!1,r),r):0)}}})),d.cssHooks.marginRight=Tt(h.reliableMarginRight,(function(t,e){return e?d.swap(t,{display:"inline-block"},xt,[t,"marginRight"]):void 0})),d.each({margin:"",padding:"",border:"Width"},(function(t,e){d.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+U[n]+e]=o[n]||o[n-2]||o[0];return r}},$t.test(t)||(d.cssHooks[t+e].set=It)})),d.fn.extend({css:function(t,e){return N(this,(function(t,e,i){var n,r,o={},a=0;if(d.isArray(e)){for(n=_t(t),r=e.length;r>a;a++)o[e[a]]=d.css(t,e[a],!1,n);return o}return void 0!==i?d.style(t,e,i):d.css(t,e)}),t,e,arguments.length>1)},show:function(){return Nt(this,!0)},hide:function(){return Nt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){G(this)?d(this).show():d(this).hide()}))}}),d.Tween=At,At.prototype={constructor:At,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(d.cssNumber[i]?"":"px")},cur:function(){var t=At.propHooks[this.prop];return t&&t.get?t.get(this):At.propHooks._default.get(this)},run:function(t){var e,i=At.propHooks[this.prop];return this.options.duration?this.pos=e=d.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):At.propHooks._default.set(this),this}},At.prototype.init.prototype=At.prototype,At.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=d.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){d.fx.step[t.prop]?d.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[d.cssProps[t.prop]]||d.cssHooks[t.prop])?d.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},At.propHooks.scrollTop=At.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},d.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},d.fx=At.prototype.init,d.fx.step={};var Mt,Bt,kt=/^(?:toggle|show|hide)$/,Ft=new RegExp("^(?:([+-])=|)("+H+")([a-z%]*)$","i"),jt=/queueHooks$/,Ht=[function(t,e,i){var n,r,o,a,s,l,u,h=this,c={},p=t.style,f=t.nodeType&&G(t),g=M.get(t,"fxshow");for(n in i.queue||(null==(s=d._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,h.always((function(){h.always((function(){s.unqueued--,d.queue(t,"fx").length||s.empty.fire()}))}))),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],u=d.css(t,"display"),"inline"===("none"===u?M.get(t,"olddisplay")||mt(t.nodeName):u)&&"none"===d.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}))),e)if(r=e[n],kt.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;f=!0}c[n]=g&&g[n]||d.style(t,n)}else u=void 0;if(d.isEmptyObject(c))"inline"===("none"===u?mt(t.nodeName):u)&&(p.display=u);else for(n in g?"hidden"in g&&(f=g.hidden):g=M.access(t,"fxshow",{}),o&&(g.hidden=!f),f?d(t).show():h.done((function(){d(t).hide()})),h.done((function(){var e;for(e in M.remove(t,"fxshow"),c)d.style(t,e,c[e])})),c)a=Wt(f?g[n]:0,n,h),n in g||(g[n]=a.start,f&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}],Ut={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=Ft.exec(e),o=r&&r[3]||(d.cssNumber[t]?"":"px"),a=(d.cssNumber[t]||"px"!==o&&+n)&&Ft.exec(d.css(i.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+n||1;do{a/=s=s||".5",d.style(i.elem,t,a+o)}while(s!==(s=i.cur()/n)&&1!==s&&--l)}return r&&(a=i.start=+a||+n||0,i.unit=o,i.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),i}]};function Gt(){return setTimeout((function(){Mt=void 0})),Mt=d.now()}function Vt(t,e){var i,n=0,r={height:t};for(e=e?1:0;4>n;n+=2-e)r["margin"+(i=U[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function Wt(t,e,i){for(var n,r=(Ut[e]||[]).concat(Ut["*"]),o=0,a=r.length;a>o;o++)if(n=r[o].call(i,e,t))return n}function zt(t,e,i){var n,r,o=0,a=Ht.length,s=d.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=Mt||Gt(),i=Math.max(0,u.startTime+u.duration-e),n=1-(i/u.duration||0),o=0,a=u.tweens.length;a>o;o++)u.tweens[o].run(n);return s.notifyWith(t,[u,n,i]),1>n&&a?i:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:d.extend({},e),opts:d.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Mt||Gt(),duration:i.duration,tweens:[],createTween:function(e,i){var n=d.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)u.tweens[i].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),h=u.props;for(function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=d.camelCase(i)],o=t[i],d.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=d.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(h,u.opts.specialEasing);a>o;o++)if(n=Ht[o].call(u,t,h,u.opts))return n;return d.map(h,Wt,u),d.isFunction(u.opts.start)&&u.opts.start.call(t,u),d.fx.timer(d.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}d.Animation=d.extend(zt,{tweener:function(t,e){d.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;r>n;n++)i=t[n],Ut[i]=Ut[i]||[],Ut[i].unshift(e)},prefilter:function(t,e){e?Ht.unshift(t):Ht.push(t)}}),d.speed=function(t,e,i){var n=t&&"object"==typeof t?d.extend({},t):{complete:i||!i&&e||d.isFunction(t)&&t,duration:t,easing:i&&e||e&&!d.isFunction(e)&&e};return n.duration=d.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in d.fx.speeds?d.fx.speeds[n.duration]:d.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){d.isFunction(n.old)&&n.old.call(this),n.queue&&d.dequeue(this,n.queue)},n},d.fn.extend({fadeTo:function(t,e,i,n){return this.filter(G).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=d.isEmptyObject(t),o=d.speed(e,i,n),a=function(){var e=zt(this,d.extend({},t),o);(r||M.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=d.timers,a=M.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&jt.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));(e||!i)&&d.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=M.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=d.timers,a=n?n.length:0;for(i.finish=!0,d.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),d.each(["toggle","show","hide"],(function(t,e){var i=d.fn[e];d.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(Vt(e,!0),t,n,r)}})),d.each({slideDown:Vt("show"),slideUp:Vt("hide"),slideToggle:Vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){d.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),d.timers=[],d.fx.tick=function(){var t,e=0,i=d.timers;for(Mt=d.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||d.fx.stop(),Mt=void 0},d.fx.timer=function(t){d.timers.push(t),t()?d.fx.start():d.timers.pop()},d.fx.interval=13,d.fx.start=function(){Bt||(Bt=setInterval(d.fx.tick,d.fx.interval))},d.fx.stop=function(){clearInterval(Bt),Bt=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(t,e){return t=d.fx&&d.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}}))},function(){var t=c.createElement("input"),e=c.createElement("select"),i=e.appendChild(c.createElement("option"));t.type="checkbox",h.checkOn=""!==t.value,h.optSelected=i.selected,e.disabled=!0,h.optDisabled=!i.disabled,(t=c.createElement("input")).value="t",t.type="radio",h.radioValue="t"===t.value}();var Xt,Yt=d.expr.attrHandle;d.fn.extend({attr:function(t,e){return N(this,d.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){d.removeAttr(this,t)}))}}),d.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===W?d.prop(t,e,i):(1===o&&d.isXMLDoc(t)||(e=e.toLowerCase(),n=d.attrHooks[e]||(d.expr.match.bool.test(e)?Xt:undefined)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:null==(r=d.find.attr(t,e))?void 0:r:null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void d.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(I);if(o&&1===t.nodeType)for(;i=o[r++];)n=d.propFix[i]||i,d.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&"radio"===e&&d.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),Xt={set:function(t,e,i){return!1===e?d.removeAttr(t,i):t.setAttribute(i,i),i}},d.each(d.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=Yt[e]||d.find.attr;Yt[e]=function(t,e,n){var r,o;return n||(o=Yt[e],Yt[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,Yt[e]=o),r}}));var qt=/^(?:input|select|textarea|button)$/i;d.fn.extend({prop:function(t,e){return N(this,d.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[d.propFix[t]||t]}))}}),d.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!d.isXMLDoc(t))&&(e=d.propFix[e]||e,r=d.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||qt.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),h.optSelected||(d.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){d.propFix[this.toLowerCase()]=this}));var Jt=/[\t\r\n\f]/g;d.fn.extend({addClass:function(t){var e,i,n,r,o,a,s="string"==typeof t&&t,l=0,u=this.length;if(d.isFunction(t))return this.each((function(e){d(this).addClass(t.call(this,e,this.className))}));if(s)for(e=(t||"").match(I)||[];u>l;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Jt," "):" ")){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=d.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(t){var e,i,n,r,o,a,s=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(d.isFunction(t))return this.each((function(e){d(this).removeClass(t.call(this,e,this.className))}));if(s)for(e=(t||"").match(I)||[];u>l;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Jt," "):"")){for(o=0;r=e[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");a=t?d.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(d.isFunction(t)?function(i){d(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,r=d(this),o=t.match(I)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(i===W||"boolean"===i)&&(this.className&&M.set(this,"__className__",this.className),this.className=this.className||!1===t?"":M.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Jt," ").indexOf(e)>=0)return!0;return!1}});var Kt=/\r/g;d.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=d.isFunction(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,d(this).val()):t)?r="":"number"==typeof r?r+="":d.isArray(r)&&(r=d.map(r,(function(t){return null==t?"":t+""}))),(e=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=d.valHooks[r.type]||d.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Kt,""):null==i?"":i:void 0}}),d.extend({valHooks:{option:{get:function(t){var e=d.find.attr(t,"value");return null!=e?e:d.trim(d.text(t))}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:n.length,l=0>r?s:o?r:0;s>l;l++)if(!(!(i=n[l]).selected&&l!==r||(h.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&d.nodeName(i.parentNode,"optgroup"))){if(e=d(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=d.makeArray(e),a=r.length;a--;)((n=r[a]).selected=d.inArray(n.value,o)>=0)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),d.each(["radio","checkbox"],(function(){d.valHooks[this]={set:function(t,e){return d.isArray(e)?t.checked=d.inArray(d(t).val(),e)>=0:void 0}},h.checkOn||(d.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){d.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}})),d.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Qt=d.now(),Zt=/\?/;d.parseJSON=function(t){return JSON.parse(t+"")},d.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+t),e};var te=/#.*$/,ee=/([?&])_=[^&]*/,ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,ne=/^(?:GET|HEAD)$/,re=/^\/\//,oe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ae={},se={},le="*/".concat("*"),ue=t.location.href,he=oe.exec(ue.toLowerCase())||[];function ce(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(I)||[];if(d.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function pe(t,e,i,n){var r={},o=t===se;function a(s){var l;return r[s]=!0,d.each(t[s]||[],(function(t,s){var u=s(e,i,n);return"string"!=typeof u||o||r[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)})),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function de(t,e){var i,n,r=d.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&d.extend(!0,t,n),t}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ue,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(he[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":le,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?de(de(t,d.ajaxSettings),e):de(d.ajaxSettings,t)},ajaxPrefilter:ce(ae),ajaxTransport:ce(se),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n,r,o,a,s,l,u,h=d.ajaxSetup({},e),c=h.context||h,p=h.context&&(c.nodeType||c.jquery)?d(c):d.event,f=d.Deferred(),g=d.Callbacks("once memory"),y=h.statusCode||{},v={},m={},$=0,b="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===$){if(!o)for(o={};e=ie.exec(r);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===$?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return $||(t=m[i]=m[i]||t,v[t]=e),this},overrideMimeType:function(t){return $||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>$)for(e in t)y[e]=[y[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||b;return i&&i.abort(e),x(0,e),this}};if(f.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,h.url=((t||h.url||ue)+"").replace(te,"").replace(re,he[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=d.trim(h.dataType||"*").toLowerCase().match(I)||[""],null==h.crossDomain&&(s=oe.exec(h.url.toLowerCase()),h.crossDomain=!(!s||s[1]===he[1]&&s[2]===he[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(he[3]||("http:"===he[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=d.param(h.data,h.traditional)),pe(ae,h,e,_),2===$)return _;for(u in(l=d.event&&h.global)&&0==d.active++&&d.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ne.test(h.type),n=h.url,h.hasContent||(h.data&&(n=h.url+=(Zt.test(n)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ee.test(n)?n.replace(ee,"$1_="+Qt++):n+(Zt.test(n)?"&":"?")+"_="+Qt++)),h.ifModified&&(d.lastModified[n]&&_.setRequestHeader("If-Modified-Since",d.lastModified[n]),d.etag[n]&&_.setRequestHeader("If-None-Match",d.etag[n])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+le+"; q=0.01":""):h.accepts["*"]),h.headers)_.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(c,_,h)||2===$))return _.abort();for(u in b="abort",{success:1,error:1,complete:1})_[u](h[u]);if(i=pe(se,h,e,_)){_.readyState=1,l&&p.trigger("ajaxSend",[_,h]),h.async&&h.timeout>0&&(a=setTimeout((function(){_.abort("timeout")}),h.timeout));try{$=1,i.send(v,x)}catch(t){if(!(2>$))throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,o,s){var u,v,m,b,x,T=e;2!==$&&($=2,a&&clearTimeout(a),i=void 0,r=s||"",_.readyState=t>0?4:0,u=t>=200&&300>t||304===t,o&&(b=function(t,e,i){for(var n,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}(h,_,o)),b=function(t,e,i,n){var r,o,a,s,l,u={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],h.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(h,b,_,u),u?(h.ifModified&&((x=_.getResponseHeader("Last-Modified"))&&(d.lastModified[n]=x),(x=_.getResponseHeader("etag"))&&(d.etag[n]=x)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=b.state,v=b.data,u=!(m=b.error))):(m=T,(t||!T)&&(T="error",0>t&&(t=0))),_.status=t,_.statusText=(e||T)+"",u?f.resolveWith(c,[v,T,_]):f.rejectWith(c,[_,T,m]),_.statusCode(y),y=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[_,h,u?v:m]),g.fireWith(c,[_,T]),l&&(p.trigger("ajaxComplete",[_,h]),--d.active||d.event.trigger("ajaxStop")))}return _},getJSON:function(t,e,i){return d.get(t,e,i,"json")},getScript:function(t,e){return d.get(t,void 0,e,"script")}}),d.each(["get","post"],(function(t,e){d[e]=function(t,i,n,r){return d.isFunction(i)&&(r=r||n,n=i,i=void 0),d.ajax({url:t,type:e,dataType:r,data:i,success:n})}})),d._evalUrl=function(t){return d.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},d.fn.extend({wrapAll:function(t){var e;return d.isFunction(t)?this.each((function(e){d(this).wrapAll(t.call(this,e))})):(this[0]&&(e=d(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this)},wrapInner:function(t){return this.each(d.isFunction(t)?function(e){d(this).wrapInner(t.call(this,e))}:function(){var e=d(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=d.isFunction(t);return this.each((function(i){d(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(){return this.parent().each((function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)})).end()}}),d.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},d.expr.filters.visible=function(t){return!d.expr.filters.hidden(t)};var fe=/%20/g,ge=/\[\]$/,ye=/\r?\n/g,ve=/^(?:submit|button|image|reset|file)$/i,me=/^(?:input|select|textarea|keygen)/i;function $e(t,e,i,n){var r;if(d.isArray(e))d.each(e,(function(e,r){i||ge.test(t)?n(t,r):$e(t+"["+("object"==typeof r?e:"")+"]",r,i,n)}));else if(i||"object"!==d.type(e))n(t,e);else for(r in e)$e(t+"["+r+"]",e[r],i,n)}d.param=function(t,e){var i,n=[],r=function(t,e){e=d.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=d.ajaxSettings&&d.ajaxSettings.traditional),d.isArray(t)||t.jquery&&!d.isPlainObject(t))d.each(t,(function(){r(this.name,this.value)}));else for(i in t)$e(i,t[i],e,r);return n.join("&").replace(fe,"+")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=d.prop(this,"elements");return t?d.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!d(this).is(":disabled")&&me.test(this.nodeName)&&!ve.test(t)&&(this.checked||!V.test(t))})).map((function(t,e){var i=d(this).val();return null==i?null:d.isArray(i)?d.map(i,(function(t){return{name:e.name,value:t.replace(ye,"\r\n")}})):{name:e.name,value:i.replace(ye,"\r\n")}})).get()}}),d.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var be=0,_e={},xe={0:200,1223:204},Te=d.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",(function(){for(var t in _e)_e[t]()})),h.cors=!!Te&&"withCredentials"in Te,h.ajax=Te=!!Te,d.ajaxTransport((function(t){var e;return h.cors||Te&&!t.crossDomain?{send:function(i,n){var r,o=t.xhr(),a=++be;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];for(r in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)o.setRequestHeader(r,i[r]);e=function(t){return function(){e&&(delete _e[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?n(o.status,o.statusText):n(xe[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=_e[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0})),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return d.globalEval(t),t}}}),d.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),d.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain)return{send:function(n,r){e=d("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),c.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Ee=[],Se=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ee.pop()||d.expando+"_"+Qt++;return this[t]=!0,t}}),d.ajaxPrefilter("json jsonp",(function(e,i,n){var r,o,a,s=!1!==e.jsonp&&(Se.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Se.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=d.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Se,"$1"+r):!1!==e.jsonp&&(e.url+=(Zt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||d.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},n.always((function(){t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Ee.push(r)),a&&d.isFunction(o)&&o(a[0]),a=o=void 0})),"script"):void 0})),d.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||c;var n=_.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=d.buildFragment([t],e,r),r&&r.length&&d(r).remove(),d.merge([],n.childNodes))};var Ce=d.fn.load;d.fn.load=function(t,e,i){if("string"!=typeof t&&Ce)return Ce.apply(this,arguments);var n,r,o,a=this,s=t.indexOf(" ");return s>=0&&(n=d.trim(t.slice(s)),t=t.slice(0,s)),d.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&d.ajax({url:t,type:r,dataType:"html",data:e}).done((function(t){o=arguments,a.html(n?d("<div>").append(d.parseHTML(t)).find(n):t)})).complete(i&&function(t,e){a.each(i,o||[t.responseText,e,t])}),this},d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){d.fn[e]=function(t){return this.on(e,t)}})),d.expr.filters.animated=function(t){return d.grep(d.timers,(function(e){return t===e.elem})).length};var we=t.document.documentElement;function Pe(t){return d.isWindow(t)?t:9===t.nodeType&&t.defaultView}d.offset={setOffset:function(t,e,i){var n,r,o,a,s,l,u=d.css(t,"position"),h=d(t),c={};"static"===u&&(t.style.position="relative"),s=h.offset(),o=d.css(t,"top"),l=d.css(t,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(n=h.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),d.isFunction(e)&&(e=e.call(t,i,s)),null!=e.top&&(c.top=e.top-s.top+a),null!=e.left&&(c.left=e.left-s.left+r),"using"in e?e.using.call(t,c):h.css(c)}},d.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){d.offset.setOffset(this,t,e)}));var e,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;return o?(e=o.documentElement,d.contains(e,n)?(typeof n.getBoundingClientRect!==W&&(r=n.getBoundingClientRect()),i=Pe(o),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===d.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),d.nodeName(t[0],"html")||(n=t.offset()),n.top+=d.css(t[0],"borderTopWidth",!0),n.left+=d.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-d.css(i,"marginTop",!0),left:e.left-n.left-d.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||we;t&&!d.nodeName(t,"html")&&"static"===d.css(t,"position");)t=t.offsetParent;return t||we}))}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,i){var n="pageYOffset"===i;d.fn[e]=function(r){return N(this,(function(e,r,o){var a=Pe(e);return void 0===o?a?a[i]:e[r]:void(a?a.scrollTo(n?t.pageXOffset:o,n?o:t.pageYOffset):e[r]=o)}),e,r,arguments.length,null)}})),d.each(["top","left"],(function(t,e){d.cssHooks[e]=Tt(h.pixelPosition,(function(t,i){return i?(i=xt(t,e),bt.test(i)?d(t).position()[e]+"px":i):void 0}))})),d.each({Height:"height",Width:"width"},(function(t,e){d.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){d.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),a=i||(!0===n||!0===r?"margin":"border");return N(this,(function(e,i,n){var r;return d.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?d.css(e,i,a):d.style(e,i,n,a)}),e,o?n:void 0,o,null)}}))})),d.fn.size=function(){return this.length},d.fn.andSelf=d.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return d}));var De=t.jQuery,Le=t.$;return d.noConflict=function(e){return t.$===d&&(t.$=Le),e&&t.jQuery===d&&(t.jQuery=De),d},typeof e===W&&(t.jQuery=t.$=d),d}));